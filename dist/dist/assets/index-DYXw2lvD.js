function nC(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pg(i){const e=Object.create(null);for(const t of i.split(","))e[t]=1;return t=>t in e}const It={},za=[],Rs=()=>{},sC=()=>!1,zd=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),kg=i=>i.startsWith("onUpdate:"),Bi=Object.assign,Ig=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},rC=Object.prototype.hasOwnProperty,Tt=(i,e)=>rC.call(i,e),Ze=Array.isArray,Ha=i=>yc(i)==="[object Map]",bl=i=>yc(i)==="[object Set]",r0=i=>yc(i)==="[object Date]",st=i=>typeof i=="function",ci=i=>typeof i=="string",Ns=i=>typeof i=="symbol",Bt=i=>i!==null&&typeof i=="object",TT=i=>(Bt(i)||st(i))&&st(i.then)&&st(i.catch),xT=Object.prototype.toString,yc=i=>xT.call(i),oC=i=>yc(i).slice(8,-1),ST=i=>yc(i)==="[object Object]",Lg=i=>ci(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Ru=Pg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hd=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},aC=/-(\w)/g,$n=Hd(i=>i.replace(aC,(e,t)=>t?t.toUpperCase():"")),lC=/\B([A-Z])/g,na=Hd(i=>i.replace(lC,"-$1").toLowerCase()),$d=Hd(i=>i.charAt(0).toUpperCase()+i.slice(1)),lp=Hd(i=>i?`on${$d(i)}`:""),Wr=(i,e)=>!Object.is(i,e),zh=(i,...e)=>{for(let t=0;t<i.length;t++)i[t](...e)},wT=(i,e,t,n=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:n,value:t})},td=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let o0;const Vd=()=>o0||(o0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Og(i){if(Ze(i)){const e={};for(let t=0;t<i.length;t++){const n=i[t],s=ci(n)?dC(n):Og(n);if(s)for(const r in s)e[r]=s[r]}return e}else if(ci(i)||Bt(i))return i}const uC=/;(?![^(]*\))/g,cC=/:([^]+)/,hC=/\/\*[^]*?\*\//g;function dC(i){const e={};return i.replace(hC,"").split(uC).forEach(t=>{if(t){const n=t.split(cC);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Mg(i){let e="";if(ci(i))e=i;else if(Ze(i))for(let t=0;t<i.length;t++){const n=Mg(i[t]);n&&(e+=n+" ")}else if(Bt(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}const fC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pC=Pg(fC);function CT(i){return!!i||i===""}function mC(i,e){if(i.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<i.length;n++)t=vc(i[n],e[n]);return t}function vc(i,e){if(i===e)return!0;let t=r0(i),n=r0(e);if(t||n)return t&&n?i.getTime()===e.getTime():!1;if(t=Ns(i),n=Ns(e),t||n)return i===e;if(t=Ze(i),n=Ze(e),t||n)return t&&n?mC(i,e):!1;if(t=Bt(i),n=Bt(e),t||n){if(!t||!n)return!1;const s=Object.keys(i).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in i){const l=i.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!vc(i[o],e[o]))return!1}}return String(i)===String(e)}function Rg(i,e){return i.findIndex(t=>vc(t,e))}const ET=i=>!!(i&&i.__v_isRef===!0),zr=i=>ci(i)?i:i==null?"":Ze(i)||Bt(i)&&(i.toString===xT||!st(i.toString))?ET(i)?zr(i.value):JSON.stringify(i,AT,2):String(i),AT=(i,e)=>ET(e)?AT(i,e.value):Ha(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,s],r)=>(t[up(n,r)+" =>"]=s,t),{})}:bl(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>up(t))}:Ns(e)?up(e):Bt(e)&&!Ze(e)&&!ST(e)?String(e):e,up=(i,e="")=>{var t;return Ns(i)?`Symbol(${(t=i.description)!=null?t:e})`:i};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class gC{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cn,!e&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Cn;try{return Cn=this,e()}finally{Cn=t}}}on(){Cn=this}off(){Cn=this.parent}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function _C(){return Cn}let Mt;const cp=new WeakSet;class DT{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cn&&Cn.active&&Cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cp.has(this)&&(cp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,a0(this),IT(this);const e=Mt,t=os;Mt=this,os=!0;try{return this.fn()}finally{LT(this),Mt=e,os=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fg(e);this.deps=this.depsTail=void 0,a0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Im(this)&&this.run()}get dirty(){return Im(this)}}let PT=0,Nu,Bu;function kT(i,e=!1){if(i.flags|=8,e){i.next=Bu,Bu=i;return}i.next=Nu,Nu=i}function Ng(){PT++}function Bg(){if(--PT>0)return;if(Bu){let e=Bu;for(Bu=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let i;for(;Nu;){let e=Nu;for(Nu=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){i||(i=n)}e=t}}if(i)throw i}function IT(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function LT(i){let e,t=i.depsTail,n=t;for(;n;){const s=n.prevDep;n.version===-1?(n===t&&(t=s),Fg(n),yC(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}i.deps=e,i.depsTail=t}function Im(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(OT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function OT(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===Ju))return;i.globalVersion=Ju;const e=i.dep;if(i.flags|=2,e.version>0&&!i.isSSR&&i.deps&&!Im(i)){i.flags&=-3;return}const t=Mt,n=os;Mt=i,os=!0;try{IT(i);const s=i.fn(i._value);(e.version===0||Wr(s,i._value))&&(i._value=s,e.version++)}catch(s){throw e.version++,s}finally{Mt=t,os=n,LT(i),i.flags&=-3}}function Fg(i,e=!1){const{dep:t,prevSub:n,nextSub:s}=i;if(n&&(n.nextSub=s,i.prevSub=void 0),s&&(s.prevSub=n,i.nextSub=void 0),t.subs===i&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Fg(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function yC(i){const{prevDep:e,nextDep:t}=i;e&&(e.nextDep=t,i.prevDep=void 0),t&&(t.prevDep=e,i.nextDep=void 0)}let os=!0;const MT=[];function Qr(){MT.push(os),os=!1}function Jr(){const i=MT.pop();os=i===void 0?!0:i}function a0(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const t=Mt;Mt=void 0;try{e()}finally{Mt=t}}}let Ju=0;class vC{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ug{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Mt||!os||Mt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Mt)t=this.activeLink=new vC(Mt,this),Mt.deps?(t.prevDep=Mt.depsTail,Mt.depsTail.nextDep=t,Mt.depsTail=t):Mt.deps=Mt.depsTail=t,RT(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Mt.depsTail,t.nextDep=void 0,Mt.depsTail.nextDep=t,Mt.depsTail=t,Mt.deps===t&&(Mt.deps=n)}return t}trigger(e){this.version++,Ju++,this.notify(e)}notify(e){Ng();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Bg()}}}function RT(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)RT(n)}const t=i.dep.subs;t!==i&&(i.prevSub=t,t&&(t.nextSub=i)),i.dep.subs=i}}const Lm=new WeakMap,Ho=Symbol(""),Om=Symbol(""),ec=Symbol("");function Ai(i,e,t){if(os&&Mt){let n=Lm.get(i);n||Lm.set(i,n=new Map);let s=n.get(t);s||(n.set(t,s=new Ug),s.map=n,s.key=t),s.track()}}function or(i,e,t,n,s,r){const o=Lm.get(i);if(!o){Ju++;return}const l=u=>{u&&u.trigger()};if(Ng(),e==="clear")o.forEach(l);else{const u=Ze(i),h=u&&Lg(t);if(u&&t==="length"){const d=Number(n);o.forEach((m,b)=>{(b==="length"||b===ec||!Ns(b)&&b>=d)&&l(m)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),h&&l(o.get(ec)),e){case"add":u?h&&l(o.get("length")):(l(o.get(Ho)),Ha(i)&&l(o.get(Om)));break;case"delete":u||(l(o.get(Ho)),Ha(i)&&l(o.get(Om)));break;case"set":Ha(i)&&l(o.get(Ho));break}}Bg()}function Pa(i){const e=mt(i);return e===i?e:(Ai(e,"iterate",ec),jn(i)?e:e.map(Di))}function qd(i){return Ai(i=mt(i),"iterate",ec),i}const bC={__proto__:null,[Symbol.iterator](){return hp(this,Symbol.iterator,Di)},concat(...i){return Pa(this).concat(...i.map(e=>Ze(e)?Pa(e):e))},entries(){return hp(this,"entries",i=>(i[1]=Di(i[1]),i))},every(i,e){return Qs(this,"every",i,e,void 0,arguments)},filter(i,e){return Qs(this,"filter",i,e,t=>t.map(Di),arguments)},find(i,e){return Qs(this,"find",i,e,Di,arguments)},findIndex(i,e){return Qs(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return Qs(this,"findLast",i,e,Di,arguments)},findLastIndex(i,e){return Qs(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return Qs(this,"forEach",i,e,void 0,arguments)},includes(...i){return dp(this,"includes",i)},indexOf(...i){return dp(this,"indexOf",i)},join(i){return Pa(this).join(i)},lastIndexOf(...i){return dp(this,"lastIndexOf",i)},map(i,e){return Qs(this,"map",i,e,void 0,arguments)},pop(){return hu(this,"pop")},push(...i){return hu(this,"push",i)},reduce(i,...e){return l0(this,"reduce",i,e)},reduceRight(i,...e){return l0(this,"reduceRight",i,e)},shift(){return hu(this,"shift")},some(i,e){return Qs(this,"some",i,e,void 0,arguments)},splice(...i){return hu(this,"splice",i)},toReversed(){return Pa(this).toReversed()},toSorted(i){return Pa(this).toSorted(i)},toSpliced(...i){return Pa(this).toSpliced(...i)},unshift(...i){return hu(this,"unshift",i)},values(){return hp(this,"values",Di)}};function hp(i,e,t){const n=qd(i),s=n[e]();return n!==i&&!jn(i)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=t(r.value)),r}),s}const TC=Array.prototype;function Qs(i,e,t,n,s,r){const o=qd(i),l=o!==i&&!jn(i),u=o[e];if(u!==TC[e]){const m=u.apply(i,r);return l?Di(m):m}let h=t;o!==i&&(l?h=function(m,b){return t.call(this,Di(m),b,i)}:t.length>2&&(h=function(m,b){return t.call(this,m,b,i)}));const d=u.call(o,h,n);return l&&s?s(d):d}function l0(i,e,t,n){const s=qd(i);let r=t;return s!==i&&(jn(i)?t.length>3&&(r=function(o,l,u){return t.call(this,o,l,u,i)}):r=function(o,l,u){return t.call(this,o,Di(l),u,i)}),s[e](r,...n)}function dp(i,e,t){const n=mt(i);Ai(n,"iterate",ec);const s=n[e](...t);return(s===-1||s===!1)&&Tc(t[0])?(t[0]=mt(t[0]),n[e](...t)):s}function hu(i,e,t=[]){Qr(),Ng();const n=mt(i)[e].apply(i,t);return Bg(),Jr(),n}const xC=Pg("__proto__,__v_isRef,__isVue"),NT=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Ns));function SC(i){Ns(i)||(i=String(i));const e=mt(this);return Ai(e,"has",i),e.hasOwnProperty(i)}class BT{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(s?r?OC:zT:r?jT:UT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Ze(e);if(!s){let u;if(o&&(u=bC[t]))return u;if(t==="hasOwnProperty")return SC}const l=Reflect.get(e,t,Oi(e)?e:n);return(Ns(t)?NT.has(t):xC(t))||(s||Ai(e,"get",t),r)?l:Oi(l)?o&&Lg(t)?l:l.value:Bt(l)?s?$T(l):bc(l):l}}class FT extends BT{constructor(e=!1){super(!1,e)}set(e,t,n,s){let r=e[t];if(!this._isShallow){const u=Yo(r);if(!jn(n)&&!Yo(n)&&(r=mt(r),n=mt(n)),!Ze(e)&&Oi(r)&&!Oi(n))return u?!1:(r.value=n,!0)}const o=Ze(e)&&Lg(t)?Number(t)<e.length:Tt(e,t),l=Reflect.set(e,t,n,Oi(e)?e:s);return e===mt(s)&&(o?Wr(n,r)&&or(e,"set",t,n):or(e,"add",t,n)),l}deleteProperty(e,t){const n=Tt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&or(e,"delete",t,void 0),s}has(e,t){const n=Reflect.has(e,t);return(!Ns(t)||!NT.has(t))&&Ai(e,"has",t),n}ownKeys(e){return Ai(e,"iterate",Ze(e)?"length":Ho),Reflect.ownKeys(e)}}class wC extends BT{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const CC=new FT,EC=new wC,AC=new FT(!0);const Mm=i=>i,gh=i=>Reflect.getPrototypeOf(i);function DC(i,e,t){return function(...n){const s=this.__v_raw,r=mt(s),o=Ha(r),l=i==="entries"||i===Symbol.iterator&&o,u=i==="keys"&&o,h=s[i](...n),d=t?Mm:e?Rm:Di;return!e&&Ai(r,"iterate",u?Om:Ho),{next(){const{value:m,done:b}=h.next();return b?{value:m,done:b}:{value:l?[d(m[0]),d(m[1])]:d(m),done:b}},[Symbol.iterator](){return this}}}}function _h(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function PC(i,e){const t={get(s){const r=this.__v_raw,o=mt(r),l=mt(s);i||(Wr(s,l)&&Ai(o,"get",s),Ai(o,"get",l));const{has:u}=gh(o),h=e?Mm:i?Rm:Di;if(u.call(o,s))return h(r.get(s));if(u.call(o,l))return h(r.get(l));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!i&&Ai(mt(s),"iterate",Ho),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=mt(r),l=mt(s);return i||(Wr(s,l)&&Ai(o,"has",s),Ai(o,"has",l)),s===l?r.has(s):r.has(s)||r.has(l)},forEach(s,r){const o=this,l=o.__v_raw,u=mt(l),h=e?Mm:i?Rm:Di;return!i&&Ai(u,"iterate",Ho),l.forEach((d,m)=>s.call(r,h(d),h(m),o))}};return Bi(t,i?{add:_h("add"),set:_h("set"),delete:_h("delete"),clear:_h("clear")}:{add(s){!e&&!jn(s)&&!Yo(s)&&(s=mt(s));const r=mt(this);return gh(r).has.call(r,s)||(r.add(s),or(r,"add",s,s)),this},set(s,r){!e&&!jn(r)&&!Yo(r)&&(r=mt(r));const o=mt(this),{has:l,get:u}=gh(o);let h=l.call(o,s);h||(s=mt(s),h=l.call(o,s));const d=u.call(o,s);return o.set(s,r),h?Wr(r,d)&&or(o,"set",s,r):or(o,"add",s,r),this},delete(s){const r=mt(this),{has:o,get:l}=gh(r);let u=o.call(r,s);u||(s=mt(s),u=o.call(r,s)),l&&l.call(r,s);const h=r.delete(s);return u&&or(r,"delete",s,void 0),h},clear(){const s=mt(this),r=s.size!==0,o=s.clear();return r&&or(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=DC(s,i,e)}),t}function jg(i,e){const t=PC(i,e);return(n,s,r)=>s==="__v_isReactive"?!i:s==="__v_isReadonly"?i:s==="__v_raw"?n:Reflect.get(Tt(t,s)&&s in n?t:n,s,r)}const kC={get:jg(!1,!1)},IC={get:jg(!1,!0)},LC={get:jg(!0,!1)};const UT=new WeakMap,jT=new WeakMap,zT=new WeakMap,OC=new WeakMap;function MC(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RC(i){return i.__v_skip||!Object.isExtensible(i)?0:MC(oC(i))}function bc(i){return Yo(i)?i:zg(i,!1,CC,kC,UT)}function HT(i){return zg(i,!1,AC,IC,jT)}function $T(i){return zg(i,!0,EC,LC,zT)}function zg(i,e,t,n,s){if(!Bt(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const r=s.get(i);if(r)return r;const o=RC(i);if(o===0)return i;const l=new Proxy(i,o===2?n:t);return s.set(i,l),l}function $a(i){return Yo(i)?$a(i.__v_raw):!!(i&&i.__v_isReactive)}function Yo(i){return!!(i&&i.__v_isReadonly)}function jn(i){return!!(i&&i.__v_isShallow)}function Tc(i){return i?!!i.__v_raw:!1}function mt(i){const e=i&&i.__v_raw;return e?mt(e):i}function zs(i){return!Tt(i,"__v_skip")&&Object.isExtensible(i)&&wT(i,"__v_skip",!0),i}const Di=i=>Bt(i)?bc(i):i,Rm=i=>Bt(i)?$T(i):i;function Oi(i){return i?i.__v_isRef===!0:!1}function li(i){return VT(i,!1)}function Hg(i){return VT(i,!0)}function VT(i,e){return Oi(i)?i:new NC(i,e)}class NC{constructor(e,t){this.dep=new Ug,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:mt(e),this._value=t?e:Di(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||jn(e)||Yo(e);e=n?e:mt(e),Wr(e,t)&&(this._rawValue=e,this._value=n?e:Di(e),this.dep.trigger())}}function Va(i){return Oi(i)?i.value:i}const BC={get:(i,e,t)=>e==="__v_raw"?i:Va(Reflect.get(i,e,t)),set:(i,e,t,n)=>{const s=i[e];return Oi(s)&&!Oi(t)?(s.value=t,!0):Reflect.set(i,e,t,n)}};function qT(i){return $a(i)?i:new Proxy(i,BC)}class FC{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ug(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ju-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Mt!==this)return kT(this,!0),!0}get value(){const e=this.dep.track();return OT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function UC(i,e,t=!1){let n,s;return st(i)?n=i:(n=i.get,s=i.set),new FC(n,s,t)}const yh={},id=new WeakMap;let Oo;function jC(i,e=!1,t=Oo){if(t){let n=id.get(t);n||id.set(t,n=[]),n.push(i)}}function zC(i,e,t=It){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:l,call:u}=t,h=F=>s?F:jn(F)||s===!1||s===0?ar(F,1):ar(F);let d,m,b,T,C=!1,x=!1;if(Oi(i)?(m=()=>i.value,C=jn(i)):$a(i)?(m=()=>h(i),C=!0):Ze(i)?(x=!0,C=i.some(F=>$a(F)||jn(F)),m=()=>i.map(F=>{if(Oi(F))return F.value;if($a(F))return h(F);if(st(F))return u?u(F,2):F()})):st(i)?e?m=u?()=>u(i,2):i:m=()=>{if(b){Qr();try{b()}finally{Jr()}}const F=Oo;Oo=d;try{return u?u(i,3,[T]):i(T)}finally{Oo=F}}:m=Rs,e&&s){const F=m,j=s===!0?1/0:s;m=()=>ar(F(),j)}const A=_C(),P=()=>{d.stop(),A&&A.active&&Ig(A.effects,d)};if(r&&e){const F=e;e=(...j)=>{F(...j),P()}}let k=x?new Array(i.length).fill(yh):yh;const I=F=>{if(!(!(d.flags&1)||!d.dirty&&!F))if(e){const j=d.run();if(s||C||(x?j.some((V,U)=>Wr(V,k[U])):Wr(j,k))){b&&b();const V=Oo;Oo=d;try{const U=[j,k===yh?void 0:x&&k[0]===yh?[]:k,T];u?u(e,3,U):e(...U),k=j}finally{Oo=V}}}else d.run()};return l&&l(I),d=new DT(m),d.scheduler=o?()=>o(I,!1):I,T=F=>jC(F,!1,d),b=d.onStop=()=>{const F=id.get(d);if(F){if(u)u(F,4);else for(const j of F)j();id.delete(d)}},e?n?I(!0):k=d.run():o?o(I.bind(null,!0),!0):d.run(),P.pause=d.pause.bind(d),P.resume=d.resume.bind(d),P.stop=P,P}function ar(i,e=1/0,t){if(e<=0||!Bt(i)||i.__v_skip||(t=t||new Set,t.has(i)))return i;if(t.add(i),e--,Oi(i))ar(i.value,e,t);else if(Ze(i))for(let n=0;n<i.length;n++)ar(i[n],e,t);else if(bl(i)||Ha(i))i.forEach(n=>{ar(n,e,t)});else if(ST(i)){for(const n in i)ar(i[n],e,t);for(const n of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,n)&&ar(i[n],e,t)}return i}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xc(i,e,t,n){try{return n?i(...n):i()}catch(s){Wd(s,e,t)}}function Bs(i,e,t,n){if(st(i)){const s=xc(i,e,t,n);return s&&TT(s)&&s.catch(r=>{Wd(r,e,t)}),s}if(Ze(i)){const s=[];for(let r=0;r<i.length;r++)s.push(Bs(i[r],e,t,n));return s}}function Wd(i,e,t,n=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||It;if(e){let l=e.parent;const u=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](i,u,h)===!1)return}l=l.parent}if(r){Qr(),xc(r,null,10,[i,u,h]),Jr();return}}HC(i,t,s,n,o)}function HC(i,e,t,n=!0,s=!1){if(s)throw i;console.error(i)}const Vi=[];let Es=-1;const qa=[];let Mr=null,Na=0;const WT=Promise.resolve();let nd=null;function Ki(i){const e=nd||WT;return i?e.then(this?i.bind(this):i):e}function $C(i){let e=Es+1,t=Vi.length;for(;e<t;){const n=e+t>>>1,s=Vi[n],r=tc(s);r<i||r===i&&s.flags&2?e=n+1:t=n}return e}function $g(i){if(!(i.flags&1)){const e=tc(i),t=Vi[Vi.length-1];!t||!(i.flags&2)&&e>=tc(t)?Vi.push(i):Vi.splice($C(e),0,i),i.flags|=1,GT()}}function GT(){nd||(nd=WT.then(KT))}function VC(i){Ze(i)?qa.push(...i):Mr&&i.id===-1?Mr.splice(Na+1,0,i):i.flags&1||(qa.push(i),i.flags|=1),GT()}function u0(i,e,t=Es+1){for(;t<Vi.length;t++){const n=Vi[t];if(n&&n.flags&2){if(i&&n.id!==i.uid)continue;Vi.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function XT(i){if(qa.length){const e=[...new Set(qa)].sort((t,n)=>tc(t)-tc(n));if(qa.length=0,Mr){Mr.push(...e);return}for(Mr=e,Na=0;Na<Mr.length;Na++){const t=Mr[Na];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Mr=null,Na=0}}const tc=i=>i.id==null?i.flags&2?-1:1/0:i.id;function KT(i){try{for(Es=0;Es<Vi.length;Es++){const e=Vi[Es];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Es<Vi.length;Es++){const e=Vi[Es];e&&(e.flags&=-2)}Es=-1,Vi.length=0,XT(),nd=null,(Vi.length||qa.length)&&KT()}}let En=null,ZT=null;function sd(i){const e=En;return En=i,ZT=i&&i.type.__scopeId||null,e}function Ci(i,e=En,t){if(!e||i._n)return i;const n=(...s)=>{n._d&&v0(-1);const r=sd(e);let o;try{o=i(...s)}finally{sd(r),n._d&&v0(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Hr(i,e){if(En===null)return i;const t=Yd(En),n=i.dirs||(i.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,l,u=It]=e[s];r&&(st(r)&&(r={mounted:r,updated:r}),r.deep&&ar(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:u}))}return i}function Co(i,e,t,n){const s=i.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let u=l.dir[n];u&&(Qr(),Bs(u,t,8,[i.el,l,i,e]),Jr())}}const qC=Symbol("_vte"),WC=i=>i.__isTeleport;function Vg(i,e){i.shapeFlag&6&&i.component?(i.transition=e,Vg(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}/*! #__NO_SIDE_EFFECTS__ */function pn(i,e){return st(i)?Bi({name:i.name},e,{setup:i}):i}function YT(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function rd(i,e,t,n,s=!1){if(Ze(i)){i.forEach((C,x)=>rd(C,e&&(Ze(e)?e[x]:e),t,n,s));return}if(Fu(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&rd(i,e,t,n.component.subTree);return}const r=n.shapeFlag&4?Yd(n.component):n.el,o=s?null:r,{i:l,r:u}=i,h=e&&e.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,b=mt(m),T=m===It?()=>!1:C=>Tt(b,C);if(h!=null&&h!==u&&(ci(h)?(d[h]=null,T(h)&&(m[h]=null)):Oi(h)&&(h.value=null)),st(u))xc(u,l,12,[o,d]);else{const C=ci(u),x=Oi(u);if(C||x){const A=()=>{if(i.f){const P=C?T(u)?m[u]:d[u]:u.value;s?Ze(P)&&Ig(P,r):Ze(P)?P.includes(r)||P.push(r):C?(d[u]=[r],T(u)&&(m[u]=d[u])):(u.value=[r],i.k&&(d[i.k]=u.value))}else C?(d[u]=o,T(u)&&(m[u]=o)):x&&(u.value=o,i.k&&(d[i.k]=o))};o?(A.id=-1,wn(A,t)):A()}}}Vd().requestIdleCallback;Vd().cancelIdleCallback;const Fu=i=>!!i.type.__asyncLoader,QT=i=>i.type.__isKeepAlive;function GC(i,e){JT(i,"a",e)}function XC(i,e){JT(i,"da",e)}function JT(i,e,t=ki){const n=i.__wdc||(i.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return i()});if(Gd(e,n,t),t){let s=t.parent;for(;s&&s.parent;)QT(s.parent.vnode)&&KC(n,e,t,s),s=s.parent}}function KC(i,e,t,n){const s=Gd(e,i,n,!0);Tl(()=>{Ig(n[e],s)},t)}function Gd(i,e,t=ki,n=!1){if(t){const s=t[i]||(t[i]=[]),r=e.__weh||(e.__weh=(...o)=>{Qr();const l=Sc(t),u=Bs(e,t,i,o);return l(),Jr(),u});return n?s.unshift(r):s.push(r),r}}const pr=i=>(e,t=ki)=>{(!nc||i==="sp")&&Gd(i,(...n)=>e(...n),t)},ZC=pr("bm"),Xn=pr("m"),YC=pr("bu"),QC=pr("u"),Xd=pr("bum"),Tl=pr("um"),JC=pr("sp"),eE=pr("rtg"),tE=pr("rtc");function iE(i,e=ki){Gd("ec",i,e)}const nE="components";function yi(i,e){return rE(nE,i,!0,e)||i}const sE=Symbol.for("v-ndc");function rE(i,e,t=!0,n=!1){const s=En||ki;if(s){const r=s.type;{const l=WE(r,!1);if(l&&(l===e||l===$n(e)||l===$d($n(e))))return r}const o=c0(s[i]||r[i],e)||c0(s.appContext[i],e);return!o&&n?r:o}}function c0(i,e){return i&&(i[e]||i[$n(e)]||i[$d($n(e))])}function Wa(i,e,t,n){let s;const r=t,o=Ze(i);if(o||ci(i)){const l=o&&$a(i);let u=!1;l&&(u=!jn(i),i=qd(i)),s=new Array(i.length);for(let h=0,d=i.length;h<d;h++)s[h]=e(u?Di(i[h]):i[h],h,void 0,r)}else if(typeof i=="number"){s=new Array(i);for(let l=0;l<i;l++)s[l]=e(l+1,l,void 0,r)}else if(Bt(i))if(i[Symbol.iterator])s=Array.from(i,(l,u)=>e(l,u,void 0,r));else{const l=Object.keys(i);s=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];s[u]=e(i[d],d,u,r)}}else s=[];return s}const Nm=i=>i?bx(i)?Yd(i):Nm(i.parent):null,Uu=Bi(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Nm(i.parent),$root:i=>Nm(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>tx(i),$forceUpdate:i=>i.f||(i.f=()=>{$g(i.update)}),$nextTick:i=>i.n||(i.n=Ki.bind(i.proxy)),$watch:i=>EE.bind(i)}),fp=(i,e)=>i!==It&&!i.__isScriptSetup&&Tt(i,e),oE={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:s,props:r,accessCache:o,type:l,appContext:u}=i;let h;if(e[0]!=="$"){const T=o[e];if(T!==void 0)switch(T){case 1:return n[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(fp(n,e))return o[e]=1,n[e];if(s!==It&&Tt(s,e))return o[e]=2,s[e];if((h=i.propsOptions[0])&&Tt(h,e))return o[e]=3,r[e];if(t!==It&&Tt(t,e))return o[e]=4,t[e];Bm&&(o[e]=0)}}const d=Uu[e];let m,b;if(d)return e==="$attrs"&&Ai(i.attrs,"get",""),d(i);if((m=l.__cssModules)&&(m=m[e]))return m;if(t!==It&&Tt(t,e))return o[e]=4,t[e];if(b=u.config.globalProperties,Tt(b,e))return b[e]},set({_:i},e,t){const{data:n,setupState:s,ctx:r}=i;return fp(s,e)?(s[e]=t,!0):n!==It&&Tt(n,e)?(n[e]=t,!0):Tt(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(r[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:n,appContext:s,propsOptions:r}},o){let l;return!!t[o]||i!==It&&Tt(i,o)||fp(e,o)||(l=r[0])&&Tt(l,o)||Tt(n,o)||Tt(Uu,o)||Tt(s.config.globalProperties,o)},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:Tt(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};function h0(i){return Ze(i)?i.reduce((e,t)=>(e[t]=null,e),{}):i}let Bm=!0;function aE(i){const e=tx(i),t=i.proxy,n=i.ctx;Bm=!1,e.beforeCreate&&d0(e.beforeCreate,i,"bc");const{data:s,computed:r,methods:o,watch:l,provide:u,inject:h,created:d,beforeMount:m,mounted:b,beforeUpdate:T,updated:C,activated:x,deactivated:A,beforeDestroy:P,beforeUnmount:k,destroyed:I,unmounted:F,render:j,renderTracked:V,renderTriggered:U,errorCaptured:K,serverPrefetch:D,expose:R,inheritAttrs:Y,components:Q,directives:J,filters:ae}=e;if(h&&lE(h,n,null),o)for(const ne in o){const ee=o[ne];st(ee)&&(n[ne]=ee.bind(t))}if(s){const ne=s.call(t,t);Bt(ne)&&(i.data=bc(ne))}if(Bm=!0,r)for(const ne in r){const ee=r[ne],fe=st(ee)?ee.bind(t,t):st(ee.get)?ee.get.bind(t,t):Rs,re=!st(ee)&&st(ee.set)?ee.set.bind(t):Rs,de=Wi({get:fe,set:re});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>de.value,set:Le=>de.value=Le})}if(l)for(const ne in l)ex(l[ne],n,t,ne);if(u){const ne=st(u)?u.call(t):u;Reflect.ownKeys(ne).forEach(ee=>{Xi(ee,ne[ee])})}d&&d0(d,i,"c");function le(ne,ee){Ze(ee)?ee.forEach(fe=>ne(fe.bind(t))):ee&&ne(ee.bind(t))}if(le(ZC,m),le(Xn,b),le(YC,T),le(QC,C),le(GC,x),le(XC,A),le(iE,K),le(tE,V),le(eE,U),le(Xd,k),le(Tl,F),le(JC,D),Ze(R))if(R.length){const ne=i.exposed||(i.exposed={});R.forEach(ee=>{Object.defineProperty(ne,ee,{get:()=>t[ee],set:fe=>t[ee]=fe})})}else i.exposed||(i.exposed={});j&&i.render===Rs&&(i.render=j),Y!=null&&(i.inheritAttrs=Y),Q&&(i.components=Q),J&&(i.directives=J),D&&YT(i)}function lE(i,e,t=Rs){Ze(i)&&(i=Fm(i));for(const n in i){const s=i[n];let r;Bt(s)?"default"in s?r=pi(s.from||n,s.default,!0):r=pi(s.from||n):r=pi(s),Oi(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function d0(i,e,t){Bs(Ze(i)?i.map(n=>n.bind(e.proxy)):i.bind(e.proxy),e,t)}function ex(i,e,t,n){let s=n.includes(".")?mx(t,n):()=>t[n];if(ci(i)){const r=e[i];st(r)&&$o(s,r)}else if(st(i))$o(s,i.bind(t));else if(Bt(i))if(Ze(i))i.forEach(r=>ex(r,e,t,n));else{const r=st(i.handler)?i.handler.bind(t):e[i.handler];st(r)&&$o(s,r,i)}}function tx(i){const e=i.type,{mixins:t,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,l=r.get(e);let u;return l?u=l:!s.length&&!t&&!n?u=e:(u={},s.length&&s.forEach(h=>od(u,h,o,!0)),od(u,e,o)),Bt(e)&&r.set(e,u),u}function od(i,e,t,n=!1){const{mixins:s,extends:r}=e;r&&od(i,r,t,!0),s&&s.forEach(o=>od(i,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const l=uE[o]||t&&t[o];i[o]=l?l(i[o],e[o]):e[o]}return i}const uE={data:f0,props:p0,emits:p0,methods:Eu,computed:Eu,beforeCreate:$i,created:$i,beforeMount:$i,mounted:$i,beforeUpdate:$i,updated:$i,beforeDestroy:$i,beforeUnmount:$i,destroyed:$i,unmounted:$i,activated:$i,deactivated:$i,errorCaptured:$i,serverPrefetch:$i,components:Eu,directives:Eu,watch:hE,provide:f0,inject:cE};function f0(i,e){return e?i?function(){return Bi(st(i)?i.call(this,this):i,st(e)?e.call(this,this):e)}:e:i}function cE(i,e){return Eu(Fm(i),Fm(e))}function Fm(i){if(Ze(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function $i(i,e){return i?[...new Set([].concat(i,e))]:e}function Eu(i,e){return i?Bi(Object.create(null),i,e):e}function p0(i,e){return i?Ze(i)&&Ze(e)?[...new Set([...i,...e])]:Bi(Object.create(null),h0(i),h0(e??{})):e}function hE(i,e){if(!i)return e;if(!e)return i;const t=Bi(Object.create(null),i);for(const n in e)t[n]=$i(i[n],e[n]);return t}function ix(){return{app:null,config:{isNativeTag:sC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dE=0;function fE(i,e){return function(n,s=null){st(n)||(n=Bi({},n)),s!=null&&!Bt(s)&&(s=null);const r=ix(),o=new WeakSet,l=[];let u=!1;const h=r.app={_uid:dE++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:xx,get config(){return r.config},set config(d){},use(d,...m){return o.has(d)||(d&&st(d.install)?(o.add(d),d.install(h,...m)):st(d)&&(o.add(d),d(h,...m))),h},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),h},component(d,m){return m?(r.components[d]=m,h):r.components[d]},directive(d,m){return m?(r.directives[d]=m,h):r.directives[d]},mount(d,m,b){if(!u){const T=h._ceVNode||ft(n,s);return T.appContext=r,b===!0?b="svg":b===!1&&(b=void 0),i(T,d,b),u=!0,h._container=d,d.__vue_app__=h,Yd(T.component)}},onUnmount(d){l.push(d)},unmount(){u&&(Bs(l,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(d,m){return r.provides[d]=m,h},runWithContext(d){const m=Ga;Ga=h;try{return d()}finally{Ga=m}}};return h}}let Ga=null;function Xi(i,e){if(ki){let t=ki.provides;const n=ki.parent&&ki.parent.provides;n===t&&(t=ki.provides=Object.create(n)),t[i]=e}}function pi(i,e,t=!1){const n=ki||En;if(n||Ga){const s=Ga?Ga._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&i in s)return s[i];if(arguments.length>1)return t&&st(e)?e.call(n&&n.proxy):e}}const nx={},sx=()=>Object.create(nx),rx=i=>Object.getPrototypeOf(i)===nx;function pE(i,e,t,n=!1){const s={},r=sx();i.propsDefaults=Object.create(null),ox(i,e,s,r);for(const o in i.propsOptions[0])o in s||(s[o]=void 0);t?i.props=n?s:HT(s):i.type.props?i.props=s:i.props=r,i.attrs=r}function mE(i,e,t,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=i,l=mt(s),[u]=i.propsOptions;let h=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=i.vnode.dynamicProps;for(let m=0;m<d.length;m++){let b=d[m];if(Kd(i.emitsOptions,b))continue;const T=e[b];if(u)if(Tt(r,b))T!==r[b]&&(r[b]=T,h=!0);else{const C=$n(b);s[C]=Um(u,l,C,T,i,!1)}else T!==r[b]&&(r[b]=T,h=!0)}}}else{ox(i,e,s,r)&&(h=!0);let d;for(const m in l)(!e||!Tt(e,m)&&((d=na(m))===m||!Tt(e,d)))&&(u?t&&(t[m]!==void 0||t[d]!==void 0)&&(s[m]=Um(u,l,m,void 0,i,!0)):delete s[m]);if(r!==l)for(const m in r)(!e||!Tt(e,m))&&(delete r[m],h=!0)}h&&or(i.attrs,"set","")}function ox(i,e,t,n){const[s,r]=i.propsOptions;let o=!1,l;if(e)for(let u in e){if(Ru(u))continue;const h=e[u];let d;s&&Tt(s,d=$n(u))?!r||!r.includes(d)?t[d]=h:(l||(l={}))[d]=h:Kd(i.emitsOptions,u)||(!(u in n)||h!==n[u])&&(n[u]=h,o=!0)}if(r){const u=mt(t),h=l||It;for(let d=0;d<r.length;d++){const m=r[d];t[m]=Um(s,u,m,h[m],i,!Tt(h,m))}}return o}function Um(i,e,t,n,s,r){const o=i[t];if(o!=null){const l=Tt(o,"default");if(l&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&st(u)){const{propsDefaults:h}=s;if(t in h)n=h[t];else{const d=Sc(s);n=h[t]=u.call(null,e),d()}}else n=u;s.ce&&s.ce._setProp(t,n)}o[0]&&(r&&!l?n=!1:o[1]&&(n===""||n===na(t))&&(n=!0))}return n}const gE=new WeakMap;function ax(i,e,t=!1){const n=t?gE:e.propsCache,s=n.get(i);if(s)return s;const r=i.props,o={},l=[];let u=!1;if(!st(i)){const d=m=>{u=!0;const[b,T]=ax(m,e,!0);Bi(o,b),T&&l.push(...T)};!t&&e.mixins.length&&e.mixins.forEach(d),i.extends&&d(i.extends),i.mixins&&i.mixins.forEach(d)}if(!r&&!u)return Bt(i)&&n.set(i,za),za;if(Ze(r))for(let d=0;d<r.length;d++){const m=$n(r[d]);m0(m)&&(o[m]=It)}else if(r)for(const d in r){const m=$n(d);if(m0(m)){const b=r[d],T=o[m]=Ze(b)||st(b)?{type:b}:Bi({},b),C=T.type;let x=!1,A=!0;if(Ze(C))for(let P=0;P<C.length;++P){const k=C[P],I=st(k)&&k.name;if(I==="Boolean"){x=!0;break}else I==="String"&&(A=!1)}else x=st(C)&&C.name==="Boolean";T[0]=x,T[1]=A,(x||Tt(T,"default"))&&l.push(m)}}const h=[o,l];return Bt(i)&&n.set(i,h),h}function m0(i){return i[0]!=="$"&&!Ru(i)}const lx=i=>i[0]==="_"||i==="$stable",qg=i=>Ze(i)?i.map(Ps):[Ps(i)],_E=(i,e,t)=>{if(e._n)return e;const n=Ci((...s)=>qg(e(...s)),t);return n._c=!1,n},ux=(i,e,t)=>{const n=i._ctx;for(const s in i){if(lx(s))continue;const r=i[s];if(st(r))e[s]=_E(s,r,n);else if(r!=null){const o=qg(r);e[s]=()=>o}}},cx=(i,e)=>{const t=qg(e);i.slots.default=()=>t},hx=(i,e,t)=>{for(const n in e)(t||n!=="_")&&(i[n]=e[n])},yE=(i,e,t)=>{const n=i.slots=sx();if(i.vnode.shapeFlag&32){const s=e._;s?(hx(n,e,t),t&&wT(n,"_",s,!0)):ux(e,n)}else e&&cx(i,e)},vE=(i,e,t)=>{const{vnode:n,slots:s}=i;let r=!0,o=It;if(n.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:hx(s,e,t):(r=!e.$stable,ux(e,s)),o=e}else e&&(cx(i,e),o={default:1});if(r)for(const l in s)!lx(l)&&o[l]==null&&delete s[l]},wn=OE;function bE(i){return TE(i)}function TE(i,e){const t=Vd();t.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:l,createComment:u,setText:h,setElementText:d,parentNode:m,nextSibling:b,setScopeId:T=Rs,insertStaticContent:C}=i,x=($,G,ie,be=null,ye=null,xe=null,Pe=void 0,Ee=null,Se=!!G.dynamicChildren)=>{if($===G)return;$&&!du($,G)&&(be=pe($),Le($,ye,xe,!0),$=null),G.patchFlag===-2&&(Se=!1,G.dynamicChildren=null);const{type:ve,ref:je,shapeFlag:Oe}=G;switch(ve){case Zd:A($,G,ie,be);break;case Qo:P($,G,ie,be);break;case Hh:$==null&&k(G,ie,be,Pe);break;case Pi:Q($,G,ie,be,ye,xe,Pe,Ee,Se);break;default:Oe&1?j($,G,ie,be,ye,xe,Pe,Ee,Se):Oe&6?J($,G,ie,be,ye,xe,Pe,Ee,Se):(Oe&64||Oe&128)&&ve.process($,G,ie,be,ye,xe,Pe,Ee,Se,Ue)}je!=null&&ye&&rd(je,$&&$.ref,xe,G||$,!G)},A=($,G,ie,be)=>{if($==null)n(G.el=l(G.children),ie,be);else{const ye=G.el=$.el;G.children!==$.children&&h(ye,G.children)}},P=($,G,ie,be)=>{$==null?n(G.el=u(G.children||""),ie,be):G.el=$.el},k=($,G,ie,be)=>{[$.el,$.anchor]=C($.children,G,ie,be,$.el,$.anchor)},I=({el:$,anchor:G},ie,be)=>{let ye;for(;$&&$!==G;)ye=b($),n($,ie,be),$=ye;n(G,ie,be)},F=({el:$,anchor:G})=>{let ie;for(;$&&$!==G;)ie=b($),s($),$=ie;s(G)},j=($,G,ie,be,ye,xe,Pe,Ee,Se)=>{G.type==="svg"?Pe="svg":G.type==="math"&&(Pe="mathml"),$==null?V(G,ie,be,ye,xe,Pe,Ee,Se):D($,G,ye,xe,Pe,Ee,Se)},V=($,G,ie,be,ye,xe,Pe,Ee)=>{let Se,ve;const{props:je,shapeFlag:Oe,transition:Ve,dirs:qe}=$;if(Se=$.el=o($.type,xe,je&&je.is,je),Oe&8?d(Se,$.children):Oe&16&&K($.children,Se,null,be,ye,pp($,xe),Pe,Ee),qe&&Co($,null,be,"created"),U(Se,$,$.scopeId,Pe,be),je){for(const lt in je)lt!=="value"&&!Ru(lt)&&r(Se,lt,null,je[lt],xe,be);"value"in je&&r(Se,"value",null,je.value,xe),(ve=je.onVnodeBeforeMount)&&Ts(ve,be,$)}qe&&Co($,null,be,"beforeMount");const Je=xE(ye,Ve);Je&&Ve.beforeEnter(Se),n(Se,G,ie),((ve=je&&je.onVnodeMounted)||Je||qe)&&wn(()=>{ve&&Ts(ve,be,$),Je&&Ve.enter(Se),qe&&Co($,null,be,"mounted")},ye)},U=($,G,ie,be,ye)=>{if(ie&&T($,ie),be)for(let xe=0;xe<be.length;xe++)T($,be[xe]);if(ye){let xe=ye.subTree;if(G===xe||_x(xe.type)&&(xe.ssContent===G||xe.ssFallback===G)){const Pe=ye.vnode;U($,Pe,Pe.scopeId,Pe.slotScopeIds,ye.parent)}}},K=($,G,ie,be,ye,xe,Pe,Ee,Se=0)=>{for(let ve=Se;ve<$.length;ve++){const je=$[ve]=Ee?Rr($[ve]):Ps($[ve]);x(null,je,G,ie,be,ye,xe,Pe,Ee)}},D=($,G,ie,be,ye,xe,Pe)=>{const Ee=G.el=$.el;let{patchFlag:Se,dynamicChildren:ve,dirs:je}=G;Se|=$.patchFlag&16;const Oe=$.props||It,Ve=G.props||It;let qe;if(ie&&Eo(ie,!1),(qe=Ve.onVnodeBeforeUpdate)&&Ts(qe,ie,G,$),je&&Co(G,$,ie,"beforeUpdate"),ie&&Eo(ie,!0),(Oe.innerHTML&&Ve.innerHTML==null||Oe.textContent&&Ve.textContent==null)&&d(Ee,""),ve?R($.dynamicChildren,ve,Ee,ie,be,pp(G,ye),xe):Pe||ee($,G,Ee,null,ie,be,pp(G,ye),xe,!1),Se>0){if(Se&16)Y(Ee,Oe,Ve,ie,ye);else if(Se&2&&Oe.class!==Ve.class&&r(Ee,"class",null,Ve.class,ye),Se&4&&r(Ee,"style",Oe.style,Ve.style,ye),Se&8){const Je=G.dynamicProps;for(let lt=0;lt<Je.length;lt++){const ut=Je[lt],Qt=Oe[ut],Ht=Ve[ut];(Ht!==Qt||ut==="value")&&r(Ee,ut,Qt,Ht,ye,ie)}}Se&1&&$.children!==G.children&&d(Ee,G.children)}else!Pe&&ve==null&&Y(Ee,Oe,Ve,ie,ye);((qe=Ve.onVnodeUpdated)||je)&&wn(()=>{qe&&Ts(qe,ie,G,$),je&&Co(G,$,ie,"updated")},be)},R=($,G,ie,be,ye,xe,Pe)=>{for(let Ee=0;Ee<G.length;Ee++){const Se=$[Ee],ve=G[Ee],je=Se.el&&(Se.type===Pi||!du(Se,ve)||Se.shapeFlag&70)?m(Se.el):ie;x(Se,ve,je,null,be,ye,xe,Pe,!0)}},Y=($,G,ie,be,ye)=>{if(G!==ie){if(G!==It)for(const xe in G)!Ru(xe)&&!(xe in ie)&&r($,xe,G[xe],null,ye,be);for(const xe in ie){if(Ru(xe))continue;const Pe=ie[xe],Ee=G[xe];Pe!==Ee&&xe!=="value"&&r($,xe,Ee,Pe,ye,be)}"value"in ie&&r($,"value",G.value,ie.value,ye)}},Q=($,G,ie,be,ye,xe,Pe,Ee,Se)=>{const ve=G.el=$?$.el:l(""),je=G.anchor=$?$.anchor:l("");let{patchFlag:Oe,dynamicChildren:Ve,slotScopeIds:qe}=G;qe&&(Ee=Ee?Ee.concat(qe):qe),$==null?(n(ve,ie,be),n(je,ie,be),K(G.children||[],ie,je,ye,xe,Pe,Ee,Se)):Oe>0&&Oe&64&&Ve&&$.dynamicChildren?(R($.dynamicChildren,Ve,ie,ye,xe,Pe,Ee),(G.key!=null||ye&&G===ye.subTree)&&dx($,G,!0)):ee($,G,ie,je,ye,xe,Pe,Ee,Se)},J=($,G,ie,be,ye,xe,Pe,Ee,Se)=>{G.slotScopeIds=Ee,$==null?G.shapeFlag&512?ye.ctx.activate(G,ie,be,Pe,Se):ae(G,ie,be,ye,xe,Pe,Se):ce($,G,Se)},ae=($,G,ie,be,ye,xe,Pe)=>{const Ee=$.component=zE($,be,ye);if(QT($)&&(Ee.ctx.renderer=Ue),HE(Ee,!1,Pe),Ee.asyncDep){if(ye&&ye.registerDep(Ee,le,Pe),!$.el){const Se=Ee.subTree=ft(Qo);P(null,Se,G,ie)}}else le(Ee,$,G,ie,ye,xe,Pe)},ce=($,G,ie)=>{const be=G.component=$.component;if(IE($,G,ie))if(be.asyncDep&&!be.asyncResolved){ne(be,G,ie);return}else be.next=G,be.update();else G.el=$.el,be.vnode=G},le=($,G,ie,be,ye,xe,Pe)=>{const Ee=()=>{if($.isMounted){let{next:Oe,bu:Ve,u:qe,parent:Je,vnode:lt}=$;{const rt=fx($);if(rt){Oe&&(Oe.el=lt.el,ne($,Oe,Pe)),rt.asyncDep.then(()=>{$.isUnmounted||Ee()});return}}let ut=Oe,Qt;Eo($,!1),Oe?(Oe.el=lt.el,ne($,Oe,Pe)):Oe=lt,Ve&&zh(Ve),(Qt=Oe.props&&Oe.props.onVnodeBeforeUpdate)&&Ts(Qt,Je,Oe,lt),Eo($,!0);const Ht=_0($),Jt=$.subTree;$.subTree=Ht,x(Jt,Ht,m(Jt.el),pe(Jt),$,ye,xe),Oe.el=Ht.el,ut===null&&LE($,Ht.el),qe&&wn(qe,ye),(Qt=Oe.props&&Oe.props.onVnodeUpdated)&&wn(()=>Ts(Qt,Je,Oe,lt),ye)}else{let Oe;const{el:Ve,props:qe}=G,{bm:Je,m:lt,parent:ut,root:Qt,type:Ht}=$,Jt=Fu(G);Eo($,!1),Je&&zh(Je),!Jt&&(Oe=qe&&qe.onVnodeBeforeMount)&&Ts(Oe,ut,G),Eo($,!0);{Qt.ce&&Qt.ce._injectChildStyle(Ht);const rt=$.subTree=_0($);x(null,rt,ie,be,$,ye,xe),G.el=rt.el}if(lt&&wn(lt,ye),!Jt&&(Oe=qe&&qe.onVnodeMounted)){const rt=G;wn(()=>Ts(Oe,ut,rt),ye)}(G.shapeFlag&256||ut&&Fu(ut.vnode)&&ut.vnode.shapeFlag&256)&&$.a&&wn($.a,ye),$.isMounted=!0,G=ie=be=null}};$.scope.on();const Se=$.effect=new DT(Ee);$.scope.off();const ve=$.update=Se.run.bind(Se),je=$.job=Se.runIfDirty.bind(Se);je.i=$,je.id=$.uid,Se.scheduler=()=>$g(je),Eo($,!0),ve()},ne=($,G,ie)=>{G.component=$;const be=$.vnode.props;$.vnode=G,$.next=null,mE($,G.props,be,ie),vE($,G.children,ie),Qr(),u0($),Jr()},ee=($,G,ie,be,ye,xe,Pe,Ee,Se=!1)=>{const ve=$&&$.children,je=$?$.shapeFlag:0,Oe=G.children,{patchFlag:Ve,shapeFlag:qe}=G;if(Ve>0){if(Ve&128){re(ve,Oe,ie,be,ye,xe,Pe,Ee,Se);return}else if(Ve&256){fe(ve,Oe,ie,be,ye,xe,Pe,Ee,Se);return}}qe&8?(je&16&&ze(ve,ye,xe),Oe!==ve&&d(ie,Oe)):je&16?qe&16?re(ve,Oe,ie,be,ye,xe,Pe,Ee,Se):ze(ve,ye,xe,!0):(je&8&&d(ie,""),qe&16&&K(Oe,ie,be,ye,xe,Pe,Ee,Se))},fe=($,G,ie,be,ye,xe,Pe,Ee,Se)=>{$=$||za,G=G||za;const ve=$.length,je=G.length,Oe=Math.min(ve,je);let Ve;for(Ve=0;Ve<Oe;Ve++){const qe=G[Ve]=Se?Rr(G[Ve]):Ps(G[Ve]);x($[Ve],qe,ie,null,ye,xe,Pe,Ee,Se)}ve>je?ze($,ye,xe,!0,!1,Oe):K(G,ie,be,ye,xe,Pe,Ee,Se,Oe)},re=($,G,ie,be,ye,xe,Pe,Ee,Se)=>{let ve=0;const je=G.length;let Oe=$.length-1,Ve=je-1;for(;ve<=Oe&&ve<=Ve;){const qe=$[ve],Je=G[ve]=Se?Rr(G[ve]):Ps(G[ve]);if(du(qe,Je))x(qe,Je,ie,null,ye,xe,Pe,Ee,Se);else break;ve++}for(;ve<=Oe&&ve<=Ve;){const qe=$[Oe],Je=G[Ve]=Se?Rr(G[Ve]):Ps(G[Ve]);if(du(qe,Je))x(qe,Je,ie,null,ye,xe,Pe,Ee,Se);else break;Oe--,Ve--}if(ve>Oe){if(ve<=Ve){const qe=Ve+1,Je=qe<je?G[qe].el:be;for(;ve<=Ve;)x(null,G[ve]=Se?Rr(G[ve]):Ps(G[ve]),ie,Je,ye,xe,Pe,Ee,Se),ve++}}else if(ve>Ve)for(;ve<=Oe;)Le($[ve],ye,xe,!0),ve++;else{const qe=ve,Je=ve,lt=new Map;for(ve=Je;ve<=Ve;ve++){const ei=G[ve]=Se?Rr(G[ve]):Ps(G[ve]);ei.key!=null&&lt.set(ei.key,ve)}let ut,Qt=0;const Ht=Ve-Je+1;let Jt=!1,rt=0;const mn=new Array(Ht);for(ve=0;ve<Ht;ve++)mn[ve]=0;for(ve=qe;ve<=Oe;ve++){const ei=$[ve];if(Qt>=Ht){Le(ei,ye,xe,!0);continue}let mi;if(ei.key!=null)mi=lt.get(ei.key);else for(ut=Je;ut<=Ve;ut++)if(mn[ut-Je]===0&&du(ei,G[ut])){mi=ut;break}mi===void 0?Le(ei,ye,xe,!0):(mn[mi-Je]=ve+1,mi>=rt?rt=mi:Jt=!0,x(ei,G[mi],ie,null,ye,xe,Pe,Ee,Se),Qt++)}const Yi=Jt?SE(mn):za;for(ut=Yi.length-1,ve=Ht-1;ve>=0;ve--){const ei=Je+ve,mi=G[ei],Ti=ei+1<je?G[ei+1].el:be;mn[ve]===0?x(null,mi,ie,Ti,ye,xe,Pe,Ee,Se):Jt&&(ut<0||ve!==Yi[ut]?de(mi,ie,Ti,2):ut--)}}},de=($,G,ie,be,ye=null)=>{const{el:xe,type:Pe,transition:Ee,children:Se,shapeFlag:ve}=$;if(ve&6){de($.component.subTree,G,ie,be);return}if(ve&128){$.suspense.move(G,ie,be);return}if(ve&64){Pe.move($,G,ie,Ue);return}if(Pe===Pi){n(xe,G,ie);for(let Oe=0;Oe<Se.length;Oe++)de(Se[Oe],G,ie,be);n($.anchor,G,ie);return}if(Pe===Hh){I($,G,ie);return}if(be!==2&&ve&1&&Ee)if(be===0)Ee.beforeEnter(xe),n(xe,G,ie),wn(()=>Ee.enter(xe),ye);else{const{leave:Oe,delayLeave:Ve,afterLeave:qe}=Ee,Je=()=>n(xe,G,ie),lt=()=>{Oe(xe,()=>{Je(),qe&&qe()})};Ve?Ve(xe,Je,lt):lt()}else n(xe,G,ie)},Le=($,G,ie,be=!1,ye=!1)=>{const{type:xe,props:Pe,ref:Ee,children:Se,dynamicChildren:ve,shapeFlag:je,patchFlag:Oe,dirs:Ve,cacheIndex:qe}=$;if(Oe===-2&&(ye=!1),Ee!=null&&rd(Ee,null,ie,$,!0),qe!=null&&(G.renderCache[qe]=void 0),je&256){G.ctx.deactivate($);return}const Je=je&1&&Ve,lt=!Fu($);let ut;if(lt&&(ut=Pe&&Pe.onVnodeBeforeUnmount)&&Ts(ut,G,$),je&6)Ie($.component,ie,be);else{if(je&128){$.suspense.unmount(ie,be);return}Je&&Co($,null,G,"beforeUnmount"),je&64?$.type.remove($,G,ie,Ue,be):ve&&!ve.hasOnce&&(xe!==Pi||Oe>0&&Oe&64)?ze(ve,G,ie,!1,!0):(xe===Pi&&Oe&384||!ye&&je&16)&&ze(Se,G,ie),be&&$e($)}(lt&&(ut=Pe&&Pe.onVnodeUnmounted)||Je)&&wn(()=>{ut&&Ts(ut,G,$),Je&&Co($,null,G,"unmounted")},ie)},$e=$=>{const{type:G,el:ie,anchor:be,transition:ye}=$;if(G===Pi){Fe(ie,be);return}if(G===Hh){F($);return}const xe=()=>{s(ie),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if($.shapeFlag&1&&ye&&!ye.persisted){const{leave:Pe,delayLeave:Ee}=ye,Se=()=>Pe(ie,xe);Ee?Ee($.el,xe,Se):Se()}else xe()},Fe=($,G)=>{let ie;for(;$!==G;)ie=b($),s($),$=ie;s(G)},Ie=($,G,ie)=>{const{bum:be,scope:ye,job:xe,subTree:Pe,um:Ee,m:Se,a:ve}=$;g0(Se),g0(ve),be&&zh(be),ye.stop(),xe&&(xe.flags|=8,Le(Pe,$,G,ie)),Ee&&wn(Ee,G),wn(()=>{$.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},ze=($,G,ie,be=!1,ye=!1,xe=0)=>{for(let Pe=xe;Pe<$.length;Pe++)Le($[Pe],G,ie,be,ye)},pe=$=>{if($.shapeFlag&6)return pe($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const G=b($.anchor||$.el),ie=G&&G[qC];return ie?b(ie):G};let Ce=!1;const De=($,G,ie)=>{$==null?G._vnode&&Le(G._vnode,null,null,!0):x(G._vnode||null,$,G,null,null,null,ie),G._vnode=$,Ce||(Ce=!0,u0(),XT(),Ce=!1)},Ue={p:x,um:Le,m:de,r:$e,mt:ae,mc:K,pc:ee,pbc:R,n:pe,o:i};return{render:De,hydrate:void 0,createApp:fE(De)}}function pp({type:i,props:e},t){return t==="svg"&&i==="foreignObject"||t==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Eo({effect:i,job:e},t){t?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function xE(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function dx(i,e,t=!1){const n=i.children,s=e.children;if(Ze(n)&&Ze(s))for(let r=0;r<n.length;r++){const o=n[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Rr(s[r]),l.el=o.el),!t&&l.patchFlag!==-2&&dx(o,l)),l.type===Zd&&(l.el=o.el)}}function SE(i){const e=i.slice(),t=[0];let n,s,r,o,l;const u=i.length;for(n=0;n<u;n++){const h=i[n];if(h!==0){if(s=t[t.length-1],i[s]<h){e[n]=s,t.push(n);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,i[t[l]]<h?r=l+1:o=l;h<i[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function fx(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fx(e)}function g0(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const wE=Symbol.for("v-scx"),CE=()=>pi(wE);function $o(i,e,t){return px(i,e,t)}function px(i,e,t=It){const{immediate:n,deep:s,flush:r,once:o}=t,l=Bi({},t),u=e&&n||!e&&r!=="post";let h;if(nc){if(r==="sync"){const T=CE();h=T.__watcherHandles||(T.__watcherHandles=[])}else if(!u){const T=()=>{};return T.stop=Rs,T.resume=Rs,T.pause=Rs,T}}const d=ki;l.call=(T,C,x)=>Bs(T,d,C,x);let m=!1;r==="post"?l.scheduler=T=>{wn(T,d&&d.suspense)}:r!=="sync"&&(m=!0,l.scheduler=(T,C)=>{C?T():$g(T)}),l.augmentJob=T=>{e&&(T.flags|=4),m&&(T.flags|=2,d&&(T.id=d.uid,T.i=d))};const b=zC(i,e,l);return nc&&(h?h.push(b):u&&b()),b}function EE(i,e,t){const n=this.proxy,s=ci(i)?i.includes(".")?mx(n,i):()=>n[i]:i.bind(n,n);let r;st(e)?r=e:(r=e.handler,t=e);const o=Sc(this),l=px(s,r.bind(n),t);return o(),l}function mx(i,e){const t=e.split(".");return()=>{let n=i;for(let s=0;s<t.length&&n;s++)n=n[t[s]];return n}}const AE=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${$n(e)}Modifiers`]||i[`${na(e)}Modifiers`];function DE(i,e,...t){if(i.isUnmounted)return;const n=i.vnode.props||It;let s=t;const r=e.startsWith("update:"),o=r&&AE(n,e.slice(7));o&&(o.trim&&(s=t.map(d=>ci(d)?d.trim():d)),o.number&&(s=t.map(td)));let l,u=n[l=lp(e)]||n[l=lp($n(e))];!u&&r&&(u=n[l=lp(na(e))]),u&&Bs(u,i,6,s);const h=n[l+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,Bs(h,i,6,s)}}function gx(i,e,t=!1){const n=e.emitsCache,s=n.get(i);if(s!==void 0)return s;const r=i.emits;let o={},l=!1;if(!st(i)){const u=h=>{const d=gx(h,e,!0);d&&(l=!0,Bi(o,d))};!t&&e.mixins.length&&e.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}return!r&&!l?(Bt(i)&&n.set(i,null),null):(Ze(r)?r.forEach(u=>o[u]=null):Bi(o,r),Bt(i)&&n.set(i,o),o)}function Kd(i,e){return!i||!zd(e)?!1:(e=e.slice(2).replace(/Once$/,""),Tt(i,e[0].toLowerCase()+e.slice(1))||Tt(i,na(e))||Tt(i,e))}function _0(i){const{type:e,vnode:t,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:l,emit:u,render:h,renderCache:d,props:m,data:b,setupState:T,ctx:C,inheritAttrs:x}=i,A=sd(i);let P,k;try{if(t.shapeFlag&4){const F=s||n,j=F;P=Ps(h.call(j,F,d,m,T,b,C)),k=l}else{const F=e;P=Ps(F.length>1?F(m,{attrs:l,slots:o,emit:u}):F(m,null)),k=e.props?l:PE(l)}}catch(F){ju.length=0,Wd(F,i,1),P=ft(Qo)}let I=P;if(k&&x!==!1){const F=Object.keys(k),{shapeFlag:j}=I;F.length&&j&7&&(r&&F.some(kg)&&(k=kE(k,r)),I=rl(I,k,!1,!0))}return t.dirs&&(I=rl(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&Vg(I,t.transition),P=I,sd(A),P}const PE=i=>{let e;for(const t in i)(t==="class"||t==="style"||zd(t))&&((e||(e={}))[t]=i[t]);return e},kE=(i,e)=>{const t={};for(const n in i)(!kg(n)||!(n.slice(9)in e))&&(t[n]=i[n]);return t};function IE(i,e,t){const{props:n,children:s,component:r}=i,{props:o,children:l,patchFlag:u}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return n?y0(n,o,h):!!o;if(u&8){const d=e.dynamicProps;for(let m=0;m<d.length;m++){const b=d[m];if(o[b]!==n[b]&&!Kd(h,b))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?y0(n,o,h):!0:!!o;return!1}function y0(i,e,t){const n=Object.keys(e);if(n.length!==Object.keys(i).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==i[r]&&!Kd(t,r))return!0}return!1}function LE({vnode:i,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===i&&(n.el=i.el),n===i)(i=e.vnode).el=t,e=e.parent;else break}}const _x=i=>i.__isSuspense;function OE(i,e){e&&e.pendingBranch?Ze(i)?e.effects.push(...i):e.effects.push(i):VC(i)}const Pi=Symbol.for("v-fgt"),Zd=Symbol.for("v-txt"),Qo=Symbol.for("v-cmt"),Hh=Symbol.for("v-stc"),ju=[];let An=null;function Pt(i=!1){ju.push(An=i?null:[])}function ME(){ju.pop(),An=ju[ju.length-1]||null}let ic=1;function v0(i,e=!1){ic+=i,i<0&&An&&e&&(An.hasOnce=!0)}function yx(i){return i.dynamicChildren=ic>0?An||za:null,ME(),ic>0&&An&&An.push(i),i}function ti(i,e,t,n,s,r){return yx(Xe(i,e,t,n,s,r,!0))}function Bo(i,e,t,n,s){return yx(ft(i,e,t,n,s,!0))}function ad(i){return i?i.__v_isVNode===!0:!1}function du(i,e){return i.type===e.type&&i.key===e.key}const vx=({key:i})=>i??null,$h=({ref:i,ref_key:e,ref_for:t})=>(typeof i=="number"&&(i=""+i),i!=null?ci(i)||Oi(i)||st(i)?{i:En,r:i,k:e,f:!!t}:i:null);function Xe(i,e=null,t=null,n=0,s=null,r=i===Pi?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&vx(e),ref:e&&$h(e),scopeId:ZT,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:En};return l?(Wg(u,t),r&128&&i.normalize(u)):t&&(u.shapeFlag|=ci(t)?8:16),ic>0&&!o&&An&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&An.push(u),u}const ft=RE;function RE(i,e=null,t=null,n=0,s=null,r=!1){if((!i||i===sE)&&(i=Qo),ad(i)){const l=rl(i,e,!0);return t&&Wg(l,t),ic>0&&!r&&An&&(l.shapeFlag&6?An[An.indexOf(i)]=l:An.push(l)),l.patchFlag=-2,l}if(GE(i)&&(i=i.__vccOpts),e){e=NE(e);let{class:l,style:u}=e;l&&!ci(l)&&(e.class=Mg(l)),Bt(u)&&(Tc(u)&&!Ze(u)&&(u=Bi({},u)),e.style=Og(u))}const o=ci(i)?1:_x(i)?128:WC(i)?64:Bt(i)?4:st(i)?2:0;return Xe(i,e,t,n,s,o,r,!0)}function NE(i){return i?Tc(i)||rx(i)?Bi({},i):i:null}function rl(i,e,t=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:l,transition:u}=i,h=e?FE(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&vx(h),ref:e&&e.ref?t&&r?Ze(r)?r.concat($h(e)):[r,$h(e)]:$h(e):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==Pi?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:u,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&rl(i.ssContent),ssFallback:i.ssFallback&&rl(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return u&&n&&Vg(d,u.clone(d)),d}function hi(i=" ",e=0){return ft(Zd,null,i,e)}function BE(i,e){const t=ft(Hh,null,i);return t.staticCount=e,t}function zu(i="",e=!1){return e?(Pt(),Bo(Qo,null,i)):ft(Qo,null,i)}function Ps(i){return i==null||typeof i=="boolean"?ft(Qo):Ze(i)?ft(Pi,null,i.slice()):ad(i)?Rr(i):ft(Zd,null,String(i))}function Rr(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:rl(i)}function Wg(i,e){let t=0;const{shapeFlag:n}=i;if(e==null)e=null;else if(Ze(e))t=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Wg(i,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!rx(e)?e._ctx=En:s===3&&En&&(En.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else st(e)?(e={default:e,_ctx:En},t=32):(e=String(e),n&64?(t=16,e=[hi(e)]):t=8);i.children=e,i.shapeFlag|=t}function FE(...i){const e={};for(let t=0;t<i.length;t++){const n=i[t];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Mg([e.class,n.class]));else if(s==="style")e.style=Og([e.style,n.style]);else if(zd(s)){const r=e[s],o=n[s];o&&r!==o&&!(Ze(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=n[s])}return e}function Ts(i,e,t,n=null){Bs(i,e,7,[t,n])}const UE=ix();let jE=0;function zE(i,e,t){const n=i.type,s=(e?e.appContext:i.appContext)||UE,r={uid:jE++,vnode:i,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ax(n,s),emitsOptions:gx(n,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:n.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=DE.bind(null,r),i.ce&&i.ce(r),r}let ki=null,ld,jm;{const i=Vd(),e=(t,n)=>{let s;return(s=i[t])||(s=i[t]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};ld=e("__VUE_INSTANCE_SETTERS__",t=>ki=t),jm=e("__VUE_SSR_SETTERS__",t=>nc=t)}const Sc=i=>{const e=ki;return ld(i),i.scope.on(),()=>{i.scope.off(),ld(e)}},b0=()=>{ki&&ki.scope.off(),ld(null)};function bx(i){return i.vnode.shapeFlag&4}let nc=!1;function HE(i,e=!1,t=!1){e&&jm(e);const{props:n,children:s}=i.vnode,r=bx(i);pE(i,n,r,e),yE(i,s,t);const o=r?$E(i,e):void 0;return e&&jm(!1),o}function $E(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,oE);const{setup:n}=t;if(n){Qr();const s=i.setupContext=n.length>1?qE(i):null,r=Sc(i),o=xc(n,i,0,[i.props,s]),l=TT(o);if(Jr(),r(),(l||i.sp)&&!Fu(i)&&YT(i),l){if(o.then(b0,b0),e)return o.then(u=>{T0(i,u)}).catch(u=>{Wd(u,i,0)});i.asyncDep=o}else T0(i,o)}else Tx(i)}function T0(i,e,t){st(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Bt(e)&&(i.setupState=qT(e)),Tx(i)}function Tx(i,e,t){const n=i.type;i.render||(i.render=n.render||Rs);{const s=Sc(i);Qr();try{aE(i)}finally{Jr(),s()}}}const VE={get(i,e){return Ai(i,"get",""),i[e]}};function qE(i){const e=t=>{i.exposed=t||{}};return{attrs:new Proxy(i.attrs,VE),slots:i.slots,emit:i.emit,expose:e}}function Yd(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(qT(zs(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in Uu)return Uu[t](i)},has(e,t){return t in e||t in Uu}})):i.proxy}function WE(i,e=!0){return st(i)?i.displayName||i.name:i.name||e&&i.__name}function GE(i){return st(i)&&"__vccOpts"in i}const Wi=(i,e)=>UC(i,e,nc);function ls(i,e,t){const n=arguments.length;return n===2?Bt(e)&&!Ze(e)?ad(e)?ft(i,null,[e]):ft(i,e):ft(i,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&ad(t)&&(t=[t]),ft(i,e,t))}const xx="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zm;const x0=typeof window<"u"&&window.trustedTypes;if(x0)try{zm=x0.createPolicy("vue",{createHTML:i=>i})}catch{}const Sx=zm?i=>zm.createHTML(i):i=>i,XE="http://www.w3.org/2000/svg",KE="http://www.w3.org/1998/Math/MathML",sr=typeof document<"u"?document:null,S0=sr&&sr.createElement("template"),ZE={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,n)=>{const s=e==="svg"?sr.createElementNS(XE,i):e==="mathml"?sr.createElementNS(KE,i):t?sr.createElement(i,{is:t}):sr.createElement(i);return i==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:i=>sr.createTextNode(i),createComment:i=>sr.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>sr.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,n,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{S0.innerHTML=Sx(n==="svg"?`<svg>${i}</svg>`:n==="mathml"?`<math>${i}</math>`:i);const l=S0.content;if(n==="svg"||n==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},YE=Symbol("_vtc");function QE(i,e,t){const n=i[YE];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}const w0=Symbol("_vod"),JE=Symbol("_vsh"),eA=Symbol(""),tA=/(^|;)\s*display\s*:/;function iA(i,e,t){const n=i.style,s=ci(t);let r=!1;if(t&&!s){if(e)if(ci(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Vh(n,l,"")}else for(const o in e)t[o]==null&&Vh(n,o,"");for(const o in t)o==="display"&&(r=!0),Vh(n,o,t[o])}else if(s){if(e!==t){const o=n[eA];o&&(t+=";"+o),n.cssText=t,r=tA.test(t)}}else e&&i.removeAttribute("style");w0 in i&&(i[w0]=r?n.display:"",i[JE]&&(n.display="none"))}const C0=/\s*!important$/;function Vh(i,e,t){if(Ze(t))t.forEach(n=>Vh(i,e,n));else if(t==null&&(t=""),e.startsWith("--"))i.setProperty(e,t);else{const n=nA(i,e);C0.test(t)?i.setProperty(na(n),t.replace(C0,""),"important"):i[n]=t}}const E0=["Webkit","Moz","ms"],mp={};function nA(i,e){const t=mp[e];if(t)return t;let n=$n(e);if(n!=="filter"&&n in i)return mp[e]=n;n=$d(n);for(let s=0;s<E0.length;s++){const r=E0[s]+n;if(r in i)return mp[e]=r}return e}const A0="http://www.w3.org/1999/xlink";function D0(i,e,t,n,s,r=pC(e)){n&&e.startsWith("xlink:")?t==null?i.removeAttributeNS(A0,e.slice(6,e.length)):i.setAttributeNS(A0,e,t):t==null||r&&!CT(t)?i.removeAttribute(e):i.setAttribute(e,r?"":Ns(t)?String(t):t)}function P0(i,e,t,n,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(i[e]=e==="innerHTML"?Sx(t):t);return}const r=i.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?i.getAttribute("value")||"":i.value,u=t==null?i.type==="checkbox"?"on":"":String(t);(l!==u||!("_value"in i))&&(i.value=u),t==null&&i.removeAttribute(e),i._value=t;return}let o=!1;if(t===""||t==null){const l=typeof i[e];l==="boolean"?t=CT(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{i[e]=t}catch{}o&&i.removeAttribute(s||e)}function jr(i,e,t,n){i.addEventListener(e,t,n)}function sA(i,e,t,n){i.removeEventListener(e,t,n)}const k0=Symbol("_vei");function rA(i,e,t,n,s=null){const r=i[k0]||(i[k0]={}),o=r[e];if(n&&o)o.value=n;else{const[l,u]=oA(e);if(n){const h=r[e]=uA(n,s);jr(i,l,h,u)}else o&&(sA(i,l,o,u),r[e]=void 0)}}const I0=/(?:Once|Passive|Capture)$/;function oA(i){let e;if(I0.test(i)){e={};let n;for(;n=i.match(I0);)i=i.slice(0,i.length-n[0].length),e[n[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):na(i.slice(2)),e]}let gp=0;const aA=Promise.resolve(),lA=()=>gp||(aA.then(()=>gp=0),gp=Date.now());function uA(i,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Bs(cA(n,t.value),e,5,[n])};return t.value=i,t.attached=lA(),t}function cA(i,e){if(Ze(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const L0=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,hA=(i,e,t,n,s,r)=>{const o=s==="svg";e==="class"?QE(i,n,o):e==="style"?iA(i,t,n):zd(e)?kg(e)||rA(i,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dA(i,e,n,o))?(P0(i,e,n),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&D0(i,e,n,o,r,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!ci(n))?P0(i,$n(e),n,r,e):(e==="true-value"?i._trueValue=n:e==="false-value"&&(i._falseValue=n),D0(i,e,n,o))};function dA(i,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in i&&L0(e)&&st(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=i.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return L0(e)&&ci(t)?!1:e in i}const ol=i=>{const e=i.props["onUpdate:modelValue"]||!1;return Ze(e)?t=>zh(e,t):e};function fA(i){i.target.composing=!0}function O0(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign"),pA={created(i,{modifiers:{lazy:e,trim:t,number:n}},s){i[hr]=ol(s);const r=n||s.props&&s.props.type==="number";jr(i,e?"change":"input",o=>{if(o.target.composing)return;let l=i.value;t&&(l=l.trim()),r&&(l=td(l)),i[hr](l)}),t&&jr(i,"change",()=>{i.value=i.value.trim()}),e||(jr(i,"compositionstart",fA),jr(i,"compositionend",O0),jr(i,"change",O0))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:t,modifiers:{lazy:n,trim:s,number:r}},o){if(i[hr]=ol(o),i.composing)return;const l=(r||i.type==="number")&&!/^0\d/.test(i.value)?td(i.value):i.value,u=e??"";l!==u&&(document.activeElement===i&&i.type!=="range"&&(n&&e===t||s&&i.value.trim()===u)||(i.value=u))}},_p={deep:!0,created(i,e,t){i[hr]=ol(t),jr(i,"change",()=>{const n=i._modelValue,s=sc(i),r=i.checked,o=i[hr];if(Ze(n)){const l=Rg(n,s),u=l!==-1;if(r&&!u)o(n.concat(s));else if(!r&&u){const h=[...n];h.splice(l,1),o(h)}}else if(bl(n)){const l=new Set(n);r?l.add(s):l.delete(s),o(l)}else o(wx(i,r))})},mounted:M0,beforeUpdate(i,e,t){i[hr]=ol(t),M0(i,e,t)}};function M0(i,{value:e,oldValue:t},n){i._modelValue=e;let s;if(Ze(e))s=Rg(e,n.props.value)>-1;else if(bl(e))s=e.has(n.props.value);else{if(e===t)return;s=vc(e,wx(i,!0))}i.checked!==s&&(i.checked=s)}const qh={deep:!0,created(i,{value:e,modifiers:{number:t}},n){const s=bl(e);jr(i,"change",()=>{const r=Array.prototype.filter.call(i.options,o=>o.selected).map(o=>t?td(sc(o)):sc(o));i[hr](i.multiple?s?new Set(r):r:r[0]),i._assigning=!0,Ki(()=>{i._assigning=!1})}),i[hr]=ol(n)},mounted(i,{value:e}){R0(i,e)},beforeUpdate(i,e,t){i[hr]=ol(t)},updated(i,{value:e}){i._assigning||R0(i,e)}};function R0(i,e){const t=i.multiple,n=Ze(e);if(!(t&&!n&&!bl(e))){for(let s=0,r=i.options.length;s<r;s++){const o=i.options[s],l=sc(o);if(t)if(n){const u=typeof l;u==="string"||u==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=Rg(e,l)>-1}else o.selected=e.has(l);else if(vc(sc(o),e)){i.selectedIndex!==s&&(i.selectedIndex=s);return}}!t&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function sc(i){return"_value"in i?i._value:i.value}function wx(i,e){const t=e?"_trueValue":"_falseValue";return t in i?i[t]:e}const mA=Bi({patchProp:hA},ZE);let N0;function Cx(){return N0||(N0=bE(mA))}const gA=(...i)=>{Cx().render(...i)},_A=(...i)=>{const e=Cx().createApp(...i),{mount:t}=e;return e.mount=n=>{const s=vA(n);if(!s)return;const r=e._component;!st(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,yA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function yA(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function vA(i){return ci(i)?document.querySelector(i):i}var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sa(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function bA(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var yp={exports:{}},B0;function TA(){return B0||(B0=1,function(i,e){(function(t,n){i.exports=n()})(window,function(){return function(t){var n={};function s(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=n,s.d=function(r,o,l){s.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:l})},s.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},s.t=function(r,o){if(1&o&&(r=s(r)),8&o||4&o&&typeof r=="object"&&r&&r.__esModule)return r;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),2&o&&typeof r!="string")for(var u in r)s.d(l,u,function(h){return r[h]}.bind(null,u));return l},s.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return s.d(o,"a",o),o},s.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},s.p="",s(s.s=0)}([function(t,n,s){function r(){return window.Piwik.getAsyncTracker()}function o(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new Promise(function(A,P){var k=document.createElement("script");k.async=!0,k.defer=!0,k.src=C,x&&["anonymous","use-credentials"].includes(x)&&(k.crossOrigin=x),(document.head||document.getElementsByTagName("head")[0]).appendChild(k),k.onload=A,k.onerror=P})}function l(C,x){return C.resolve(x).href}s.r(n),s.d(n,"matomoKey",function(){return h}),s.d(n,"default",function(){return T});var u={debug:!1,disableCookies:!1,requireCookieConsent:!1,enableHeartBeatTimer:!1,enableLinkTracking:!0,heartBeatTimerInterval:15,requireConsent:!1,trackInitialView:!0,trackSiteSearch:!1,trackerFileName:"matomo",trackerUrl:void 0,trackerScriptUrl:void 0,userId:void 0,cookieDomain:void 0,domains:void 0,preInitActions:[],crossOrigin:void 0},h="Matomo";function d(C,x,A){if(typeof C.trackSiteSearch=="function"){var P=C.trackSiteSearch(x);if(P)return void function(k,I){var F=I.keyword,j=I.category,V=I.resultsCount,U=r();k.debug&&console.debug("[vue-matomo] Site Search "+F),U.trackSiteSearch(F,j,V)}(C,P)}(function(k,I,F){var j,V,U,K=r();if(k.router){if(V=l(k.router,I.fullPath),U=F&&F.fullPath?l(k.router,F.fullPath):void 0,I.meta.analyticsIgnore)return void(k.debug&&console.debug("[vue-matomo] Ignoring "+V));k.debug&&console.debug("[vue-matomo] Tracking "+V),j=I.meta.title||V}U&&K.setReferrerUrl(window.location.origin+U),V&&K.setCustomUrl(window.location.origin+V),K.trackPageView(j)})(C,x,A)}function m(C,x){var A=r();if(Number(C.version.split(".")[0])>2?(C.config.globalProperties.$piwik=A,C.config.globalProperties.$matomo=A,C.provide(h,A)):(C.prototype.$piwik=A,C.prototype.$matomo=A),x.trackInitialView&&x.router){var P=x.router.currentRoute.value?x.router.currentRoute.value:x.router.currentRoute;d(x,P)}x.router&&x.router.afterEach(function(k,I){d(x,k,I),x.enableLinkTracking&&A.enableLinkTracking()})}function b(){return new Promise(function(C,x){var A=Date.now(),P=setInterval(function(){if(window.Piwik)return clearInterval(P),C();if(Date.now()>=A+3e3)throw clearInterval(P),new Error("[vue-matomo]: window.Piwik undefined after waiting for ".concat(3e3,"ms"))},50)})}function T(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=Object.assign({},u,x),P=A.host,k=A.siteId,I=A.trackerFileName,F=A.trackerUrl,j=A.trackerScriptUrl,V=j||"".concat(P,"/").concat(I,".js"),U=F||"".concat(P,"/").concat(I,".php");window._paq=window._paq||[],window._paq.push(["setTrackerUrl",U]),window._paq.push(["setSiteId",k]),A.requireConsent&&window._paq.push(["requireConsent"]),A.userId&&window._paq.push(["setUserId",A.userId]),A.enableLinkTracking&&window._paq.push(["enableLinkTracking"]),A.disableCookies&&window._paq.push(["disableCookies"]),A.requireCookieConsent&&window._paq.push(["requireCookieConsent"]),A.enableHeartBeatTimer&&window._paq.push(["enableHeartBeatTimer",A.heartBeatTimerInterval]),A.cookieDomain&&window._paq.push(["setCookieDomain",A.cookieDomain]),A.domains&&window._paq.push(["setDomains",A.domains]),A.preInitActions.forEach(function(K){return window._paq.push(K)}),o(V,A.crossOrigin).then(function(){return b()}).then(function(){return m(C,A)}).catch(function(K){if(K.target)return console.error("[vue-matomo] An error occurred trying to load ".concat(K.target.src,". ")+"If the file exists you may have an ad- or trackingblocker enabled.");console.error(K)})}}])})}(yp)),yp.exports}TA();const xA="/geolocation/assets/logo-autmel-BU08OabO.png",SA="/geolocation/assets/logo-deulair-BiDgV_t7.png",wA="/geolocation/assets/logo-lmo-DpmkYUEv.png",mr=(i,e)=>{const t=i.__vccOpts||i;for(const[n,s]of e)t[n]=s;return t},CA={};function EA(i,e){const t=yi("b-col"),n=yi("router-link"),s=yi("b-row"),r=yi("router-view"),o=yi("b-container");return Pt(),Bo(o,{name:"bContainer"},{default:Ci(()=>[ft(s,{style:{align:"center","text-align":"center"}},{default:Ci(()=>[ft(t,null,{default:Ci(()=>e[0]||(e[0]=[Xe("a",{href:"https://www.helloasso.com/associations/aut-mel",target:"_blank",rel:"noopener noreferrer"},[Xe("img",{alt:"Aut'MEL'",src:xA,height:"100px",style:{border:"2px"}})],-1)])),_:1}),ft(t,null,{default:Ci(()=>e[1]||(e[1]=[Xe("a",{href:"https://www.helloasso.com/associations/deul-air",target:"_blank",rel:"noopener noreferrer"},[Xe("img",{alt:"Deul'Air",src:SA,height:"100px",style:{border:"2px"}})],-1)])),_:1}),ft(t,null,{default:Ci(()=>e[2]||(e[2]=[Xe("a",{href:"https://www.helloasso.com/associations/lm-oxygene",target:"_blank",rel:"noopener noreferrer"},[Xe("img",{alt:"LM Oxygène",src:wA,height:"100px",style:{border:"2px"}})],-1)])),_:1}),ft(t,{name:"bNav",style:{"vertical-align":"top"},id:"router-links"},{default:Ci(()=>[Xe("nav",null,[ft(n,{class:"router-links",to:"/carte"},{default:Ci(()=>e[3]||(e[3]=[hi("Carte")])),_:1}),e[7]||(e[7]=hi("   ")),ft(n,{class:"router-links",to:"/stats"},{default:Ci(()=>e[4]||(e[4]=[hi("Statistiques")])),_:1}),e[8]||(e[8]=hi("   ")),ft(n,{class:"router-links",to:"/Information"},{default:Ci(()=>e[5]||(e[5]=[hi("Information")])),_:1}),e[9]||(e[9]=hi("   ")),ft(n,{class:"router-links",to:"/aideoVideo"},{default:Ci(()=>e[6]||(e[6]=[hi("Aide en video")])),_:1})])]),_:1})]),_:1}),ft(s,{name:"bView"},{default:Ci(()=>[ft(t,null,{default:Ci(()=>[ft(r)]),_:1})]),_:1})]),_:1})}const AA=mr(CA,[["render",EA],["__scopeId","data-v-24d080e9"]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ba=typeof document<"u";function Ex(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function DA(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&Ex(i.default)}const bt=Object.assign;function vp(i,e){const t={};for(const n in e){const s=e[n];t[n]=us(s)?s.map(i):i(s)}return t}const Hu=()=>{},us=Array.isArray,Ax=/#/g,PA=/&/g,kA=/\//g,IA=/=/g,LA=/\?/g,Dx=/\+/g,OA=/%5B/g,MA=/%5D/g,Px=/%5E/g,RA=/%60/g,kx=/%7B/g,NA=/%7C/g,Ix=/%7D/g,BA=/%20/g;function Gg(i){return encodeURI(""+i).replace(NA,"|").replace(OA,"[").replace(MA,"]")}function FA(i){return Gg(i).replace(kx,"{").replace(Ix,"}").replace(Px,"^")}function Hm(i){return Gg(i).replace(Dx,"%2B").replace(BA,"+").replace(Ax,"%23").replace(PA,"%26").replace(RA,"`").replace(kx,"{").replace(Ix,"}").replace(Px,"^")}function UA(i){return Hm(i).replace(IA,"%3D")}function jA(i){return Gg(i).replace(Ax,"%23").replace(LA,"%3F")}function zA(i){return i==null?"":jA(i).replace(kA,"%2F")}function rc(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const HA=/\/$/,$A=i=>i.replace(HA,"");function bp(i,e,t="/"){let n,s={},r="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(n=e.slice(0,u),r=e.slice(u+1,l>-1?l:e.length),s=i(r)),l>-1&&(n=n||e.slice(0,l),o=e.slice(l,e.length)),n=GA(n??e,t),{fullPath:n+(r&&"?")+r+o,path:n,query:s,hash:rc(o)}}function VA(i,e){const t=e.query?i(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function F0(i,e){return!e||!i.toLowerCase().startsWith(e.toLowerCase())?i:i.slice(e.length)||"/"}function qA(i,e,t){const n=e.matched.length-1,s=t.matched.length-1;return n>-1&&n===s&&al(e.matched[n],t.matched[s])&&Lx(e.params,t.params)&&i(e.query)===i(t.query)&&e.hash===t.hash}function al(i,e){return(i.aliasOf||i)===(e.aliasOf||e)}function Lx(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(!WA(i[t],e[t]))return!1;return!0}function WA(i,e){return us(i)?U0(i,e):us(e)?U0(e,i):i===e}function U0(i,e){return us(e)?i.length===e.length&&i.every((t,n)=>t===e[n]):i.length===1&&i[0]===e}function GA(i,e){if(i.startsWith("/"))return i;if(!i)return e;const t=e.split("/"),n=i.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let r=t.length-1,o,l;for(o=0;o<n.length;o++)if(l=n[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const Pr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var oc;(function(i){i.pop="pop",i.push="push"})(oc||(oc={}));var $u;(function(i){i.back="back",i.forward="forward",i.unknown=""})($u||($u={}));function XA(i){if(!i)if(Ba){const e=document.querySelector("base");i=e&&e.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),$A(i)}const KA=/^[^#]+#/;function ZA(i,e){return i.replace(KA,"#")+e}function YA(i,e){const t=document.documentElement.getBoundingClientRect(),n=i.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const Qd=()=>({left:window.scrollX,top:window.scrollY});function QA(i){let e;if("el"in i){const t=i.el,n=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=YA(s,i)}else e=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function j0(i,e){return(history.state?history.state.position-e:-1)+i}const $m=new Map;function JA(i,e){$m.set(i,e)}function eD(i){const e=$m.get(i);return $m.delete(i),e}let tD=()=>location.protocol+"//"+location.host;function Ox(i,e){const{pathname:t,search:n,hash:s}=e,r=i.indexOf("#");if(r>-1){let l=s.includes(i.slice(r))?i.slice(r).length:1,u=s.slice(l);return u[0]!=="/"&&(u="/"+u),F0(u,"")}return F0(t,i)+n+s}function iD(i,e,t,n){let s=[],r=[],o=null;const l=({state:b})=>{const T=Ox(i,location),C=t.value,x=e.value;let A=0;if(b){if(t.value=T,e.value=b,o&&o===C){o=null;return}A=x?b.position-x.position:0}else n(T);s.forEach(P=>{P(t.value,C,{delta:A,type:oc.pop,direction:A?A>0?$u.forward:$u.back:$u.unknown})})};function u(){o=t.value}function h(b){s.push(b);const T=()=>{const C=s.indexOf(b);C>-1&&s.splice(C,1)};return r.push(T),T}function d(){const{history:b}=window;b.state&&b.replaceState(bt({},b.state,{scroll:Qd()}),"")}function m(){for(const b of r)b();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:h,destroy:m}}function z0(i,e,t,n=!1,s=!1){return{back:i,current:e,forward:t,replaced:n,position:window.history.length,scroll:s?Qd():null}}function nD(i){const{history:e,location:t}=window,n={value:Ox(i,t)},s={value:e.state};s.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(u,h,d){const m=i.indexOf("#"),b=m>-1?(t.host&&document.querySelector("base")?i:i.slice(m))+u:tD()+i+u;try{e[d?"replaceState":"pushState"](h,"",b),s.value=h}catch(T){console.error(T),t[d?"replace":"assign"](b)}}function o(u,h){const d=bt({},e.state,z0(s.value.back,u,s.value.forward,!0),h,{position:s.value.position});r(u,d,!0),n.value=u}function l(u,h){const d=bt({},s.value,e.state,{forward:u,scroll:Qd()});r(d.current,d,!0);const m=bt({},z0(n.value,u,null),{position:d.position+1},h);r(u,m,!1),n.value=u}return{location:n,state:s,push:l,replace:o}}function sD(i){i=XA(i);const e=nD(i),t=iD(i,e.state,e.location,e.replace);function n(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=bt({location:"",base:i,go:n,createHref:ZA.bind(null,i)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function rD(i){return typeof i=="string"||i&&typeof i=="object"}function Mx(i){return typeof i=="string"||typeof i=="symbol"}const Rx=Symbol("");var H0;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(H0||(H0={}));function ll(i,e){return bt(new Error,{type:i,[Rx]:!0},e)}function Js(i,e){return i instanceof Error&&Rx in i&&(e==null||!!(i.type&e))}const $0="[^/]+?",oD={sensitive:!1,strict:!1,start:!0,end:!0},aD=/[.+*?^${}()[\]/\\]/g;function lD(i,e){const t=bt({},oD,e),n=[];let s=t.start?"^":"";const r=[];for(const h of i){const d=h.length?[]:[90];t.strict&&!h.length&&(s+="/");for(let m=0;m<h.length;m++){const b=h[m];let T=40+(t.sensitive?.25:0);if(b.type===0)m||(s+="/"),s+=b.value.replace(aD,"\\$&"),T+=40;else if(b.type===1){const{value:C,repeatable:x,optional:A,regexp:P}=b;r.push({name:C,repeatable:x,optional:A});const k=P||$0;if(k!==$0){T+=10;try{new RegExp(`(${k})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${C}" (${k}): `+F.message)}}let I=x?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;m||(I=A&&h.length<2?`(?:/${I})`:"/"+I),A&&(I+="?"),s+=I,T+=20,A&&(T+=-8),x&&(T+=-20),k===".*"&&(T+=-50)}d.push(T)}n.push(d)}if(t.strict&&t.end){const h=n.length-1;n[h][n[h].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function l(h){const d=h.match(o),m={};if(!d)return null;for(let b=1;b<d.length;b++){const T=d[b]||"",C=r[b-1];m[C.name]=T&&C.repeatable?T.split("/"):T}return m}function u(h){let d="",m=!1;for(const b of i){(!m||!d.endsWith("/"))&&(d+="/"),m=!1;for(const T of b)if(T.type===0)d+=T.value;else if(T.type===1){const{value:C,repeatable:x,optional:A}=T,P=C in h?h[C]:"";if(us(P)&&!x)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const k=us(P)?P.join("/"):P;if(!k)if(A)b.length<2&&(d.endsWith("/")?d=d.slice(0,-1):m=!0);else throw new Error(`Missing required param "${C}"`);d+=k}}return d||"/"}return{re:o,score:n,keys:r,parse:l,stringify:u}}function uD(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=e[t]-i[t];if(n)return n;t++}return i.length<e.length?i.length===1&&i[0]===80?-1:1:i.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Nx(i,e){let t=0;const n=i.score,s=e.score;for(;t<n.length&&t<s.length;){const r=uD(n[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-n.length)===1){if(V0(n))return 1;if(V0(s))return-1}return s.length-n.length}function V0(i){const e=i[i.length-1];return i.length>0&&e[e.length-1]<0}const cD={type:0,value:""},hD=/[a-zA-Z0-9_]/;function dD(i){if(!i)return[[]];if(i==="/")return[[cD]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function e(T){throw new Error(`ERR (${t})/"${h}": ${T}`)}let t=0,n=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let l=0,u,h="",d="";function m(){h&&(t===0?r.push({type:0,value:h}):t===1||t===2||t===3?(r.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),h="")}function b(){h+=u}for(;l<i.length;){if(u=i[l++],u==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:u==="/"?(h&&m(),o()):u===":"?(m(),t=1):b();break;case 4:b(),t=n;break;case 1:u==="("?t=2:hD.test(u)?b():(m(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:t=3:d+=u;break;case 3:m(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${h}"`),m(),o(),s}function fD(i,e,t){const n=lD(dD(i.path),t),s=bt(n,{record:i,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function pD(i,e){const t=[],n=new Map;e=X0({strict:!1,end:!0,sensitive:!1},e);function s(m){return n.get(m)}function r(m,b,T){const C=!T,x=W0(m);x.aliasOf=T&&T.record;const A=X0(e,m),P=[x];if("alias"in m){const F=typeof m.alias=="string"?[m.alias]:m.alias;for(const j of F)P.push(W0(bt({},x,{components:T?T.record.components:x.components,path:j,aliasOf:T?T.record:x})))}let k,I;for(const F of P){const{path:j}=F;if(b&&j[0]!=="/"){const V=b.record.path,U=V[V.length-1]==="/"?"":"/";F.path=b.record.path+(j&&U+j)}if(k=fD(F,b,A),T?T.alias.push(k):(I=I||k,I!==k&&I.alias.push(k),C&&m.name&&!G0(k)&&o(m.name)),Bx(k)&&u(k),x.children){const V=x.children;for(let U=0;U<V.length;U++)r(V[U],k,T&&T.children[U])}T=T||k}return I?()=>{o(I)}:Hu}function o(m){if(Mx(m)){const b=n.get(m);b&&(n.delete(m),t.splice(t.indexOf(b),1),b.children.forEach(o),b.alias.forEach(o))}else{const b=t.indexOf(m);b>-1&&(t.splice(b,1),m.record.name&&n.delete(m.record.name),m.children.forEach(o),m.alias.forEach(o))}}function l(){return t}function u(m){const b=_D(m,t);t.splice(b,0,m),m.record.name&&!G0(m)&&n.set(m.record.name,m)}function h(m,b){let T,C={},x,A;if("name"in m&&m.name){if(T=n.get(m.name),!T)throw ll(1,{location:m});A=T.record.name,C=bt(q0(b.params,T.keys.filter(I=>!I.optional).concat(T.parent?T.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),m.params&&q0(m.params,T.keys.map(I=>I.name))),x=T.stringify(C)}else if(m.path!=null)x=m.path,T=t.find(I=>I.re.test(x)),T&&(C=T.parse(x),A=T.record.name);else{if(T=b.name?n.get(b.name):t.find(I=>I.re.test(b.path)),!T)throw ll(1,{location:m,currentLocation:b});A=T.record.name,C=bt({},b.params,m.params),x=T.stringify(C)}const P=[];let k=T;for(;k;)P.unshift(k.record),k=k.parent;return{name:A,path:x,params:C,matched:P,meta:gD(P)}}i.forEach(m=>r(m));function d(){t.length=0,n.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function q0(i,e){const t={};for(const n of e)n in i&&(t[n]=i[n]);return t}function W0(i){const e={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:mD(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function mD(i){const e={},t=i.props||!1;if("component"in i)e.default=t;else for(const n in i.components)e[n]=typeof t=="object"?t[n]:t;return e}function G0(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function gD(i){return i.reduce((e,t)=>bt(e,t.meta),{})}function X0(i,e){const t={};for(const n in i)t[n]=n in e?e[n]:i[n];return t}function _D(i,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;Nx(i,e[r])<0?n=r:t=r+1}const s=yD(i);return s&&(n=e.lastIndexOf(s,n-1)),n}function yD(i){let e=i;for(;e=e.parent;)if(Bx(e)&&Nx(i,e)===0)return e}function Bx({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function vD(i){const e={};if(i===""||i==="?")return e;const n=(i[0]==="?"?i.slice(1):i).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Dx," "),o=r.indexOf("="),l=rc(o<0?r:r.slice(0,o)),u=o<0?null:rc(r.slice(o+1));if(l in e){let h=e[l];us(h)||(h=e[l]=[h]),h.push(u)}else e[l]=u}return e}function K0(i){let e="";for(let t in i){const n=i[t];if(t=UA(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(us(n)?n.map(r=>r&&Hm(r)):[n&&Hm(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function bD(i){const e={};for(const t in i){const n=i[t];n!==void 0&&(e[t]=us(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const TD=Symbol(""),Z0=Symbol(""),Xg=Symbol(""),Fx=Symbol(""),Vm=Symbol("");function fu(){let i=[];function e(n){return i.push(n),()=>{const s=i.indexOf(n);s>-1&&i.splice(s,1)}}function t(){i=[]}return{add:e,list:()=>i.slice(),reset:t}}function Nr(i,e,t,n,s,r=o=>o()){const o=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((l,u)=>{const h=b=>{b===!1?u(ll(4,{from:t,to:e})):b instanceof Error?u(b):rD(b)?u(ll(2,{from:e,to:b})):(o&&n.enterCallbacks[s]===o&&typeof b=="function"&&o.push(b),l())},d=r(()=>i.call(n&&n.instances[s],e,t,h));let m=Promise.resolve(d);i.length<3&&(m=m.then(h)),m.catch(b=>u(b))})}function Tp(i,e,t,n,s=r=>r()){const r=[];for(const o of i)for(const l in o.components){let u=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Ex(u)){const d=(u.__vccOpts||u)[e];d&&r.push(Nr(d,t,n,o,l,s))}else{let h=u();r.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const m=DA(d)?d.default:d;o.mods[l]=d,o.components[l]=m;const T=(m.__vccOpts||m)[e];return T&&Nr(T,t,n,o,l,s)()}))}}return r}function Y0(i){const e=pi(Xg),t=pi(Fx),n=Wi(()=>{const u=Va(i.to);return e.resolve(u)}),s=Wi(()=>{const{matched:u}=n.value,{length:h}=u,d=u[h-1],m=t.matched;if(!d||!m.length)return-1;const b=m.findIndex(al.bind(null,d));if(b>-1)return b;const T=Q0(u[h-2]);return h>1&&Q0(d)===T&&m[m.length-1].path!==T?m.findIndex(al.bind(null,u[h-2])):b}),r=Wi(()=>s.value>-1&&ED(t.params,n.value.params)),o=Wi(()=>s.value>-1&&s.value===t.matched.length-1&&Lx(t.params,n.value.params));function l(u={}){if(CD(u)){const h=e[Va(i.replace)?"replace":"push"](Va(i.to)).catch(Hu);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:n,href:Wi(()=>n.value.href),isActive:r,isExactActive:o,navigate:l}}function xD(i){return i.length===1?i[0]:i}const SD=pn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Y0,setup(i,{slots:e}){const t=bc(Y0(i)),{options:n}=pi(Xg),s=Wi(()=>({[J0(i.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[J0(i.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&xD(e.default(t));return i.custom?r:ls("a",{"aria-current":t.isExactActive?i.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),wD=SD;function CD(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const e=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return i.preventDefault&&i.preventDefault(),!0}}function ED(i,e){for(const t in e){const n=e[t],s=i[t];if(typeof n=="string"){if(n!==s)return!1}else if(!us(s)||s.length!==n.length||n.some((r,o)=>r!==s[o]))return!1}return!0}function Q0(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const J0=(i,e,t)=>i??e??t,AD=pn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:e,slots:t}){const n=pi(Vm),s=Wi(()=>i.route||n.value),r=pi(Z0,0),o=Wi(()=>{let h=Va(r);const{matched:d}=s.value;let m;for(;(m=d[h])&&!m.components;)h++;return h}),l=Wi(()=>s.value.matched[o.value]);Xi(Z0,Wi(()=>o.value+1)),Xi(TD,l),Xi(Vm,s);const u=li();return $o(()=>[u.value,l.value,i.name],([h,d,m],[b,T,C])=>{d&&(d.instances[m]=h,T&&T!==d&&h&&h===b&&(d.leaveGuards.size||(d.leaveGuards=T.leaveGuards),d.updateGuards.size||(d.updateGuards=T.updateGuards))),h&&d&&(!T||!al(d,T)||!b)&&(d.enterCallbacks[m]||[]).forEach(x=>x(h))},{flush:"post"}),()=>{const h=s.value,d=i.name,m=l.value,b=m&&m.components[d];if(!b)return ey(t.default,{Component:b,route:h});const T=m.props[d],C=T?T===!0?h.params:typeof T=="function"?T(h):T:null,A=ls(b,bt({},C,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(m.instances[d]=null)},ref:u}));return ey(t.default,{Component:A,route:h})||A}}});function ey(i,e){if(!i)return null;const t=i(e);return t.length===1?t[0]:t}const DD=AD;function PD(i){const e=pD(i.routes,i),t=i.parseQuery||vD,n=i.stringifyQuery||K0,s=i.history,r=fu(),o=fu(),l=fu(),u=Hg(Pr);let h=Pr;Ba&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=vp.bind(null,pe=>""+pe),m=vp.bind(null,zA),b=vp.bind(null,rc);function T(pe,Ce){let De,Ue;return Mx(pe)?(De=e.getRecordMatcher(pe),Ue=Ce):Ue=pe,e.addRoute(Ue,De)}function C(pe){const Ce=e.getRecordMatcher(pe);Ce&&e.removeRoute(Ce)}function x(){return e.getRoutes().map(pe=>pe.record)}function A(pe){return!!e.getRecordMatcher(pe)}function P(pe,Ce){if(Ce=bt({},Ce||u.value),typeof pe=="string"){const ie=bp(t,pe,Ce.path),be=e.resolve({path:ie.path},Ce),ye=s.createHref(ie.fullPath);return bt(ie,be,{params:b(be.params),hash:rc(ie.hash),redirectedFrom:void 0,href:ye})}let De;if(pe.path!=null)De=bt({},pe,{path:bp(t,pe.path,Ce.path).path});else{const ie=bt({},pe.params);for(const be in ie)ie[be]==null&&delete ie[be];De=bt({},pe,{params:m(ie)}),Ce.params=m(Ce.params)}const Ue=e.resolve(De,Ce),Qe=pe.hash||"";Ue.params=d(b(Ue.params));const $=VA(n,bt({},pe,{hash:FA(Qe),path:Ue.path})),G=s.createHref($);return bt({fullPath:$,hash:Qe,query:n===K0?bD(pe.query):pe.query||{}},Ue,{redirectedFrom:void 0,href:G})}function k(pe){return typeof pe=="string"?bp(t,pe,u.value.path):bt({},pe)}function I(pe,Ce){if(h!==pe)return ll(8,{from:Ce,to:pe})}function F(pe){return U(pe)}function j(pe){return F(bt(k(pe),{replace:!0}))}function V(pe){const Ce=pe.matched[pe.matched.length-1];if(Ce&&Ce.redirect){const{redirect:De}=Ce;let Ue=typeof De=="function"?De(pe):De;return typeof Ue=="string"&&(Ue=Ue.includes("?")||Ue.includes("#")?Ue=k(Ue):{path:Ue},Ue.params={}),bt({query:pe.query,hash:pe.hash,params:Ue.path!=null?{}:pe.params},Ue)}}function U(pe,Ce){const De=h=P(pe),Ue=u.value,Qe=pe.state,$=pe.force,G=pe.replace===!0,ie=V(De);if(ie)return U(bt(k(ie),{state:typeof ie=="object"?bt({},Qe,ie.state):Qe,force:$,replace:G}),Ce||De);const be=De;be.redirectedFrom=Ce;let ye;return!$&&qA(n,Ue,De)&&(ye=ll(16,{to:be,from:Ue}),de(Ue,Ue,!0,!1)),(ye?Promise.resolve(ye):R(be,Ue)).catch(xe=>Js(xe)?Js(xe,2)?xe:re(xe):ee(xe,be,Ue)).then(xe=>{if(xe){if(Js(xe,2))return U(bt({replace:G},k(xe.to),{state:typeof xe.to=="object"?bt({},Qe,xe.to.state):Qe,force:$}),Ce||be)}else xe=Q(be,Ue,!0,G,Qe);return Y(be,Ue,xe),xe})}function K(pe,Ce){const De=I(pe,Ce);return De?Promise.reject(De):Promise.resolve()}function D(pe){const Ce=Fe.values().next().value;return Ce&&typeof Ce.runWithContext=="function"?Ce.runWithContext(pe):pe()}function R(pe,Ce){let De;const[Ue,Qe,$]=kD(pe,Ce);De=Tp(Ue.reverse(),"beforeRouteLeave",pe,Ce);for(const ie of Ue)ie.leaveGuards.forEach(be=>{De.push(Nr(be,pe,Ce))});const G=K.bind(null,pe,Ce);return De.push(G),ze(De).then(()=>{De=[];for(const ie of r.list())De.push(Nr(ie,pe,Ce));return De.push(G),ze(De)}).then(()=>{De=Tp(Qe,"beforeRouteUpdate",pe,Ce);for(const ie of Qe)ie.updateGuards.forEach(be=>{De.push(Nr(be,pe,Ce))});return De.push(G),ze(De)}).then(()=>{De=[];for(const ie of $)if(ie.beforeEnter)if(us(ie.beforeEnter))for(const be of ie.beforeEnter)De.push(Nr(be,pe,Ce));else De.push(Nr(ie.beforeEnter,pe,Ce));return De.push(G),ze(De)}).then(()=>(pe.matched.forEach(ie=>ie.enterCallbacks={}),De=Tp($,"beforeRouteEnter",pe,Ce,D),De.push(G),ze(De))).then(()=>{De=[];for(const ie of o.list())De.push(Nr(ie,pe,Ce));return De.push(G),ze(De)}).catch(ie=>Js(ie,8)?ie:Promise.reject(ie))}function Y(pe,Ce,De){l.list().forEach(Ue=>D(()=>Ue(pe,Ce,De)))}function Q(pe,Ce,De,Ue,Qe){const $=I(pe,Ce);if($)return $;const G=Ce===Pr,ie=Ba?history.state:{};De&&(Ue||G?s.replace(pe.fullPath,bt({scroll:G&&ie&&ie.scroll},Qe)):s.push(pe.fullPath,Qe)),u.value=pe,de(pe,Ce,De,G),re()}let J;function ae(){J||(J=s.listen((pe,Ce,De)=>{if(!Ie.listening)return;const Ue=P(pe),Qe=V(Ue);if(Qe){U(bt(Qe,{replace:!0,force:!0}),Ue).catch(Hu);return}h=Ue;const $=u.value;Ba&&JA(j0($.fullPath,De.delta),Qd()),R(Ue,$).catch(G=>Js(G,12)?G:Js(G,2)?(U(bt(k(G.to),{force:!0}),Ue).then(ie=>{Js(ie,20)&&!De.delta&&De.type===oc.pop&&s.go(-1,!1)}).catch(Hu),Promise.reject()):(De.delta&&s.go(-De.delta,!1),ee(G,Ue,$))).then(G=>{G=G||Q(Ue,$,!1),G&&(De.delta&&!Js(G,8)?s.go(-De.delta,!1):De.type===oc.pop&&Js(G,20)&&s.go(-1,!1)),Y(Ue,$,G)}).catch(Hu)}))}let ce=fu(),le=fu(),ne;function ee(pe,Ce,De){re(pe);const Ue=le.list();return Ue.length?Ue.forEach(Qe=>Qe(pe,Ce,De)):console.error(pe),Promise.reject(pe)}function fe(){return ne&&u.value!==Pr?Promise.resolve():new Promise((pe,Ce)=>{ce.add([pe,Ce])})}function re(pe){return ne||(ne=!pe,ae(),ce.list().forEach(([Ce,De])=>pe?De(pe):Ce()),ce.reset()),pe}function de(pe,Ce,De,Ue){const{scrollBehavior:Qe}=i;if(!Ba||!Qe)return Promise.resolve();const $=!De&&eD(j0(pe.fullPath,0))||(Ue||!De)&&history.state&&history.state.scroll||null;return Ki().then(()=>Qe(pe,Ce,$)).then(G=>G&&QA(G)).catch(G=>ee(G,pe,Ce))}const Le=pe=>s.go(pe);let $e;const Fe=new Set,Ie={currentRoute:u,listening:!0,addRoute:T,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:x,resolve:P,options:i,push:F,replace:j,go:Le,back:()=>Le(-1),forward:()=>Le(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:le.add,isReady:fe,install(pe){const Ce=this;pe.component("RouterLink",wD),pe.component("RouterView",DD),pe.config.globalProperties.$router=Ce,Object.defineProperty(pe.config.globalProperties,"$route",{enumerable:!0,get:()=>Va(u)}),Ba&&!$e&&u.value===Pr&&($e=!0,F(s.location).catch(Qe=>{}));const De={};for(const Qe in Pr)Object.defineProperty(De,Qe,{get:()=>u.value[Qe],enumerable:!0});pe.provide(Xg,Ce),pe.provide(Fx,HT(De)),pe.provide(Vm,u);const Ue=pe.unmount;Fe.add(pe),pe.unmount=function(){Fe.delete(pe),Fe.size<1&&(h=Pr,J&&J(),J=null,u.value=Pr,$e=!1,ne=!1),Ue()}}};function ze(pe){return pe.reduce((Ce,De)=>Ce.then(()=>D(De)),Promise.resolve())}return Ie}function kD(i,e){const t=[],n=[],s=[],r=Math.max(e.matched.length,i.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(i.matched.find(h=>al(h,l))?n.push(l):t.push(l));const u=i.matched[o];u&&(e.matched.find(h=>al(h,u))||s.push(u))}return[t,n,s]}const ID="modulepreload",LD=function(i){return"/geolocation/"+i},ty={},cn=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(t.map(u=>{if(u=LD(u),u in ty)return;ty[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":ID,h||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((b,T)=>{m.addEventListener("load",b),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})},iy=(i,e)=>{for(const t of Object.keys(e))i.on(t,e[t])},Ux=i=>{for(const e of Object.keys(i)){const t=i[e];t&&Br(t.cancel)&&t.cancel()}},OD=i=>!i||typeof i.charAt!="function"?i:i.charAt(0).toUpperCase()+i.slice(1),Br=i=>typeof i=="function",Hs=(i,e,t)=>{for(const n in t){const s="set"+OD(n);i[s]?$o(()=>t[n],(r,o)=>{i[s](r,o)}):e[s]&&$o(()=>t[n],r=>{e[s](r)})}},Zi=(i,e,t={})=>{const n={...t};for(const s in i){const r=e[s],o=i[s];r&&(r&&r.custom===!0||o!==void 0&&(n[s]=o))}return n},ra=i=>{const e={},t={};for(const n in i)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const s=n.slice(2).toLocaleLowerCase();e[s]=i[n]}else t[n]=i[n];return{listeners:e,attrs:t}},MD=async i=>{const e=await Promise.all([cn(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),cn(()=>import("./marker-icon-C2eJqgqv.js"),[]),cn(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete i.Default.prototype._getIconUrl,i.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},vh=i=>{const e=li((...n)=>console.warn(`Method ${i} has been invoked without being replaced`)),t=(...n)=>e.value(...n);return t.wrapped=e,Xi(i,t),t},bh=(i,e)=>i.wrapped.value=e,zn=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,hn=i=>{const e=pi(i);if(e===void 0)throw new Error(`Attempt to inject ${i.description} before it was provided.`);return e},$s=Symbol("useGlobalLeaflet"),eo=Symbol("addLayer"),Jd=Symbol("removeLayer"),Kg=Symbol("registerControl"),jx=Symbol("registerLayerControl"),zx=Symbol("canSetParentHtml"),Hx=Symbol("setParentHtml"),$x=Symbol("setIcon"),RD=Symbol("bindPopup"),ND=Symbol("bindTooltip"),BD=Symbol("unbindPopup"),FD=Symbol("unbindTooltip"),wc={options:{type:Object,default:()=>({}),custom:!0}},ef=i=>({options:i.options,methods:{}}),xl={...wc,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},tf=(i,e,t)=>{const n=hn(eo),s=hn(Jd),{options:r,methods:o}=ef(i),l=Zi(i,xl,r),u=()=>n({leafletObject:e.value}),h=()=>s({leafletObject:e.value}),d={...o,setAttribution(m){h(),e.value.options.attribution=m,i.visible&&u()},setName(){h(),i.visible&&u()},setLayerType(){h(),i.visible&&u()},setVisible(m){e.value&&(m?u():h())},bindPopup(m){if(!e.value||!Br(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(m)},bindTooltip(m){if(!e.value||!Br(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(m)},unbindTooltip(){e.value&&(Br(e.value.closeTooltip)&&e.value.closeTooltip(),Br(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(Br(e.value.closePopup)&&e.value.closePopup(),Br(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(m){t.emit("update:visible",m)}};return Xi(RD,d.bindPopup),Xi(ND,d.bindTooltip),Xi(BD,d.unbindPopup),Xi(FD,d.unbindTooltip),Tl(()=>{d.unbindPopup(),d.unbindTooltip(),h()}),{options:l,methods:d}},Zg=(i,e)=>{if(i&&e.default)return ls("div",{style:{display:"none"}},e.default())},Vx={...xl,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},UD=(i,e,t)=>{const{options:n,methods:s}=tf(i,e,t);return{options:Zi(i,Vx,n),methods:s}},Yg={...Vx,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},jD=(i,e,t)=>{const{options:n,methods:s}=UD(i,e,t),r=Zi(i,Yg,n),o=hn(Jd),l={...s,setStroke(u){e.value.setStyle({stroke:u})},setColor(u){e.value.setStyle({color:u})},setWeight(u){e.value.setStyle({weight:u})},setOpacity(u){e.value.setStyle({opacity:u})},setLineCap(u){e.value.setStyle({lineCap:u})},setLineJoin(u){e.value.setStyle({lineJoin:u})},setDashArray(u){e.value.setStyle({dashArray:u})},setDashOffset(u){e.value.setStyle({dashOffset:u})},setFill(u){e.value.setStyle({fill:u})},setFillColor(u){e.value.setStyle({fillColor:u})},setFillOpacity(u){e.value.setStyle({fillOpacity:u})},setFillRule(u){e.value.setStyle({fillRule:u})},setClassName(u){e.value.setStyle({className:u})}};return Xd(()=>{o({leafletObject:e.value})}),{options:r,methods:l}},zD={...Yg,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...zD});const Sl={...wc,position:{type:String}},Qg=(i,e)=>{const{options:t,methods:n}=ef(i),s=Zi(i,Sl,t),r={...n,setPosition(o){e.value&&e.value.setPosition(o)}};return Tl(()=>{e.value&&e.value.remove()}),{options:s,methods:r}},HD=i=>i.default?ls("div",{ref:"root"},i.default()):null,$D=pn({name:"LControl",props:{...Sl,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(i,e){const t=li(),n=li(),s=pi($s),r=hn(Kg),{options:o,methods:l}=Qg(i,t);return Xn(async()=>{const{Control:u,DomEvent:h}=s?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),d=u.extend({onAdd(){return n.value}});t.value=zs(new d(o)),Hs(l,t.value,i),r({leafletObject:t.value}),i.disableClickPropagation&&n.value&&h.disableClickPropagation(n.value),i.disableScrollPropagation&&n.value&&h.disableScrollPropagation(n.value),Ki(()=>e.emit("ready",t.value))}),{root:n,leafletObject:t}},render(){return HD(this.$slots)}});({...Sl});const qx={...Sl,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},VD=(i,e)=>{const{options:t}=Qg(i,e);return{options:Zi(i,qx,t),methods:{addLayer(n){n.layerType==="base"?e.value.addBaseLayer(n.leafletObject,n.name):n.layerType==="overlay"&&e.value.addOverlay(n.leafletObject,n.name)},removeLayer(n){e.value.removeLayer(n.leafletObject)}}}},qD=pn({name:"LControlLayers",props:qx,setup(i,e){const t=li(),n=pi($s),s=hn(jx),{options:r,methods:o}=VD(i,t);return Xn(async()=>{const{control:l}=n?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=zs(l.layers(void 0,void 0,r)),Hs(o,t.value,i),s({...i,...o,leafletObject:t.value}),Ki(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),Wx={...Sl,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},WD=(i,e)=>{const{options:t,methods:n}=Qg(i,e);return{options:Zi(i,Wx,t),methods:n}},GD=pn({name:"LControlScale",props:Wx,setup(i,e){const t=li(),n=pi($s),s=hn(Kg),{options:r,methods:o}=WD(i,t);return Xn(async()=>{const{control:l}=n?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=zs(l.scale(r)),Hs(o,t.value,i),s({leafletObject:t.value}),Ki(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});({...Sl});const Jg={...xl},XD=(i,e,t)=>{const{options:n,methods:s}=tf(i,e,t),r=Zi(i,Jg,n),o={...s,addLayer(l){e.value.addLayer(l.leafletObject)},removeLayer(l){e.value.removeLayer(l.leafletObject)}};return Xi(eo,o.addLayer),Xi(Jd,o.removeLayer),{options:r,methods:o}};({...Jg});const Gx={...Jg,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},KD=(i,e,t)=>{const{options:n,methods:s}=XD(i,e,t),r=Zi(i,Gx,n);Object.prototype.hasOwnProperty.call(i,"optionsStyle")&&(r.style=i.optionsStyle);const o={...s,setGeojson(l){e.value.clearLayers(),e.value.addData(l)},setOptionsStyle(l){e.value.setStyle(l)},getGeoJSONData(){return e.value.toGeoJSON()},getBounds(){return e.value.getBounds()}};return{options:r,methods:o}},ZD=pn({props:Gx,setup(i,e){const t=li(),n=li(!1),s=pi($s),r=hn(eo),{methods:o,options:l}=KD(i,t,e);return Xn(async()=>{const{geoJSON:u}=s?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=zs(u(i.geojson,l));const{listeners:h}=ra(e.attrs);t.value.on(h),Hs(o,t.value,i),r({...i,...o,leafletObject:t.value}),n.value=!0,Ki(()=>e.emit("ready",t.value))}),{ready:n,leafletObject:t}},render(){return Zg(this.ready,this.$slots)}}),e_={...xl,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Xx=(i,e,t)=>{const{options:n,methods:s}=tf(i,e,t),r=Zi(i,e_,n),o={...s,setTileComponent(){var l;(l=e.value)==null||l.redraw()}};return Tl(()=>{e.value.off()}),{options:r,methods:o}},YD=(i,e,t,n)=>i.extend({initialize(s){this.tileComponents={},this.on("tileunload",this._unloadTile),t.setOptions(this,s)},createTile(s){const r=this._tileCoordsToKey(s);this.tileComponents[r]=e.create("div");const o=ls({setup:n,props:["coords"]},{coords:s});return gA(o,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(s){const r=this._tileCoordsToKey(s.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});({...e_});const ny={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},QD=pn({name:"LIcon",props:{...ny,...wc},setup(i,e){const t=li(),n=pi($s),s=hn(zx),r=hn(Hx),o=hn($x);let l,u,h,d,m;const b=(A,P,k)=>{const I=A&&A.innerHTML;if(!P){k&&m&&s()&&r(I);return}const{listeners:F}=ra(e.attrs);m&&u(m,F);const{options:j}=ef(i),V=Zi(i,ny,j);I&&(V.html=I),m=V.html?h(V):d(V),l(m,F),o(m)},T=()=>{Ki(()=>b(t.value,!0,!1))},C=()=>{Ki(()=>b(t.value,!1,!0))},x={setIconUrl:T,setIconRetinaUrl:T,setIconSize:T,setIconAnchor:T,setPopupAnchor:T,setTooltipAnchor:T,setShadowUrl:T,setShadowRetinaUrl:T,setShadowAnchor:T,setBgPos:T,setClassName:T,setHtml:T};return Xn(async()=>{const{DomEvent:A,divIcon:P,icon:k}=n?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);l=A.on,u=A.off,h=P,d=k,Hs(x,{},i),new MutationObserver(C).observe(t.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),T()}),{root:t}},render(){const i=this.$slots.default?this.$slots.default():void 0;return ls("div",{ref:"root"},i)}});({...xl});function Kx(i,e,t){var n,s,r;e===void 0&&(e=50),t===void 0&&(t={});var o=(n=t.isImmediate)!=null&&n,l=(s=t.callback)!=null&&s,u=t.maxWait,h=Date.now(),d=[];function m(){if(u!==void 0){var T=Date.now()-h;if(T+e>=u)return u-T}return e}var b=function(){var T=[].slice.call(arguments),C=this;return new Promise(function(x,A){var P=o&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,h=Date.now(),!o){var I=i.apply(C,T);l&&l(I),d.forEach(function(F){return(0,F.resolve)(I)}),d=[]}},m()),P){var k=i.apply(C,T);return l&&l(k),x(k)}d.push({resolve:x,reject:A})})};return b.cancel=function(T){r!==void 0&&clearTimeout(r),d.forEach(function(C){return(0,C.reject)(T)}),d=[]},b}const sy={...wc,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},JD=pn({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:sy,setup(i,e){const t=li(),n=bc({ready:!1,layersToAdd:[],layersInControl:[]}),{options:s}=ef(i),r=Zi(i,sy,s),{listeners:o,attrs:l}=ra(e.attrs),u=vh(eo),h=vh(Jd),d=vh(Kg),m=vh(jx);Xi($s,i.useGlobalLeaflet);const b=Wi(()=>{const P={};return i.noBlockingAnimations&&(P.animate=!1),P}),T=Wi(()=>{const P=b.value;return i.padding&&(P.padding=i.padding),i.paddingTopLeft&&(P.paddingTopLeft=i.paddingTopLeft),i.paddingBottomRight&&(P.paddingBottomRight=i.paddingBottomRight),P}),C={moveend:Kx(P=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(P){const k=n.layersInControl.find(I=>I.name===P.name);k&&k.updateVisibleProp(!0)},overlayremove(P){const k=n.layersInControl.find(I=>I.name===P.name);k&&k.updateVisibleProp(!1)}};Xn(async()=>{i.useGlobalLeaflet&&(zn.L=zn.L||await cn(()=>Promise.resolve().then(()=>fP),void 0));const{map:P,CRS:k,Icon:I,latLngBounds:F,latLng:j,stamp:V}=i.useGlobalLeaflet?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(D){console.error(`The following error occurred running the provided beforeMapMount hook ${D.message}`)}await MD(I);const U=typeof r.crs=="string"?k[r.crs]:r.crs;r.crs=U||k.EPSG3857;const K={addLayer(D){D.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(D):n.layersInControl.find(R=>V(R.leafletObject)===V(D.leafletObject))||(n.layerControl.addLayer(D),n.layersInControl.push(D))),D.visible!==!1&&n.leafletRef.addLayer(D.leafletObject)},removeLayer(D){D.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(R=>R.name!==D.name):(n.layerControl.removeLayer(D.leafletObject),n.layersInControl=n.layersInControl.filter(R=>V(R.leafletObject)!==V(D.leafletObject)))),n.leafletRef.removeLayer(D.leafletObject)},registerLayerControl(D){n.layerControl=D,n.layersToAdd.forEach(R=>{n.layerControl.addLayer(R)}),n.layersToAdd=[],d(D)},registerControl(D){n.leafletRef.addControl(D.leafletObject)},setZoom(D){const R=n.leafletRef.getZoom();D!==R&&n.leafletRef.setZoom(D,b.value)},setCrs(D){const R=n.leafletRef.getBounds();n.leafletRef.options.crs=D,n.leafletRef.fitBounds(R,{animate:!1,padding:[0,0]})},fitBounds(D){n.leafletRef.fitBounds(D,T.value)},setBounds(D){if(!D)return;const R=F(D);R.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(R,0)&&(n.lastSetBounds=R,n.leafletRef.fitBounds(R))},setCenter(D){if(D==null)return;const R=j(D),Y=n.lastSetCenter||n.leafletRef.getCenter();(Y.lat!==R.lat||Y.lng!==R.lng)&&(n.lastSetCenter=R,n.leafletRef.panTo(R,b.value))}};bh(u,K.addLayer),bh(h,K.removeLayer),bh(d,K.registerControl),bh(m,K.registerLayerControl),n.leafletRef=zs(P(t.value,r)),Hs(K,n.leafletRef,i),iy(n.leafletRef,C),iy(n.leafletRef,o),n.ready=!0,Ki(()=>e.emit("ready",n.leafletRef))}),Xd(()=>{Ux(C),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const x=Wi(()=>n.leafletRef),A=Wi(()=>n.ready);return{root:t,ready:A,leafletObject:x,attrs:l}},render({attrs:i}){return i.style||(i.style={}),i.style.width||(i.style.width="100%"),i.style.height||(i.style.height="100%"),ls("div",{...i,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),eP=["Symbol(Comment)","Symbol(Text)"],tP=["LTooltip","LPopup"],Zx={...xl,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},iP=(i,e,t)=>{const{options:n,methods:s}=tf(i,e,t),r=Zi(i,Zx,n),o={...s,setDraggable(l){e.value.dragging&&(l?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(l){t.emit("update:latLng",l.latlng),t.emit("update:lat-lng",l.latlng)},setLatLng(l){if(l!=null&&e.value){const u=e.value.getLatLng();(!u||!u.equals(l))&&e.value.setLatLng(l)}}};return{options:r,methods:o}},nP=(i,e)=>{const t=e.slots.default&&e.slots.default();return t&&t.length&&t.some(sP)};function sP(i){return!(eP.includes(i.type.toString())||tP.includes(i.type.name))}const rP=pn({name:"LMarker",props:Zx,setup(i,e){const t=li(),n=li(!1),s=pi($s),r=hn(eo);Xi(zx,()=>{var h;return!!((h=t.value)!=null&&h.getElement())}),Xi(Hx,h=>{var d,m;const b=Br((d=t.value)==null?void 0:d.getElement)&&((m=t.value)==null?void 0:m.getElement());b&&(b.innerHTML=h)}),Xi($x,h=>{var d;return((d=t.value)==null?void 0:d.setIcon)&&t.value.setIcon(h)});const{options:o,methods:l}=iP(i,t,e),u={moveHandler:Kx(l.latLngSync)};return Xn(async()=>{const{marker:h,divIcon:d}=s?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);nP(o,e)&&(o.icon=d({className:""})),t.value=zs(h(i.latLng,o));const{listeners:m}=ra(e.attrs);t.value.on(m),t.value.on("move",u.moveHandler),Hs(l,t.value,i),r({...i,...l,leafletObject:t.value}),n.value=!0,Ki(()=>e.emit("ready",t.value))}),Xd(()=>Ux(u)),{ready:n,leafletObject:t}},render(){return Zg(this.ready,this.$slots)}}),Yx={...Yg,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},oP=(i,e,t)=>{const{options:n,methods:s}=jD(i,e,t),r=Zi(i,Yx,n),o={...s,setSmoothFactor(l){e.value.setStyle({smoothFactor:l})},setNoClip(l){e.value.setStyle({noClip:l})},addLatLng(l){e.value.addLatLng(l)}};return{options:r,methods:o}},ud={...Yx},aP=(i,e,t)=>{const{options:n,methods:s}=oP(i,e,t),r=Zi(i,ud,n),o={...s,toGeoJSON(l){return e.value.toGeoJSON(l)}};return{options:r,methods:o}},lP=pn({name:"LPolygon",props:ud,setup(i,e){const t=li(),n=li(!1),s=pi($s),r=hn(eo),{options:o,methods:l}=aP(i,t,e);return Xn(async()=>{const{polygon:u}=s?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=zs(u(i.latLngs,o));const{listeners:h}=ra(e.attrs);t.value.on(h),Hs(l,t.value,i),r({...i,...l,leafletObject:t.value}),n.value=!0,Ki(()=>e.emit("ready",t.value))}),{ready:n,leafletObject:t}},render(){return Zg(this.ready,this.$slots)}}),Qx={...wc,content:{type:String,default:null}};({...Qx});({...ud,latLngs:{...ud.latLngs}});const t_={...e_,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:i=>typeof i=="string"?!0:Array.isArray(i)?i.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},uP=(i,e,t)=>{const{options:n,methods:s}=Xx(i,e,t),r=Zi(i,t_,n),o={...s};return{options:r,methods:o}},cP=pn({props:t_,setup(i,e){const t=li(),n=pi($s),s=hn(eo),{options:r,methods:o}=uP(i,t,e);return Xn(async()=>{const{tileLayer:l}=n?zn.L:await cn(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=zs(l(i.url,r));const{listeners:u}=ra(e.attrs);t.value.on(u),Hs(o,t.value,i),s({...i,...o,leafletObject:t.value}),Ki(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});({...Qx});({...t_});var Au={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var hP=Au.exports,ry;function dP(){return ry||(ry=1,function(i,e){(function(t,n){n(e)})(hP,function(t){var n="1.9.4";function s(a){var c,p,v,w;for(p=1,v=arguments.length;p<v;p++){w=arguments[p];for(c in w)a[c]=w[c]}return a}var r=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function o(a,c){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var v=p.call(arguments,2);return function(){return a.apply(c,v.length?v.concat(p.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,p){var v,w,M,X;return X=function(){v=!1,w&&(M.apply(p,w),w=!1)},M=function(){v?w=arguments:(a.apply(p,arguments),setTimeout(X,c),v=!0)},M}function d(a,c,p){var v=c[1],w=c[0],M=v-w;return a===v&&p?a:((a-w)%M+M)%M+w}function m(){return!1}function b(a,c){if(c===!1)return a;var p=Math.pow(10,c===void 0?6:c);return Math.round(a*p)/p}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function C(a){return T(a).split(/\s+/)}function x(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?r(a.options):{});for(var p in c)a.options[p]=c[p];return a.options}function A(a,c,p){var v=[];for(var w in a)v.push(encodeURIComponent(p?w.toUpperCase():w)+"="+encodeURIComponent(a[w]));return(!c||c.indexOf("?")===-1?"?":"&")+v.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function k(a,c){return a.replace(P,function(p,v){var w=c[v];if(w===void 0)throw new Error("No value provided for variable "+p);return typeof w=="function"&&(w=w(c)),w})}var I=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function F(a,c){for(var p=0;p<a.length;p++)if(a[p]===c)return p;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var U=0;function K(a){var c=+new Date,p=Math.max(0,16-(c-U));return U=c+p,window.setTimeout(a,p)}var D=window.requestAnimationFrame||V("RequestAnimationFrame")||K,R=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Y(a,c,p){if(p&&D===K)a.call(c);else return D.call(window,o(a,c))}function Q(a){a&&R.call(window,a)}var J={__proto__:null,extend:s,create:r,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:d,falseFn:m,formatNum:b,trim:T,splitWords:C,setOptions:x,getParamString:A,template:k,isArray:I,indexOf:F,emptyImageUrl:j,requestFn:D,cancelFn:R,requestAnimFrame:Y,cancelAnimFrame:Q};function ae(){}ae.extend=function(a){var c=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,v=r(p);v.constructor=c,c.prototype=v;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return a.statics&&s(c,a.statics),a.includes&&(ce(a.includes),s.apply(null,[v].concat(a.includes))),s(v,a),delete v.statics,delete v.includes,v.options&&(v.options=p.options?r(p.options):{},s(v.options,a.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,X=v._initHooks.length;M<X;M++)v._initHooks[M].call(this)}},c},ae.include=function(a){var c=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},ae.mergeOptions=function(a){return s(this.prototype.options,a),this},ae.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ce(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=I(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(a,c,p){if(typeof a=="object")for(var v in a)this._on(v,a[v],c);else{a=C(a);for(var w=0,M=a.length;w<M;w++)this._on(a[w],c,p)}return this},off:function(a,c,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var v in a)this._off(v,a[v],c);else{a=C(a);for(var w=arguments.length===1,M=0,X=a.length;M<X;M++)w?this._off(a[M]):this._off(a[M],c,p)}return this},_on:function(a,c,p,v){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,p)===!1){p===this&&(p=void 0);var w={fn:c,ctx:p};v&&(w.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(w)}},_off:function(a,c,p){var v,w,M;if(this._events&&(v=this._events[a],!!v)){if(arguments.length===1){if(this._firingCount)for(w=0,M=v.length;w<M;w++)v[w].fn=m;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var X=this._listens(a,c,p);if(X!==!1){var se=v[X];this._firingCount&&(se.fn=m,this._events[a]=v=v.slice()),v.splice(X,1)}}},fire:function(a,c,p){if(!this.listens(a,p))return this;var v=s({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[a];if(w){this._firingCount=this._firingCount+1||1;for(var M=0,X=w.length;M<X;M++){var se=w[M],ue=se.fn;se.once&&this.off(a,ue,se.ctx),ue.call(se.ctx||this,v)}this._firingCount--}}return p&&this._propagateEvent(v),this},listens:function(a,c,p,v){typeof a!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(v=!!c,w=void 0,p=void 0);var M=this._events&&this._events[a];if(M&&M.length&&this._listens(a,w,p)!==!1)return!0;if(v){for(var X in this._eventParents)if(this._eventParents[X].listens(a,c,p,v))return!0}return!1},_listens:function(a,c,p){if(!this._events)return!1;var v=this._events[a]||[];if(!c)return!!v.length;p===this&&(p=void 0);for(var w=0,M=v.length;w<M;w++)if(v[w].fn===c&&v[w].ctx===p)return w;return!1},once:function(a,c,p){if(typeof a=="object")for(var v in a)this._on(v,a[v],c,!0);else{a=C(a);for(var w=0,M=a.length;w<M;w++)this._on(a[w],c,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var ne=ae.extend(le);function ee(a,c,p){this.x=p?Math.round(a):a,this.y=p?Math.round(c):c}var fe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(a){return this.clone()._add(re(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(re(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ee(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ee(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(a){a=re(a);var c=a.x-this.x,p=a.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(a){return a=re(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=re(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function re(a,c,p){return a instanceof ee?a:I(a)?new ee(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ee(a.x,a.y):new ee(a,c,p)}function de(a,c){if(a)for(var p=c?[a,c]:a,v=0,w=p.length;v<w;v++)this.extend(p[v])}de.prototype={extend:function(a){var c,p;if(!a)return this;if(a instanceof ee||typeof a[0]=="number"||"x"in a)c=p=re(a);else if(a=Le(a),c=a.min,p=a.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,p;return typeof a[0]=="number"||a instanceof ee?a=re(a):a=Le(a),a instanceof de?(c=a.min,p=a.max):c=p=a,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=Le(a);var c=this.min,p=this.max,v=a.min,w=a.max,M=w.x>=c.x&&v.x<=p.x,X=w.y>=c.y&&v.y<=p.y;return M&&X},overlaps:function(a){a=Le(a);var c=this.min,p=this.max,v=a.min,w=a.max,M=w.x>c.x&&v.x<p.x,X=w.y>c.y&&v.y<p.y;return M&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,p=this.max,v=Math.abs(c.x-p.x)*a,w=Math.abs(c.y-p.y)*a;return Le(re(c.x-v,c.y-w),re(p.x+v,p.y+w))},equals:function(a){return a?(a=Le(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Le(a,c){return!a||a instanceof de?a:new de(a,c)}function $e(a,c){if(a)for(var p=c?[a,c]:a,v=0,w=p.length;v<w;v++)this.extend(p[v])}$e.prototype={extend:function(a){var c=this._southWest,p=this._northEast,v,w;if(a instanceof Ie)v=a,w=a;else if(a instanceof $e){if(v=a._southWest,w=a._northEast,!v||!w)return this}else return a?this.extend(ze(a)||Fe(a)):this;return!c&&!p?(this._southWest=new Ie(v.lat,v.lng),this._northEast=new Ie(w.lat,w.lng)):(c.lat=Math.min(v.lat,c.lat),c.lng=Math.min(v.lng,c.lng),p.lat=Math.max(w.lat,p.lat),p.lng=Math.max(w.lng,p.lng)),this},pad:function(a){var c=this._southWest,p=this._northEast,v=Math.abs(c.lat-p.lat)*a,w=Math.abs(c.lng-p.lng)*a;return new $e(new Ie(c.lat-v,c.lng-w),new Ie(p.lat+v,p.lng+w))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Ie||"lat"in a?a=ze(a):a=Fe(a);var c=this._southWest,p=this._northEast,v,w;return a instanceof $e?(v=a.getSouthWest(),w=a.getNorthEast()):v=w=a,v.lat>=c.lat&&w.lat<=p.lat&&v.lng>=c.lng&&w.lng<=p.lng},intersects:function(a){a=Fe(a);var c=this._southWest,p=this._northEast,v=a.getSouthWest(),w=a.getNorthEast(),M=w.lat>=c.lat&&v.lat<=p.lat,X=w.lng>=c.lng&&v.lng<=p.lng;return M&&X},overlaps:function(a){a=Fe(a);var c=this._southWest,p=this._northEast,v=a.getSouthWest(),w=a.getNorthEast(),M=w.lat>c.lat&&v.lat<p.lat,X=w.lng>c.lng&&v.lng<p.lng;return M&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=Fe(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(a,c){return a instanceof $e?a:new $e(a,c)}function Ie(a,c,p){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,p!==void 0&&(this.alt=+p)}Ie.prototype={equals:function(a,c){if(!a)return!1;a=ze(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+b(this.lat,a)+", "+b(this.lng,a)+")"},distanceTo:function(a){return Ce.distance(this,ze(a))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,p=c/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function ze(a,c,p){return a instanceof Ie?a:I(a)&&typeof a[0]!="object"?a.length===3?new Ie(a[0],a[1],a[2]):a.length===2?new Ie(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Ie(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new Ie(a,c,p)}var pe={latLngToPoint:function(a,c){var p=this.projection.project(a),v=this.scale(c);return this.transformation._transform(p,v)},pointToLatLng:function(a,c){var p=this.scale(c),v=this.transformation.untransform(a,p);return this.projection.unproject(v)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(a),v=this.transformation.transform(c.min,p),w=this.transformation.transform(c.max,p);return new de(v,w)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?d(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?d(a.lat,this.wrapLat,!0):a.lat,v=a.alt;return new Ie(p,c,v)},wrapLatLngBounds:function(a){var c=a.getCenter(),p=this.wrapLatLng(c),v=c.lat-p.lat,w=c.lng-p.lng;if(v===0&&w===0)return a;var M=a.getSouthWest(),X=a.getNorthEast(),se=new Ie(M.lat-v,M.lng-w),ue=new Ie(X.lat-v,X.lng-w);return new $e(se,ue)}},Ce=s({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var p=Math.PI/180,v=a.lat*p,w=c.lat*p,M=Math.sin((c.lat-a.lat)*p/2),X=Math.sin((c.lng-a.lng)*p/2),se=M*M+Math.cos(v)*Math.cos(w)*X*X,ue=2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se));return this.R*ue}}),De=6378137,Ue={R:De,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,p=this.MAX_LATITUDE,v=Math.max(Math.min(p,a.lat),-p),w=Math.sin(v*c);return new ee(this.R*a.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(a){var c=180/Math.PI;return new Ie((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=De*Math.PI;return new de([-a,-a],[a,a])}()};function Qe(a,c,p,v){if(I(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=p,this._d=v}Qe.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new ee((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function $(a,c,p,v){return new Qe(a,c,p,v)}var G=s({},Ce,{code:"EPSG:3857",projection:Ue,transformation:function(){var a=.5/(Math.PI*Ue.R);return $(a,.5,-a,.5)}()}),ie=s({},G,{code:"EPSG:900913"});function be(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function ye(a,c){var p="",v,w,M,X,se,ue;for(v=0,M=a.length;v<M;v++){for(se=a[v],w=0,X=se.length;w<X;w++)ue=se[w],p+=(w?"L":"M")+ue.x+" "+ue.y;p+=c?Re.svg?"z":"x":""}return p||"M0 0"}var xe=document.documentElement.style,Pe="ActiveXObject"in window,Ee=Pe&&!document.addEventListener,Se="msLaunchUri"in navigator&&!("documentMode"in document),ve=qt("webkit"),je=qt("android"),Oe=qt("android 2")||qt("android 3"),Ve=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qe=je&&qt("Google")&&Ve<537&&!("AudioNode"in window),Je=!!window.opera,lt=!Se&&qt("chrome"),ut=qt("gecko")&&!ve&&!Je&&!Pe,Qt=!lt&&qt("safari"),Ht=qt("phantom"),Jt="OTransition"in xe,rt=navigator.platform.indexOf("Win")===0,mn=Pe&&"transition"in xe,Yi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,ei="MozPerspective"in xe,mi=!window.L_DISABLE_3D&&(mn||Yi||ei)&&!Jt&&!Ht,Ti=typeof orientation<"u"||qt("mobile"),aa=Ti&&ve,io=Ti&&Yi,no=!window.PointerEvent&&window.MSPointerEvent,Rl=!!(window.PointerEvent||no),O="ontouchstart"in window||!!window.TouchEvent,N=!window.L_NO_TOUCH&&(O||Rl),Z=Ti&&Je,he=Ti&&ut,ke=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ke=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",m,c),window.removeEventListener("testPassiveEventSupport",m,c)}catch{}return a}(),St=function(){return!!document.createElement("canvas").getContext}(),si=!!(document.createElementNS&&be("svg").createSVGRect),gn=!!si&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fi=!si&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Qi=navigator.platform.indexOf("Mac")===0,_n=navigator.platform.indexOf("Linux")===0;function qt(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Re={ie:Pe,ielt9:Ee,edge:Se,webkit:ve,android:je,android23:Oe,androidStock:qe,opera:Je,chrome:lt,gecko:ut,safari:Qt,phantom:Ht,opera12:Jt,win:rt,ie3d:mn,webkit3d:Yi,gecko3d:ei,any3d:mi,mobile:Ti,mobileWebkit:aa,mobileWebkit3d:io,msPointer:no,pointer:Rl,touch:N,touchNative:O,mobileOpera:Z,mobileGecko:he,retina:ke,passiveEvents:Ke,canvas:St,svg:si,vml:Fi,inlineSvg:gn,mac:Qi,linux:_n},Ui=Re.msPointer?"MSPointerDown":"pointerdown",In=Re.msPointer?"MSPointerMove":"pointermove",yn=Re.msPointer?"MSPointerUp":"pointerup",wt=Re.msPointer?"MSPointerCancel":"pointercancel",Zn={touchstart:Ui,touchmove:In,touchend:yn,touchcancel:wt},dt={touchstart:Nf,touchmove:ca,touchend:ca,touchcancel:ca},Yn={},so=!1;function la(a,c,p){return c==="touchstart"&&ua(),dt[c]?(p=dt[c].bind(this,p),a.addEventListener(Zn[c],p,!1),p):(console.warn("wrong event specified:",c),m)}function Rf(a,c,p){if(!Zn[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(Zn[c],p,!1)}function Vs(a){Yn[a.pointerId]=a}function Lt(a){Yn[a.pointerId]&&(Yn[a.pointerId]=a)}function Nl(a){delete Yn[a.pointerId]}function ua(){so||(document.addEventListener(Ui,Vs,!0),document.addEventListener(In,Lt,!0),document.addEventListener(yn,Nl,!0),document.addEventListener(wt,Nl,!0),so=!0)}function ca(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Yn)c.touches.push(Yn[p]);c.changedTouches=[c],a(c)}}function Nf(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&ri(c),ca(a,c)}function Bf(a){var c={},p,v;for(v in a)p=a[v],c[v]=p&&p.bind?p.bind(a):p;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Mc=200;function Bl(a,c){a.addEventListener("dblclick",c);var p=0,v;function w(M){if(M.detail!==1){v=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var X=Vl(M);if(!(X.some(function(ue){return ue instanceof HTMLLabelElement&&ue.attributes.for})&&!X.some(function(ue){return ue instanceof HTMLInputElement||ue instanceof HTMLSelectElement}))){var se=Date.now();se-p<=Mc?(v++,v===2&&c(Bf(M))):v=1,p=se}}}return a.addEventListener("click",w),{dblclick:c,simDblclick:w}}function Fl(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var ha=gr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ro=gr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rc=ro==="webkitTransition"||ro==="OTransition"?ro+"End":"transitionend";function oo(a){return typeof a=="string"?document.getElementById(a):a}function fs(a,c){var p=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(a,null);p=v?v[c]:null}return p==="auto"?null:p}function pt(a,c,p){var v=document.createElement(a);return v.className=c||"",p&&p.appendChild(v),v}function Ct(a){var c=a.parentNode;c&&c.removeChild(a)}function ps(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ln(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function On(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function Ul(a,c){if(a.classList!==void 0)return a.classList.contains(c);var p=vn(a);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function it(a,c){if(a.classList!==void 0)for(var p=C(c),v=0,w=p.length;v<w;v++)a.classList.add(p[v]);else if(!Ul(a,c)){var M=vn(a);jl(a,(M?M+" ":"")+c)}}function Wt(a,c){a.classList!==void 0?a.classList.remove(c):jl(a,T((" "+vn(a)+" ").replace(" "+c+" "," ")))}function jl(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function vn(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function xi(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Ff(a,c)}function Ff(a,c){var p=!1,v="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(v)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):a.style.filter+=" progid:"+v+"(opacity="+c+")"}function gr(a){for(var c=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in c)return a[p];return!1}function Qn(a,c,p){var v=c||new ee(0,0);a.style[ha]=(Re.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(p?" scale("+p+")":"")}function _t(a,c){a._leaflet_pos=c,Re.any3d?Qn(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function qs(a){return a._leaflet_pos||new ee(0,0)}var ms,Jn,_r;if("onselectstart"in document)ms=function(){tt(window,"selectstart",ri)},Jn=function(){Et(window,"selectstart",ri)};else{var Mn=gr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ms=function(){if(Mn){var a=document.documentElement.style;_r=a[Mn],a[Mn]="none"}},Jn=function(){Mn&&(document.documentElement.style[Mn]=_r,_r=void 0)}}function ao(){tt(window,"dragstart",ri)}function da(){Et(window,"dragstart",ri)}var yr,zl;function Hl(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(fa(),yr=a,zl=a.style.outlineStyle,a.style.outlineStyle="none",tt(window,"keydown",fa))}function fa(){yr&&(yr.style.outlineStyle=zl,yr=void 0,zl=void 0,Et(window,"keydown",fa))}function lo(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function pa(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var Uf={__proto__:null,TRANSFORM:ha,TRANSITION:ro,TRANSITION_END:Rc,get:oo,getStyle:fs,create:pt,remove:Ct,empty:ps,toFront:Ln,toBack:On,hasClass:Ul,addClass:it,removeClass:Wt,setClass:jl,getClass:vn,setOpacity:xi,testProp:gr,setTransform:Qn,setPosition:_t,getPosition:qs,get disableTextSelection(){return ms},get enableTextSelection(){return Jn},disableImageDrag:ao,enableImageDrag:da,preventOutline:Hl,restoreOutline:fa,getSizedParentNode:lo,getScale:pa};function tt(a,c,p,v){if(c&&typeof c=="object")for(var w in c)br(a,w,c[w],p);else{c=C(c);for(var M=0,X=c.length;M<X;M++)br(a,c[M],p,v)}return this}var Rn="_leaflet_events";function Et(a,c,p,v){if(arguments.length===1)Nc(a),delete a[Rn];else if(c&&typeof c=="object")for(var w in c)ma(a,w,c[w],p);else if(c=C(c),arguments.length===2)Nc(a,function(se){return F(c,se)!==-1});else for(var M=0,X=c.length;M<X;M++)ma(a,c[M],p,v);return this}function Nc(a,c){for(var p in a[Rn]){var v=p.split(/\d/)[0];(!c||c(v))&&ma(a,v,null,null,p)}}var vr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function br(a,c,p,v){var w=c+u(p)+(v?"_"+u(v):"");if(a[Rn]&&a[Rn][w])return this;var M=function(se){return p.call(v||a,se||window.event)},X=M;!Re.touchNative&&Re.pointer&&c.indexOf("touch")===0?M=la(a,c,M):Re.touch&&c==="dblclick"?M=Bl(a,M):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(vr[c]||c,M,Re.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(M=function(se){se=se||window.event,ql(a,se)&&X(se)},a.addEventListener(vr[c],M,!1)):a.addEventListener(c,X,!1):a.attachEvent("on"+c,M),a[Rn]=a[Rn]||{},a[Rn][w]=M}function ma(a,c,p,v,w){w=w||c+u(p)+(v?"_"+u(v):"");var M=a[Rn]&&a[Rn][w];if(!M)return this;!Re.touchNative&&Re.pointer&&c.indexOf("touch")===0?Rf(a,c,M):Re.touch&&c==="dblclick"?Fl(a,M):"removeEventListener"in a?a.removeEventListener(vr[c]||c,M,!1):a.detachEvent("on"+c,M),a[Rn][w]=null}function Ws(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function $l(a){return br(a,"wheel",Ws),this}function Tr(a){return tt(a,"mousedown touchstart dblclick contextmenu",Ws),a._leaflet_disable_click=!0,this}function ri(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Gs(a){return ri(a),Ws(a),this}function Vl(a){if(a.composedPath)return a.composedPath();for(var c=[],p=a.target;p;)c.push(p),p=p.parentNode;return c}function Bc(a,c){if(!c)return new ee(a.clientX,a.clientY);var p=pa(c),v=p.boundingClientRect;return new ee((a.clientX-v.left)/p.x-c.clientLeft,(a.clientY-v.top)/p.y-c.clientTop)}var jf=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fc(a){return Re.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/jf:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function ql(a,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var zf={__proto__:null,on:tt,off:Et,stopPropagation:Ws,disableScrollPropagation:$l,disableClickPropagation:Tr,preventDefault:ri,stop:Gs,getPropagationPath:Vl,getMousePosition:Bc,getWheelDelta:Fc,isExternalTarget:ql,addListener:tt,removeListener:Et},Uc=ne.extend({run:function(a,c,p,v){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=qs(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var p=this._startPos.add(this._offset.multiplyBy(a));c&&p._round(),_t(this._el,p),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),ht=ne.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=x(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ze(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ro&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),tt(this._proxy,Rc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(ze(a),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=s({animate:p.animate},p.zoom),p.pan=s({animate:p.animate,duration:p.duration},p.pan));var v=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,p.zoom):this._tryAnimatedPan(a,p.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,p){var v=this.getZoomScale(c),w=this.getSize().divideBy(2),M=a instanceof ee?a:this.latLngToContainerPoint(a),X=M.subtract(w).multiplyBy(1-1/v),se=this.containerPointToLatLng(w.add(X));return this.setView(se,c,{zoom:p})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():Fe(a);var p=re(c.paddingTopLeft||c.padding||[0,0]),v=re(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(a,!1,p.add(v));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:a.getCenter(),zoom:w};var M=v.subtract(p).divideBy(2),X=this.project(a.getSouthWest(),w),se=this.project(a.getNorthEast(),w),ue=this.unproject(X.add(se).divideBy(2).add(M),w);return{center:ue,zoom:w}},fitBounds:function(a,c){if(a=Fe(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=re(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Uc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){it(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,p){if(p=p||{},p.animate===!1||!Re.any3d)return this.setView(a,c,p);this._stop();var v=this.project(this.getCenter()),w=this.project(a),M=this.getSize(),X=this._zoom;a=ze(a),c=c===void 0?X:c;var se=Math.max(M.x,M.y),ue=se*this.getZoomScale(X,c),we=w.distanceTo(v)||1,Be=1.42,Ne=Be*Be;function et(Gt){var f=Gt?-1:1,g=Gt?ue:se,y=ue*ue-se*se+f*Ne*Ne*we*we,_=2*g*Ne*we,S=y/_,E=Math.sqrt(S*S+1)-S,B=E<1e-9?-18:Math.log(E);return B}function yt(Gt){return(Math.exp(Gt)-Math.exp(-Gt))/2}function At(Gt){return(Math.exp(Gt)+Math.exp(-Gt))/2}function nn(Gt){return yt(Gt)/At(Gt)}var Si=et(0);function Ar(Gt){return se*(At(Si)/At(Si+Be*Gt))}function sp(Gt){return se*(At(Si)*nn(Si+Be*Gt)-yt(Si))/Ne}function rp(Gt){return 1-Math.pow(1-Gt,1.5)}var op=Date.now(),fh=(et(1)-Si)/Be,ap=p.duration?1e3*p.duration:1e3*fh*.8;function ph(){var Gt=(Date.now()-op)/ap,f=rp(Gt)*fh;Gt<=1?(this._flyToFrame=Y(ph,this),this._move(this.unproject(v.add(w.subtract(v).multiplyBy(sp(f)/we)),X),this.getScaleZoom(se/Ar(f),X),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),ph.call(this),this},flyToBounds:function(a,c){var p=this._getBoundsCenterZoom(a,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(a){return a=Fe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var p=this.getCenter(),v=this._limitCenter(p,this._zoom,Fe(a));return p.equals(v)||this.panTo(v,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var p=re(c.paddingTopLeft||c.padding||[0,0]),v=re(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),M=this.project(a),X=this.getPixelBounds(),se=Le([X.min.add(p),X.max.subtract(v)]),ue=se.getSize();if(!se.contains(M)){this._enforcingBounds=!0;var we=M.subtract(se.getCenter()),Be=se.extend(M).getSize().subtract(ue);w.x+=we.x<0?-Be.x:Be.x,w.y+=we.y<0?-Be.y:Be.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),v=c.divideBy(2).round(),w=p.divideBy(2).round(),M=v.subtract(w);return!M.x&&!M.y?this:(a.animate&&a.pan?this.panBy(M):(a.pan&&this._rawPanBy(M),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),p=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,a):navigator.geolocation.getCurrentPosition(c,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,p=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,p=a.coords.longitude,v=new Ie(c,p),w=v.toBounds(a.coords.accuracy*2),M=this._locateOptions;if(M.setView){var X=this.getBoundsZoom(w);this.setView(v,M.maxZoom?Math.min(X,M.maxZoom):X)}var se={latlng:v,bounds:w,timestamp:a.timestamp};for(var ue in a.coords)typeof a.coords[ue]=="number"&&(se[ue]=a.coords[ue]);this.fire("locationfound",se)}},addHandler:function(a,c){if(!c)return this;var p=this[a]=new c(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Ct(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),v=pt("div",p,c||this._mapPane);return a&&(this._panes[a]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new $e(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,p){a=Fe(a),p=re(p||[0,0]);var v=this.getZoom()||0,w=this.getMinZoom(),M=this.getMaxZoom(),X=a.getNorthWest(),se=a.getSouthEast(),ue=this.getSize().subtract(p),we=Le(this.project(se,v),this.project(X,v)).getSize(),Be=Re.any3d?this.options.zoomSnap:1,Ne=ue.x/we.x,et=ue.y/we.y,yt=c?Math.max(Ne,et):Math.min(Ne,et);return v=this.getScaleZoom(yt,v),Be&&(v=Math.round(v/(Be/100))*(Be/100),v=c?Math.ceil(v/Be)*Be:Math.floor(v/Be)*Be),Math.max(w,Math.min(M,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var p=this._getTopLeftPoint(a,c);return new de(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(a)/p.scale(c)},getScaleZoom:function(a,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var v=p.zoom(a*p.scale(c));return isNaN(v)?1/0:v},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ze(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(re(a),c)},layerPointToLatLng:function(a){var c=re(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(ze(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ze(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Fe(a))},distance:function(a,c){return this.options.crs.distance(ze(a),ze(c))},containerPointToLayerPoint:function(a){return re(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return re(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(re(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ze(a)))},mouseEventToContainerPoint:function(a){return Bc(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=oo(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");tt(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,it(a,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=fs(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(it(a.markerPane,"leaflet-zoom-hide"),it(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,p){_t(this._mapPane,new ee(0,0));var v=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,p)._move(a,c)._moveEnd(w),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,p,v){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),v?p&&p.pinch&&this.fire("zoom",p):((w||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){_t(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?Et:tt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var p=[],v,w=c==="mouseout"||c==="mouseover",M=a.target||a.srcElement,X=!1;M;){if(v=this._targets[u(M)],v&&(c==="click"||c==="preclick")&&this._draggableMoved(v)){X=!0;break}if(v&&v.listens(c,!0)&&(w&&!ql(M,a)||(p.push(v),w))||M===this._container)break;M=M.parentNode}return!p.length&&!X&&!w&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var p=a.type;p==="mousedown"&&Hl(c),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,p){if(a.type==="click"){var v=s({},a);v.type="preclick",this._fireDOMEvent(v,v.type,p)}var w=this._findEventTargets(a,c);if(p){for(var M=[],X=0;X<p.length;X++)p[X].listens(c,!0)&&M.push(p[X]);w=M.concat(w)}if(w.length){c==="contextmenu"&&ri(a);var se=w[0],ue={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var we=se.getLatLng&&(!se._radius||se._radius<=10);ue.containerPoint=we?this.latLngToContainerPoint(se.getLatLng()):this.mouseEventToContainerPoint(a),ue.layerPoint=this.containerPointToLayerPoint(ue.containerPoint),ue.latlng=we?se.getLatLng():this.layerPointToLatLng(ue.layerPoint)}for(X=0;X<w.length;X++)if(w[X].fire(c,ue,!0),ue.originalEvent._stopped||w[X].options.bubblingMouseEvents===!1&&F(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return qs(this._mapPane)||new ee(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var p=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var p=this.getSize()._divideBy(2);return this.project(a,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,p){var v=this._getNewPixelOrigin(p,c);return this.project(a,c)._subtract(v)},_latLngBoundsToNewLayerBounds:function(a,c,p){var v=this._getNewPixelOrigin(p,c);return Le([this.project(a.getSouthWest(),c)._subtract(v),this.project(a.getNorthWest(),c)._subtract(v),this.project(a.getSouthEast(),c)._subtract(v),this.project(a.getNorthEast(),c)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,p){if(!p)return a;var v=this.project(a,c),w=this.getSize().divideBy(2),M=new de(v.subtract(w),v.add(w)),X=this._getBoundsOffset(M,p,c);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?a:this.unproject(v.add(X),c)},_limitOffset:function(a,c){if(!c)return a;var p=this.getPixelBounds(),v=new de(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(v,c))},_getBoundsOffset:function(a,c,p){var v=Le(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),w=v.min.subtract(a.min),M=v.max.subtract(a.max),X=this._rebound(w.x,-M.x),se=this._rebound(w.y,-M.y);return new ee(X,se)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),p=this.getMaxZoom(),v=Re.any3d?this.options.zoomSnap:1;return v&&(a=Math.round(a/v)*v),Math.max(c,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var p=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var a=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var p=ha,v=this._proxy.style[p];Qn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),v===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Qn(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(c),w=this._getCenterOffset(a)._divideBy(1-1/v);return p.animate!==!0&&!this.getSize().contains(w)?!1:(Y(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,p,v){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,it(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hf(a,c){return new ht(a,c)}var Ji=ae.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),p=this.getPosition(),v=a._controlCorners[p];return it(c,"leaflet-control"),p.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),gs=function(a){return new Ji(a)};ht.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",p=this._controlContainer=pt("div",c+"control-container",this._container);function v(w,M){var X=c+w+" "+c+M;a[w+M]=pt("div",X,p)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Ct(this._controlCorners[a]);Ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jc=Ji.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,p,v){return p<v?-1:v<p?1:0}},initialize:function(a,c,p){x(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in a)this._addLayer(a[v],v);for(v in c)this._addLayer(c[v],v,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Ji.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){it(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(it(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=pt("div",a),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Tr(c),$l(c);var v=this._section=pt("section",a+"-list");p&&(this._map.on("click",this.collapse,this),tt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=pt("a",a+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),tt(w,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){ri(M),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=pt("div",a+"-base",v),this._separator=pt("div",a+"-separator",v),this._overlaysList=pt("div",a+"-overlays",v),c.appendChild(v)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(o(function(v,w){return this.options.sortFunction(v.layer,w.layer,v.name,w.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ps(this._baseLayersList),ps(this._overlaysList),this._layerControlInputs=[];var a,c,p,v,w=0;for(p=0;p<this._layers.length;p++)v=this._layers[p],this._addItem(v),c=c||v.overlay,a=a||!v.overlay,w+=v.overlay?0:1;return this.options.hideSingleBase&&(a=a&&w>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),p=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(a,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=p,v.firstChild},_addItem:function(a){var c=document.createElement("label"),p=this._map.hasLayer(a.layer),v;a.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=p):v=this._createRadioElement("leaflet-base-layers_"+u(this),p),this._layerControlInputs.push(v),v.layerId=u(a.layer),tt(v,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+a.name;var M=document.createElement("span");c.appendChild(M),M.appendChild(v),M.appendChild(w);var X=a.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,p,v=[],w=[];this._handlingClick=!0;for(var M=a.length-1;M>=0;M--)c=a[M],p=this._getLayer(c.layerId).layer,c.checked?v.push(p):c.checked||w.push(p);for(M=0;M<w.length;M++)this._map.hasLayer(w[M])&&this._map.removeLayer(w[M]);for(M=0;M<v.length;M++)this._map.hasLayer(v[M])||this._map.addLayer(v[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,p,v=this._map.getZoom(),w=a.length-1;w>=0;w--)c=a[w],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&v<p.options.minZoom||p.options.maxZoom!==void 0&&v>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,tt(a,"click",ri),this.expand();var c=this;setTimeout(function(){Et(a,"click",ri),c._preventClick=!1})}}),$f=function(a,c,p){return new jc(a,c,p)},Wl=Ji.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",p=pt("div",c+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,p,v,w){var M=pt("a",p,v);return M.innerHTML=a,M.href="#",M.title=c,M.setAttribute("role","button"),M.setAttribute("aria-label",c),Tr(M),tt(M,"click",Gs),tt(M,"click",w,this),tt(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";Wt(this._zoomInButton,c),Wt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(it(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(it(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wl,this.addControl(this.zoomControl))});var Vf=function(a){return new Wl(a)},zc=Ji.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",p=pt("div",c),v=this.options;return this._addScales(v,c+"-line",p),a.on(v.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,p){a.metric&&(this._mScale=pt("div",c,p)),a.imperial&&(this._iScale=pt("div",c,p))},_update:function(){var a=this._map,c=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/a)},_updateImperial:function(a){var c=a*3.2808399,p,v,w;c>5280?(p=c/5280,v=this._getRoundNum(p),this._updateScale(this._iScale,v+" mi",v/p)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(a,c,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),p=a/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),ga=function(a){return new zc(a)},uo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xs=Ji.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?uo+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Tr(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new Xs().addTo(this)});var _a=function(a){return new Xs(a)};Ji.Layers=jc,Ji.Zoom=Wl,Ji.Scale=zc,Ji.Attribution=Xs,gs.layers=$f,gs.zoom=Vf,gs.scale=ga,gs.attribution=_a;var Zt=ae.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zt.addTo=function(a,c){return a.addHandler(c,this),this};var es={Events:le},co=Re.touch?"touchstart mousedown":"mousedown",ts=ne.extend({options:{clickTolerance:3},initialize:function(a,c,p,v){x(this,v),this._element=a,this._dragStartTarget=c||a,this._preventOutline=p},enable:function(){this._enabled||(tt(this._dragStartTarget,co,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ts._dragging===this&&this.finishDrag(!0),Et(this._dragStartTarget,co,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){ts._dragging===this&&this.finishDrag();return}if(!(ts._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(ts._dragging=this,this._preventOutline&&Hl(this._element),ao(),ms(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,p=lo(this._element);this._startPoint=new ee(c.clientX,c.clientY),this._startPos=qs(this._element),this._parentScale=pa(p);var v=a.type==="mousedown";tt(document,v?"mousemove":"touchmove",this._onMove,this),tt(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,p=new ee(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,ri(a),this._moved||(this.fire("dragstart"),this._moved=!0,it(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),it(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),_t(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Wt(document.body,"leaflet-dragging"),this._lastTarget&&(Wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Et(document,"mousemove touchmove",this._onMove,this),Et(document,"mouseup touchend touchcancel",this._onUp,this),da(),Jn();var c=this._moved&&this._moving;this._moving=!1,ts._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Hc(a,c,p){var v,w=[1,4,2,8],M,X,se,ue,we,Be,Ne,et;for(M=0,Be=a.length;M<Be;M++)a[M]._code=_s(a[M],c);for(se=0;se<4;se++){for(Ne=w[se],v=[],M=0,Be=a.length,X=Be-1;M<Be;X=M++)ue=a[M],we=a[X],ue._code&Ne?we._code&Ne||(et=fo(we,ue,Ne,c,p),et._code=_s(et,c),v.push(et)):(we._code&Ne&&(et=fo(we,ue,Ne,c,p),et._code=_s(et,c),v.push(et)),v.push(ue));a=v}return a}function $c(a,c){var p,v,w,M,X,se,ue,we,Be;if(!a||a.length===0)throw new Error("latlngs not passed");en(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ne=ze([0,0]),et=Fe(a),yt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());yt<1700&&(Ne=Gl(a));var At=a.length,nn=[];for(p=0;p<At;p++){var Si=ze(a[p]);nn.push(c.project(ze([Si.lat-Ne.lat,Si.lng-Ne.lng])))}for(se=ue=we=0,p=0,v=At-1;p<At;v=p++)w=nn[p],M=nn[v],X=w.y*M.x-M.y*w.x,ue+=(w.x+M.x)*X,we+=(w.y+M.y)*X,se+=X*3;se===0?Be=nn[0]:Be=[ue/se,we/se];var Ar=c.unproject(re(Be));return ze([Ar.lat+Ne.lat,Ar.lng+Ne.lng])}function Gl(a){for(var c=0,p=0,v=0,w=0;w<a.length;w++){var M=ze(a[w]);c+=M.lat,p+=M.lng,v++}return ze([c/v,p/v])}var qf={__proto__:null,clipPolygon:Hc,polygonCenter:$c,centroid:Gl};function Xl(a,c){if(!c||!a.length)return a.slice();var p=c*c;return a=Ks(a,p),a=ho(a,p),a}function Kl(a,c,p){return Math.sqrt(po(a,c,p,!0))}function ya(a,c,p){return po(a,c,p)}function ho(a,c){var p=a.length,v=typeof Uint8Array<"u"?Uint8Array:Array,w=new v(p);w[0]=w[p-1]=1,xr(a,w,c,0,p-1);var M,X=[];for(M=0;M<p;M++)w[M]&&X.push(a[M]);return X}function xr(a,c,p,v,w){var M=0,X,se,ue;for(se=v+1;se<=w-1;se++)ue=po(a[se],a[v],a[w],!0),ue>M&&(X=se,M=ue);M>p&&(c[X]=1,xr(a,c,p,v,X),xr(a,c,p,X,w))}function Ks(a,c){for(var p=[a[0]],v=1,w=0,M=a.length;v<M;v++)Wf(a[v],a[w])>c&&(p.push(a[v]),w=v);return w<M-1&&p.push(a[M-1]),p}var Vc;function Zl(a,c,p,v,w){var M=v?Vc:_s(a,p),X=_s(c,p),se,ue,we;for(Vc=X;;){if(!(M|X))return[a,c];if(M&X)return!1;se=M||X,ue=fo(a,c,se,p,w),we=_s(ue,p),se===M?(a=ue,M=we):(c=ue,X=we)}}function fo(a,c,p,v,w){var M=c.x-a.x,X=c.y-a.y,se=v.min,ue=v.max,we,Be;return p&8?(we=a.x+M*(ue.y-a.y)/X,Be=ue.y):p&4?(we=a.x+M*(se.y-a.y)/X,Be=se.y):p&2?(we=ue.x,Be=a.y+X*(ue.x-a.x)/M):p&1&&(we=se.x,Be=a.y+X*(se.x-a.x)/M),new ee(we,Be,w)}function _s(a,c){var p=0;return a.x<c.min.x?p|=1:a.x>c.max.x&&(p|=2),a.y<c.min.y?p|=4:a.y>c.max.y&&(p|=8),p}function Wf(a,c){var p=c.x-a.x,v=c.y-a.y;return p*p+v*v}function po(a,c,p,v){var w=c.x,M=c.y,X=p.x-w,se=p.y-M,ue=X*X+se*se,we;return ue>0&&(we=((a.x-w)*X+(a.y-M)*se)/ue,we>1?(w=p.x,M=p.y):we>0&&(w+=X*we,M+=se*we)),X=a.x-w,se=a.y-M,v?X*X+se*se:new ee(w,M)}function en(a){return!I(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function mo(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),en(a)}function qc(a,c){var p,v,w,M,X,se,ue,we;if(!a||a.length===0)throw new Error("latlngs not passed");en(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Be=ze([0,0]),Ne=Fe(a),et=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());et<1700&&(Be=Gl(a));var yt=a.length,At=[];for(p=0;p<yt;p++){var nn=ze(a[p]);At.push(c.project(ze([nn.lat-Be.lat,nn.lng-Be.lng])))}for(p=0,v=0;p<yt-1;p++)v+=At[p].distanceTo(At[p+1])/2;if(v===0)we=At[0];else for(p=0,M=0;p<yt-1;p++)if(X=At[p],se=At[p+1],w=X.distanceTo(se),M+=w,M>v){ue=(M-v)/w,we=[se.x-ue*(se.x-X.x),se.y-ue*(se.y-X.y)];break}var Si=c.unproject(re(we));return ze([Si.lat+Be.lat,Si.lng+Be.lng])}var Wc={__proto__:null,simplify:Xl,pointToSegmentDistance:Kl,closestPointOnSegment:ya,clipSegment:Zl,_getEdgeIntersection:fo,_getBitCode:_s,_sqClosestPointOnSegment:po,isFlat:en,_flat:mo,polylineCenter:qc},Yl={project:function(a){return new ee(a.lng,a.lat)},unproject:function(a){return new Ie(a.y,a.x)},bounds:new de([-180,-90],[180,90])},Ql={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,p=this.R,v=a.lat*c,w=this.R_MINOR/p,M=Math.sqrt(1-w*w),X=M*Math.sin(v),se=Math.tan(Math.PI/4-v/2)/Math.pow((1-X)/(1+X),M/2);return v=-p*Math.log(Math.max(se,1e-10)),new ee(a.lng*c*p,v)},unproject:function(a){for(var c=180/Math.PI,p=this.R,v=this.R_MINOR/p,w=Math.sqrt(1-v*v),M=Math.exp(-a.y/p),X=Math.PI/2-2*Math.atan(M),se=0,ue=.1,we;se<15&&Math.abs(ue)>1e-7;se++)we=w*Math.sin(X),we=Math.pow((1-we)/(1+we),w/2),ue=Math.PI/2-2*Math.atan(M*we)-X,X+=ue;return new Ie(X*c,a.x*c/p)}},Gc={__proto__:null,LonLat:Yl,Mercator:Ql,SphericalMercator:Ue},Jl=s({},Ce,{code:"EPSG:3395",projection:Ql,transformation:function(){var a=.5/(Math.PI*Ql.R);return $(a,.5,-a,.5)}()}),Xc=s({},Ce,{code:"EPSG:4326",projection:Yl,transformation:$(1/180,1,-1/180,.5)}),Gf=s({},pe,{projection:Yl,transformation:$(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var p=c.lng-a.lng,v=c.lat-a.lat;return Math.sqrt(p*p+v*v)},infinite:!0});pe.Earth=Ce,pe.EPSG3395=Jl,pe.EPSG3857=G,pe.EPSG900913=ie,pe.EPSG4326=Xc,pe.Simple=Gf;var bn=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},_addLayers:function(a){a=a?I(a)?a:[a]:[];for(var c=0,p=a.length;c<p;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,p=this._getZoomSpan();for(var v in this._zoomBoundLayers){var w=this._zoomBoundLayers[v].options;a=w.minZoom===void 0?a:Math.min(a,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ys=bn.extend({initialize:function(a,c){x(this,c),this._layers={};var p,v;if(a)for(p=0,v=a.length;p<v;p++)this.addLayer(a[p])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),p,v;for(p in this._layers)v=this._layers[p],v[a]&&v[a].apply(v,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),Xf=function(a,c){return new ys(a,c)},Nn=ys.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),ys.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),ys.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new $e;for(var c in this._layers){var p=this._layers[c];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),Kf=function(a,c){return new Nn(a,c)},Sr=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(v,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(a,c){var p=this.options,v=p[c+"Size"];typeof v=="number"&&(v=[v,v]);var w=re(v),M=re(c==="shadow"&&p.shadowAnchor||p.iconAnchor||w&&w.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(p.className||""),M&&(a.style.marginLeft=-M.x+"px",a.style.marginTop=-M.y+"px"),w&&(a.style.width=w.x+"px",a.style.height=w.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Re.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Kc(a){return new Sr(a)}var go=Sr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof go.imagePath!="string"&&(go.imagePath=this._detectIconPath()),(this.options.imagePath||go.imagePath)+Sr.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(p,v,w){var M=v.exec(p);return M&&M[w]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=pt("div","leaflet-default-icon-path",document.body),c=fs(a,"background-image")||fs(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),eu=Zt.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new ts(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),it(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,p=c._map,v=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,M=qs(c._icon),X=p.getPixelBounds(),se=p.getPixelOrigin(),ue=Le(X.min._subtract(se).add(w),X.max._subtract(se).subtract(w));if(!ue.contains(M)){var we=re((Math.max(ue.max.x,M.x)-ue.max.x)/(X.max.x-ue.max.x)-(Math.min(ue.min.x,M.x)-ue.min.x)/(X.min.x-ue.min.x),(Math.max(ue.max.y,M.y)-ue.max.y)/(X.max.y-ue.max.y)-(Math.min(ue.min.y,M.y)-ue.min.y)/(X.min.y-ue.min.y)).multiplyBy(v);p.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),_t(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Y(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,p=c._shadow,v=qs(c._icon),w=c._map.layerPointToLatLng(v);p&&_t(p,v),c._latlng=w,a.latlng=w,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),_o=bn.extend({options:{icon:new go,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){x(this,c),this._latlng=ze(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=ze(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),v=!1;p!==this._icon&&(this._icon&&this._removeIcon(),v=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),it(p,c),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(p,"focus",this._panOnFocus,this);var w=a.icon.createShadow(this._shadow),M=!1;w!==this._shadow&&(this._removeShadow(),M=!0),w&&(it(w,c),w.alt=""),this._shadow=w,a.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&M&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Et(this._icon,"focus",this._panOnFocus,this),Ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ct(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&_t(this._icon,a),this._shadow&&_t(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(it(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),eu)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new eu(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&xi(this._icon,a),this._shadow&&xi(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,p=c.iconSize?re(c.iconSize):re(0,0),v=c.iconAnchor?re(c.iconAnchor):re(0,0);a.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:p.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zc(a,c){return new _o(a,c)}var vs=bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),va=vs.extend({options:{fill:!0,radius:10},initialize:function(a,c){x(this,c),this._latlng=ze(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=ze(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return vs.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,p=this._clickTolerance(),v=[a+p,c+p];this._pxBounds=new de(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ba(a,c){return new va(a,c)}var tu=va.extend({initialize:function(a,c,p){if(typeof c=="number"&&(c=s({},p,{radius:c})),x(this,c),this._latlng=ze(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:vs.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,p=this._map,v=p.options.crs;if(v.distance===Ce.distance){var w=Math.PI/180,M=this._mRadius/Ce.R/w,X=p.project([c+M,a]),se=p.project([c-M,a]),ue=X.add(se).divideBy(2),we=p.unproject(ue).lat,Be=Math.acos((Math.cos(M*w)-Math.sin(c*w)*Math.sin(we*w))/(Math.cos(c*w)*Math.cos(we*w)))/w;(isNaN(Be)||Be===0)&&(Be=M/Math.cos(Math.PI/180*c)),this._point=ue.subtract(p.getPixelOrigin()),this._radius=isNaN(Be)?0:ue.x-p.project([we,a-Be]).x,this._radiusY=ue.y-X.y}else{var Ne=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ne).x}this._updateBounds()}});function Zf(a,c,p){return new tu(a,c,p)}var is=vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){x(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,p=null,v=po,w,M,X=0,se=this._parts.length;X<se;X++)for(var ue=this._parts[X],we=1,Be=ue.length;we<Be;we++){w=ue[we-1],M=ue[we];var Ne=v(a,w,M,!0);Ne<c&&(c=Ne,p=v(a,w,M))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=ze(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new $e,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return en(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],p=en(a),v=0,w=a.length;v<w;v++)p?(c[v]=ze(a[v]),this._bounds.extend(c[v])):c[v]=this._convertLatLngs(a[v]);return c},_project:function(){var a=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new ee(a,a);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,p){var v=a[0]instanceof Ie,w=a.length,M,X;if(v){for(X=[],M=0;M<w;M++)X[M]=this._map.latLngToLayerPoint(a[M]),p.extend(X[M]);c.push(X)}else for(M=0;M<w;M++)this._projectLatlngs(a[M],c,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,v,w,M,X,se,ue;for(p=0,w=0,M=this._rings.length;p<M;p++)for(ue=this._rings[p],v=0,X=ue.length;v<X-1;v++)se=Zl(ue[v],ue[v+1],a,v,!0),se&&(c[w]=c[w]||[],c[w].push(se[0]),(se[1]!==ue[v+1]||v===X-2)&&(c[w].push(se[1]),w++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,p=0,v=a.length;p<v;p++)a[p]=Xl(a[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var p,v,w,M,X,se,ue=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,M=this._parts.length;p<M;p++)for(se=this._parts[p],v=0,X=se.length,w=X-1;v<X;w=v++)if(!(!c&&v===0)&&Kl(a,se[w],se[v])<=ue)return!0;return!1}});function Yf(a,c){return new is(a,c)}is._flat=mo;var Zs=is.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $c(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=is.prototype._convertLatLngs.call(this,a),p=c.length;return p>=2&&c[0]instanceof Ie&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(a){is.prototype._setLatLngs.call(this,a),en(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return en(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,p=new ee(c,c);if(a=new de(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,w=this._rings.length,M;v<w;v++)M=Hc(this._rings[v],a,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,p,v,w,M,X,se,ue,we;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(M=0,ue=this._parts.length;M<ue;M++)for(p=this._parts[M],X=0,we=p.length,se=we-1;X<we;se=X++)v=p[X],w=p[se],v.y>a.y!=w.y>a.y&&a.x<(w.x-v.x)*(a.y-v.y)/(w.y-v.y)+v.x&&(c=!c);return c||is.prototype._containsPoint.call(this,a,!0)}});function Qf(a,c){return new Zs(a,c)}var ji=Nn.extend({initialize:function(a,c){x(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=I(a)?a:a.features,p,v,w;if(c){for(p=0,v=c.length;p<v;p++)w=c[p],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var M=this.options;if(M.filter&&!M.filter(a))return this;var X=yo(a,M);return X?(X.feature=Ta(a),X.defaultOptions=X.options,this.resetStyle(X),M.onEachFeature&&M.onEachFeature(a,X),this.addLayer(X)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function yo(a,c){var p=a.type==="Feature"?a.geometry:a,v=p?p.coordinates:null,w=[],M=c&&c.pointToLayer,X=c&&c.coordsToLatLng||Ys,se,ue,we,Be;if(!v&&!p)return null;switch(p.type){case"Point":return se=X(v),vo(M,a,se,c);case"MultiPoint":for(we=0,Be=v.length;we<Be;we++)se=X(v[we]),w.push(vo(M,a,se,c));return new Nn(w);case"LineString":case"MultiLineString":return ue=Ot(v,p.type==="LineString"?0:1,X),new is(ue,c);case"Polygon":case"MultiPolygon":return ue=Ot(v,p.type==="Polygon"?1:2,X),new Zs(ue,c);case"GeometryCollection":for(we=0,Be=p.geometries.length;we<Be;we++){var Ne=yo({geometry:p.geometries[we],type:"Feature",properties:a.properties},c);Ne&&w.push(Ne)}return new Nn(w);case"FeatureCollection":for(we=0,Be=p.features.length;we<Be;we++){var et=yo(p.features[we],c);et&&w.push(et)}return new Nn(w);default:throw new Error("Invalid GeoJSON object.")}}function vo(a,c,p,v){return a?a(c,p):new _o(p,v&&v.markersInheritOptions&&v)}function Ys(a){return new Ie(a[1],a[0],a[2])}function Ot(a,c,p){for(var v=[],w=0,M=a.length,X;w<M;w++)X=c?Ot(a[w],c-1,p):(p||Ys)(a[w]),v.push(X);return v}function bs(a,c){return a=ze(a),a.alt!==void 0?[b(a.lng,c),b(a.lat,c),b(a.alt,c)]:[b(a.lng,c),b(a.lat,c)]}function wr(a,c,p,v){for(var w=[],M=0,X=a.length;M<X;M++)w.push(c?wr(a[M],en(a[M])?0:c-1,p,v):bs(a[M],v));return!c&&p&&w.length>0&&w.push(w[0].slice()),w}function Cr(a,c){return a.feature?s({},a.feature,{geometry:c}):Ta(c)}function Ta(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var iu={toGeoJSON:function(a){return Cr(this,{type:"Point",coordinates:bs(this.getLatLng(),a)})}};_o.include(iu),tu.include(iu),va.include(iu),is.include({toGeoJSON:function(a){var c=!en(this._latlngs),p=wr(this._latlngs,c?1:0,!1,a);return Cr(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Zs.include({toGeoJSON:function(a){var c=!en(this._latlngs),p=c&&!en(this._latlngs[0]),v=wr(this._latlngs,p?2:c?1:0,!0,a);return c||(v=[v]),Cr(this,{type:(p?"Multi":"")+"Polygon",coordinates:v})}}),ys.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(a).geometry.coordinates)}),Cr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var p=c==="GeometryCollection",v=[];return this.eachLayer(function(w){if(w.toGeoJSON){var M=w.toGeoJSON(a);if(p)v.push(M.geometry);else{var X=Ta(M);X.type==="FeatureCollection"?v.push.apply(v,X.features):v.push(X)}}}),p?Cr(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function Yc(a,c){return new ji(a,c)}var Qc=Yc,bo=bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,p){this._url=a,this._bounds=Fe(c),x(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(it(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&On(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Fe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:pt("img");if(it(c,"leaflet-image-layer"),this._zoomAnimated&&it(c,"leaflet-zoom-animated"),this.options.className&&it(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Qn(this._image,p,c)},_reset:function(){var a=this._image,c=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();_t(a,c.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){xi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Jc=function(a,c,p){return new bo(a,c,p)},nu=bo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:pt("video");if(it(c,"leaflet-image-layer"),this._zoomAnimated&&it(c,"leaflet-zoom-animated"),this.options.className&&it(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onloadeddata=o(this.fire,this,"load"),a){for(var p=c.getElementsByTagName("source"),v=[],w=0;w<p.length;w++)v.push(p[w].src);this._url=p.length>0?v:[c.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var X=pt("source");X.src=this._url[M],c.appendChild(X)}}});function eh(a,c,p){return new nu(a,c,p)}var xa=bo.extend({_initImage:function(){var a=this._image=this._url;it(a,"leaflet-image-layer"),this._zoomAnimated&&it(a,"leaflet-zoom-animated"),this.options.className&&it(a,this.options.className),a.onselectstart=m,a.onmousemove=m}});function th(a,c,p){return new xa(a,c,p)}var tn=bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof Ie||I(a))?(this._latlng=ze(a),x(this,c)):(x(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&xi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&xi(this._container,1),this.bringToFront(),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(xi(this._container,0),this._removeTimeout=setTimeout(o(Ct,void 0,this._container),200)):Ct(this._container),this.options.interactive&&(Wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ze(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&On(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Nn){c=null;var p=this._source._layers;for(var v in p)if(p[v]._map){c=p[v];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=re(this.options.offset),p=this._getAnchor();this._zoomAnimated?_t(this._container,a.add(p)):c=c.add(a).add(p);var v=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=v+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});ht.include({_initOverlay:function(a,c,p,v){var w=c;return w instanceof a||(w=new a(v).setContent(c)),p&&w.setLatLng(p),w}}),bn.include({_initOverlay:function(a,c,p,v){var w=p;return w instanceof a?(x(w,v),w._source=this):(w=c&&!v?c:new a(v,this),w.setContent(p)),w}});var Sa=tn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,tn.prototype.openOn.call(this,a)},onAdd:function(a){tn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vs||this._source.on("preclick",Ws))},onRemove:function(a){tn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vs||this._source.off("preclick",Ws))},getEvents:function(){var a=tn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=pt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=pt("div",a+"-content-wrapper",c);if(this._contentNode=pt("div",a+"-content",p),Tr(c),$l(this._contentNode),tt(c,"contextmenu",Ws),this._tipContainer=pt("div",a+"-tip-container",c),this._tip=pt("div",a+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=pt("a",a+"-close-button",c);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',tt(v,"click",function(w){ri(w),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var v=a.offsetHeight,w=this.options.maxHeight,M="leaflet-popup-scrolled";w&&v>w?(c.height=w+"px",it(a,M)):Wt(a,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();_t(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(fs(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,v=this._containerWidth,w=new ee(this._containerLeft,-p-this._containerBottom);w._add(qs(this._container));var M=a.layerPointToContainerPoint(w),X=re(this.options.autoPanPadding),se=re(this.options.autoPanPaddingTopLeft||X),ue=re(this.options.autoPanPaddingBottomRight||X),we=a.getSize(),Be=0,Ne=0;M.x+v+ue.x>we.x&&(Be=M.x+v-we.x+ue.x),M.x-Be-se.x<0&&(Be=M.x-se.x),M.y+p+ue.y>we.y&&(Ne=M.y+p-we.y+ue.y),M.y-Ne-se.y<0&&(Ne=M.y-se.y),(Be||Ne)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Be,Ne]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),To=function(a,c){return new Sa(a,c)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(a,c,p){return this._initOverlay(Sa,a,c,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),bn.include({bindPopup:function(a,c){return this._popup=this._initOverlay(Sa,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Nn||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Gs(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var wa=tn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){tn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){tn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=tn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,p,v=this._map,w=this._container,M=v.latLngToContainerPoint(v.getCenter()),X=v.layerPointToContainerPoint(a),se=this.options.direction,ue=w.offsetWidth,we=w.offsetHeight,Be=re(this.options.offset),Ne=this._getAnchor();se==="top"?(c=ue/2,p=we):se==="bottom"?(c=ue/2,p=0):se==="center"?(c=ue/2,p=we/2):se==="right"?(c=0,p=we/2):se==="left"?(c=ue,p=we/2):X.x<M.x?(se="right",c=0,p=we/2):(se="left",c=ue+(Be.x+Ne.x)*2,p=we/2),a=a.subtract(re(c,p,!0)).add(Be).add(Ne),Wt(w,"leaflet-tooltip-right"),Wt(w,"leaflet-tooltip-left"),Wt(w,"leaflet-tooltip-top"),Wt(w,"leaflet-tooltip-bottom"),it(w,"leaflet-tooltip-"+se),_t(w,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&xi(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ih=function(a,c){return new wa(a,c)};ht.include({openTooltip:function(a,c,p){return this._initOverlay(wa,a,c,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),bn.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Nn||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(tt(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),tt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,p,v;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),v=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(c)}});var su=Sr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ps(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var v=re(p.bgPos);c.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Jf(a){return new su(a)}Sr.Default=go;var xo=bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Ct(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ee?a:new ee(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,p=-a(-1/0,1/0),v=0,w=c.length,M;v<w;v++)M=c[v].style.zIndex,c[v]!==this._container&&M&&(p=a(p,+M));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){xi(this._container,this.options.opacity);var a=+new Date,c=!1,p=!1;for(var v in this._tiles){var w=this._tiles[v];if(!(!w.current||!w.loaded)){var M=Math.min(1,(a-w.loaded)/200);xi(w.el,M),M<1?c=!0:(w.active?p=!0:this._onOpaqueTile(w),w.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(Q(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=c-Math.abs(a-p),this._onUpdateLevel(p)):(Ct(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var v=this._levels[a],w=this._map;return v||(v=this._levels[a]={},v.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=c,v.origin=w.project(w.unproject(w.getPixelOrigin()),a).round(),v.zoom=a,this._setZoomTransform(v,w.getCenter(),w.getZoom()),m(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var a,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var v=c.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Ct(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,p,v){var w=Math.floor(a/2),M=Math.floor(c/2),X=p-1,se=new ee(+w,+M);se.z=+X;var ue=this._tileCoordsToKey(se),we=this._tiles[ue];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),X>v?this._retainParent(w,M,X,v):!1)},_retainChildren:function(a,c,p,v){for(var w=2*a;w<2*a+2;w++)for(var M=2*c;M<2*c+2;M++){var X=new ee(w,M);X.z=p+1;var se=this._tileCoordsToKey(X),ue=this._tiles[se];if(ue&&ue.active){ue.retain=!0;continue}else ue&&ue.loaded&&(ue.retain=!0);p+1<v&&this._retainChildren(w,M,p+1,v)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,p,v){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var M=this.options.updateWhenZooming&&w!==this._tileZoom;(!v||M)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,c)},_setZoomTransform:function(a,c,p){var v=this._map.getZoomScale(p,a.zoom),w=a.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(c,p)).round();Re.any3d?Qn(a.el,w,v):_t(a.el,w)},_resetGrid:function(){var a=this._map,c=a.options.crs,p=this._tileSize=this.getTileSize(),v=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],v).x/p.x),Math.ceil(a.project([0,c.wrapLng[1]],v).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],v).y/p.x),Math.ceil(a.project([c.wrapLat[1],0],v).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),v=c.getZoomScale(p,this._tileZoom),w=c.project(a,this._tileZoom).floor(),M=c.getSize().divideBy(v*2);return new de(w.subtract(M),w.add(M))},_update:function(a){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(a),w=this._pxBoundsToTileRange(v),M=w.getCenter(),X=[],se=this.options.keepBuffer,ue=new de(w.getBottomLeft().subtract([se,-se]),w.getTopRight().add([se,-se]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var Be=this._tiles[we].coords;(Be.z!==this._tileZoom||!ue.contains(new ee(Be.x,Be.y)))&&(this._tiles[we].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Ne=w.min.y;Ne<=w.max.y;Ne++)for(var et=w.min.x;et<=w.max.x;et++){var yt=new ee(et,Ne);if(yt.z=this._tileZoom,!!this._isValidTile(yt)){var At=this._tiles[this._tileCoordsToKey(yt)];At?At.current=!0:X.push(yt)}}if(X.sort(function(Si,Ar){return Si.distanceTo(M)-Ar.distanceTo(M)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nn=document.createDocumentFragment();for(et=0;et<X.length;et++)this._addTile(X[et],nn);this._level.el.appendChild(nn)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!c.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(a);return Fe(this.options.bounds).overlaps(v)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,p=this.getTileSize(),v=a.scaleBy(p),w=v.add(p),M=c.unproject(v,a.z),X=c.unproject(w,a.z);return[M,X]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),p=new $e(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),p=new ee(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(a){var c=this._tiles[a];c&&(Ct(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){it(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=m,a.onmousemove=m,Re.ielt9&&this.options.opacity<1&&xi(a,this.options.opacity)},_addTile:function(a,c){var p=this._getTilePos(a),v=this._tileCoordsToKey(a),w=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(w),this.createTile.length<2&&Y(o(this._tileReady,this,a,null,w)),_t(w,p),this._tiles[v]={el:w,coords:a,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:a})},_tileReady:function(a,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:a});var v=this._tileCoordsToKey(a);p=this._tiles[v],p&&(p.loaded=+new Date,this._map._fadeAnimated?(xi(p.el,0),Q(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(it(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new ee(this._wrapX?d(a.x,this._wrapX):a.x,this._wrapY?d(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new de(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function nh(a){return new xo(a)}var Er=xo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=x(this,c),c.detectRetina&&Re.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var p=document.createElement("img");return tt(p,"load",o(this._tileOnLoad,this,c,p)),tt(p,"error",o(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var c={r:Re.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=p),c["-y"]=p}return k(this._url,s(c,this.options))},_tileOnLoad:function(a,c){Re.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,p){var v=this.options.errorTileUrl;v&&c.getAttribute("src")!==v&&(c.src=v),a(p,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,v=this.options.zoomOffset;return p&&(a=c-a),a+v},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=m,c.onerror=m,!c.complete)){c.src=j;var p=this._tiles[a].coords;Ct(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",j),xo.prototype._removeTile.call(this,a)},_tileReady:function(a,c,p){if(!(!this._map||p&&p.getAttribute("src")===j))return xo.prototype._tileReady.call(this,a,c,p)}});function sh(a,c){return new Er(a,c)}var Ca=Er.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var p=s({},this.defaultWmsParams);for(var v in c)v in this.options||(p[v]=c[v]);c=x(this,c);var w=c.detectRetina&&Re.retina?2:1,M=this.getTileSize();p.width=M.x*w,p.height=M.y*w,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Er.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),p=this._crs,v=Le(p.project(c[0]),p.project(c[1])),w=v.min,M=v.max,X=(this._wmsVersion>=1.3&&this._crs===Xc?[w.y,w.x,M.y,M.x]:[w.x,w.y,M.x,M.y]).join(","),se=Er.prototype.getTileUrl.call(this,a);return se+A(this.wmsParams,se,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(a,c){return s(this.wmsParams,a),c||this.redraw(),this}});function ep(a,c){return new Ca(a,c)}Er.WMS=Ca,sh.wms=ep;var ns=bn.extend({options:{padding:.1},initialize:function(a){x(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),it(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var p=this._map.getZoomScale(c,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),M=v.multiplyBy(-p).add(w).subtract(this._map._getNewPixelOrigin(a,c));Re.any3d?Qn(this._container,M,p):_t(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new de(p,p.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rh=ns.extend({options:{tolerance:0},getEvents:function(){var a=ns.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ns.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");tt(a,"mousemove",this._onMouseMove,this),tt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),tt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,Ct(this._container),Et(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ns.prototype._update.call(this);var a=this._bounds,c=this._container,p=a.getSize(),v=Re.retina?2:1;_t(c,a.min),c.width=v*p.x,c.height=v*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){ns.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,p=c.next,v=c.prev;p?p.prev=v:this._drawLast=v,v?v.next=p:this._drawFirst=p,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),p=[],v,w;for(w=0;w<c.length;w++){if(v=Number(c[w]),isNaN(v))return;p.push(v)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)a=v.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var p,v,w,M,X=a._parts,se=X.length,ue=this._ctx;if(se){for(ue.beginPath(),p=0;p<se;p++){for(v=0,w=X[p].length;v<w;v++)M=X[p][v],ue[v?"lineTo":"moveTo"](M.x,M.y);c&&ue.closePath()}this._fillStroke(ue,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,p=this._ctx,v=Math.max(Math.round(a._radius),1),w=(Math.max(Math.round(a._radiusY),1)||v)/v;w!==1&&(p.save(),p.scale(1,w)),p.beginPath(),p.arc(c.x,c.y/w,v,0,Math.PI*2,!1),w!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,c){var p=c.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),p,v,w=this._drawFirst;w;w=w.next)p=w.layer,p.options.interactive&&p._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(v=p);this._fireEvent(v?[v]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(Wt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var p,v,w=this._drawFirst;w;w=w.next)p=w.layer,p.options.interactive&&p._containsPoint(c)&&(v=p);v!==this._hoveredLayer&&(this._handleMouseOut(a),v&&(it(this._container,"leaflet-interactive"),this._fireEvent([v],a,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,p){this._map._fireDOMEvent(c,p||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var p=c.next,v=c.prev;if(p)p.prev=v;else return;v?v.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var p=c.next,v=c.prev;if(v)v.next=p;else return;p?p.prev=v:v&&(this._drawLast=v),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function oh(a){return Re.canvas?new rh(a):null}var So=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),tp={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ns.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=So("shape");it(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=So("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;Ct(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,p=a._fill,v=a.options,w=a._container;w.stroked=!!v.stroke,w.filled=!!v.fill,v.stroke?(c||(c=a._stroke=So("stroke")),w.appendChild(c),c.weight=v.weight+"px",c.color=v.color,c.opacity=v.opacity,v.dashArray?c.dashStyle=I(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=v.lineCap.replace("butt","flat"),c.joinstyle=v.lineJoin):c&&(w.removeChild(c),a._stroke=null),v.fill?(p||(p=a._fill=So("fill")),w.appendChild(p),p.color=v.fillColor||v.color,p.opacity=v.fillOpacity):p&&(w.removeChild(p),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),p=Math.round(a._radius),v=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+v+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Ln(a._container)},_bringToBack:function(a){On(a._container)}},Ea=Re.vml?So:be,wo=ns.extend({_initContainer:function(){this._container=Ea("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ea("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ct(this._container),Et(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ns.prototype._update.call(this);var a=this._bounds,c=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),_t(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=Ea("path");a.options.className&&it(c,a.options.className),a.options.interactive&&it(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Ct(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,p=a.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,ye(a._parts,c))},_updateCircle:function(a){var c=a._point,p=Math.max(Math.round(a._radius),1),v=Math.max(Math.round(a._radiusY),1)||p,w="a"+p+","+v+" 0 1,0 ",M=a._empty()?"M0 0":"M"+(c.x-p)+","+c.y+w+p*2+",0 "+w+-p*2+",0 ";this._setPath(a,M)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Ln(a._path)},_bringToBack:function(a){On(a._path)}});Re.vml&&wo.include(tp);function ah(a){return Re.svg||Re.vml?new wo(a):null}ht.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&oh(a)||ah(a)}});var lh=Zs.extend({initialize:function(a,c){Zs.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Fe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ip(a,c){return new lh(a,c)}wo.create=Ea,wo.pointsToPath=ye,ji.geometryToLayer=yo,ji.coordsToLatLng=Ys,ji.coordsToLatLngs=Ot,ji.latLngToCoords=bs,ji.latLngsToCoords=wr,ji.getFeature=Cr,ji.asFeature=Ta,ht.mergeOptions({boxZoom:!0});var ss=Zt.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ms(),ao(),this._startPoint=this._map.mouseEventToContainerPoint(a),tt(document,{contextmenu:Gs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),it(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new de(this._point,this._startPoint),p=c.getSize();_t(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Ct(this._box),Wt(this._container,"leaflet-crosshair")),Jn(),da(),Et(document,{contextmenu:Gs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ht.addInitHook("addHandler","boxZoom",ss),ht.mergeOptions({doubleClickZoom:!0});var uh=Zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,p=c.getZoom(),v=c.options.zoomDelta,w=a.originalEvent.shiftKey?p-v:p+v;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(a.containerPoint,w)}});ht.addInitHook("addHandler","doubleClickZoom",uh),ht.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ch=Zt.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new ts(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}it(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wt(this._map._container,"leaflet-grab"),Wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Fe(this._map.options.maxBounds);this._offsetLimit=Le(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),p=this._initialWorldOffset,v=this._draggable._newPos.x,w=(v-c+p)%a+c-p,M=(v+c+p)%a-c-p,X=Math.abs(w+p)<Math.abs(M+p)?w:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(a){var c=this._map,p=c.options,v=!p.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),v)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,X=p.easeLinearity,se=w.multiplyBy(X/M),ue=se.distanceTo([0,0]),we=Math.min(p.inertiaMaxSpeed,ue),Be=se.multiplyBy(we/ue),Ne=we/(p.inertiaDeceleration*X),et=Be.multiplyBy(-Ne/2).round();!et.x&&!et.y?c.fire("moveend"):(et=c._limitOffset(et,c.options.maxBounds),Y(function(){c.panBy(et,{duration:Ne,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",ch),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hh=Zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),tt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Et(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,p=a.scrollTop||c.scrollTop,v=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(v,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},p=this.keyCodes,v,w;for(v=0,w=p.left.length;v<w;v++)c[p.left[v]]=[-1*a,0];for(v=0,w=p.right.length;v<w;v++)c[p.right[v]]=[a,0];for(v=0,w=p.down.length;v<w;v++)c[p.down[v]]=[0,a];for(v=0,w=p.up.length;v<w;v++)c[p.up[v]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},p=this.keyCodes,v,w;for(v=0,w=p.zoomIn.length;v<w;v++)c[p.zoomIn[v]]=a;for(v=0,w=p.zoomOut.length;v<w;v++)c[p.zoomOut[v]]=-a},_addHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,p=this._map,v;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(v=this._panKeys[c],a.shiftKey&&(v=re(v).multiplyBy(3)),p.options.maxBounds&&(v=p._limitOffset(re(v),p.options.maxBounds)),p.options.worldCopyJump){var w=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(v)));p.panTo(w)}else p.panBy(v)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Gs(a)}}});ht.addInitHook("addHandler","keyboard",hh),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var np=Zt.extend({addHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Et(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=Fc(a),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var v=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),v),Gs(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,M=p?Math.ceil(w/p)*p:w,X=a._limitZoom(c+(this._delta>0?M:-M))-c;this._delta=0,this._startTime=null,X&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+X):a.setZoomAround(this._lastMousePos,c+X))}});ht.addInitHook("addHandler","scrollWheelZoom",np);var dh=600;ht.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var Aa=Zt.extend({addHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new ee(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(tt(document,"touchend",ri),tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),dh),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Et(document,"touchend",ri),Et(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Et(document,"touchend touchcancel contextmenu",this._cancel,this),Et(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new ee(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});ht.addInitHook("addHandler","tapHold",Aa),ht.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var ru=Zt.extend({addHooks:function(){it(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wt(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(a.touches[0]),v=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(v)._divideBy(2))),this._startDist=p.distanceTo(v),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),ri(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(a.touches[0]),v=c.mouseEventToContainerPoint(a.touches[1]),w=p.distanceTo(v)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var M=p._add(v)._divideBy(2)._subtract(this._centerPoint);if(w===1&&M.x===0&&M.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var X=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(X,this,!0),ri(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",ru),ht.BoxZoom=ss,ht.DoubleClickZoom=uh,ht.Drag=ch,ht.Keyboard=hh,ht.ScrollWheelZoom=np,ht.TapHold=Aa,ht.TouchZoom=ru,t.Bounds=de,t.Browser=Re,t.CRS=pe,t.Canvas=rh,t.Circle=tu,t.CircleMarker=va,t.Class=ae,t.Control=Ji,t.DivIcon=su,t.DivOverlay=tn,t.DomEvent=zf,t.DomUtil=Uf,t.Draggable=ts,t.Evented=ne,t.FeatureGroup=Nn,t.GeoJSON=ji,t.GridLayer=xo,t.Handler=Zt,t.Icon=Sr,t.ImageOverlay=bo,t.LatLng=Ie,t.LatLngBounds=$e,t.Layer=bn,t.LayerGroup=ys,t.LineUtil=Wc,t.Map=ht,t.Marker=_o,t.Mixin=es,t.Path=vs,t.Point=ee,t.PolyUtil=qf,t.Polygon=Zs,t.Polyline=is,t.Popup=Sa,t.PosAnimation=Uc,t.Projection=Gc,t.Rectangle=lh,t.Renderer=ns,t.SVG=wo,t.SVGOverlay=xa,t.TileLayer=Er,t.Tooltip=wa,t.Transformation=Qe,t.Util=J,t.VideoOverlay=nu,t.bind=o,t.bounds=Le,t.canvas=oh,t.circle=Zf,t.circleMarker=ba,t.control=gs,t.divIcon=Jf,t.extend=s,t.featureGroup=Kf,t.geoJSON=Yc,t.geoJson=Qc,t.gridLayer=nh,t.icon=Kc,t.imageOverlay=Jc,t.latLng=ze,t.latLngBounds=Fe,t.layerGroup=Xf,t.map=Hf,t.marker=Zc,t.point=re,t.polygon=Qf,t.polyline=Yf,t.popup=To,t.rectangle=ip,t.setOptions=x,t.stamp=u,t.svg=ah,t.svgOverlay=th,t.tileLayer=sh,t.tooltip=ih,t.transformation=$,t.version=n,t.videoOverlay=eh;var Da=window.L;t.noConflict=function(){return window.L=Da,this},window.L=t})}(Au,Au.exports)),Au.exports}var Jx=dP();const eS=sa(Jx),fP=nC({__proto__:null,default:eS},[Jx]);function tS(i,e){return function(){return i.apply(e,arguments)}}const{toString:pP}=Object.prototype,{getPrototypeOf:i_}=Object,nf=(i=>e=>{const t=pP.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),hs=i=>(i=i.toLowerCase(),e=>nf(e)===i),sf=i=>e=>typeof e===i,{isArray:wl}=Array,ac=sf("undefined");function mP(i){return i!==null&&!ac(i)&&i.constructor!==null&&!ac(i.constructor)&&Dn(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const iS=hs("ArrayBuffer");function gP(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&iS(i.buffer),e}const _P=sf("string"),Dn=sf("function"),nS=sf("number"),rf=i=>i!==null&&typeof i=="object",yP=i=>i===!0||i===!1,Wh=i=>{if(nf(i)!=="object")return!1;const e=i_(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},vP=hs("Date"),bP=hs("File"),TP=hs("Blob"),xP=hs("FileList"),SP=i=>rf(i)&&Dn(i.pipe),wP=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Dn(i.append)&&((e=nf(i))==="formdata"||e==="object"&&Dn(i.toString)&&i.toString()==="[object FormData]"))},CP=hs("URLSearchParams"),[EP,AP,DP,PP]=["ReadableStream","Request","Response","Headers"].map(hs),kP=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cc(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),wl(i))for(n=0,s=i.length;n<s;n++)e.call(null,i[n],n,i);else{const r=t?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let l;for(n=0;n<o;n++)l=r[n],e.call(null,i[l],l,i)}}function sS(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const Fo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rS=i=>!ac(i)&&i!==Fo;function qm(){const{caseless:i}=rS(this)&&this||{},e={},t=(n,s)=>{const r=i&&sS(e,s)||s;Wh(e[r])&&Wh(n)?e[r]=qm(e[r],n):Wh(n)?e[r]=qm({},n):wl(n)?e[r]=n.slice():e[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Cc(arguments[n],t);return e}const IP=(i,e,t,{allOwnKeys:n}={})=>(Cc(e,(s,r)=>{t&&Dn(s)?i[r]=tS(s,t):i[r]=s},{allOwnKeys:n}),i),LP=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),OP=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},MP=(i,e,t,n)=>{let s,r,o;const l={};if(e=e||{},i==null)return e;do{for(s=Object.getOwnPropertyNames(i),r=s.length;r-- >0;)o=s[r],(!n||n(o,i,e))&&!l[o]&&(e[o]=i[o],l[o]=!0);i=t!==!1&&i_(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},RP=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},NP=i=>{if(!i)return null;if(wl(i))return i;let e=i.length;if(!nS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},BP=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&i_(Uint8Array)),FP=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const r=s.value;e.call(i,r[0],r[1])}},UP=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},jP=hs("HTMLFormElement"),zP=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),oy=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),HP=hs("RegExp"),oS=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};Cc(t,(s,r)=>{let o;(o=e(s,r,i))!==!1&&(n[r]=o||s)}),Object.defineProperties(i,n)},$P=i=>{oS(i,(e,t)=>{if(Dn(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Dn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},VP=(i,e)=>{const t={},n=s=>{s.forEach(r=>{t[r]=!0})};return wl(i)?n(i):n(String(i).split(e)),t},qP=()=>{},WP=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function GP(i){return!!(i&&Dn(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const XP=i=>{const e=new Array(10),t=(n,s)=>{if(rf(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const r=wl(n)?[]:{};return Cc(n,(o,l)=>{const u=t(o,s+1);!ac(u)&&(r[l]=u)}),e[s]=void 0,r}}return n};return t(i,0)},KP=hs("AsyncFunction"),ZP=i=>i&&(rf(i)||Dn(i))&&Dn(i.then)&&Dn(i.catch),aS=((i,e)=>i?setImmediate:e?((t,n)=>(Fo.addEventListener("message",({source:s,data:r})=>{s===Fo&&r===t&&n.length&&n.shift()()},!1),s=>{n.push(s),Fo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Dn(Fo.postMessage)),YP=typeof queueMicrotask<"u"?queueMicrotask.bind(Fo):typeof process<"u"&&process.nextTick||aS,ge={isArray:wl,isArrayBuffer:iS,isBuffer:mP,isFormData:wP,isArrayBufferView:gP,isString:_P,isNumber:nS,isBoolean:yP,isObject:rf,isPlainObject:Wh,isReadableStream:EP,isRequest:AP,isResponse:DP,isHeaders:PP,isUndefined:ac,isDate:vP,isFile:bP,isBlob:TP,isRegExp:HP,isFunction:Dn,isStream:SP,isURLSearchParams:CP,isTypedArray:BP,isFileList:xP,forEach:Cc,merge:qm,extend:IP,trim:kP,stripBOM:LP,inherits:OP,toFlatObject:MP,kindOf:nf,kindOfTest:hs,endsWith:RP,toArray:NP,forEachEntry:FP,matchAll:UP,isHTMLForm:jP,hasOwnProperty:oy,hasOwnProp:oy,reduceDescriptors:oS,freezeMethods:$P,toObjectSet:VP,toCamelCase:zP,noop:qP,toFiniteNumber:WP,findKey:sS,global:Fo,isContextDefined:rS,isSpecCompliantForm:GP,toJSONObject:XP,isAsyncFn:KP,isThenable:ZP,setImmediate:aS,asap:YP};function ot(i,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ge.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const lS=ot.prototype,uS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{uS[i]={value:i}});Object.defineProperties(ot,uS);Object.defineProperty(lS,"isAxiosError",{value:!0});ot.from=(i,e,t,n,s,r)=>{const o=Object.create(lS);return ge.toFlatObject(i,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),ot.call(o,i.message,e,t,n,s),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const QP=null;function Wm(i){return ge.isPlainObject(i)||ge.isArray(i)}function cS(i){return ge.endsWith(i,"[]")?i.slice(0,-2):i}function ay(i,e,t){return i?i.concat(e).map(function(s,r){return s=cS(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function JP(i){return ge.isArray(i)&&!i.some(Wm)}const ek=ge.toFlatObject(ge,{},null,function(e){return/^is[A-Z]/.test(e)});function of(i,e,t){if(!ge.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=ge.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,A){return!ge.isUndefined(A[x])});const n=t.metaTokens,s=t.visitor||d,r=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(e);if(!ge.isFunction(s))throw new TypeError("visitor must be a function");function h(C){if(C===null)return"";if(ge.isDate(C))return C.toISOString();if(!u&&ge.isBlob(C))throw new ot("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(C)||ge.isTypedArray(C)?u&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function d(C,x,A){let P=C;if(C&&!A&&typeof C=="object"){if(ge.endsWith(x,"{}"))x=n?x:x.slice(0,-2),C=JSON.stringify(C);else if(ge.isArray(C)&&JP(C)||(ge.isFileList(C)||ge.endsWith(x,"[]"))&&(P=ge.toArray(C)))return x=cS(x),P.forEach(function(I,F){!(ge.isUndefined(I)||I===null)&&e.append(o===!0?ay([x],F,r):o===null?x:x+"[]",h(I))}),!1}return Wm(C)?!0:(e.append(ay(A,x,r),h(C)),!1)}const m=[],b=Object.assign(ek,{defaultVisitor:d,convertValue:h,isVisitable:Wm});function T(C,x){if(!ge.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(C),ge.forEach(C,function(P,k){(!(ge.isUndefined(P)||P===null)&&s.call(e,P,ge.isString(k)?k.trim():k,x,b))===!0&&T(P,x?x.concat(k):[k])}),m.pop()}}if(!ge.isObject(i))throw new TypeError("data must be an object");return T(i),e}function ly(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function n_(i,e){this._pairs=[],i&&of(i,this,e)}const hS=n_.prototype;hS.append=function(e,t){this._pairs.push([e,t])};hS.toString=function(e){const t=e?function(n){return e.call(this,n,ly)}:ly;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function tk(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dS(i,e,t){if(!e)return i;const n=t&&t.encode||tk;ge.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let r;if(s?r=s(e,t):r=ge.isURLSearchParams(e)?e.toString():new n_(e,t).toString(n),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class uy{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ge.forEach(this.handlers,function(n){n!==null&&e(n)})}}const fS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ik=typeof URLSearchParams<"u"?URLSearchParams:n_,nk=typeof FormData<"u"?FormData:null,sk=typeof Blob<"u"?Blob:null,rk={isBrowser:!0,classes:{URLSearchParams:ik,FormData:nk,Blob:sk},protocols:["http","https","file","blob","url","data"]},s_=typeof window<"u"&&typeof document<"u",Gm=typeof navigator=="object"&&navigator||void 0,ok=s_&&(!Gm||["ReactNative","NativeScript","NS"].indexOf(Gm.product)<0),ak=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lk=s_&&window.location.href||"http://localhost",uk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:s_,hasStandardBrowserEnv:ok,hasStandardBrowserWebWorkerEnv:ak,navigator:Gm,origin:lk},Symbol.toStringTag,{value:"Module"})),Ii={...uk,...rk};function ck(i,e){return of(i,new Ii.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,r){return Ii.isNode&&ge.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function hk(i){return ge.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dk(i){const e={},t=Object.keys(i);let n;const s=t.length;let r;for(n=0;n<s;n++)r=t[n],e[r]=i[r];return e}function pS(i){function e(t,n,s,r){let o=t[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=r>=t.length;return o=!o&&ge.isArray(s)?s.length:o,u?(ge.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!ge.isObject(s[o]))&&(s[o]=[]),e(t,n,s[o],r)&&ge.isArray(s[o])&&(s[o]=dk(s[o])),!l)}if(ge.isFormData(i)&&ge.isFunction(i.entries)){const t={};return ge.forEachEntry(i,(n,s)=>{e(hk(n),s,t,0)}),t}return null}function fk(i,e,t){if(ge.isString(i))try{return(e||JSON.parse)(i),ge.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const Ec={transitional:fS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,r=ge.isObject(e);if(r&&ge.isHTMLForm(e)&&(e=new FormData(e)),ge.isFormData(e))return s?JSON.stringify(pS(e)):e;if(ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e)||ge.isReadableStream(e))return e;if(ge.isArrayBufferView(e))return e.buffer;if(ge.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ck(e,this.formSerializer).toString();if((l=ge.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return of(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),fk(e)):e}],transformResponse:[function(e){const t=this.transitional||Ec.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(ge.isResponse(e)||ge.isReadableStream(e))return e;if(e&&ge.isString(e)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?ot.from(l,ot.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ii.classes.FormData,Blob:Ii.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],i=>{Ec.headers[i]={}});const pk=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mk=i=>{const e={};let t,n,s;return i&&i.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||e[t]&&pk[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},cy=Symbol("internals");function pu(i){return i&&String(i).trim().toLowerCase()}function Gh(i){return i===!1||i==null?i:ge.isArray(i)?i.map(Gh):String(i)}function gk(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const _k=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function xp(i,e,t,n,s){if(ge.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!ge.isString(e)){if(ge.isString(n))return e.indexOf(n)!==-1;if(ge.isRegExp(n))return n.test(e)}}function yk(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function vk(i,e){const t=ge.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(s,r,o){return this[n].call(this,e,s,r,o)},configurable:!0})})}let dn=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function r(l,u,h){const d=pu(u);if(!d)throw new Error("header name must be a non-empty string");const m=ge.findKey(s,d);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||u]=Gh(l))}const o=(l,u)=>ge.forEach(l,(h,d)=>r(h,d,u));if(ge.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ge.isString(e)&&(e=e.trim())&&!_k(e))o(mk(e),t);else if(ge.isHeaders(e))for(const[l,u]of e.entries())r(u,l,n);else e!=null&&r(t,e,n);return this}get(e,t){if(e=pu(e),e){const n=ge.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return gk(s);if(ge.isFunction(t))return t.call(this,s,n);if(ge.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=pu(e),e){const n=ge.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||xp(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function r(o){if(o=pu(o),o){const l=ge.findKey(n,o);l&&(!t||xp(n,n[l],l,t))&&(delete n[l],s=!0)}}return ge.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const r=t[n];(!e||xp(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,n={};return ge.forEach(this,(s,r)=>{const o=ge.findKey(n,r);if(o){t[o]=Gh(s),delete t[r];return}const l=e?yk(r):String(r).trim();l!==r&&delete t[r],t[l]=Gh(s),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ge.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&ge.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[cy]=this[cy]={accessors:{}}).accessors,s=this.prototype;function r(o){const l=pu(o);n[l]||(vk(s,o),n[l]=!0)}return ge.isArray(e)?e.forEach(r):r(e),this}};dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(dn.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});ge.freezeMethods(dn);function Sp(i,e){const t=this||Ec,n=e||t,s=dn.from(n.headers);let r=n.data;return ge.forEach(i,function(l){r=l.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function mS(i){return!!(i&&i.__CANCEL__)}function Cl(i,e,t){ot.call(this,i??"canceled",ot.ERR_CANCELED,e,t),this.name="CanceledError"}ge.inherits(Cl,ot,{__CANCEL__:!0});function gS(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new ot("Request failed with status code "+t.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function bk(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function Tk(i,e){i=i||10;const t=new Array(i),n=new Array(i);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),d=n[r];o||(o=h),t[s]=u,n[s]=h;let m=r,b=0;for(;m!==s;)b+=t[m++],m=m%i;if(s=(s+1)%i,s===r&&(r=(r+1)%i),h-o<e)return;const T=d&&h-d;return T?Math.round(b*1e3/T):void 0}}function xk(i,e){let t=0,n=1e3/e,s,r;const o=(h,d=Date.now())=>{t=d,s=null,r&&(clearTimeout(r),r=null),i.apply(null,h)};return[(...h)=>{const d=Date.now(),m=d-t;m>=n?o(h,d):(s=h,r||(r=setTimeout(()=>{r=null,o(s)},n-m)))},()=>s&&o(s)]}const cd=(i,e,t=3)=>{let n=0;const s=Tk(50,250);return xk(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,u=o-n,h=s(u),d=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&d?(l-o)/h:void 0,event:r,lengthComputable:l!=null,[e?"download":"upload"]:!0};i(m)},t)},hy=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},dy=i=>(...e)=>ge.asap(()=>i(...e)),Sk=Ii.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,Ii.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(Ii.origin),Ii.navigator&&/(msie|trident)/i.test(Ii.navigator.userAgent)):()=>!0,wk=Ii.hasStandardBrowserEnv?{write(i,e,t,n,s,r){const o=[i+"="+encodeURIComponent(e)];ge.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ge.isString(n)&&o.push("path="+n),ge.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ck(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Ek(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function _S(i,e,t){let n=!Ck(e);return i&&(n||t==!1)?Ek(i,e):e}const fy=i=>i instanceof dn?{...i}:i;function Jo(i,e){e=e||{};const t={};function n(h,d,m,b){return ge.isPlainObject(h)&&ge.isPlainObject(d)?ge.merge.call({caseless:b},h,d):ge.isPlainObject(d)?ge.merge({},d):ge.isArray(d)?d.slice():d}function s(h,d,m,b){if(ge.isUndefined(d)){if(!ge.isUndefined(h))return n(void 0,h,m,b)}else return n(h,d,m,b)}function r(h,d){if(!ge.isUndefined(d))return n(void 0,d)}function o(h,d){if(ge.isUndefined(d)){if(!ge.isUndefined(h))return n(void 0,h)}else return n(void 0,d)}function l(h,d,m){if(m in e)return n(h,d);if(m in i)return n(void 0,h)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,d,m)=>s(fy(h),fy(d),m,!0)};return ge.forEach(Object.keys(Object.assign({},i,e)),function(d){const m=u[d]||s,b=m(i[d],e[d],d);ge.isUndefined(b)&&m!==l||(t[d]=b)}),t}const yS=i=>{const e=Jo({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:l}=e;e.headers=o=dn.from(o),e.url=dS(_S(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(ge.isFormData(t)){if(Ii.hasStandardBrowserEnv||Ii.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[h,...d]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...d].join("; "))}}if(Ii.hasStandardBrowserEnv&&(n&&ge.isFunction(n)&&(n=n(e)),n||n!==!1&&Sk(e.url))){const h=s&&r&&wk.read(r);h&&o.set(s,h)}return e},Ak=typeof XMLHttpRequest<"u",Dk=Ak&&function(i){return new Promise(function(t,n){const s=yS(i);let r=s.data;const o=dn.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:h}=s,d,m,b,T,C;function x(){T&&T(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function P(){if(!A)return;const I=dn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:I,config:i,request:A};gS(function(U){t(U),x()},function(U){n(U),x()},j),A=null}"onloadend"in A?A.onloadend=P:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(P)},A.onabort=function(){A&&(n(new ot("Request aborted",ot.ECONNABORTED,i,A)),A=null)},A.onerror=function(){n(new ot("Network Error",ot.ERR_NETWORK,i,A)),A=null},A.ontimeout=function(){let F=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||fS;s.timeoutErrorMessage&&(F=s.timeoutErrorMessage),n(new ot(F,j.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,i,A)),A=null},r===void 0&&o.setContentType(null),"setRequestHeader"in A&&ge.forEach(o.toJSON(),function(F,j){A.setRequestHeader(j,F)}),ge.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),l&&l!=="json"&&(A.responseType=s.responseType),h&&([b,C]=cd(h,!0),A.addEventListener("progress",b)),u&&A.upload&&([m,T]=cd(u),A.upload.addEventListener("progress",m),A.upload.addEventListener("loadend",T)),(s.cancelToken||s.signal)&&(d=I=>{A&&(n(!I||I.type?new Cl(null,i,A):I),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const k=bk(s.url);if(k&&Ii.protocols.indexOf(k)===-1){n(new ot("Unsupported protocol "+k+":",ot.ERR_BAD_REQUEST,i));return}A.send(r||null)})},Pk=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,s;const r=function(h){if(!s){s=!0,l();const d=h instanceof Error?h:this.reason;n.abort(d instanceof ot?d:new Cl(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new ot(`timeout ${e} of ms exceeded`,ot.ETIMEDOUT))},e);const l=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),i=null)};i.forEach(h=>h.addEventListener("abort",r));const{signal:u}=n;return u.unsubscribe=()=>ge.asap(l),u}},kk=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,s;for(;n<t;)s=n+e,yield i.slice(n,s),n=s},Ik=async function*(i,e){for await(const t of Lk(i))yield*kk(t,e)},Lk=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},py=(i,e,t,n)=>{const s=Ik(i,e);let r=0,o,l=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:h,value:d}=await s.next();if(h){l(),u.close();return}let m=d.byteLength;if(t){let b=r+=m;t(b)}u.enqueue(new Uint8Array(d))}catch(h){throw l(h),h}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},af=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vS=af&&typeof ReadableStream=="function",Ok=af&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),bS=(i,...e)=>{try{return!!i(...e)}catch{return!1}},Mk=vS&&bS(()=>{let i=!1;const e=new Request(Ii.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),my=64*1024,Xm=vS&&bS(()=>ge.isReadableStream(new Response("").body)),hd={stream:Xm&&(i=>i.body)};af&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!hd[e]&&(hd[e]=ge.isFunction(i[e])?t=>t[e]():(t,n)=>{throw new ot(`Response type '${e}' is not supported`,ot.ERR_NOT_SUPPORT,n)})})})(new Response);const Rk=async i=>{if(i==null)return 0;if(ge.isBlob(i))return i.size;if(ge.isSpecCompliantForm(i))return(await new Request(Ii.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(i)||ge.isArrayBuffer(i))return i.byteLength;if(ge.isURLSearchParams(i)&&(i=i+""),ge.isString(i))return(await Ok(i)).byteLength},Nk=async(i,e)=>{const t=ge.toFiniteNumber(i.getContentLength());return t??Rk(e)},Bk=af&&(async i=>{let{url:e,method:t,data:n,signal:s,cancelToken:r,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:h,headers:d,withCredentials:m="same-origin",fetchOptions:b}=yS(i);h=h?(h+"").toLowerCase():"text";let T=Pk([s,r&&r.toAbortSignal()],o),C;const x=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let A;try{if(u&&Mk&&t!=="get"&&t!=="head"&&(A=await Nk(d,n))!==0){let j=new Request(e,{method:"POST",body:n,duplex:"half"}),V;if(ge.isFormData(n)&&(V=j.headers.get("content-type"))&&d.setContentType(V),j.body){const[U,K]=hy(A,cd(dy(u)));n=py(j.body,my,U,K)}}ge.isString(m)||(m=m?"include":"omit");const P="credentials"in Request.prototype;C=new Request(e,{...b,signal:T,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:P?m:void 0});let k=await fetch(C);const I=Xm&&(h==="stream"||h==="response");if(Xm&&(l||I&&x)){const j={};["status","statusText","headers"].forEach(D=>{j[D]=k[D]});const V=ge.toFiniteNumber(k.headers.get("content-length")),[U,K]=l&&hy(V,cd(dy(l),!0))||[];k=new Response(py(k.body,my,U,()=>{K&&K(),x&&x()}),j)}h=h||"text";let F=await hd[ge.findKey(hd,h)||"text"](k,i);return!I&&x&&x(),await new Promise((j,V)=>{gS(j,V,{data:F,headers:dn.from(k.headers),status:k.status,statusText:k.statusText,config:i,request:C})})}catch(P){throw x&&x(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,i,C),{cause:P.cause||P}):ot.from(P,P&&P.code,i,C)}}),Km={http:QP,xhr:Dk,fetch:Bk};ge.forEach(Km,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const gy=i=>`- ${i}`,Fk=i=>ge.isFunction(i)||i===null||i===!1,TS={getAdapter:i=>{i=ge.isArray(i)?i:[i];const{length:e}=i;let t,n;const s={};for(let r=0;r<e;r++){t=i[r];let o;if(n=t,!Fk(t)&&(n=Km[(o=String(t)).toLowerCase()],n===void 0))throw new ot(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+r]=n}if(!n){const r=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(gy).join(`
`):" "+gy(r[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Km};function wp(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Cl(null,i)}function _y(i){return wp(i),i.headers=dn.from(i.headers),i.data=Sp.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),TS.getAdapter(i.adapter||Ec.adapter)(i).then(function(n){return wp(i),n.data=Sp.call(i,i.transformResponse,n),n.headers=dn.from(n.headers),n},function(n){return mS(n)||(wp(i),n&&n.response&&(n.response.data=Sp.call(i,i.transformResponse,n.response),n.response.headers=dn.from(n.response.headers))),Promise.reject(n)})}const xS="1.8.4",lf={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{lf[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const yy={};lf.transitional=function(e,t,n){function s(r,o){return"[Axios v"+xS+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,l)=>{if(e===!1)throw new ot(s(o," has been removed"+(t?" in "+t:"")),ot.ERR_DEPRECATED);return t&&!yy[o]&&(yy[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,l):!0}};lf.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Uk(i,e,t){if(typeof i!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const r=n[s],o=e[r];if(o){const l=i[r],u=l===void 0||o(l,r,i);if(u!==!0)throw new ot("option "+r+" must be "+u,ot.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ot("Unknown option "+r,ot.ERR_BAD_OPTION)}}const Xh={assertOptions:Uk,validators:lf},xs=Xh.validators;let Vo=class{constructor(e){this.defaults=e,this.interceptors={request:new uy,response:new uy}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Jo(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:r}=t;n!==void 0&&Xh.assertOptions(n,{silentJSONParsing:xs.transitional(xs.boolean),forcedJSONParsing:xs.transitional(xs.boolean),clarifyTimeoutError:xs.transitional(xs.boolean)},!1),s!=null&&(ge.isFunction(s)?t.paramsSerializer={serialize:s}:Xh.assertOptions(s,{encode:xs.function,serialize:xs.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Xh.assertOptions(t,{baseUrl:xs.spelling("baseURL"),withXsrfToken:xs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&ge.merge(r.common,r[t.method]);r&&ge.forEach(["delete","get","head","post","put","patch","common"],C=>{delete r[C]}),t.headers=dn.concat(o,r);const l=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(u=u&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const h=[];this.interceptors.response.forEach(function(x){h.push(x.fulfilled,x.rejected)});let d,m=0,b;if(!u){const C=[_y.bind(this),void 0];for(C.unshift.apply(C,l),C.push.apply(C,h),b=C.length,d=Promise.resolve(t);m<b;)d=d.then(C[m++],C[m++]);return d}b=l.length;let T=t;for(m=0;m<b;){const C=l[m++],x=l[m++];try{T=C(T)}catch(A){x.call(this,A);break}}try{d=_y.call(this,T)}catch(C){return Promise.reject(C)}for(m=0,b=h.length;m<b;)d=d.then(h[m++],h[m++]);return d}getUri(e){e=Jo(this.defaults,e);const t=_S(e.baseURL,e.url,e.allowAbsoluteUrls);return dS(t,e.params,e.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(e){Vo.prototype[e]=function(t,n){return this.request(Jo(n||{},{method:e,url:t,data:(n||{}).data}))}});ge.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,l){return this.request(Jo(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Vo.prototype[e]=t(),Vo.prototype[e+"Form"]=t(!0)});let jk=class SS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(l=>{n.subscribe(l),r=l}).then(s);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,l){n.reason||(n.reason=new Cl(r,o,l),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new SS(function(s){e=s}),cancel:e}}};function zk(i){return function(t){return i.apply(null,t)}}function Hk(i){return ge.isObject(i)&&i.isAxiosError===!0}const Zm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zm).forEach(([i,e])=>{Zm[e]=i});function wS(i){const e=new Vo(i),t=tS(Vo.prototype.request,e);return ge.extend(t,Vo.prototype,e,{allOwnKeys:!0}),ge.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return wS(Jo(i,s))},t}const Nt=wS(Ec);Nt.Axios=Vo;Nt.CanceledError=Cl;Nt.CancelToken=jk;Nt.isCancel=mS;Nt.VERSION=xS;Nt.toFormData=of;Nt.AxiosError=ot;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=zk;Nt.isAxiosError=Hk;Nt.mergeConfig=Jo;Nt.AxiosHeaders=dn;Nt.formToJSON=i=>pS(ge.isHTMLForm(i)?new FormData(i):i);Nt.getAdapter=TS.getAdapter;Nt.HttpStatusCode=Zm;Nt.default=Nt;const{Axios:u8,AxiosError:c8,CanceledError:h8,isCancel:d8,CancelToken:f8,VERSION:p8,all:m8,Cancel:g8,isAxiosError:_8,spread:y8,toFormData:v8,AxiosHeaders:b8,HttpStatusCode:T8,formToJSON:x8,getAdapter:S8,mergeConfig:w8}=Nt;var Cp,vy;function CS(){if(vy)return Cp;vy=1;function i(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Cp=i,Cp}var Ep,by;function $k(){if(by)return Ep;by=1;var i=typeof $r=="object"&&$r&&$r.Object===Object&&$r;return Ep=i,Ep}var Ap,Ty;function ES(){if(Ty)return Ap;Ty=1;var i=$k(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=i||e||Function("return this")();return Ap=t,Ap}var Dp,xy;function Vk(){if(xy)return Dp;xy=1;var i=ES(),e=function(){return i.Date.now()};return Dp=e,Dp}var Pp,Sy;function qk(){if(Sy)return Pp;Sy=1;var i=/\s/;function e(t){for(var n=t.length;n--&&i.test(t.charAt(n)););return n}return Pp=e,Pp}var kp,wy;function Wk(){if(wy)return kp;wy=1;var i=qk(),e=/^\s+/;function t(n){return n&&n.slice(0,i(n)+1).replace(e,"")}return kp=t,kp}var Ip,Cy;function AS(){if(Cy)return Ip;Cy=1;var i=ES(),e=i.Symbol;return Ip=e,Ip}var Lp,Ey;function Gk(){if(Ey)return Lp;Ey=1;var i=AS(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,s=i?i.toStringTag:void 0;function r(o){var l=t.call(o,s),u=o[s];try{o[s]=void 0;var h=!0}catch{}var d=n.call(o);return h&&(l?o[s]=u:delete o[s]),d}return Lp=r,Lp}var Op,Ay;function Xk(){if(Ay)return Op;Ay=1;var i=Object.prototype,e=i.toString;function t(n){return e.call(n)}return Op=t,Op}var Mp,Dy;function Kk(){if(Dy)return Mp;Dy=1;var i=AS(),e=Gk(),t=Xk(),n="[object Null]",s="[object Undefined]",r=i?i.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:r&&r in Object(l)?e(l):t(l)}return Mp=o,Mp}var Rp,Py;function Zk(){if(Py)return Rp;Py=1;function i(e){return e!=null&&typeof e=="object"}return Rp=i,Rp}var Np,ky;function Yk(){if(ky)return Np;ky=1;var i=Kk(),e=Zk(),t="[object Symbol]";function n(s){return typeof s=="symbol"||e(s)&&i(s)==t}return Np=n,Np}var Bp,Iy;function Qk(){if(Iy)return Bp;Iy=1;var i=Wk(),e=CS(),t=Yk(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(h){if(typeof h=="number")return h;if(t(h))return n;if(e(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=e(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=i(h);var m=r.test(h);return m||o.test(h)?l(h.slice(2),m?2:8):s.test(h)?n:+h}return Bp=u,Bp}var Fp,Ly;function Jk(){if(Ly)return Fp;Ly=1;var i=CS(),e=Vk(),t=Qk(),n="Expected a function",s=Math.max,r=Math.min;function o(l,u,h){var d,m,b,T,C,x,A=0,P=!1,k=!1,I=!0;if(typeof l!="function")throw new TypeError(n);u=t(u)||0,i(h)&&(P=!!h.leading,k="maxWait"in h,b=k?s(t(h.maxWait)||0,u):b,I="trailing"in h?!!h.trailing:I);function F(J){var ae=d,ce=m;return d=m=void 0,A=J,T=l.apply(ce,ae),T}function j(J){return A=J,C=setTimeout(K,u),P?F(J):T}function V(J){var ae=J-x,ce=J-A,le=u-ae;return k?r(le,b-ce):le}function U(J){var ae=J-x,ce=J-A;return x===void 0||ae>=u||ae<0||k&&ce>=b}function K(){var J=e();if(U(J))return D(J);C=setTimeout(K,V(J))}function D(J){return C=void 0,I&&d?F(J):(d=m=void 0,T)}function R(){C!==void 0&&clearTimeout(C),A=0,d=x=m=C=void 0}function Y(){return C===void 0?T:D(e())}function Q(){var J=e(),ae=U(J);if(d=arguments,m=this,x=J,ae){if(C===void 0)return j(x);if(k)return clearTimeout(C),C=setTimeout(K,u),F(x)}return C===void 0&&(C=setTimeout(K,u)),T}return Q.cancel=R,Q.flush=Y,Q}return Fp=o,Fp}var eI=Jk();const Du=sa(eI);function Ym(i,e){let t="#959595";if(e===null||e==="N/A"||e==="")return t;e=(""+e).replace(",",".");const n="#0000e8",s="#6060e8",r="#b0b0e8",o="#57ee17",l="#578817",u=10,h=12,d=25,m=45;let b=3,T=6,C=u,x=h;return i===!1&&(C=d,x=m,b=8,T=17),(i===!1||i===!0)&&(e>=x?t=l:e>=C?t=o:(t=r,e<b?t=n:e<T&&(t=s))),t}function Oy(i){const e=["0","3","7","10","12"],t=["0","8","17","25","45"],n=[];let s,r,o=[];i?(n.push('<i style="background:#ffffff"></i> <b>dense</b>'),o=e):(n.push('<i style="background:#ffffff"></i> <b>périurbain</b>'),o=t),n.push(`<i style="background:${Ym(!0,null)}"></i> non calculé`);for(let l=0;l<o.length;l++){s=o[l],r=o[l+1];let u=`${s}${r?`&ndash;${r}`:"+"}`,h=`<i style="opacity:0.4;background:${Ym(i,s)}"></i> `;n.push(h+u)}return n.join("<br>")}const tI={name:"Isochrone",props:{msg:String,location:Object},components:{LMap:JD,LGeoJson:ZD,LPolygon:lP,LIcon:QD,LMarker:rP,LTileLayer:cP,LControl:$D,LControlScale:GD,LControlLayers:qD},setup(){return{leafletMap:li(null)}},created(){this.htmlLegend=Oy(!0)},data(){return{htmlLegend:null,leafletMap:null,loading:!1,showIsochrones:!1,showCarre:!0,showCadastre:!1,legendeDense:!0,zoom:14,minZoom:10,maxZoom:18,center:[50.6349747,3.046428],bounds:null,boundSwLat:0,boundSwLng:0,boundNeLat:0,boundNeLng:0,geojsonIsochrone:null,geojsonCarre:null,geojsonCadastre:null,annee:"2019",region:"9",com2co:"1",fillColor:"#A0DCA0",tileProviders:[{name:"Carte OpenStreetMap",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19,minZoom:10},{name:"Carte WorldStreetMap",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"ArcGIS World Street Map (Esri)",maxZoom:19,minZoom:10},{name:"Satellite ArcGisOnline",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.arcgis.com/">ArcGisOnline</a>',maxZoom:19,minZoom:10},{name:"Vues Aérienne IGN",visible:!1,url:"https://data.geopf.fr/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE=normal&TILEMATRIXSET=PM&FORMAT=image/jpeg&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&LAYER=ORTHOIMAGERY.ORTHOPHOTOS",attribution:'&copy; <a href="https://geoservices.ign.fr/services-geoplateforme-diffusion">IGN GeoPortail</a> ',tileSize:256,maxZoom:18,minZoom:10}],addressIcon:eS.icon({iconUrl:"../assets/location.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]})}},watch:{location:{handler(i){i&&(i.lonX&&i.latY&&(this.center=[i.latY,i.lonX],i.locType==="city"?this.zoom=14:i.locType==="address"&&(this.zoom=17),this.debouncedFetchCommune(i.latY,i.lonX)),i.regionId&&this.region!==i.regionId&&(this.region=i.regionId),i.com2coId&&this.com2co!==i.com2coId&&(this.com2co=i.com2coId,this.callGeoJsonIsochrones(),this.callGeoJsonCarres(),this.callGeoJsonCadastre()))},immediate:!0,deep:!0}},methods:{getRootUrl(){const i="static",e="https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main";return console.log("mode: "+i),e},isDynamic(){return MODE},detectSelfDomain(){const i=window.location.href;return i.indexOf(".ovh/")>0||i.indexOf(":5173/geolocation/")>0},addTemporaryMarker(i,e){},onAnnee(){const i="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLng+"&annee="+this.annee;this.callGeoJsonIsochrones(i),this.callGeoJsonCarres(i)},boundsUpdated(i){if(this.bounds=i,i._southWest.lat<this.boundSwLat||i._southWest.lng<this.boundSwLng||i._northEast.lat>this.boundNeLat||i._northEast.lng>this.boundNeLng){this.boundSwLat=i._southWest.lat,this.boundSwLng=i._southWest.lng,this.boundNeLat=i._northEast.lat,this.boundNeLng=i._northEast.lng;const e="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng+"&annee="+this.annee;console.log("boundsUpdated :"+e),this.callGeoJsonIsochrones(e),this.callGeoJsonCarres(e),this.callGeoJsonCadastre(e);const t=(i._northEast.lat+i._southWest.lat)/2,n=(i._northEast.lng+i._southWest.lng)/2;this.debouncedFetchCommune(t,n)}},async fetchCommune(i,e){try{const t=this.legendeDense,s=(await Nt.get("https://geo.api.gouv.fr/communes?fields=nom,code&format=json&lat="+i+"&lon="+e,{timeout:5e3})).data;if(!s||!s.length)return;const r=s[0].code,u=(await Nt.get("https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/cities/densite.json",{timeout:5e3})).data.find(h=>h[r]!==void 0);if(u){const h=u[r];this.legendeDense=h==="1"||h==="2",t!==this.legendeDense&&(this.htmlLegend=Oy(this.legendeDense))}}catch(t){console.error("Error fetching addresses:",t)}},debouncedFetchCommune:Du(async function(i,e){await this.fetchCommune(i,e)},400),async fetchGeoJson(i){return await(await fetch(i)).json()},debouncedFetchIsochrone:Du(async function(i,e){try{console.log("debouncedFetchIsochrone: "+i);const t=await this.fetchGeoJson(i);e(t)}catch(t){console.error("Error fetching GeoJSON:",t)}},380),async callGeoJsonIsochrones(i){const e=this.getRootUrl();let t="";this.isDynamic()?t=`${e}/map/park/area${i}`:t=`${e}/geojson/isochrones/${this.com2co}/isochrone_${this.annee}_${this.com2co}.json`,this.debouncedFetchIsochrone(t,n=>{this.geojsonIsochrone=n})},debouncedFetchCarre:Du(async function(i,e){try{console.log("debouncedFetchCarre: "+i);const t=await this.fetchGeoJson(i);e(t)}catch(t){console.error("Error fetching GeoJSON:",t)}},400),async callGeoJsonCarres(i){const e=this.getRootUrl();let t="";this.isDynamic()?t=`${e}/map/insee/carre200m/area${i}`:t=`${e}/geojson/carres/${this.com2co}/carre_${this.annee}_${this.com2co}.json`,this.debouncedFetchCarre(t,n=>{this.geojsonCarre=n})},debouncedFetchCadastre:Du(async function(i,e){try{console.log("debouncedFetchCadastre: "+i);const t=await this.fetchGeoJson(i);e(t)}catch(t){console.error("Error fetching GeoJSON:",t)}},450),async callGeoJsonCadastre(i){const e=this.getRootUrl();let t="";this.isDynamic()?t=`${e}/map/cadastre/area${i}`:t=`${e}/data/cadastres/${this.region}/cadastre_c2c_${this.com2co}.json`,this.debouncedFetchCadastre(t,n=>{this.geojsonCadastre=n})}},mounted(){const i=document.getElementById("customControl");i&&(i.innerHTML="<p>Custom HTML content loaded on map load</p>")},computed:{detailIsochrone(){return{onEachFeature:this.onDetailIsochrone}},detailCadastre(){return{onEachFeature:this.onDetailCadastre}},detailCarre(){return{onEachFeature:this.onDetailCarre}},styleIsochroneFunction(){const i=this.fillColor;return()=>({weight:2,color:"#406C40",opacity:.15,fillColor:i,fillOpacity:.1})},styleCarreFunction(){return()=>({weight:1,color:"#24216a",opacity:.2,fillColor:"#060512",fillOpacity:.15})},styleCadastreFunction(){return()=>({weight:2,color:"#CB9800",opacity:.95,fillColor:"#FFFF99",fillOpacity:.3})},onDetailIsochrone(){return(i,e)=>{e.bindTooltip("<div>Quartier:"+i.properties.quartier+"</div><div>"+i.properties.name+" (id:"+i.properties.id+")</div><div>"+i.properties.people+" hab. pour "+i.properties.area+" m² ("+i.properties.areaPerPeople+" m²/h)</div>",{permanent:!1,sticky:!0}),i.properties.oms?e.setStyle({weight:2,color:"#406C40",opacity:.9,fillColor:i.properties.fillColor,fillOpacity:.09}):e.setStyle({fillColor:i.properties.fillColor,opacity:0,fillOpacity:0})}},onDetailCarre(){return(i,e)=>{e.on("mouseover",function(t){const n=t.target.feature,s="<h4>Données carroyées : Parc / Habitant</h4><div>id Inspire:"+n.properties.idInspire+"</div><div>Commune: <b>"+n.properties.commune+"</b>, pop.: <b>"+n.properties.people+"</b></div>";let r="";n.properties.surfaceTotalParkOms===null||n.properties.surfaceTotalParkOms===""?r="<div style='text-align: center'><b><i>Non calculé</i></b></div>":(r="<div>ont accès: "+n.properties.popParkIncludedOms+" pers. (sans: "+n.properties.popParkExcludedOms+")</div><div>Surface parcs: "+n.properties.surfaceTotalParkOms+" m²</div><div>Partagés avec : "+n.properties.popSquareShareOms+" pers.</div><div>Soit : <b>"+n.properties.squareMtePerCapitaOms+" m²/hab</b></div><div style='padding-top: 1em;'><i><u>Parcs accessibles:</u><br />",n.properties.commentParks!==""?r+=n.properties.commentParks+"</i></div>":r+="Aucun</i></div>"),t.target.setStyle({weight:5}),document.getElementById("dataDetail").innerHTML=s+r}),e.on("mouseout",function(t){t.target.setStyle({weight:2})}),e.setStyle({fillColor:Ym(i.properties.isDense,i.properties.squareMtePerCapitaOms),fillOpacity:.4})}},onDetailCadastre(){return(i,e)=>{e.bindTooltip("<div>INSEE: "+i.properties.idInsee+"</div><div>Commune: "+i.properties.nom+"</div>")}}},beforeMount(){const i=this;i.loading=!0,Promise.all([this.callGeoJsonCarres(""),this.callGeoJsonIsochrones(""),this.callGeoJsonCadastre("")]).then(e=>{i.loading=!1})}},iI={id:"customControl",class:"dataDetail"},nI={id:"legend",class:"legend"},sI=["innerHTML"];function rI(i,e,t,n,s,r){const o=yi("l-tile-layer"),l=yi("l-control-layers"),u=yi("l-control"),h=yi("l-control-scale"),d=yi("l-geo-json"),m=yi("l-map");return Pt(),ti("div",null,[e[8]||(e[8]=Xe("label",{for:"annee"},"Année",-1)),Hr(Xe("select",{id:"annee",onChange:e[0]||(e[0]=(...b)=>r.onAnnee&&r.onAnnee(...b)),class:"form-control","onUpdate:modelValue":e[1]||(e[1]=b=>s.annee=b)},e[5]||(e[5]=[Xe("option",{value:"2019",selected:"selected"},"2019",-1),Xe("option",{value:"2017"},"2017",-1),Xe("option",{value:"2015"},"2015",-1)]),544),[[qh,s.annee]]),e[9]||(e[9]=Xe("label",{for:"checkbox"}," | Isochrones",-1)),Hr(Xe("input",{id:"checkbox","onUpdate:modelValue":e[2]||(e[2]=b=>s.showIsochrones=b),type:"checkbox"},null,512),[[_p,s.showIsochrones]]),e[10]||(e[10]=Xe("label",{for:"cbCarre"}," | Données carroyées",-1)),Hr(Xe("input",{id:"cbCarre","onUpdate:modelValue":e[3]||(e[3]=b=>s.showCarre=b),type:"checkbox"},null,512),[[_p,s.showCarre]]),e[11]||(e[11]=Xe("label",{for:"cbCadastre"}," | Cadastre",-1)),Hr(Xe("input",{id:"cbCadastre","onUpdate:modelValue":e[4]||(e[4]=b=>s.showCadastre=b),type:"checkbox"},null,512),[[_p,s.showCadastre]]),e[12]||(e[12]=Xe("br",null,null,-1)),ft(m,{ref:"leafletMap",zoom:s.zoom,center:s.center,"min-zoom":s.minZoom,"max-zoom":s.maxZoom,style:{height:"700px",width:"95%"},"onUpdate:bounds":r.boundsUpdated},{default:Ci(()=>[(Pt(!0),ti(Pi,null,Wa(s.tileProviders,b=>(Pt(),Bo(o,{key:b.name,name:b.name,visible:b.visible,url:b.url,attribution:b.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),ft(l,{position:"topright"}),ft(u,{position:"bottomright"},{default:Ci(()=>e[6]||(e[6]=[Xe("div",{id:"dataDetail",class:"dataDetail"},[Xe("h4",null," Détail des données "),hi("  "),Xe("br"),hi("  ")],-1)])),_:1}),ft(h,{position:"bottomleft",imperial:!1,metric:!0}),ft(u,{position:"bottomleft"},{default:Ci(()=>[Xe("div",iI,[e[7]||(e[7]=Xe("h4",null,[hi(" Parc accessible "),Xe("br"),hi("(m²/hab.)")],-1)),Xe("div",nI,[Xe("div",{id:"legendContent",innerHTML:s.htmlLegend},null,8,sI)])])]),_:1}),s.showCarre?(Pt(),Bo(d,{key:0,geojson:s.geojsonCarre,options:r.detailCarre,"options-style":r.styleCarreFunction},null,8,["geojson","options","options-style"])):zu("",!0),s.showIsochrones?(Pt(),Bo(d,{key:1,geojson:s.geojsonIsochrone,options:r.detailIsochrone,"options-style":r.styleIsochroneFunction},null,8,["geojson","options","options-style"])):zu("",!0),s.showCadastre?(Pt(),Bo(d,{key:2,geojson:s.geojsonCadastre,options:r.detailCadastre,"options-style":r.styleCadastreFunction},null,8,["geojson","options","options-style"])):zu("",!0)]),_:1},8,["zoom","center","min-zoom","max-zoom","onUpdate:bounds"])])}const oI=mr(tI,[["render",rI]]),aI={props:{modelValue:[String,Number],fetchItems:Function,placeholder:String,disabled:Boolean,displaySearchAddress:{type:Boolean,default:!0}},data(){return{search:"",items:[],showDropdown:!1}},computed:{filteredItems(){return this.items.filter(i=>i.label.toLowerCase().includes(this.search.toLowerCase()))}},watch:{modelValue(i){const e=this.items.find(t=>t.id===i);this.search=e?e.label:""}},methods:{async onInput(){this.showDropdown=!0,this.items=await this.fetchItems(this.search),this.$emit("update:modelValue",null)},selectItem(i){this.search=i.label,this.showDropdown=!1,this.$emit("update:modelValue",i.id);const e=i.id.split(", "),t={locType:"address",lonX:e[0],latY:e[1]};this.$emit("location-selected",t)}}},lI={key:0,class:"autocomplete"},uI=["placeholder","disabled"],cI={key:0},hI=["onClick"];function dI(i,e,t,n,s,r){return t.displaySearchAddress?(Pt(),ti("div",lI,[Hr(Xe("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.search=o),onInput:e[1]||(e[1]=(...o)=>r.onInput&&r.onInput(...o)),placeholder:t.placeholder,disabled:t.disabled},null,40,uI),[[pA,s.search]]),r.filteredItems.length&&s.showDropdown?(Pt(),ti("ul",cI,[(Pt(!0),ti(Pi,null,Wa(r.filteredItems,o=>(Pt(),ti("li",{key:o.id,onClick:l=>r.selectItem(o)},zr(o.label),9,hI))),128))])):zu("",!0)])):zu("",!0)}const fI=mr(aI,[["render",dI],["__scopeId","data-v-34dbfd60"]]),pI={props:{displaySearchAddress:{type:Boolean,default:!0}},components:{Autocomplete:fI},data(){return{fromLocalStorage:!1,regions:[],com2cos:[],cities:[],addresses:[],selectedRegion:null,selectedCom2co:null,selectedCom2coName:null,selectedCity:null,selectedCityName:null,selectedCityInseeCode:null,locX:null,locY:null,selectedAddress:!0}},async mounted(){const i=localStorage.getItem("location-selected");let e=null;i?(this.fromLocalStorage=!0,e=JSON.parse(i),this.selectedRegion=e.regionId,this.selectedCom2co=e.com2coId,this.selectedCity=e.cityId,this.selectedCityName=e.cityName,this.selectedCityInseeCode=e.cityInsee,this.locX=e.lonX,this.locY=e.latY):(this.selectedRegion="9",this.selectedCom2co="1",this.selectedCity="2878"),await this.fetchRegions();const t={target:{options:[{text:this.regions.find(s=>s.id===this.selectedRegion)?.name||""}],selectedIndex:0}};await this.fetchCom2cos(t);const n={target:{options:[{text:this.com2cos.find(s=>s.id===this.selectedCom2co)?.name||""}],selectedIndex:0}};await this.fetchCities(n),this.$emit("update-location",e)},computed:{selectedCityInsee(){return this.cities.find(i=>i.id===this.selectedCityId)||{}},selectedAddressCoordinates(){return this.selectedAddress.coordinates}},methods:{async fetchRegions(){try{const i=await Nt.get("https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/regions.json");if(this.regions=i.data,await this.$nextTick(),this.selectedRegion){const e=this.regions.find(t=>t.id===this.selectedRegion);if(e){const t={target:{options:[{text:e.name}],selectedIndex:0}};await this.fetchCom2cos(t)}}else this.com2cos=[],this.selectedCom2co=null,this.cities=[],this.selectedCity=null}catch(i){this.regions=[],this.selectedRegion=null,console.error("Error fetching regions:",i)}},async fetchCom2cos(){if(this.selectedRegion)try{const i=await Nt.get(`https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/com2cos/${this.selectedRegion}/com2cos_${this.selectedRegion}.json`);if(this.com2cos=i.data,await this.$nextTick(),this.selectedCom2co){const e=this.com2cos.find(t=>t.id===this.selectedCom2co);if(e){const t={target:{options:[{text:e.name}],selectedIndex:0}};await this.fetchCities(t)}}else this.cities=[],this.selectedCity=null}catch(i){this.com2cos=[],this.selectedCom2co=null,console.error("Error fetching com2cos:",i)}},async fetchCities(i){if(this.selectedCom2co)try{const e=i.target.options[i.target.selectedIndex];this.selectedCom2coName=e.text;const t=await Nt.get(`https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/cities/com2co/cities_${this.selectedCom2co}.json`);if(this.cities=t.data,await this.$nextTick(),this.selectedCity){const n=this.cities.find(s=>s.id===this.selectedCity);if(n){const s={target:{options:[{text:`${n.name} (${n.inseeCode})`,getAttribute:r=>{switch(r){case"data-insee-code":return n.inseeCode;case"data-longitude-x":return n.lonX;case"data-latitude-y":return n.latY;default:return null}}}],selectedIndex:0}};this.handleCityChange(s)}}}catch(e){this.cities=[],this.selectedCity=null,this.selectedCityInseeCode=null,console.error("Error fetching cities:",e)}},fetchAddresses:Du(async function(i){if(!(!this.selectedCity&&!this.selectedCityInseeCode&&i.length<3))try{const t=(await Nt.get(`https://api-adresse.data.gouv.fr/search/?citycode=${this.selectedCityInseeCode}&q=`+encodeURI(i),{timeout:5e3})).data;return this.addresses=t.features.map(n=>({id:n.geometry.coordinates.join(", "),label:n.properties.label})),this.addresses}catch(e){console.error("Error fetching addresses:",e)}},350),handleCityChange(i){const e=i.target.options[i.target.selectedIndex];this.selectedCityName=e.text,this.selectedCityInseeCode=e.getAttribute("data-insee-code"),this.locX=e.getAttribute("data-longitude-x"),this.locY=e.getAttribute("data-latitude-y");const t={locType:"city",regionId:this.selectedRegion,com2coId:this.selectedCom2co,com2coName:this.selectedCom2coName,cityId:this.selectedCity,cityName:this.selectedCityName,cityInsee:this.selectedCityInseeCode,lonX:this.locX,latY:this.locY};localStorage.setItem("location-selected",JSON.stringify(t)),this.$emit("update-location",t)},handleLocationSelected(i){this.$emit("update-location",i)}}},mI=["value"],gI=["disabled"],_I=["value"],yI=["disabled"],vI=["value","data-insee-code","data-longitude-x","data-latitude-y"];function bI(i,e,t,n,s,r){const o=yi("Autocomplete");return Pt(),ti(Pi,null,[Xe("div",null,[Hr(Xe("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.selectedRegion=l),onChange:e[1]||(e[1]=(...l)=>r.fetchCom2cos&&r.fetchCom2cos(...l)),tabindex:"1"},[(Pt(!0),ti(Pi,null,Wa(s.regions,l=>(Pt(),ti("option",{key:l.id,value:l.id},zr(l.name),9,mI))),128))],544),[[qh,s.selectedRegion]]),e[7]||(e[7]=hi("   ")),Hr(Xe("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.selectedCom2co=l),onChange:e[3]||(e[3]=(...l)=>r.fetchCities&&r.fetchCities(...l)),disabled:!s.selectedRegion,tabindex:"2"},[(Pt(!0),ti(Pi,null,Wa(s.com2cos,l=>(Pt(),ti("option",{key:l.id,value:l.id},zr(l.name),9,_I))),128))],40,gI),[[qh,s.selectedCom2co]]),e[8]||(e[8]=hi("   ")),Hr(Xe("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.selectedCity=l),onChange:e[5]||(e[5]=(...l)=>r.handleCityChange&&r.handleCityChange(...l)),disabled:!s.selectedCom2co,tabindex:"3"},[(Pt(!0),ti(Pi,null,Wa(s.cities,l=>(Pt(),ti("option",{key:l.id,value:l.id,"data-insee-code":l.inseeCode,"data-longitude-x":l.lonX,"data-latitude-y":l.latY},zr(l.name)+" ("+zr(l.inseeCode)+") ",9,vI))),128))],40,yI),[[qh,s.selectedCity]]),e[9]||(e[9]=hi("   ")),ft(o,{modelValue:s.selectedAddress,"onUpdate:modelValue":e[6]||(e[6]=l=>s.selectedAddress=l),"fetch-items":r.fetchAddresses,placeholder:"Aller à une adresse",displaySearchAddress:t.displaySearchAddress,disabled:!s.selectedCity,tabindex:"4",onLocationSelected:r.handleLocationSelected},null,8,["modelValue","fetch-items","displaySearchAddress","disabled","onLocationSelected"])]),e[10]||(e[10]=hi("   "))],64)}const DS=mr(pI,[["render",bI]]),TI={name:"AppCarte",components:{SearchLocation:DS,Isochrone:oI},data(){return{location:null}},methods:{updateLocation(i){this.location=i}}},xI={id:"appCarte",valign:"top",align:"left"},SI={style:{border:"2px"}},wI={id:"map",align:"center",valign:"middle",style:{position:"relative, z-index: 10"}};function CI(i,e,t,n,s,r){const o=yi("SearchLocation"),l=yi("Isochrone");return Pt(),ti("div",xI,[ft(o,{onUpdateLocation:r.updateLocation,onLocationSelected:r.updateLocation,displaySearchAddress:!0},null,8,["onUpdateLocation","onLocationSelected"]),Xe("span",SI,[Xe("div",wI,[ft(l,{msg:"Cartographie des parcs",location:s.location},null,8,["location"])])])])}const EI=mr(TI,[["render",CI]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Ac(i){return i+.5|0}const Vr=(i,e,t)=>Math.max(Math.min(i,t),e);function Pu(i){return Vr(Ac(i*2.55),0,255)}function Gr(i){return Vr(Ac(i*255),0,255)}function rr(i){return Vr(Ac(i/2.55)/100,0,1)}function My(i){return Vr(Ac(i*100),0,100)}const Bn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qm=[..."0123456789ABCDEF"],AI=i=>Qm[i&15],DI=i=>Qm[(i&240)>>4]+Qm[i&15],Th=i=>(i&240)>>4===(i&15),PI=i=>Th(i.r)&&Th(i.g)&&Th(i.b)&&Th(i.a);function kI(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&Bn[i[1]]*17,g:255&Bn[i[2]]*17,b:255&Bn[i[3]]*17,a:e===5?Bn[i[4]]*17:255}:(e===7||e===9)&&(t={r:Bn[i[1]]<<4|Bn[i[2]],g:Bn[i[3]]<<4|Bn[i[4]],b:Bn[i[5]]<<4|Bn[i[6]],a:e===9?Bn[i[7]]<<4|Bn[i[8]]:255})),t}const II=(i,e)=>i<255?e(i):"";function LI(i){var e=PI(i)?AI:DI;return i?"#"+e(i.r)+e(i.g)+e(i.b)+II(i.a,e):void 0}const OI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function PS(i,e,t){const n=e*Math.min(t,1-t),s=(r,o=(r+i/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function MI(i,e,t){const n=(s,r=(s+i/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function RI(i,e,t){const n=PS(i,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)n[s]*=1-e-t,n[s]+=e;return n}function NI(i,e,t,n,s){return i===s?(e-t)/n+(e<t?6:0):e===s?(t-i)/n+2:(i-e)/n+4}function r_(i){const t=i.r/255,n=i.g/255,s=i.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),l=(r+o)/2;let u,h,d;return r!==o&&(d=r-o,h=l>.5?d/(2-r-o):d/(r+o),u=NI(t,n,s,d,r),u=u*60+.5),[u|0,h||0,l]}function o_(i,e,t,n){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,n)).map(Gr)}function a_(i,e,t){return o_(PS,i,e,t)}function BI(i,e,t){return o_(RI,i,e,t)}function FI(i,e,t){return o_(MI,i,e,t)}function kS(i){return(i%360+360)%360}function UI(i){const e=OI.exec(i);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Pu(+e[5]):Gr(+e[5]));const s=kS(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=BI(s,r,o):e[1]==="hsv"?n=FI(s,r,o):n=a_(s,r,o),{r:n[0],g:n[1],b:n[2],a:t}}function jI(i,e){var t=r_(i);t[0]=kS(t[0]+e),t=a_(t),i.r=t[0],i.g=t[1],i.b=t[2]}function zI(i){if(!i)return;const e=r_(i),t=e[0],n=My(e[1]),s=My(e[2]);return i.a<255?`hsla(${t}, ${n}%, ${s}%, ${rr(i.a)})`:`hsl(${t}, ${n}%, ${s}%)`}const Ry={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ny={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function HI(){const i={},e=Object.keys(Ny),t=Object.keys(Ry);let n,s,r,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],s=0;s<t.length;s++)r=t[s],l=l.replace(r,Ry[r]);r=parseInt(Ny[o],16),i[l]=[r>>16&255,r>>8&255,r&255]}return i}let xh;function $I(i){xh||(xh=HI(),xh.transparent=[0,0,0,0]);const e=xh[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const VI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qI(i){const e=VI.exec(i);let t=255,n,s,r;if(e){if(e[7]!==n){const o=+e[7];t=e[8]?Pu(o):Vr(o*255,0,255)}return n=+e[1],s=+e[3],r=+e[5],n=255&(e[2]?Pu(n):Vr(n,0,255)),s=255&(e[4]?Pu(s):Vr(s,0,255)),r=255&(e[6]?Pu(r):Vr(r,0,255)),{r:n,g:s,b:r,a:t}}}function WI(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${rr(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Up=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ka=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function GI(i,e,t){const n=ka(rr(i.r)),s=ka(rr(i.g)),r=ka(rr(i.b));return{r:Gr(Up(n+t*(ka(rr(e.r))-n))),g:Gr(Up(s+t*(ka(rr(e.g))-s))),b:Gr(Up(r+t*(ka(rr(e.b))-r))),a:i.a+t*(e.a-i.a)}}function Sh(i,e,t){if(i){let n=r_(i);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=a_(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function IS(i,e){return i&&Object.assign(e||{},i)}function By(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=Gr(i[3]))):(e=IS(i,{r:0,g:0,b:0,a:1}),e.a=Gr(e.a)),e}function XI(i){return i.charAt(0)==="r"?qI(i):UI(i)}class lc{constructor(e){if(e instanceof lc)return e;const t=typeof e;let n;t==="object"?n=By(e):t==="string"&&(n=kI(e)||$I(e)||XI(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=IS(this._rgb);return e&&(e.a=rr(e.a)),e}set rgb(e){this._rgb=By(e)}rgbString(){return this._valid?WI(this._rgb):void 0}hexString(){return this._valid?LI(this._rgb):void 0}hslString(){return this._valid?zI(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,l=2*o-1,u=n.a-s.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;r=1-h,n.r=255&h*n.r+r*s.r+.5,n.g=255&h*n.g+r*s.g+.5,n.b=255&h*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=GI(this._rgb,e._rgb,t)),this}clone(){return new lc(this.rgb)}alpha(e){return this._rgb.a=Gr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Ac(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Sh(this._rgb,2,e),this}darken(e){return Sh(this._rgb,2,-e),this}saturate(e){return Sh(this._rgb,1,e),this}desaturate(e){return Sh(this._rgb,1,-e),this}rotate(e){return jI(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function er(){}const KI=(()=>{let i=0;return()=>i++})();function jt(i){return i===null||typeof i>"u"}function di(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function gt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Vn(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Ss(i,e){return Vn(i)?i:e}function vt(i,e){return typeof i>"u"?e:i}const ZI=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,LS=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function Ut(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function Dt(i,e,t,n){let s,r,o;if(di(i))for(r=i.length,s=0;s<r;s++)e.call(t,i[s],s);else if(gt(i))for(o=Object.keys(i),r=o.length,s=0;s<r;s++)e.call(t,i[o[s]],o[s])}function dd(i,e){let t,n,s,r;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(s=i[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function fd(i){if(di(i))return i.map(fd);if(gt(i)){const e=Object.create(null),t=Object.keys(i),n=t.length;let s=0;for(;s<n;++s)e[t[s]]=fd(i[t[s]]);return e}return i}function OS(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function YI(i,e,t,n){if(!OS(i))return;const s=e[i],r=t[i];gt(s)&&gt(r)?uc(s,r,n):e[i]=fd(r)}function uc(i,e,t){const n=di(e)?e:[e],s=n.length;if(!gt(i))return i;t=t||{};const r=t.merger||YI;let o;for(let l=0;l<s;++l){if(o=n[l],!gt(o))continue;const u=Object.keys(o);for(let h=0,d=u.length;h<d;++h)r(u[h],i,o,t)}return i}function Vu(i,e){return uc(i,e,{merger:QI})}function QI(i,e,t){if(!OS(i))return;const n=e[i],s=t[i];gt(n)&&gt(s)?Vu(n,s):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=fd(s))}const Fy={"":i=>i,x:i=>i.x,y:i=>i.y};function JI(i){const e=i.split("."),t=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function eL(i){const e=JI(i);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function ea(i,e){return(Fy[e]||(Fy[e]=eL(e)))(i)}function l_(i){return i.charAt(0).toUpperCase()+i.slice(1)}const cc=i=>typeof i<"u",Kr=i=>typeof i=="function",Uy=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function tL(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const ui=Math.PI,ai=2*ui,pd=Number.POSITIVE_INFINITY,iL=ui/180,fi=ui/2,Ao=ui/4,jy=ui*2/3,MS=Math.log10,Xr=Math.sign;function Kh(i,e,t){return Math.abs(i-e)<t}function zy(i){const e=Math.round(i);i=Kh(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(MS(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function nL(i){const e=[],t=Math.sqrt(i);let n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function md(i){return!isNaN(parseFloat(i))&&isFinite(i)}function sL(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function rL(i,e,t){let n,s,r;for(n=0,s=i.length;n<s;n++)r=i[n][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function cr(i){return i*(ui/180)}function oL(i){return i*(180/ui)}function Hy(i){if(!Vn(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function RS(i,e){const t=e.x-i.x,n=e.y-i.y,s=Math.sqrt(t*t+n*n);let r=Math.atan2(n,t);return r<-.5*ui&&(r+=ai),{angle:r,distance:s}}function aL(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Do(i){return(i%ai+ai)%ai}function gd(i,e,t,n){const s=Do(i),r=Do(e),o=Do(t),l=Do(r-s),u=Do(o-s),h=Do(s-r),d=Do(s-o);return s===r||s===o||n&&r===o||l>u&&h<d}function un(i,e,t){return Math.max(e,Math.min(t,i))}function lL(i){return un(i,-32768,32767)}function Uo(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function u_(i,e,t){t=t||(o=>i[o]<e);let n=i.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,t(r)?s=r:n=r;return{lo:s,hi:n}}const Jm=(i,e,t,n)=>u_(i,t,n?s=>{const r=i[s][e];return r<t||r===t&&i[s+1][e]===t}:s=>i[s][e]<t),uL=(i,e,t)=>u_(i,t,n=>i[n][e]>=t);function cL(i,e,t){let n=0,s=i.length;for(;n<s&&i[n]<e;)n++;for(;s>n&&i[s-1]>t;)s--;return n>0||s<i.length?i.slice(n,s):i}const NS=["push","pop","shift","splice","unshift"];function hL(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NS.forEach(t=>{const n="_onData"+l_(t),s=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return i._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...r)}),o}})})}function $y(i,e){const t=i._chartjs;if(!t)return;const n=t.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(NS.forEach(r=>{delete i[r]}),delete i._chartjs)}function BS(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const FS=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function US(i,e){let t=[],n=!1;return function(...s){t=s,n||(n=!0,FS.call(window,()=>{n=!1,i.apply(e,t)}))}}function dL(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}const c_=i=>i==="start"?"left":i==="end"?"right":"center",Ei=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,fL=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e,wh=i=>i===0||i===1,Vy=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*ai/t)),qy=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*ai/t)+1,qu={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*fi)+1,easeOutSine:i=>Math.sin(i*fi),easeInOutSine:i=>-.5*(Math.cos(ui*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>wh(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>wh(i)?i:Vy(i,.075,.3),easeOutElastic:i=>wh(i)?i:qy(i,.075,.3),easeInOutElastic(i){return wh(i)?i:i<.5?.5*Vy(i*2,.1125,.45):.5+.5*qy(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-qu.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?qu.easeInBounce(i*2)*.5:qu.easeOutBounce(i*2-1)*.5+.5};function jS(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Wy(i){return jS(i)?i:new lc(i)}function jp(i){return jS(i)?i:new lc(i).saturate(.5).darken(.1).hexString()}const pL=["x","y","borderWidth","radius","tension"],mL=["color","borderColor","backgroundColor"];function gL(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:mL},numbers:{type:"number",properties:pL}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function _L(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Gy=new Map;function yL(i,e){e=e||{};const t=i+JSON.stringify(e);let n=Gy.get(t);return n||(n=new Intl.NumberFormat(i,e),Gy.set(t,n)),n}function h_(i,e,t){return yL(e,t).format(i)}const vL={values(i){return di(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const n=this.chart.options.locale;let s,r=i;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),r=bL(i,t)}const o=MS(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),h_(i,n,u)}};function bL(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var zS={formatters:vL};function TL(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ta=Object.create(null),eg=Object.create(null);function Wu(i,e){if(!e)return i;const t=e.split(".");for(let n=0,s=t.length;n<s;++n){const r=t[n];i=i[r]||(i[r]=Object.create(null))}return i}function zp(i,e,t){return typeof e=="string"?uc(Wu(i,e),t):uc(Wu(i,""),e)}class xL{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>jp(s.backgroundColor),this.hoverBorderColor=(n,s)=>jp(s.borderColor),this.hoverColor=(n,s)=>jp(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return zp(this,e,t)}get(e){return Wu(this,e)}describe(e,t){return zp(eg,e,t)}override(e,t){return zp(ta,e,t)}route(e,t,n,s){const r=Wu(this,e),o=Wu(this,n),l="_"+t;Object.defineProperties(r,{[l]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[l],h=o[s];return gt(u)?Object.assign({},h,u):vt(u,h)},set(u){this[l]=u}}})}apply(e){e.forEach(t=>t(this))}}var ni=new xL({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gL,_L,TL]);function SL(i){return!i||jt(i.size)||jt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Xy(i,e,t,n,s){let r=e[s];return r||(r=e[s]=i.measureText(s).width,t.push(s)),r>n&&(n=r),n}function Po(i,e,t){const n=i.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*n)/n+s}function Ky(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function Zy(i,e,t,n){HS(i,e,t,n,null)}function HS(i,e,t,n,s){let r,o,l,u,h,d,m,b;const T=e.pointStyle,C=e.rotation,x=e.radius;let A=(C||0)*iL;if(T&&typeof T=="object"&&(r=T.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(A),i.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),i.restore();return}if(!(isNaN(x)||x<=0)){switch(i.beginPath(),T){default:s?i.ellipse(t,n,s/2,x,0,0,ai):i.arc(t,n,x,0,ai),i.closePath();break;case"triangle":d=s?s/2:x,i.moveTo(t+Math.sin(A)*d,n-Math.cos(A)*x),A+=jy,i.lineTo(t+Math.sin(A)*d,n-Math.cos(A)*x),A+=jy,i.lineTo(t+Math.sin(A)*d,n-Math.cos(A)*x),i.closePath();break;case"rectRounded":h=x*.516,u=x-h,o=Math.cos(A+Ao)*u,m=Math.cos(A+Ao)*(s?s/2-h:u),l=Math.sin(A+Ao)*u,b=Math.sin(A+Ao)*(s?s/2-h:u),i.arc(t-m,n-l,h,A-ui,A-fi),i.arc(t+b,n-o,h,A-fi,A),i.arc(t+m,n+l,h,A,A+fi),i.arc(t-b,n+o,h,A+fi,A+ui),i.closePath();break;case"rect":if(!C){u=Math.SQRT1_2*x,d=s?s/2:u,i.rect(t-d,n-u,2*d,2*u);break}A+=Ao;case"rectRot":m=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,l=Math.sin(A)*x,b=Math.sin(A)*(s?s/2:x),i.moveTo(t-m,n-l),i.lineTo(t+b,n-o),i.lineTo(t+m,n+l),i.lineTo(t-b,n+o),i.closePath();break;case"crossRot":A+=Ao;case"cross":m=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,l=Math.sin(A)*x,b=Math.sin(A)*(s?s/2:x),i.moveTo(t-m,n-l),i.lineTo(t+m,n+l),i.moveTo(t+b,n-o),i.lineTo(t-b,n+o);break;case"star":m=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,l=Math.sin(A)*x,b=Math.sin(A)*(s?s/2:x),i.moveTo(t-m,n-l),i.lineTo(t+m,n+l),i.moveTo(t+b,n-o),i.lineTo(t-b,n+o),A+=Ao,m=Math.cos(A)*(s?s/2:x),o=Math.cos(A)*x,l=Math.sin(A)*x,b=Math.sin(A)*(s?s/2:x),i.moveTo(t-m,n-l),i.lineTo(t+m,n+l),i.moveTo(t+b,n-o),i.lineTo(t-b,n+o);break;case"line":o=s?s/2:Math.cos(A)*x,l=Math.sin(A)*x,i.moveTo(t-o,n-l),i.lineTo(t+o,n+l);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(A)*(s?s/2:x),n+Math.sin(A)*x);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function $S(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function d_(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function f_(i){i.restore()}function wL(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),jt(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function CL(i,e,t,n,s){if(s.strikethrough||s.underline){const r=i.measureText(n),o=e-r.actualBoundingBoxLeft,l=e+r.actualBoundingBoxRight,u=t-r.actualBoundingBoxAscent,h=t+r.actualBoundingBoxDescent,d=s.strikethrough?(u+h)/2:h;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(o,d),i.lineTo(l,d),i.stroke()}}function EL(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function hc(i,e,t,n,s,r={}){const o=di(e)?e:[e],l=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(i.save(),i.font=s.string,wL(i,r),u=0;u<o.length;++u)h=o[u],r.backdrop&&EL(i,r.backdrop),l&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),jt(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(h,t,n,r.maxWidth)),i.fillText(h,t,n,r.maxWidth),CL(i,t,n,h,r),n+=Number(s.lineHeight);i.restore()}function _d(i,e){const{x:t,y:n,w:s,h:r,radius:o}=e;i.arc(t+o.topLeft,n+o.topLeft,o.topLeft,1.5*ui,ui,!0),i.lineTo(t,n+r-o.bottomLeft),i.arc(t+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,ui,fi,!0),i.lineTo(t+s-o.bottomRight,n+r),i.arc(t+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,fi,0,!0),i.lineTo(t+s,n+o.topRight),i.arc(t+s-o.topRight,n+o.topRight,o.topRight,0,-fi,!0),i.lineTo(t+o.topLeft,n)}const AL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PL(i,e){const t=(""+i).match(AL);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const kL=i=>+i||0;function p_(i,e){const t={},n=gt(e),s=n?Object.keys(e):e,r=gt(i)?n?o=>vt(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of s)t[o]=kL(r(o));return t}function VS(i){return p_(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Xa(i){return p_(i,["topLeft","topRight","bottomLeft","bottomRight"])}function qn(i){const e=VS(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Li(i,e){i=i||{},e=e||ni.font;let t=vt(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=vt(i.style,e.style);n&&!(""+n).match(DL)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:vt(i.family,e.family),lineHeight:PL(vt(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:vt(i.weight,e.weight),string:""};return s.string=SL(s),s}function Ch(i,e,t,n){let s,r,o;for(s=0,r=i.length;s<r;++s)if(o=i[s],o!==void 0&&o!==void 0)return o}function IL(i,e,t){const{min:n,max:s}=i,r=LS(e,(s-n)/2),o=(l,u)=>t&&l===0?0:l+u;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function El(i,e){return Object.assign(Object.create(i),e)}function m_(i,e=[""],t,n,s=()=>i[0]){const r=t||i;typeof n>"u"&&(n=XS("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:n,_getTarget:s,override:l=>m_([l,...i],e,r,n)};return new Proxy(o,{deleteProperty(l,u){return delete l[u],delete l._keys,delete i[0][u],!0},get(l,u){return WS(l,u,()=>UL(u,e,i,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(l,u){return Qy(l).includes(u)},ownKeys(l){return Qy(l)},set(l,u,h){const d=l._storage||(l._storage=s());return l[u]=d[u]=h,delete l._keys,!0}})}function ul(i,e,t,n){const s={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:qS(i,n),setContext:r=>ul(i,r,t,n),override:r=>ul(i.override(r),e,t,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,l){return WS(r,o,()=>OL(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,l){return i[o]=l,delete r[o],!0}})}function qS(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=i;return{allKeys:s,scriptable:t,indexable:n,isScriptable:Kr(t)?t:()=>t,isIndexable:Kr(n)?n:()=>n}}const LL=(i,e)=>i?i+l_(e):e,g_=(i,e)=>gt(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WS(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const n=t();return i[e]=n,n}function OL(i,e,t){const{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=i;let l=n[e];return Kr(l)&&o.isScriptable(e)&&(l=ML(e,l,i,t)),di(l)&&l.length&&(l=RL(e,l,i,o.isIndexable)),g_(e,l)&&(l=ul(l,s,r&&r[e],o)),l}function ML(i,e,t,n){const{_proxy:s,_context:r,_subProxy:o,_stack:l}=t;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);l.add(i);let u=e(r,o||n);return l.delete(i),g_(i,u)&&(u=__(s._scopes,s,i,u)),u}function RL(i,e,t,n){const{_proxy:s,_context:r,_subProxy:o,_descriptors:l}=t;if(typeof r.index<"u"&&n(i))return e[r.index%e.length];if(gt(e[0])){const u=e,h=s._scopes.filter(d=>d!==u);e=[];for(const d of u){const m=__(h,s,i,d);e.push(ul(m,r,o&&o[i],l))}}return e}function GS(i,e,t){return Kr(i)?i(e,t):i}const NL=(i,e)=>i===!0?e:typeof i=="string"?ea(e,i):void 0;function BL(i,e,t,n,s){for(const r of e){const o=NL(t,r);if(o){i.add(o);const l=GS(o._fallback,t,s);if(typeof l<"u"&&l!==t&&l!==n)return l}else if(o===!1&&typeof n<"u"&&t!==n)return null}return!1}function __(i,e,t,n){const s=e._rootScopes,r=GS(e._fallback,t,n),o=[...i,...s],l=new Set;l.add(n);let u=Yy(l,o,t,r||t,n);return u===null||typeof r<"u"&&r!==t&&(u=Yy(l,o,r,u,n),u===null)?!1:m_(Array.from(l),[""],s,r,()=>FL(e,t,n))}function Yy(i,e,t,n,s){for(;t;)t=BL(i,e,t,n,s);return t}function FL(i,e,t){const n=i._getTarget();e in n||(n[e]={});const s=n[e];return di(s)&&gt(t)?t:s||{}}function UL(i,e,t,n){let s;for(const r of e)if(s=XS(LL(r,i),t),typeof s<"u")return g_(i,s)?__(t,n,i,s):s}function XS(i,e){for(const t of e){if(!t)continue;const n=t[i];if(typeof n<"u")return n}}function Qy(i){let e=i._keys;return e||(e=i._keys=jL(i._scopes)),e}function jL(i){const e=new Set;for(const t of i)for(const n of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function y_(){return typeof window<"u"&&typeof document<"u"}function v_(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yd(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}const uf=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function zL(i,e){return uf(i).getPropertyValue(e)}const HL=["top","right","bottom","left"];function qo(i,e,t){const n={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=HL[s];n[r]=parseFloat(i[e+"-"+r+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const $L=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function VL(i,e){const t=i.touches,n=t&&t.length?t[0]:i,{offsetX:s,offsetY:r}=n;let o=!1,l,u;if($L(s,r,i.target))l=s,u=r;else{const h=e.getBoundingClientRect();l=n.clientX-h.left,u=n.clientY-h.top,o=!0}return{x:l,y:u,box:o}}function Mo(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:n}=e,s=uf(t),r=s.boxSizing==="border-box",o=qo(s,"padding"),l=qo(s,"border","width"),{x:u,y:h,box:d}=VL(i,t),m=o.left+(d&&l.left),b=o.top+(d&&l.top);let{width:T,height:C}=e;return r&&(T-=o.width+l.width,C-=o.height+l.height),{x:Math.round((u-m)/T*t.width/n),y:Math.round((h-b)/C*t.height/n)}}function qL(i,e,t){let n,s;if(e===void 0||t===void 0){const r=i&&v_(i);if(!r)e=i.clientWidth,t=i.clientHeight;else{const o=r.getBoundingClientRect(),l=uf(r),u=qo(l,"border","width"),h=qo(l,"padding");e=o.width-h.width-u.width,t=o.height-h.height-u.height,n=yd(l.maxWidth,r,"clientWidth"),s=yd(l.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:n||pd,maxHeight:s||pd}}const Eh=i=>Math.round(i*10)/10;function WL(i,e,t,n){const s=uf(i),r=qo(s,"margin"),o=yd(s.maxWidth,i,"clientWidth")||pd,l=yd(s.maxHeight,i,"clientHeight")||pd,u=qL(i,e,t);let{width:h,height:d}=u;if(s.boxSizing==="content-box"){const b=qo(s,"border","width"),T=qo(s,"padding");h-=T.width+b.width,d-=T.height+b.height}return h=Math.max(0,h-r.width),d=Math.max(0,n?h/n:d-r.height),h=Eh(Math.min(h,o,u.maxWidth)),d=Eh(Math.min(d,l,u.maxHeight)),h&&!d&&(d=Eh(h/2)),(e!==void 0||t!==void 0)&&n&&u.height&&d>u.height&&(d=u.height,h=Eh(Math.floor(d*n))),{width:h,height:d}}function Jy(i,e,t){const n=e||1,s=Math.floor(i.height*n),r=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(i.currentDevicePixelRatio=n,o.height=s,o.width=r,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const GL=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};y_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function ev(i,e){const t=zL(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const XL=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},KL=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function Ka(i,e,t){return i?XL(e,t):KL()}function KS(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function ZS(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class ZL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,s){const r=t.listeners[s],o=t.duration;r.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=FS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,l=!1,u;for(;o>=0;--o)u=r[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),l=!0):(r[o]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,n,e,"progress")),r.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ir=new ZL;const tv="transparent",YL={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const n=Wy(i||tv),s=n.valid&&Wy(e||tv);return s&&s.valid?s.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class QL{constructor(e,t,n,s){const r=t[n];s=Ch([e.to,s,r,e.from]);const o=Ch([e.from,r,s]);this._active=!0,this._fn=e.fn||YL[e.type||typeof o],this._easing=qu[e.easing]||qu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ch([e.to,t,s,e.from]),this._from=Ch([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,l=this._to;let u;if(this._active=r!==l&&(o||t<n),!this._active){this._target[s]=l,this._notify(!0);return}if(t<0){this._target[s]=r;return}u=t/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(r,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][t]()}}class YS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!gt(e))return;const t=Object.keys(ni.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!gt(r))return;const o={};for(const l of t)o[l]=r[l];(di(r.properties)&&r.properties||[s]).forEach(l=>{(l===s||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,t){const n=t.options,s=eO(e,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&JL(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(e,t));continue}const d=t[h];let m=r[h];const b=n.get(h);if(m)if(b&&m.active()){m.update(b,d,l);continue}else m.cancel();if(!b||!b.duration){e[h]=d;continue}r[h]=m=new QL(b,e,h,d),s.push(m)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return ir.add(this._chart,n),!0}}function JL(i,e){const t=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const r=i[n[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function eO(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function iv(i,e){const t=i&&i.options||{},n=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:n?r:s,end:n?s:r}}function tO(i,e,t){if(t===!1)return!1;const n=iv(i,t),s=iv(e,t);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function iO(i){let e,t,n,s;return gt(i)?(e=i.top,t=i.right,n=i.bottom,s=i.left):e=t=n=s=i,{top:e,right:t,bottom:n,left:s,disabled:i===!1}}function QS(i,e){const t=[],n=i._getSortedDatasetMetas(e);let s,r;for(s=0,r=n.length;s<r;++s)t.push(n[s].index);return t}function nv(i,e,t,n={}){const s=i.keys,r=n.mode==="single";let o,l,u,h;if(e===null)return;let d=!1;for(o=0,l=s.length;o<l;++o){if(u=+s[o],u===t){if(d=!0,n.all)continue;break}h=i.values[u],Vn(h)&&(r||e===0||Xr(e)===Xr(h))&&(e+=h)}return!d&&!n.all?0:e}function nO(i,e){const{iScale:t,vScale:n}=e,s=t.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(i),l=new Array(o.length);let u,h,d;for(u=0,h=o.length;u<h;++u)d=o[u],l[u]={[s]:d,[r]:i[d]};return l}function Hp(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function sO(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function rO(i){const{min:e,max:t,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function oO(i,e,t){const n=i[e]||(i[e]={});return n[t]||(n[t]={})}function sv(i,e,t,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const r=i[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function rv(i,e){const{chart:t,_cachedMeta:n}=i,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:l}=n,u=r.axis,h=o.axis,d=sO(r,o,n),m=e.length;let b;for(let T=0;T<m;++T){const C=e[T],{[u]:x,[h]:A}=C,P=C._stacks||(C._stacks={});b=P[h]=oO(s,d,x),b[l]=A,b._top=sv(b,o,!0,n.type),b._bottom=sv(b,o,!1,n.type);const k=b._visualValues||(b._visualValues={});k[l]=A}}function $p(i,e){const t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function aO(i,e){return El(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function lO(i,e,t){return El(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function mu(i,e){const t=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){e=e||i._parsed;for(const s of e){const r=s._stacks;if(!r||r[n]===void 0||r[n][t]===void 0)return;delete r[n][t],r[n]._visualValues!==void 0&&r[n]._visualValues[t]!==void 0&&delete r[n]._visualValues[t]}}}const Vp=i=>i==="reset"||i==="none",ov=(i,e)=>e?i:Object.assign({},i),uO=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:QS(t,!0),values:null};class b_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Hp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&mu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),s=(m,b,T,C)=>m==="x"?b:m==="r"?C:T,r=t.xAxisID=vt(n.xAxisID,$p(e,"x")),o=t.yAxisID=vt(n.yAxisID,$p(e,"y")),l=t.rAxisID=vt(n.rAxisID,$p(e,"r")),u=t.indexAxis,h=t.iAxisID=s(u,r,o,l),d=t.vAxisID=s(u,o,r,l);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(h),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$y(this._data,this),e._stacked&&mu(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(gt(t)){const s=this._cachedMeta;this._data=nO(t,s)}else if(n!==t){if(n){$y(n,this);const s=this._cachedMeta;mu(s),s._parsed=[]}t&&Object.isExtensible(t)&&hL(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Hp(t.vScale,t),t.stack!==n.stack&&(s=!0,mu(t),t.stack=n.stack),this._resyncElements(e),(s||r!==t._stacked)&&(rv(this,t._parsed),t._stacked=Hp(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,l=r.axis;let u=e===0&&t===s.length?!0:n._sorted,h=e>0&&n._parsed[e-1],d,m,b;if(this._parsing===!1)n._parsed=s,n._sorted=!0,b=s;else{di(s[e])?b=this.parseArrayData(n,s,e,t):gt(s[e])?b=this.parseObjectData(n,s,e,t):b=this.parsePrimitiveData(n,s,e,t);const T=()=>m[l]===null||h&&m[l]<h[l];for(d=0;d<t;++d)n._parsed[d+e]=m=b[d],u&&(T()&&(u=!1),h=m);n._sorted=u}o&&rv(this,b)}parsePrimitiveData(e,t,n,s){const{iScale:r,vScale:o}=e,l=r.axis,u=o.axis,h=r.getLabels(),d=r===o,m=new Array(s);let b,T,C;for(b=0,T=s;b<T;++b)C=b+n,m[b]={[l]:d||r.parse(h[C],C),[u]:o.parse(t[C],C)};return m}parseArrayData(e,t,n,s){const{xScale:r,yScale:o}=e,l=new Array(s);let u,h,d,m;for(u=0,h=s;u<h;++u)d=u+n,m=t[d],l[u]={x:r.parse(m[0],d),y:o.parse(m[1],d)};return l}parseObjectData(e,t,n,s){const{xScale:r,yScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(s);let d,m,b,T;for(d=0,m=s;d<m;++d)b=d+n,T=t[b],h[d]={x:r.parse(ea(T,l),b),y:o.parse(ea(T,u),b)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const s=this.chart,r=this._cachedMeta,o=t[e.axis],l={keys:QS(s,!0),values:t._stacks[e.axis]._visualValues};return nv(l,o,r.index,{mode:n})}updateRangeFromParsed(e,t,n,s){const r=n[t.axis];let o=r===null?NaN:r;const l=s&&n._stacks[t.axis];s&&l&&(s.values=l,o=nv(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&e===n.iScale,o=s.length,l=this._getOtherScale(e),u=uO(t,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=rO(l);let b,T;function C(){T=s[b];const x=T[l.axis];return!Vn(T[e.axis])||d>x||m<x}for(b=0;b<o&&!(!C()&&(this.updateRangeFromParsed(h,e,T,u),r));++b);if(r){for(b=o-1;b>=0;--b)if(!C()){this.updateRangeFromParsed(h,e,T,u);break}}return h}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],Vn(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=iO(vt(this.options.clip,tO(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,s=n.data||[],r=t.chartArea,o=[],l=this._drawStart||0,u=this._drawCount||s.length-l,h=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,r,l,u),d=l;d<l+u;++d){const m=s[d];m.hidden||(m.active&&h?o.push(m):m.draw(e,r))}for(d=0;d<o.length;++d)o[d].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=lO(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=aO(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,l=r[o],u=this.enableOptionSharing&&cc(n);if(l)return ov(l,u);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],b=h.getOptionScopes(this.getDataset(),d),T=Object.keys(ni.elements[e]),C=()=>this.getContext(n,s,t),x=h.resolveNamedOptions(b,T,C,m);return x.$shared&&(x.$shared=u,r[o]=Object.freeze(ov(x,u))),x}_resolveAnimations(e,t,n){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,l=r[o];if(l)return l;let u;if(s.options.animation!==!1){const d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,t),b=d.getOptionScopes(this.getDataset(),m);u=d.createResolver(b,this.getContext(e,n,t))}const h=new YS(s,u&&u.animations);return u&&u._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Vp(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:o}}updateElement(e,t,n,s){Vp(s)?Object.assign(e,n):this._resolveAnimations(t,s).update(e,n)}updateSharedOptions(e,t,n){e&&!Vp(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,n,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const s=n.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,n=!0){const s=this._cachedMeta,r=s.data,o=e+t;let l;const u=h=>{for(h.length+=t,l=h.length-1;l>=o;l--)h[l]=h[l-t]};for(u(r),l=e;l<o;++l)r[l]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,s){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,t);n._stacked&&mu(n,s)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,s]=e;this[t](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function cO(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let n=[];for(let s=0,r=t.length;s<r;s++)n=n.concat(t[s].controller.getAllParsedValues(i));i._cache.$bar=BS(n.sort((s,r)=>s-r))}return i._cache.$bar}function hO(i){const e=i.iScale,t=cO(e,i.type);let n=e._length,s,r,o,l;const u=()=>{o===32767||o===-32768||(cc(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),u();for(l=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),u();return n}function dO(i,e,t,n){const s=t.barThickness;let r,o;return jt(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:e.pixels[i]-r/2}}function fO(i,e,t,n){const s=e.pixels,r=s[i];let o=i>0?s[i-1]:null,l=i<s.length-1?s[i+1]:null;const u=t.categoryPercentage;o===null&&(o=r-(l===null?e.end-e.start:l-r)),l===null&&(l=r+r-o);const h=r-(r-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:t.barPercentage,start:h}}function pO(i,e,t,n){const s=t.parse(i[0],n),r=t.parse(i[1],n),o=Math.min(s,r),l=Math.max(s,r);let u=o,h=l;Math.abs(o)>Math.abs(l)&&(u=l,h=o),e[t.axis]=h,e._custom={barStart:u,barEnd:h,start:s,end:r,min:o,max:l}}function JS(i,e,t,n){return di(i)?pO(i,e,t,n):e[t.axis]=t.parse(i,n),e}function av(i,e,t,n){const s=i.iScale,r=i.vScale,o=s.getLabels(),l=s===r,u=[];let h,d,m,b;for(h=t,d=t+n;h<d;++h)b=e[h],m={},m[s.axis]=l||s.parse(o[h],h),u.push(JS(b,m,r,h));return u}function qp(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function mO(i,e,t){return i!==0?Xr(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function gO(i){let e,t,n,s,r;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:n,reverse:e,top:s,bottom:r}}function _O(i,e,t,n){let s=e.borderSkipped;const r={};if(!s){i.borderSkipped=r;return}if(s===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:u,top:h,bottom:d}=gO(i);s==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?s=h:(t._bottom||0)===n?s=d:(r[lv(d,o,l,u)]=!0,s=h)),r[lv(s,o,l,u)]=!0,i.borderSkipped=r}function lv(i,e,t,n){return n?(i=yO(i,e,t),i=uv(i,t,e)):i=uv(i,e,t),i}function yO(i,e,t){return i===e?t:i===t?e:i}function uv(i,e,t){return i==="start"?e:i==="end"?t:i}function vO(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class bO extends b_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,s){return av(e,t,n,s)}parseArrayData(e,t,n,s){return av(e,t,n,s)}parseObjectData(e,t,n,s){const{iScale:r,vScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=r.axis==="x"?l:u,d=o.axis==="x"?l:u,m=[];let b,T,C,x;for(b=n,T=n+s;b<T;++b)x=t[b],C={},C[r.axis]=r.parse(ea(x,h),b),m.push(JS(ea(x,d),C,o,b));return m}updateRangeFromParsed(e,t,n,s){super.updateRangeFromParsed(e,t,n,s);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:s}=t,r=this.getParsed(e),o=r._custom,l=qp(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),h=l.isHorizontal(),d=this._getRuler(),{sharedOptions:m,includeOptions:b}=this._getSharedOptions(t,s);for(let T=t;T<t+n;T++){const C=this.getParsed(T),x=r||jt(C[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(T),A=this._calculateBarIndexPixels(T,d),P=(C._stacks||{})[l.axis],k={horizontal:h,base:x.base,enableBorderRadius:!P||qp(C._custom)||o===P._top||o===P._bottom,x:h?x.head:A.center,y:h?A.center:x.head,height:h?A.size:Math.abs(x.size),width:h?Math.abs(x.size):A.size};b&&(k.options=m||this.resolveDataElementOptions(T,e[T].active?"active":s));const I=k.options||e[T].options;_O(k,I,P,o),vO(k,I,d.ratio),this.updateElement(e[T],T,k,s)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),r=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(t),u=l&&l[n.axis],h=d=>{const m=d._parsed.find(T=>T[n.axis]===u),b=m&&m[d.vScale.axis];if(jt(b)||isNaN(b))return!0};for(const d of s)if(!(t!==void 0&&h(d))&&((r===!1||o.indexOf(d.stack)===-1||r===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const s=this._getStacks(e,n),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const l=e.barThickness;return{min:l||hO(t),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:s},options:{base:r,minBarLength:o}}=this,l=r||0,u=this.getParsed(e),h=u._custom,d=qp(h);let m=u[t.axis],b=0,T=n?this.applyStack(t,u,n):m,C,x;T!==m&&(b=T-m,T=m),d&&(m=h.barStart,T=h.barEnd-h.barStart,m!==0&&Xr(m)!==Xr(h.barEnd)&&(b=0),b+=m);const A=!jt(r)&&!d?r:b;let P=t.getPixelForValue(A);if(this.chart.getDataVisibility(e)?C=t.getPixelForValue(b+T):C=P,x=C-P,Math.abs(x)<o){x=mO(x,t,l)*o,m===l&&(P-=x/2);const k=t.getPixelForDecimal(0),I=t.getPixelForDecimal(1),F=Math.min(k,I),j=Math.max(k,I);P=Math.max(Math.min(P,j),F),C=P+x,n&&!d&&(u._stacks[t.axis]._visualValues[s]=t.getValueForPixel(C)-t.getValueForPixel(P))}if(P===t.getPixelForValue(l)){const k=Xr(x)*t.getLineWidthForValue(l)/2;P+=k,x-=k}return{size:x,base:P,head:C,center:C+x/2}}_calculateBarIndexPixels(e,t){const n=t.scale,s=this.options,r=s.skipNull,o=vt(s.maxBarThickness,1/0);let l,u;if(t.grouped){const h=r?this._getStackCount(e):t.stackCount,d=s.barThickness==="flex"?fO(e,t,s,h):dO(e,t,s,h),m=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);l=d.start+d.chunk*m+d.chunk/2,u=Math.min(o,d.chunk*d.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),u=Math.min(o,t.min*t.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,s=n.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}function TO(i,e,t){let n=1,s=1,r=0,o=0;if(e<ai){const l=i,u=l+e,h=Math.cos(l),d=Math.sin(l),m=Math.cos(u),b=Math.sin(u),T=(I,F,j)=>gd(I,l,u,!0)?1:Math.max(F,F*t,j,j*t),C=(I,F,j)=>gd(I,l,u,!0)?-1:Math.min(F,F*t,j,j*t),x=T(0,h,m),A=T(fi,d,b),P=C(ui,h,m),k=C(ui+fi,d,b);n=(x-P)/2,s=(A-k)/2,r=-(x+P)/2,o=-(A+k)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:o}}class xO extends b_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const u=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:s,lineWidth:u.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let r=u=>+n[u];if(gt(n[e])){const{key:u="value"}=this._parsing;r=h=>+ea(n[h],u)}let o,l;for(o=e,l=e+t;o<l;++o)s._parsed[o]=r(o)}}_getRotation(){return cr(this.options.rotation-90)}_getCircumference(){return cr(this.options.circumference)}_getRotationExtents(){let e=ai,t=-ai;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-o)/2,0),u=Math.min(ZI(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:d,rotation:m}=this._getRotationExtents(),{ratioX:b,ratioY:T,offsetX:C,offsetY:x}=TO(m,d,u),A=(n.width-o)/b,P=(n.height-o)/T,k=Math.max(Math.min(A,P)/2,0),I=LS(this.options.radius,k),F=Math.max(I*u,0),j=(I-F)/this._getVisibleDatasetWeightTotal();this.offsetX=C*I,this.offsetY=x*I,s.total=this.calculateTotal(),this.outerRadius=I-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*h,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/ai)}updateElements(e,t,n,s){const r=s==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,d=(l.left+l.right)/2,m=(l.top+l.bottom)/2,b=r&&h.animateScale,T=b?0:this.innerRadius,C=b?0:this.outerRadius,{sharedOptions:x,includeOptions:A}=this._getSharedOptions(t,s);let P=this._getRotation(),k;for(k=0;k<t;++k)P+=this._circumference(k,r);for(k=t;k<t+n;++k){const I=this._circumference(k,r),F=e[k],j={x:d+this.offsetX,y:m+this.offsetY,startAngle:P,endAngle:P+I,circumference:I,outerRadius:C,innerRadius:T};A&&(j.options=x||this.resolveDataElementOptions(k,F.active?"active":s)),P+=I,this.updateElement(F,k,j,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ai*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=h_(t._parsed[e],n.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let s,r,o,l,u;if(!e){for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){o=n.getDatasetMeta(s),e=o.data,l=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)u=l.resolveDataElementOptions(s),u.borderAlign!=="inner"&&(t=Math.max(t,u.borderWidth||0,u.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,s=e.length;n<s;++n){const r=this.resolveDataElementOptions(n);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(vt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class SO extends xO{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function ko(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class T_{static override(e){Object.assign(T_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ko()}parse(){return ko()}format(){return ko()}add(){return ko()}diff(){return ko()}startOf(){return ko()}endOf(){return ko()}}var wO={_date:T_};function CO(i,e,t,n){const{controller:s,data:r,_sorted:o}=i,l=s._cachedMeta.iScale;if(l&&e===l.axis&&e!=="r"&&o&&r.length){const u=l._reversePixels?uL:Jm;if(n){if(s._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const m=u(r,e,t-d),b=u(r,e,t+d);return{lo:m.lo,hi:b.hi}}}}else return u(r,e,t)}return{lo:0,hi:r.length-1}}function cf(i,e,t,n,s){const r=i.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,u=r.length;l<u;++l){const{index:h,data:d}=r[l],{lo:m,hi:b}=CO(r[l],e,o,s);for(let T=m;T<=b;++T){const C=d[T];C.skip||n(C,h,T)}}}function EO(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,s){const r=e?Math.abs(n.x-s.x):0,o=t?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Wp(i,e,t,n,s){const r=[];return!s&&!i.isPointInArea(e)||cf(i,t,e,function(l,u,h){!s&&!$S(l,i.chartArea,0)||l.inRange(e.x,e.y,n)&&r.push({element:l,datasetIndex:u,index:h})},!0),r}function AO(i,e,t,n){let s=[];function r(o,l,u){const{startAngle:h,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:m}=RS(o,{x:e.x,y:e.y});gd(m,h,d)&&s.push({element:o,datasetIndex:l,index:u})}return cf(i,t,e,r),s}function DO(i,e,t,n,s,r){let o=[];const l=EO(t);let u=Number.POSITIVE_INFINITY;function h(d,m,b){const T=d.inRange(e.x,e.y,s);if(n&&!T)return;const C=d.getCenterPoint(s);if(!(!!r||i.isPointInArea(C))&&!T)return;const A=l(e,C);A<u?(o=[{element:d,datasetIndex:m,index:b}],u=A):A===u&&o.push({element:d,datasetIndex:m,index:b})}return cf(i,t,e,h),o}function Gp(i,e,t,n,s,r){return!r&&!i.isPointInArea(e)?[]:t==="r"&&!n?AO(i,e,t,s):DO(i,e,t,n,s,r)}function cv(i,e,t,n,s){const r=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return cf(i,t,e,(u,h,d)=>{u[o]&&u[o](e[t],s)&&(r.push({element:u,datasetIndex:h,index:d}),l=l||u.inRange(e.x,e.y,s))}),n&&!l?[]:r}var PO={modes:{index(i,e,t,n){const s=Mo(e,i),r=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?Wp(i,s,r,n,o):Gp(i,s,r,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(h=>{const d=l[0].index,m=h.data[d];m&&!m.skip&&u.push({element:m,datasetIndex:h.index,index:d})}),u):[]},dataset(i,e,t,n){const s=Mo(e,i),r=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?Wp(i,s,r,n,o):Gp(i,s,r,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,h=i.getDatasetMeta(u).data;l=[];for(let d=0;d<h.length;++d)l.push({element:h[d],datasetIndex:u,index:d})}return l},point(i,e,t,n){const s=Mo(e,i),r=t.axis||"xy",o=t.includeInvisible||!1;return Wp(i,s,r,n,o)},nearest(i,e,t,n){const s=Mo(e,i),r=t.axis||"xy",o=t.includeInvisible||!1;return Gp(i,s,r,t.intersect,n,o)},x(i,e,t,n){const s=Mo(e,i);return cv(i,s,"x",t.intersect,n)},y(i,e,t,n){const s=Mo(e,i);return cv(i,s,"y",t.intersect,n)}}};const e1=["left","top","right","bottom"];function gu(i,e){return i.filter(t=>t.pos===e)}function hv(i,e){return i.filter(t=>e1.indexOf(t.pos)===-1&&t.box.axis===e)}function _u(i,e){return i.sort((t,n)=>{const s=e?n:t,r=e?t:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function kO(i){const e=[];let t,n,s,r,o,l;for(t=0,n=(i||[]).length;t<n;++t)s=i[t],{position:r,options:{stack:o,stackWeight:l=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:l});return e}function IO(i){const e={};for(const t of i){const{stack:n,pos:s,stackWeight:r}=t;if(!n||!e1.includes(s))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function LO(i,e){const t=IO(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let r,o,l;for(r=0,o=i.length;r<o;++r){l=i[r];const{fullSize:u}=l.box,h=t[l.stack],d=h&&l.stackWeight/h.weight;l.horizontal?(l.width=d?d*n:u&&e.availableWidth,l.height=s):(l.width=n,l.height=d?d*s:u&&e.availableHeight)}return t}function OO(i){const e=kO(i),t=_u(e.filter(h=>h.box.fullSize),!0),n=_u(gu(e,"left"),!0),s=_u(gu(e,"right")),r=_u(gu(e,"top"),!0),o=_u(gu(e,"bottom")),l=hv(e,"x"),u=hv(e,"y");return{fullSize:t,leftAndTop:n.concat(r),rightAndBottom:s.concat(u).concat(o).concat(l),chartArea:gu(e,"chartArea"),vertical:n.concat(s).concat(u),horizontal:r.concat(o).concat(l)}}function dv(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function t1(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function MO(i,e,t,n){const{pos:s,box:r}=t,o=i.maxPadding;if(!gt(s)){t.size&&(i[s]-=t.size);const m=n[t.stack]||{size:0,count:1};m.size=Math.max(m.size,t.horizontal?r.height:r.width),t.size=m.size/m.count,i[s]+=t.size}r.getPadding&&t1(o,r.getPadding());const l=Math.max(0,e.outerWidth-dv(o,i,"left","right")),u=Math.max(0,e.outerHeight-dv(o,i,"top","bottom")),h=l!==i.w,d=u!==i.h;return i.w=l,i.h=u,t.horizontal?{same:h,other:d}:{same:d,other:h}}function RO(i){const e=i.maxPadding;function t(n){const s=Math.max(e[n]-i[n],0);return i[n]+=s,s}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function NO(i,e){const t=e.maxPadding;function n(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return n(i?["left","right"]:["top","bottom"])}function ku(i,e,t,n){const s=[];let r,o,l,u,h,d;for(r=0,o=i.length,h=0;r<o;++r){l=i[r],u=l.box,u.update(l.width||e.w,l.height||e.h,NO(l.horizontal,e));const{same:m,other:b}=MO(e,t,l,n);h|=m&&s.length,d=d||b,u.fullSize||s.push(l)}return h&&ku(s,e,t,n)||d}function Ah(i,e,t,n,s){i.top=t,i.left=e,i.right=e+n,i.bottom=t+s,i.width=n,i.height=s}function fv(i,e,t,n){const s=t.padding;let{x:r,y:o}=e;for(const l of i){const u=l.box,h=n[l.stack]||{placed:0,weight:1},d=l.stackWeight/h.weight||1;if(l.horizontal){const m=e.w*d,b=h.size||u.height;cc(h.start)&&(o=h.start),u.fullSize?Ah(u,s.left,o,t.outerWidth-s.right-s.left,b):Ah(u,e.left+h.placed,o,m,b),h.start=o,h.placed+=m,o=u.bottom}else{const m=e.h*d,b=h.size||u.width;cc(h.start)&&(r=h.start),u.fullSize?Ah(u,r,s.top,b,t.outerHeight-s.bottom-s.top):Ah(u,r,e.top+h.placed,b,m),h.start=r,h.placed+=m,r=u.right}}e.x=r,e.y=o}var Un={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;const s=qn(i.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),l=OO(i.boxes),u=l.vertical,h=l.horizontal;Dt(i.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=u.reduce((x,A)=>A.box.options&&A.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),b=Object.assign({},s);t1(b,qn(n));const T=Object.assign({maxPadding:b,w:r,h:o,x:s.left,y:s.top},s),C=LO(u.concat(h),m);ku(l.fullSize,T,m,C),ku(u,T,m,C),ku(h,T,m,C)&&ku(u,T,m,C),RO(T),fv(l.leftAndTop,T,m,C),T.x+=T.w,T.y+=T.h,fv(l.rightAndBottom,T,m,C),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Dt(l.chartArea,x=>{const A=x.box;Object.assign(A,i.chartArea),A.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class i1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,s){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):n)}}isAttached(e){return!0}updateConfig(e){}}class BO extends i1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Zh="$chartjs",FO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pv=i=>i===null||i==="";function UO(i,e){const t=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[Zh]={initial:{height:n,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",pv(s)){const r=ev(i,"width");r!==void 0&&(i.width=r)}if(pv(n))if(i.style.height==="")i.height=i.width/(e||2);else{const r=ev(i,"height");r!==void 0&&(i.height=r)}return i}const n1=GL?{passive:!0}:!1;function jO(i,e,t){i&&i.addEventListener(e,t,n1)}function zO(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,n1)}function HO(i,e){const t=FO[i.type]||i.type,{x:n,y:s}=Mo(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function vd(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function $O(i,e,t){const n=i.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||vd(l.addedNodes,n),o=o&&!vd(l.removedNodes,n);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function VO(i,e,t){const n=i.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||vd(l.removedNodes,n),o=o&&!vd(l.addedNodes,n);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const dc=new Map;let mv=0;function s1(){const i=window.devicePixelRatio;i!==mv&&(mv=i,dc.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function qO(i,e){dc.size||window.addEventListener("resize",s1),dc.set(i,e)}function WO(i){dc.delete(i),dc.size||window.removeEventListener("resize",s1)}function GO(i,e,t){const n=i.canvas,s=n&&v_(n);if(!s)return;const r=US((l,u)=>{const h=s.clientWidth;t(l,u),h<s.clientWidth&&t()},window),o=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,d=u.contentRect.height;h===0&&d===0||r(h,d)});return o.observe(s),qO(i,r),o}function Xp(i,e,t){t&&t.disconnect(),e==="resize"&&WO(i)}function XO(i,e,t){const n=i.canvas,s=US(r=>{i.ctx!==null&&t(HO(r,i))},i);return jO(n,e,s),s}class KO extends i1{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(UO(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Zh])return!1;const n=t[Zh].initial;["height","width"].forEach(r=>{const o=n[r];jt(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=n.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[Zh],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:$O,detach:VO,resize:GO}[t]||XO;s[t]=o(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),s=n[t];if(!s)return;({attach:Xp,detach:Xp,resize:Xp}[t]||zO)(e,t,s),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,s){return WL(e,t,n,s)}isAttached(e){const t=e&&v_(e);return!!(t&&t.isConnected)}}function ZO(i){return!y_()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?BO:KO}let oa=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return md(this.x)&&md(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const s={};return e.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}};function YO(i,e){const t=i.options.ticks,n=QO(i),s=Math.min(t.maxTicksLimit||n,n),r=t.major.enabled?eM(e):[],o=r.length,l=r[0],u=r[o-1],h=[];if(o>s)return tM(e,h,r,o/s),h;const d=JO(r,e,s);if(o>0){let m,b;const T=o>1?Math.round((u-l)/(o-1)):null;for(Dh(e,h,d,jt(T)?0:l-T,l),m=0,b=o-1;m<b;m++)Dh(e,h,d,r[m],r[m+1]);return Dh(e,h,d,u,jt(T)?e.length:u+T),h}return Dh(e,h,d),h}function QO(i){const e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),s=i._maxLength/t;return Math.floor(Math.min(n,s))}function JO(i,e,t){const n=iM(i),s=e.length/t;if(!n)return Math.max(s,1);const r=nL(n);for(let o=0,l=r.length-1;o<l;o++){const u=r[o];if(u>s)return u}return Math.max(s,1)}function eM(i){const e=[];let t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function tM(i,e,t,n){let s=0,r=t[0],o;for(n=Math.ceil(n),o=0;o<i.length;o++)o===r&&(e.push(i[o]),s++,r=t[s*n])}function Dh(i,e,t,n,s){const r=vt(n,0),o=Math.min(vt(s,i.length),i.length);let l=0,u,h,d;for(t=Math.ceil(t),s&&(u=s-n,t=u/Math.floor(u/t)),d=r;d<0;)l++,d=Math.round(r+l*t);for(h=Math.max(r,0);h<o;h++)h===d&&(e.push(i[h]),l++,d=Math.round(r+l*t))}function iM(i){const e=i.length;let t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}const nM=i=>i==="left"?"right":i==="right"?"left":i,gv=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,_v=(i,e)=>Math.min(e||i,i);function yv(i,e){const t=[],n=i.length/e,s=i.length;let r=0;for(;r<s;r+=n)t.push(i[Math.floor(r)]);return t}function sM(i,e,t){const n=i.ticks.length,s=Math.min(e,n-1),r=i._startPixel,o=i._endPixel,l=1e-6;let u=i.getPixelForTick(s),h;if(!(t&&(n===1?h=Math.max(u-r,o-u):e===0?h=(i.getPixelForTick(1)-u)/2:h=(u-i.getPixelForTick(s-1))/2,u+=s<e?h:-h,u<r-l||u>o+l)))return u}function rM(i,e){Dt(i,t=>{const n=t.gc,s=n.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[n[r]];n.splice(0,s)}})}function yu(i){return i.drawTicks?i.tickLength:0}function vv(i,e){if(!i.display)return 0;const t=Li(i.font,e),n=qn(i.padding);return(di(i.text)?i.text.length:1)*t.lineHeight+n.height}function oM(i,e){return El(i,{scale:e,type:"scale"})}function aM(i,e,t){return El(i,{tick:t,index:e,type:"tick"})}function lM(i,e,t){let n=c_(i);return(t&&e!=="right"||!t&&e==="right")&&(n=nM(n)),n}function uM(i,e,t,n){const{top:s,left:r,bottom:o,right:l,chart:u}=i,{chartArea:h,scales:d}=u;let m=0,b,T,C;const x=o-s,A=l-r;if(i.isHorizontal()){if(T=Ei(n,r,l),gt(t)){const P=Object.keys(t)[0],k=t[P];C=d[P].getPixelForValue(k)+x-e}else t==="center"?C=(h.bottom+h.top)/2+x-e:C=gv(i,t,e);b=l-r}else{if(gt(t)){const P=Object.keys(t)[0],k=t[P];T=d[P].getPixelForValue(k)-A+e}else t==="center"?T=(h.left+h.right)/2-A+e:T=gv(i,t,e);C=Ei(n,o,s),m=t==="left"?-fi:fi}return{titleX:T,titleY:C,maxWidth:b,rotation:m}}class Al extends oa{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:s}=this;return e=Ss(e,Number.POSITIVE_INFINITY),t=Ss(t,Number.NEGATIVE_INFINITY),n=Ss(n,Number.POSITIVE_INFINITY),s=Ss(s,Number.NEGATIVE_INFINITY),{min:Ss(e,n),max:Ss(t,s),minDefined:Vn(e),maxDefined:Vn(t)}}getMinMax(e){let{min:t,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)o=l[u].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(n=Math.max(n,o.max));return t=r&&t>n?n:t,n=s&&t>n?t:n,{min:Ss(t,Ss(n,t)),max:Ss(n,Ss(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ut(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:s,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=IL(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?yv(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=YO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ut(this.options.afterUpdate,[this])}beforeSetDimensions(){Ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ut(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ut(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n],r.label=Ut(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=_v(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,l,u,h;if(!this._isVisible()||!t.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),m=d.widest.width,b=d.highest.height,T=un(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/n:T/(n-1),m+6>l&&(l=T/(n-(e.offset?.5:1)),u=this.maxHeight-yu(e.grid)-t.padding-vv(e.title,this.chart.options.font),h=Math.sqrt(m*m+b*b),o=oL(Math.min(Math.asin(un((d.highest.height+6)/l,-1,1)),Math.asin(un(u/h,-1,1))-Math.asin(un(b/h,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ut(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=vv(s,t.options.font);if(l?(e.width=this.maxWidth,e.height=yu(r)+u):(e.height=this.maxHeight,e.width=yu(r)+u),n.display&&this.ticks.length){const{first:h,last:d,widest:m,highest:b}=this._getLabelSizes(),T=n.padding*2,C=cr(this.labelRotation),x=Math.cos(C),A=Math.sin(C);if(l){const P=n.mirror?0:A*m.width+x*b.height;e.height=Math.min(this.maxHeight,e.height+P+T)}else{const P=n.mirror?0:x*m.width+A*b.height;e.width=Math.min(this.maxWidth,e.width+P+T)}this._calculatePadding(h,d,A,x)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,s){const{ticks:{align:r,padding:o},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,T=0;u?h?(b=s*e.width,T=n*t.height):(b=n*e.height,T=s*t.width):r==="start"?T=t.width:r==="end"?b=e.width:r!=="inner"&&(b=e.width/2,T=t.width/2),this.paddingLeft=Math.max((b-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((T-m+o)*this.width/(this.width-m),0)}else{let d=t.height/2,m=e.height/2;r==="start"?(d=0,m=e.height):r==="end"&&(d=t.height,m=0),this.paddingTop=d+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ut(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)jt(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=yv(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:s,_longestTextCache:r}=this,o=[],l=[],u=Math.floor(t/_v(t,n));let h=0,d=0,m,b,T,C,x,A,P,k,I,F,j;for(m=0;m<t;m+=u){if(C=e[m].label,x=this._resolveTickFontOptions(m),s.font=A=x.string,P=r[A]=r[A]||{data:{},gc:[]},k=x.lineHeight,I=F=0,!jt(C)&&!di(C))I=Xy(s,P.data,P.gc,I,C),F=k;else if(di(C))for(b=0,T=C.length;b<T;++b)j=C[b],!jt(j)&&!di(j)&&(I=Xy(s,P.data,P.gc,I,j),F+=k);o.push(I),l.push(F),h=Math.max(I,h),d=Math.max(F,d)}rM(r,t);const V=o.indexOf(h),U=l.indexOf(d),K=D=>({width:o[D]||0,height:l[D]||0});return{first:K(0),last:K(t-1),widest:K(V),highest:K(U),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return lL(this._alignToPixels?Po(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=aM(this.getContext(),e,n))}return this.$context||(this.$context=oM(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=cr(this.labelRotation),n=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,l=r?r.widest.width+o:0,u=r?r.highest.height+o:0;return this.isHorizontal()?u*n>l*s?l/n:u/s:u*s<l*n?u/n:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:l}=s,u=r.offset,h=this.isHorizontal(),m=this.ticks.length+(u?1:0),b=yu(r),T=[],C=l.setContext(this.getContext()),x=C.display?C.width:0,A=x/2,P=function(le){return Po(n,le,x)};let k,I,F,j,V,U,K,D,R,Y,Q,J;if(o==="top")k=P(this.bottom),U=this.bottom-b,D=k-A,Y=P(e.top)+A,J=e.bottom;else if(o==="bottom")k=P(this.top),Y=e.top,J=P(e.bottom)-A,U=k+A,D=this.top+b;else if(o==="left")k=P(this.right),V=this.right-b,K=k-A,R=P(e.left)+A,Q=e.right;else if(o==="right")k=P(this.left),R=e.left,Q=P(e.right)-A,V=k+A,K=this.left+b;else if(t==="x"){if(o==="center")k=P((e.top+e.bottom)/2+.5);else if(gt(o)){const le=Object.keys(o)[0],ne=o[le];k=P(this.chart.scales[le].getPixelForValue(ne))}Y=e.top,J=e.bottom,U=k+A,D=U+b}else if(t==="y"){if(o==="center")k=P((e.left+e.right)/2);else if(gt(o)){const le=Object.keys(o)[0],ne=o[le];k=P(this.chart.scales[le].getPixelForValue(ne))}V=k-A,K=V-b,R=e.left,Q=e.right}const ae=vt(s.ticks.maxTicksLimit,m),ce=Math.max(1,Math.ceil(m/ae));for(I=0;I<m;I+=ce){const le=this.getContext(I),ne=r.setContext(le),ee=l.setContext(le),fe=ne.lineWidth,re=ne.color,de=ee.dash||[],Le=ee.dashOffset,$e=ne.tickWidth,Fe=ne.tickColor,Ie=ne.tickBorderDash||[],ze=ne.tickBorderDashOffset;F=sM(this,I,u),F!==void 0&&(j=Po(n,F,fe),h?V=K=R=Q=j:U=D=Y=J=j,T.push({tx1:V,ty1:U,tx2:K,ty2:D,x1:R,y1:Y,x2:Q,y2:J,width:fe,color:re,borderDash:de,borderDashOffset:Le,tickWidth:$e,tickColor:Fe,tickBorderDash:Ie,tickBorderDashOffset:ze}))}return this._ticksLength=m,this._borderValue=k,T}_computeLabelItems(e){const t=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:d,mirror:m}=r,b=yu(n.grid),T=b+d,C=m?-d:T,x=-cr(this.labelRotation),A=[];let P,k,I,F,j,V,U,K,D,R,Y,Q,J="middle";if(s==="top")V=this.bottom-C,U=this._getXAxisLabelAlignment();else if(s==="bottom")V=this.top+C,U=this._getXAxisLabelAlignment();else if(s==="left"){const ce=this._getYAxisLabelAlignment(b);U=ce.textAlign,j=ce.x}else if(s==="right"){const ce=this._getYAxisLabelAlignment(b);U=ce.textAlign,j=ce.x}else if(t==="x"){if(s==="center")V=(e.top+e.bottom)/2+T;else if(gt(s)){const ce=Object.keys(s)[0],le=s[ce];V=this.chart.scales[ce].getPixelForValue(le)+T}U=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")j=(e.left+e.right)/2-T;else if(gt(s)){const ce=Object.keys(s)[0],le=s[ce];j=this.chart.scales[ce].getPixelForValue(le)}U=this._getYAxisLabelAlignment(b).textAlign}t==="y"&&(u==="start"?J="top":u==="end"&&(J="bottom"));const ae=this._getLabelSizes();for(P=0,k=l.length;P<k;++P){I=l[P],F=I.label;const ce=r.setContext(this.getContext(P));K=this.getPixelForTick(P)+r.labelOffset,D=this._resolveTickFontOptions(P),R=D.lineHeight,Y=di(F)?F.length:1;const le=Y/2,ne=ce.color,ee=ce.textStrokeColor,fe=ce.textStrokeWidth;let re=U;o?(j=K,U==="inner"&&(P===k-1?re=this.options.reverse?"left":"right":P===0?re=this.options.reverse?"right":"left":re="center"),s==="top"?h==="near"||x!==0?Q=-Y*R+R/2:h==="center"?Q=-ae.highest.height/2-le*R+R:Q=-ae.highest.height+R/2:h==="near"||x!==0?Q=R/2:h==="center"?Q=ae.highest.height/2-le*R:Q=ae.highest.height-Y*R,m&&(Q*=-1),x!==0&&!ce.showLabelBackdrop&&(j+=R/2*Math.sin(x))):(V=K,Q=(1-Y)*R/2);let de;if(ce.showLabelBackdrop){const Le=qn(ce.backdropPadding),$e=ae.heights[P],Fe=ae.widths[P];let Ie=Q-Le.top,ze=0-Le.left;switch(J){case"middle":Ie-=$e/2;break;case"bottom":Ie-=$e;break}switch(U){case"center":ze-=Fe/2;break;case"right":ze-=Fe;break;case"inner":P===k-1?ze-=Fe:P>0&&(ze-=Fe/2);break}de={left:ze,top:Ie,width:Fe+Le.width,height:$e+Le.height,color:ce.backdropColor}}A.push({label:F,font:D,textOffset:Q,options:{rotation:x,color:ne,strokeColor:ee,strokeWidth:fe,textAlign:re,textBaseline:J,translation:[j,V],backdrop:de}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-cr(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),l=e+r,u=o.widest.width;let h,d;return t==="left"?s?(d=this.right+r,n==="near"?h="left":n==="center"?(h="center",d+=u/2):(h="right",d+=u)):(d=this.right-l,n==="near"?h="right":n==="center"?(h="center",d-=u/2):(h="left",d=this.left)):t==="right"?s?(d=this.left+r,n==="near"?h="right":n==="center"?(h="center",d-=u/2):(h="left",d-=u)):(d=this.left+l,n==="near"?h="left":n==="center"?(h="center",d+=u/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const l=(u,h,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const u=s[r];t.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,d,m,b;this.isHorizontal()?(h=Po(e,this.left,o)-o/2,d=Po(e,this.right,l)+l/2,m=b=u):(m=Po(e,this.top,o)-o/2,b=Po(e,this.bottom,l)+l/2,h=d=u),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(h,m),t.lineTo(d,b),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&d_(n,s);const r=this.getLabelItems(e);for(const o of r){const l=o.options,u=o.font,h=o.label,d=o.textOffset;hc(n,h,0,d,u,l)}s&&f_(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:s}}=this;if(!n.display)return;const r=Li(n.font),o=qn(n.padding),l=n.align;let u=r.lineHeight/2;t==="bottom"||t==="center"||gt(t)?(u+=o.bottom,di(n.text)&&(u+=r.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:h,titleY:d,maxWidth:m,rotation:b}=uM(this,u,t,l);hc(e,n.text,0,0,r,{color:n.color,maxWidth:m,rotation:b,textAlign:lM(l,t,s),textBaseline:"middle",translation:[h,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=vt(e.grid&&e.grid.z,-1),s=vt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Al.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const l=t[r];l[n]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Li(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ph{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;dM(t)&&(n=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,cM(e,o,n),this.override&&ni.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,s=this.scope;n in t&&delete t[n],s&&n in ni[s]&&(delete ni[s][n],this.override&&delete ta[n])}}function cM(i,e,t){const n=uc(Object.create(null),[t?ni.get(t):{},ni.get(e),i.defaults]);ni.set(e,n),i.defaultRoutes&&hM(e,i.defaultRoutes),i.descriptors&&ni.describe(e,i.descriptors)}function hM(i,e){Object.keys(e).forEach(t=>{const n=t.split("."),s=n.pop(),r=[i].concat(n).join("."),o=e[t].split("."),l=o.pop(),u=o.join(".");ni.route(r,s,u,l)})}function dM(i){return"id"in i&&"defaults"in i}class fM{constructor(){this.controllers=new Ph(b_,"datasets",!0),this.elements=new Ph(oa,"elements"),this.plugins=new Ph(Object,"plugins"),this.scales=new Ph(Al,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(s=>{const r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Dt(s,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,n){const s=l_(e);Ut(n["before"+s],[],n),t[e](n),Ut(n["after"+s],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var As=new fM;class pM{constructor(){this._init=[]}notify(e,t,n,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,n);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,s){s=s||{};for(const r of e){const o=r.plugin,l=o[n],u=[t,s,r.options];if(Ut(l,u,o)===!1&&s.cancelable)return!1}return!0}invalidate(){jt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,s=vt(n.options&&n.options.plugins,{}),r=mM(n);return s===!1&&!t?[]:_M(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(s(t,n),e,"stop"),this._notify(s(n,t),e,"start")}}function mM(i){const e={},t=[],n=Object.keys(As.plugins.items);for(let r=0;r<n.length;r++)t.push(As.getPlugin(n[r]));const s=i.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function gM(i,e){return!e&&i===!1?null:i===!0?{}:i}function _M(i,{plugins:e,localIds:t},n,s){const r=[],o=i.getContext();for(const l of e){const u=l.id,h=gM(n[u],s);h!==null&&r.push({plugin:l,options:yM(i.config,{plugin:l,local:t[u]},h,o)})}return r}function yM(i,{plugin:e,local:t},n,s){const r=i.pluginScopeKeys(e),o=i.getOptionScopes(n,r);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tg(i,e){const t=ni.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function vM(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function bM(i,e){return i===e?"_index_":"_value_"}function bv(i){if(i==="x"||i==="y"||i==="r")return i}function TM(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ig(i,...e){if(bv(i))return i;for(const t of e){const n=t.axis||TM(t.position)||i.length>1&&bv(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Tv(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function xM(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(t.length)return Tv(i,"x",t[0])||Tv(i,"y",t[0])}return{}}function SM(i,e){const t=ta[i.type]||{scales:{}},n=e.scales||{},s=tg(i.type,e),r=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!gt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=ig(o,l,xM(o,i),ni.scales[l.type]),h=bM(u,s),d=t.scales||{};r[o]=Vu(Object.create(null),[{axis:u},l,d[u],d[h]])}),i.data.datasets.forEach(o=>{const l=o.type||i.type,u=o.indexAxis||tg(l,e),d=(ta[l]||{}).scales||{};Object.keys(d).forEach(m=>{const b=vM(m,u),T=o[b+"AxisID"]||b;r[T]=r[T]||Object.create(null),Vu(r[T],[{axis:b},n[T],d[m]])})}),Object.keys(r).forEach(o=>{const l=r[o];Vu(l,[ni.scales[l.type],ni.scale])}),r}function r1(i){const e=i.options||(i.options={});e.plugins=vt(e.plugins,{}),e.scales=SM(i,e)}function o1(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function wM(i){return i=i||{},i.data=o1(i.data),r1(i),i}const xv=new Map,a1=new Set;function kh(i,e){let t=xv.get(i);return t||(t=e(),xv.set(i,t),a1.add(t)),t}const vu=(i,e,t)=>{const n=ea(e,t);n!==void 0&&i.add(n)};let CM=class{constructor(e){this._config=wM(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=o1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),r1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return kh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return kh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return kh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return kh(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let s=n.get(e);return(!s||t)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,t,n){const{options:s,type:r}=this,o=this._cachedScopes(e,n),l=o.get(t);if(l)return l;const u=new Set;t.forEach(d=>{e&&(u.add(e),d.forEach(m=>vu(u,e,m))),d.forEach(m=>vu(u,s,m)),d.forEach(m=>vu(u,ta[r]||{},m)),d.forEach(m=>vu(u,ni,m)),d.forEach(m=>vu(u,eg,m))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),a1.has(t)&&o.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,ta[t]||{},ni.datasets[t]||{},{type:t},ni,eg]}resolveNamedOptions(e,t,n,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=Sv(this._resolverCache,e,s);let u=o;if(AM(o,t)){r.$shared=!1,n=Kr(n)?n():n;const h=this.createResolver(e,n,l);u=ul(o,n,h)}for(const h of t)r[h]=u[h];return r}createResolver(e,t,n=[""],s){const{resolver:r}=Sv(this._resolverCache,e,n);return gt(t)?ul(r,t,void 0,s):r}};function Sv(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));const s=t.join();let r=n.get(s);return r||(r={resolver:m_(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},n.set(s,r)),r}const EM=i=>gt(i)&&Object.getOwnPropertyNames(i).some(e=>Kr(i[e]));function AM(i,e){const{isScriptable:t,isIndexable:n}=qS(i);for(const s of e){const r=t(s),o=n(s),l=(o||r)&&i[s];if(r&&(Kr(l)||EM(l))||o&&di(l))return!0}return!1}var DM="4.4.6";const PM=["top","bottom","left","right","chartArea"];function wv(i,e){return i==="top"||i==="bottom"||PM.indexOf(i)===-1&&e==="x"}function Cv(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function Ev(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Ut(t&&t.onComplete,[i],e)}function kM(i){const e=i.chart,t=e.options.animation;Ut(t&&t.onProgress,[i],e)}function l1(i){return y_()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Yh={},Av=i=>{const e=l1(i);return Object.values(Yh).filter(t=>t.canvas===e).pop()};function IM(i,e,t){const n=Object.keys(i);for(const s of n){const r=+s;if(r>=e){const o=i[s];delete i[s],(t>0||r>e)&&(i[r+t]=o)}}}function LM(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}function Ih(i,e,t){return i.options.clip?i[t]:e[t]}function OM(i,e){const{xScale:t,yScale:n}=i;return t&&n?{left:Ih(t,e,"left"),right:Ih(t,e,"right"),top:Ih(n,e,"top"),bottom:Ih(n,e,"bottom")}:e}let hf=class{static defaults=ni;static instances=Yh;static overrides=ta;static registry=As;static version=DM;static getChart=Av;static register(...e){As.add(...e),Dv()}static unregister(...e){As.remove(...e),Dv()}constructor(e,t){const n=this.config=new CM(t),s=l1(e),r=Av(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||ZO(s)),this.platform.updateConfig(n);const l=this.platform.acquireContext(s,o.aspectRatio),u=l&&l.canvas,h=u&&u.height,d=u&&u.width;if(this.id=KI(),this.ctx=l,this.canvas=u,this.width=d,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dL(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],Yh[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}ir.listen(this,"complete",Ev),ir.listen(this,"progress",kM),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:s,_aspectRatio:r}=this;return jt(e)?t&&r?r:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return As}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Jy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ky(this.canvas,this.ctx),this}stop(){return ir.stop(this),this}resize(e,t){ir.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Jy(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Ut(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Dt(t,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,s=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const l=t[o],u=ig(o,l),h=u==="r",d=u==="x";return{options:l,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Dt(r,o=>{const l=o.options,u=l.id,h=ig(u,l),d=vt(l.type,o.dtype);(l.position===void 0||wv(l.position,h)!==wv(o.dposition))&&(l.position=o.dposition),s[u]=!0;let m=null;if(u in n&&n[u].type===d)m=n[u];else{const b=As.getScale(d);m=new b({id:u,type:d,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,e)}),Dt(s,(o,l)=>{o||delete n[l]}),Dt(n,o=>{Un.configure(this,o,o.options),Un.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((s,r)=>s.index-r.index),n>t){for(let s=t;s<n;++s)this._destroyDatasetMeta(s);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Cv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,s)=>{t.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=t.length;n<s;n++){const r=t[n];let o=this.getDatasetMeta(n);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=r.indexAxis||tg(l,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=As.getController(l),{datasetElementType:h,dataElementType:d}=ni.datasets[l];Object.assign(u,{dataElementType:As.getElement(d),datasetElementType:h&&As.getElement(h)}),o.controller=new u(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Dt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:m}=this.getDatasetMeta(h),b=!s&&r.indexOf(m)===-1;m.buildOrUpdateElements(b),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||Dt(r,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cv("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Dt(this.scales,e=>{Un.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Uy(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of t){const o=n==="_removeElements"?-r:r;IM(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=r=>new Set(e.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<t;r++)if(!Uy(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Un.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Dt(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Kr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ir.has(this)?this.attached&&!ir.running(this)&&ir.start(this):(this.draw(),Ev({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,s=!n.disabled,r=OM(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&d_(t,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),e.controller.draw(),s&&f_(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return $S(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,s){const r=PO.modes[t];return typeof r=="function"?r(this,e,n,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let s=n.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=El(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const s=n?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);cc(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(r,{visible:n}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ir.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ky(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Yh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};Dt(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(u,h)=>{t.addEventListener(this,u,h),e[u]=h},s=(u,h)=>{e[u]&&(t.removeEventListener(this,u,h),delete e[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){Dt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Dt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const s=n?"set":"remove";let r,o,l,u;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!dd(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const s=this.options.hover,r=(u,h)=>u.filter(d=>!h.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),o=r(t,e),l=n?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:s=[],options:r}=this,o=t,l=this._getActiveElements(e,s,n,o),u=tL(e),h=LM(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Ut(r.onHover,[e,l,this],this),u&&Ut(r.onClick,[e,l,this],this));const d=!dd(l,s);return(d||t)&&(this._active=l,this._updateHoverStyles(l,s,t)),this._lastEvent=h,d}_getActiveElements(e,t,n,s){if(e.type==="mouseout")return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}};function Dv(){return Dt(hf.instances,i=>i._plugins.invalidate())}function MM(i,e,t){const{startAngle:n,pixelMargin:s,x:r,y:o,outerRadius:l,innerRadius:u}=e;let h=s/l;i.beginPath(),i.arc(r,o,l,n-h,t+h),u>s?(h=s/u,i.arc(r,o,u,t+h,n-h,!0)):i.arc(r,o,s,t+fi,n-fi),i.closePath(),i.clip()}function RM(i){return p_(i,["outerStart","outerEnd","innerStart","innerEnd"])}function NM(i,e,t,n){const s=RM(i.options.borderRadius),r=(t-e)/2,o=Math.min(r,n*e/2),l=u=>{const h=(t-Math.min(r,u))*n/2;return un(u,0,Math.min(r,h))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:un(s.innerStart,0,o),innerEnd:un(s.innerEnd,0,o)}}function Ia(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function bd(i,e,t,n,s,r){const{x:o,y:l,startAngle:u,pixelMargin:h,innerRadius:d}=e,m=Math.max(e.outerRadius+n+t-h,0),b=d>0?d+n+t+h:0;let T=0;const C=s-u;if(n){const ce=d>0?d-n:0,le=m>0?m-n:0,ne=(ce+le)/2,ee=ne!==0?C*ne/(ne+n):C;T=(C-ee)/2}const x=Math.max(.001,C*m-t/ui)/m,A=(C-x)/2,P=u+A+T,k=s-A-T,{outerStart:I,outerEnd:F,innerStart:j,innerEnd:V}=NM(e,b,m,k-P),U=m-I,K=m-F,D=P+I/U,R=k-F/K,Y=b+j,Q=b+V,J=P+j/Y,ae=k-V/Q;if(i.beginPath(),r){const ce=(D+R)/2;if(i.arc(o,l,m,D,ce),i.arc(o,l,m,ce,R),F>0){const fe=Ia(K,R,o,l);i.arc(fe.x,fe.y,F,R,k+fi)}const le=Ia(Q,k,o,l);if(i.lineTo(le.x,le.y),V>0){const fe=Ia(Q,ae,o,l);i.arc(fe.x,fe.y,V,k+fi,ae+Math.PI)}const ne=(k-V/b+(P+j/b))/2;if(i.arc(o,l,b,k-V/b,ne,!0),i.arc(o,l,b,ne,P+j/b,!0),j>0){const fe=Ia(Y,J,o,l);i.arc(fe.x,fe.y,j,J+Math.PI,P-fi)}const ee=Ia(U,P,o,l);if(i.lineTo(ee.x,ee.y),I>0){const fe=Ia(U,D,o,l);i.arc(fe.x,fe.y,I,P-fi,D)}}else{i.moveTo(o,l);const ce=Math.cos(D)*m+o,le=Math.sin(D)*m+l;i.lineTo(ce,le);const ne=Math.cos(R)*m+o,ee=Math.sin(R)*m+l;i.lineTo(ne,ee)}i.closePath()}function BM(i,e,t,n,s){const{fullCircles:r,startAngle:o,circumference:l}=e;let u=e.endAngle;if(r){bd(i,e,t,n,u,s);for(let h=0;h<r;++h)i.fill();isNaN(l)||(u=o+(l%ai||ai))}return bd(i,e,t,n,u,s),i.fill(),u}function FM(i,e,t,n,s){const{fullCircles:r,startAngle:o,circumference:l,options:u}=e,{borderWidth:h,borderJoinStyle:d,borderDash:m,borderDashOffset:b}=u,T=u.borderAlign==="inner";if(!h)return;i.setLineDash(m||[]),i.lineDashOffset=b,T?(i.lineWidth=h*2,i.lineJoin=d||"round"):(i.lineWidth=h,i.lineJoin=d||"bevel");let C=e.endAngle;if(r){bd(i,e,t,n,C,s);for(let x=0;x<r;++x)i.stroke();isNaN(l)||(C=o+(l%ai||ai))}T&&MM(i,e,C),r||(bd(i,e,t,n,C,s),i.stroke())}class UM extends oa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const s=this.getProps(["x","y"],n),{angle:r,distance:o}=RS(s,{x:e,y:t}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:d,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),b=(this.options.spacing+this.options.borderWidth)/2,T=vt(m,u-l),C=gd(r,l,u)&&l!==u,x=T>=ai||C,A=Uo(o,h+b,d+b);return x&&A}getCenterPoint(e){const{x:t,y:n,startAngle:s,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,d=(s+r)/2,m=(o+l+h+u)/2;return{x:t+Math.cos(d)*m,y:n+Math.sin(d)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,s=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=n>ai?Math.floor(n/ai):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(ui,n||0)),h=s*u;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,BM(e,this,h,r,o),FM(e,this,h,r,o),e.restore()}}function u1(i,e){const{x:t,y:n,base:s,width:r,height:o}=i.getProps(["x","y","base","width","height"],e);let l,u,h,d,m;return i.horizontal?(m=o/2,l=Math.min(t,s),u=Math.max(t,s),h=n-m,d=n+m):(m=r/2,l=t-m,u=t+m,h=Math.min(n,s),d=Math.max(n,s)),{left:l,top:h,right:u,bottom:d}}function qr(i,e,t,n){return i?0:un(e,t,n)}function jM(i,e,t){const n=i.options.borderWidth,s=i.borderSkipped,r=VS(n);return{t:qr(s.top,r.top,0,t),r:qr(s.right,r.right,0,e),b:qr(s.bottom,r.bottom,0,t),l:qr(s.left,r.left,0,e)}}function zM(i,e,t){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,r=Xa(s),o=Math.min(e,t),l=i.borderSkipped,u=n||gt(s);return{topLeft:qr(!u||l.top||l.left,r.topLeft,0,o),topRight:qr(!u||l.top||l.right,r.topRight,0,o),bottomLeft:qr(!u||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:qr(!u||l.bottom||l.right,r.bottomRight,0,o)}}function HM(i){const e=u1(i),t=e.right-e.left,n=e.bottom-e.top,s=jM(i,t/2,n/2),r=zM(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Kp(i,e,t,n){const s=e===null,r=t===null,l=i&&!(s&&r)&&u1(i,n);return l&&(s||Uo(e,l.left,l.right))&&(r||Uo(t,l.top,l.bottom))}function $M(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function VM(i,e){i.rect(e.x,e.y,e.w,e.h)}function Zp(i,e,t={}){const n=i.x!==t.x?-e:0,s=i.y!==t.y?-e:0,r=(i.x+i.w!==t.x+t.w?e:0)-n,o=(i.y+i.h!==t.y+t.h?e:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+r,h:i.h+o,radius:i.radius}}class qM extends oa{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=HM(this),l=$M(o.radius)?_d:VM;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),l(e,Zp(o,t,r)),e.clip(),l(e,Zp(r,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,Zp(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,n){return Kp(this,e,t,n)}inXRange(e,t){return Kp(this,e,null,t)}inYRange(e,t){return Kp(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const Pv=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},WM=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class kv extends oa{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ut(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=Li(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=Pv(n,r);let h,d;t.font=s.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(o,r,l,u)+10):(d=this.maxHeight,h=this._fitCols(o,s,l,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,s){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],d=s+l;let m=e;r.textAlign="left",r.textBaseline="middle";let b=-1,T=-d;return this.legendItems.forEach((C,x)=>{const A=n+t/2+r.measureText(C.text).width;(x===0||h[h.length-1]+A+2*l>o)&&(m+=d,h[h.length-(x>0?0:1)]=0,T+=d,b++),u[x]={left:0,top:T,row:b,width:A,height:s},h[h.length-1]+=A+l}),m}_fitCols(e,t,n,s){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],d=o-e;let m=l,b=0,T=0,C=0,x=0;return this.legendItems.forEach((A,P)=>{const{itemWidth:k,itemHeight:I}=GM(n,t,r,A,s);P>0&&T+I+2*l>d&&(m+=b+l,h.push({width:b,height:T}),C+=b+l,x++,b=T=0),u[P]={left:C,top:T,col:x,width:k,height:I},b=Math.max(b,k),T+=I+l}),m+=b,h.push({width:b,height:T}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Ka(r,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ei(n,this.left+s,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,u=Ei(n,this.left+s,this.right-this.lineWidths[l])),h.top+=this.top+e+s,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+s}else{let l=0,u=Ei(n,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,u=Ei(n,this.top+e+s,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+s,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;d_(e,this),this._draw(),f_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:s}=this,{align:r,labels:o}=e,l=ni.color,u=Ka(e.rtl,this.left,this.width),h=Li(o.font),{padding:d}=o,m=h.size,b=m/2;let T;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:C,boxHeight:x,itemHeight:A}=Pv(o,m),P=function(V,U,K){if(isNaN(C)||C<=0||isNaN(x)||x<0)return;s.save();const D=vt(K.lineWidth,1);if(s.fillStyle=vt(K.fillStyle,l),s.lineCap=vt(K.lineCap,"butt"),s.lineDashOffset=vt(K.lineDashOffset,0),s.lineJoin=vt(K.lineJoin,"miter"),s.lineWidth=D,s.strokeStyle=vt(K.strokeStyle,l),s.setLineDash(vt(K.lineDash,[])),o.usePointStyle){const R={radius:x*Math.SQRT2/2,pointStyle:K.pointStyle,rotation:K.rotation,borderWidth:D},Y=u.xPlus(V,C/2),Q=U+b;HS(s,R,Y,Q,o.pointStyleWidth&&C)}else{const R=U+Math.max((m-x)/2,0),Y=u.leftForLtr(V,C),Q=Xa(K.borderRadius);s.beginPath(),Object.values(Q).some(J=>J!==0)?_d(s,{x:Y,y:R,w:C,h:x,radius:Q}):s.rect(Y,R,C,x),s.fill(),D!==0&&s.stroke()}s.restore()},k=function(V,U,K){hc(s,K.text,V,U+A/2,h,{strikethrough:K.hidden,textAlign:u.textAlign(K.textAlign)})},I=this.isHorizontal(),F=this._computeTitleHeight();I?T={x:Ei(r,this.left+d,this.right-n[0]),y:this.top+d+F,line:0}:T={x:this.left+d,y:Ei(r,this.top+F+d,this.bottom-t[0].height),line:0},KS(this.ctx,e.textDirection);const j=A+d;this.legendItems.forEach((V,U)=>{s.strokeStyle=V.fontColor,s.fillStyle=V.fontColor;const K=s.measureText(V.text).width,D=u.textAlign(V.textAlign||(V.textAlign=o.textAlign)),R=C+b+K;let Y=T.x,Q=T.y;u.setWidth(this.width),I?U>0&&Y+R+d>this.right&&(Q=T.y+=j,T.line++,Y=T.x=Ei(r,this.left+d,this.right-n[T.line])):U>0&&Q+j>this.bottom&&(Y=T.x=Y+t[T.line].width+d,T.line++,Q=T.y=Ei(r,this.top+F+d,this.bottom-t[T.line].height));const J=u.x(Y);if(P(J,Q,V),Y=fL(D,Y+C+b,I?Y+R:this.right,e.rtl),k(u.x(Y),Q,V),I)T.x+=R+d;else if(typeof V.text!="string"){const ae=h.lineHeight;T.y+=c1(V,ae)+d}else T.y+=j}),ZS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Li(t.font),s=qn(t.padding);if(!t.display)return;const r=Ka(e.rtl,this.left,this.width),o=this.ctx,l=t.position,u=n.size/2,h=s.top+u;let d,m=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),d=this.top+h,m=Ei(e.align,m,this.right-b);else{const C=this.columnSizes.reduce((x,A)=>Math.max(x,A.height),0);d=h+Ei(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const T=Ei(l,m,m+b);o.textAlign=r.textAlign(c_(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,hc(o,t.text,T,d,n)}_computeTitleHeight(){const e=this.options.title,t=Li(e.font),n=qn(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,s,r;if(Uo(e,this.left,this.right)&&Uo(t,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],Uo(e,s.left,s.left+s.width)&&Uo(t,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!ZM(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=WM(s,n);s&&!r&&Ut(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!r&&Ut(t.onHover,[e,n,this],this)}else n&&Ut(t.onClick,[e,n,this],this)}}function GM(i,e,t,n,s){const r=XM(n,i,e,t),o=KM(s,n,e.lineHeight);return{itemWidth:r,itemHeight:o}}function XM(i,e,t,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+n.measureText(s).width}function KM(i,e,t){let n=i;return typeof e.text!="string"&&(n=c1(e,t)),n}function c1(i,e){const t=i.text?i.text.length:0;return e*t}function ZM(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var YM={id:"legend",_element:kv,start(i,e,t){const n=i.legend=new kv({ctx:i.ctx,options:t,chart:i});Un.configure(i,n,t),Un.addBox(i,n)},stop(i){Un.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const n=i.legend;Un.configure(i,n,t),n.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const n=e.datasetIndex,s=t.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:l}}=i.legend.options;return i._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(t?0:void 0),d=qn(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class h1 extends oa{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=di(n.text)?n.text.length:1;this._padding=qn(n.padding);const r=s*Li(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:s,right:r,options:o}=this,l=o.align;let u=0,h,d,m;return this.isHorizontal()?(d=Ei(l,n,r),m=t+e,h=r-n):(o.position==="left"?(d=n+e,m=Ei(l,s,t),u=ui*-.5):(d=r-e,m=Ei(l,t,s),u=ui*.5),h=s-t),{titleX:d,titleY:m,maxWidth:h,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Li(t.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(r);hc(e,t.text,0,0,n,{color:t.color,maxWidth:u,rotation:h,textAlign:c_(t.align),textBaseline:"middle",translation:[o,l]})}}function QM(i,e){const t=new h1({ctx:i.ctx,options:e,chart:i});Un.configure(i,t,e),Un.addBox(i,t),i.titleBlock=t}var JM={id:"title",_element:h1,start(i,e,t){QM(i,t)},stop(i){const e=i.titleBlock;Un.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const n=i.titleBlock;Un.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Iu={average(i){if(!i.length)return!1;let e,t,n=new Set,s=0,r=0;for(e=0,t=i.length;e<t;++e){const l=i[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();n.add(u.x),s+=u.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((l,u)=>l+u)/n.size,y:s/r}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,s=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=i.length;r<o;++r){const u=i[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),d=aL(e,h);d<s&&(s=d,l=u)}}if(l){const u=l.tooltipPosition();t=u.x,n=u.y}return{x:t,y:n}}};function Cs(i,e){return e&&(di(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function nr(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function eR(i,e){const{element:t,datasetIndex:n,index:s}=e,r=i.getDatasetMeta(n).controller,{label:o,value:l}=r.getLabelAndValue(s);return{chart:i,label:o,parsed:r.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:l,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:t}}function Iv(i,e){const t=i.chart.ctx,{body:n,footer:s,title:r}=i,{boxWidth:o,boxHeight:l}=e,u=Li(e.bodyFont),h=Li(e.titleFont),d=Li(e.footerFont),m=r.length,b=s.length,T=n.length,C=qn(e.padding);let x=C.height,A=0,P=n.reduce((F,j)=>F+j.before.length+j.lines.length+j.after.length,0);if(P+=i.beforeBody.length+i.afterBody.length,m&&(x+=m*h.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),P){const F=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;x+=T*F+(P-T)*u.lineHeight+(P-1)*e.bodySpacing}b&&(x+=e.footerMarginTop+b*d.lineHeight+(b-1)*e.footerSpacing);let k=0;const I=function(F){A=Math.max(A,t.measureText(F).width+k)};return t.save(),t.font=h.string,Dt(i.title,I),t.font=u.string,Dt(i.beforeBody.concat(i.afterBody),I),k=e.displayColors?o+2+e.boxPadding:0,Dt(n,F=>{Dt(F.before,I),Dt(F.lines,I),Dt(F.after,I)}),k=0,t.font=d.string,Dt(i.footer,I),t.restore(),A+=C.width,{width:A,height:x}}function tR(i,e){const{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function iR(i,e,t,n){const{x:s,width:r}=n,o=t.caretSize+t.caretPadding;if(i==="left"&&s+r+o>e.width||i==="right"&&s-r-o<0)return!0}function nR(i,e,t,n){const{x:s,width:r}=t,{width:o,chartArea:{left:l,right:u}}=i;let h="center";return n==="center"?h=s<=(l+u)/2?"left":"right":s<=r/2?h="left":s>=o-r/2&&(h="right"),iR(h,i,e,t)&&(h="center"),h}function Lv(i,e,t){const n=t.yAlign||e.yAlign||tR(i,t);return{xAlign:t.xAlign||e.xAlign||nR(i,e,t,n),yAlign:n}}function sR(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function rR(i,e,t){let{y:n,height:s}=i;return e==="top"?n+=t:e==="bottom"?n-=s+t:n-=s/2,n}function Ov(i,e,t,n){const{caretSize:s,caretPadding:r,cornerRadius:o}=i,{xAlign:l,yAlign:u}=t,h=s+r,{topLeft:d,topRight:m,bottomLeft:b,bottomRight:T}=Xa(o);let C=sR(e,l);const x=rR(e,u,h);return u==="center"?l==="left"?C+=h:l==="right"&&(C-=h):l==="left"?C-=Math.max(d,b)+s:l==="right"&&(C+=Math.max(m,T)+s),{x:un(C,0,n.width-e.width),y:un(x,0,n.height-e.height)}}function Lh(i,e,t){const n=qn(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function Mv(i){return Cs([],nr(i))}function oR(i,e,t){return El(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Rv(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const d1={beforeTitle:er,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:er,beforeBody:er,beforeLabel:er,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return jt(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:er,afterBody:er,beforeFooter:er,footer:er,afterFooter:er};function sn(i,e,t,n){const s=i[e].call(t,n);return typeof s>"u"?d1[e].call(t,n):s}class Nv extends oa{static positioners=Iu;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&t.options.animation&&n.animations,r=new YS(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=oR(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,s=sn(n,"beforeTitle",this,e),r=sn(n,"title",this,e),o=sn(n,"afterTitle",this,e);let l=[];return l=Cs(l,nr(s)),l=Cs(l,nr(r)),l=Cs(l,nr(o)),l}getBeforeBody(e,t){return Mv(sn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,s=[];return Dt(e,r=>{const o={before:[],lines:[],after:[]},l=Rv(n,r);Cs(o.before,nr(sn(l,"beforeLabel",this,r))),Cs(o.lines,sn(l,"label",this,r)),Cs(o.after,nr(sn(l,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return Mv(sn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,s=sn(n,"beforeFooter",this,e),r=sn(n,"footer",this,e),o=sn(n,"afterFooter",this,e);let l=[];return l=Cs(l,nr(s)),l=Cs(l,nr(r)),l=Cs(l,nr(o)),l}_createItems(e){const t=this._active,n=this.chart.data,s=[],r=[],o=[];let l=[],u,h;for(u=0,h=t.length;u<h;++u)l.push(eR(this.chart,t[u]));return e.filter&&(l=l.filter((d,m,b)=>e.filter(d,m,b,n))),e.itemSort&&(l=l.sort((d,m)=>e.itemSort(d,m,n))),Dt(l,d=>{const m=Rv(e.callbacks,d);s.push(sn(m,"labelColor",this,d)),r.push(sn(m,"labelPointStyle",this,d)),o.push(sn(m,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const l=Iu[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const u=this._size=Iv(this,n),h=Object.assign({},l,u),d=Lv(this.chart,n,h),m=Ov(n,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,s){const r=this.getCaretPosition(e,n,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:m}=Xa(l),{x:b,y:T}=e,{width:C,height:x}=t;let A,P,k,I,F,j;return r==="center"?(F=T+x/2,s==="left"?(A=b,P=A-o,I=F+o,j=F-o):(A=b+C,P=A+o,I=F-o,j=F+o),k=A):(s==="left"?P=b+Math.max(u,d)+o:s==="right"?P=b+C-Math.max(h,m)-o:P=this.caretX,r==="top"?(I=T,F=I-o,A=P-o,k=P+o):(I=T+x,F=I+o,A=P+o,k=P-o),j=I),{x1:A,x2:P,x3:k,y1:I,y2:F,y3:j}}drawTitle(e,t,n){const s=this.title,r=s.length;let o,l,u;if(r){const h=Ka(n.rtl,this.x,this.width);for(e.x=Lh(this,n.titleAlign,n),t.textAlign=h.textAlign(n.titleAlign),t.textBaseline="middle",o=Li(n.titleFont),l=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,u=0;u<r;++u)t.fillText(s[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,u+1===r&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,t,n,s,r){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:u,boxWidth:h}=r,d=Li(r.bodyFont),m=Lh(this,"left",r),b=s.x(m),T=u<d.lineHeight?(d.lineHeight-u)/2:0,C=t.y+T;if(r.usePointStyle){const x={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},A=s.leftForLtr(b,h)+h/2,P=C+u/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Zy(e,x,A,P),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Zy(e,x,A,P)}else{e.lineWidth=gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=s.leftForLtr(b,h),A=s.leftForLtr(s.xPlus(b,1),h-2),P=Xa(o.borderRadius);Object.values(P).some(k=>k!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,_d(e,{x,y:C,w:h,h:u,radius:P}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),_d(e,{x:A,y:C+1,w:h-2,h:u-2,radius:P}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,C,h,u),e.strokeRect(x,C,h,u),e.fillStyle=o.backgroundColor,e.fillRect(A,C+1,h-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:d}=n,m=Li(n.bodyFont);let b=m.lineHeight,T=0;const C=Ka(n.rtl,this.x,this.width),x=function(K){t.fillText(K,C.x(e.x+T),e.y+b/2),e.y+=b+r},A=C.textAlign(o);let P,k,I,F,j,V,U;for(t.textAlign=o,t.textBaseline="middle",t.font=m.string,e.x=Lh(this,A,n),t.fillStyle=n.bodyColor,Dt(this.beforeBody,x),T=l&&A!=="right"?o==="center"?h/2+d:h+2+d:0,F=0,V=s.length;F<V;++F){for(P=s[F],k=this.labelTextColors[F],t.fillStyle=k,Dt(P.before,x),I=P.lines,l&&I.length&&(this._drawColorBox(t,e,F,C,n),b=Math.max(m.lineHeight,u)),j=0,U=I.length;j<U;++j)x(I[j]),b=m.lineHeight;Dt(P.after,x)}T=0,b=m.lineHeight,Dt(this.afterBody,x),e.y-=r}drawFooter(e,t,n){const s=this.footer,r=s.length;let o,l;if(r){const u=Ka(n.rtl,this.x,this.width);for(e.x=Lh(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=u.textAlign(n.footerAlign),t.textBaseline="middle",o=Li(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,s){const{xAlign:r,yAlign:o}=this,{x:l,y:u}=e,{width:h,height:d}=n,{topLeft:m,topRight:b,bottomLeft:T,bottomRight:C}=Xa(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(l+m,u),o==="top"&&this.drawCaret(e,t,n,s),t.lineTo(l+h-b,u),t.quadraticCurveTo(l+h,u,l+h,u+b),o==="center"&&r==="right"&&this.drawCaret(e,t,n,s),t.lineTo(l+h,u+d-C),t.quadraticCurveTo(l+h,u+d,l+h-C,u+d),o==="bottom"&&this.drawCaret(e,t,n,s),t.lineTo(l+T,u+d),t.quadraticCurveTo(l,u+d,l,u+d-T),o==="center"&&r==="left"&&this.drawCaret(e,t,n,s),t.lineTo(l,u+m),t.quadraticCurveTo(l,u,l+m,u),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const o=Iu[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Iv(this,e),u=Object.assign({},o,this._size),h=Lv(t,e,u),d=Ov(e,u,h,t);(s._to!==d.x||r._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=qn(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,s,t),KS(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),ZS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,s=e.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),r=!dd(n,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,n),l=this._positionChanged(o,e),u=t||!dd(o,r)||l;return u&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,n,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:s,options:r}=this,o=Iu[r.position].call(this,e,t);return o!==!1&&(n!==o.x||s!==o.y)}}var aR={id:"tooltip",_element:Nv,positioners:Iu,afterInit(i,e,t){t&&(i.tooltip=new Nv({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:d1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lR=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function uR(i,e,t,n){const s=i.indexOf(e);if(s===-1)return lR(i,e,t,n);const r=i.lastIndexOf(e);return s!==r?t:s}const cR=(i,e)=>i===null?null:un(Math.round(i),0,e);function Bv(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class hR extends Al{static id="category";static defaults={ticks:{callback:Bv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:s,label:r}of t)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(jt(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:uR(n,e,vt(t,e),this._addedLabels),cR(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return Bv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function dR(i,e){const t=[],{bounds:s,step:r,min:o,max:l,precision:u,count:h,maxTicks:d,maxDigits:m,includeBounds:b}=i,T=r||1,C=d-1,{min:x,max:A}=e,P=!jt(o),k=!jt(l),I=!jt(h),F=(A-x)/(m+1);let j=zy((A-x)/C/T)*T,V,U,K,D;if(j<1e-14&&!P&&!k)return[{value:x},{value:A}];D=Math.ceil(A/j)-Math.floor(x/j),D>C&&(j=zy(D*j/C/T)*T),jt(u)||(V=Math.pow(10,u),j=Math.ceil(j*V)/V),s==="ticks"?(U=Math.floor(x/j)*j,K=Math.ceil(A/j)*j):(U=x,K=A),P&&k&&r&&sL((l-o)/r,j/1e3)?(D=Math.round(Math.min((l-o)/j,d)),j=(l-o)/D,U=o,K=l):I?(U=P?o:U,K=k?l:K,D=h-1,j=(K-U)/D):(D=(K-U)/j,Kh(D,Math.round(D),j/1e3)?D=Math.round(D):D=Math.ceil(D));const R=Math.max(Hy(j),Hy(U));V=Math.pow(10,jt(u)?R:u),U=Math.round(U*V)/V,K=Math.round(K*V)/V;let Y=0;for(P&&(b&&U!==o?(t.push({value:o}),U<o&&Y++,Kh(Math.round((U+Y*j)*V)/V,o,Fv(o,F,i))&&Y++):U<o&&Y++);Y<D;++Y){const Q=Math.round((U+Y*j)*V)/V;if(k&&Q>l)break;t.push({value:Q})}return k&&b&&K!==l?t.length&&Kh(t[t.length-1].value,l,Fv(l,F,i))?t[t.length-1].value=l:t.push({value:l}):(!k||K===l)&&t.push({value:K}),t}function Fv(i,e,{horizontal:t,minRotation:n}){const s=cr(n),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+i).length;return Math.min(e/r,o)}class fR extends Al{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return jt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const o=u=>s=t?s:u,l=u=>r=n?r:u;if(e){const u=Xr(s),h=Xr(r);u<0&&h<0?l(0):u>0&&h>0&&o(0)}if(s===r){let u=r===0?1:Math.abs(r*.05);l(r+u),e||o(s-u)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=dR(s,r);return e.bounds==="ticks"&&rL(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-t)/Math.max(e.length-1,1)/2;t-=s,n+=s}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return h_(e,this.chart.options.locale,this.options.ticks.format)}}class pR extends fR{static id="linear";static defaults={ticks:{callback:zS.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Vn(e)?e:0,this.max=Vn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=cr(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const df={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},an=Object.keys(df);function Uv(i,e){return i-e}function jv(i,e){if(jt(e))return null;const t=i._adapter,{parser:n,round:s,isoWeekday:r}=i._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Vn(o)||(o=typeof n=="string"?t.parse(o,n):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(md(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function zv(i,e,t,n){const s=an.length;for(let r=an.indexOf(i);r<s-1;++r){const o=df[an[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=n)return an[r]}return an[s-1]}function mR(i,e,t,n,s){for(let r=an.length-1;r>=an.indexOf(t);r--){const o=an[r];if(df[o].common&&i._adapter.diff(s,n,o)>=e-1)return o}return an[t?an.indexOf(t):0]}function gR(i){for(let e=an.indexOf(i)+1,t=an.length;e<t;++e)if(df[an[e]].common)return an[e]}function Hv(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:n,hi:s}=u_(t,e),r=t[n]>=e?t[n]:t[s];i[r]=!0}}function _R(i,e,t,n){const s=i._adapter,r=+s.startOf(e[0].value,n),o=e[e.length-1].value;let l,u;for(l=r;l<=o;l=+s.add(l,1,n))u=t[l],u>=0&&(e[u].major=!0);return e}function $v(i,e,t){const n=[],s={},r=e.length;let o,l;for(o=0;o<r;++o)l=e[o],s[l]=o,n.push({value:l,major:!1});return r===0||!t?n:_R(i,n,s,t)}class Vv extends Al{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),s=this._adapter=new wO._date(e.adapters.date);s.init(t),Vu(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:jv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=Vn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),n),r=Vn(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,l=cL(s,r,o);return this._unit=t.unit||(n.autoSkip?zv(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):mR(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:gR(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),$v(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?n=r:n=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=un(t,0,o),n=un(n,0,o),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||zv(r.minUnit,t,n,this._getLabelCapacity(t)),l=vt(s.ticks.stepSize,1),u=o==="week"?r.isoWeekday:!1,h=md(u)||u===!0,d={};let m=t,b,T;if(h&&(m=+e.startOf(m,"isoWeek",u)),m=+e.startOf(m,h?"day":o),e.diff(n,t,o)>1e5*l)throw new Error(t+" and "+n+" are too far apart with stepSize of "+l+" "+o);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(b=m,T=0;b<n;b=+e.add(b,l,o),T++)Hv(d,b,C);return(b===n||s.bounds==="ticks"||T===1)&&Hv(d,b,C),Object.keys(d).sort(Uv).map(x=>+x)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,n,s){const r=this.options,o=r.ticks.callback;if(o)return Ut(o,[e,t,n],this);const l=r.time.displayFormats,u=this._unit,h=this._majorUnit,d=u&&l[u],m=h&&l[h],b=n[t],T=h&&m&&b&&b.major;return this._adapter.format(e,s||(T?m:d))}generateTickLabels(e){let t,n,s;for(t=0,n=e.length;t<n;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,s=cr(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:n*r+l*o,h:n*o+l*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,s=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,$v(this,[e],this._majorUnit),s),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,n=s.length;t<n;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const s=this.getLabels();for(t=0,n=s.length;t<n;++t)e.push(jv(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return BS(e.sort(Uv))}}function Oh(i,e,t){let n=0,s=i.length-1,r,o,l,u;t?(e>=i[n].pos&&e<=i[s].pos&&({lo:n,hi:s}=Jm(i,"pos",e)),{pos:r,time:l}=i[n],{pos:o,time:u}=i[s]):(e>=i[n].time&&e<=i[s].time&&({lo:n,hi:s}=Jm(i,"time",e)),{time:r,pos:l}=i[n],{time:o,pos:u}=i[s]);const h=o-r;return h?l+(u-l)*(e-r)/h:l}class D8 extends Vv{static id="timeseries";static defaults=Vv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Oh(t,this.min),this._tableRange=Oh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,s=[],r=[];let o,l,u,h,d;for(o=0,l=e.length;o<l;++o)h=e[o],h>=t&&h<=n&&s.push(h);if(s.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,l=s.length;o<l;++o)d=s[o+1],u=s[o-1],h=s[o],Math.round((d+u)/2)!==h&&r.push({time:h,pos:o/(l-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Oh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Oh(this._table,n*this._tableRange+this._minPos,!0)}}const f1={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},yR={ariaLabel:{type:String},ariaDescribedby:{type:String}},vR={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...f1,...yR},bR=xx[0]==="2"?(i,e)=>Object.assign(i,{attrs:e}):(i,e)=>Object.assign(i,e);function La(i){return Tc(i)?mt(i):i}function TR(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i;return Tc(e)?new Proxy(i,{}):i}function xR(i,e){const t=i.options;t&&e&&Object.assign(t,e)}function p1(i,e){i.labels=e}function m1(i,e,t){const n=[];i.datasets=e.map(s=>{const r=i.datasets.find(o=>o[t]===s[t]);return!r||!s.data||n.includes(r)?{...s}:(n.push(r),Object.assign(r,s),r)})}function SR(i,e){const t={labels:[],datasets:[]};return p1(t,i.labels),m1(t,i.datasets,e),t}const wR=pn({props:vR,setup(i,e){let{expose:t,slots:n}=e;const s=li(null),r=Hg(null);t({chart:r});const o=()=>{if(!s.value)return;const{type:h,data:d,options:m,plugins:b,datasetIdKey:T}=i,C=SR(d,T),x=TR(C,d);r.value=new hf(s.value,{type:h,data:x,options:{...m},plugins:b})},l=()=>{const h=mt(r.value);h&&(i.destroyDelay>0?setTimeout(()=>{h.destroy(),r.value=null},i.destroyDelay):(h.destroy(),r.value=null))},u=h=>{h.update(i.updateMode)};return Xn(o),Tl(l),$o([()=>i.options,()=>i.data],(h,d)=>{let[m,b]=h,[T,C]=d;const x=mt(r.value);if(!x)return;let A=!1;if(m){const P=La(m),k=La(T);P&&P!==k&&(xR(x,P),A=!0)}if(b){const P=La(b.labels),k=La(C.labels),I=La(b.datasets),F=La(C.datasets);P!==k&&(p1(x.config.data,P),A=!0),I&&I!==F&&(m1(x.config.data,I,i.datasetIdKey),A=!0)}A&&Ki(()=>{u(x)})},{deep:!0}),()=>ls("canvas",{role:"img",ariaLabel:i.ariaLabel,ariaDescribedby:i.ariaDescribedby,ref:s},[ls("p",{},[n.default?n.default():""])])}});function g1(i,e){return hf.register(e),pn({props:f1,setup(t,n){let{expose:s}=n;const r=Hg(null),o=l=>{r.value=l?.chart};return s({chart:r}),()=>ls(wR,bR({ref:o},{type:i,...t}))}})}const CR=g1("bar",bO),ER=g1("pie",SO);console.log("StatsGraph");hf.register(hR,pR,qM,UM,JM,aR,YM);const AR={props:{location:{type:Object,required:!0}},name:"StatsGraph",components:{Bar:CR,Pie:ER},data(){return{dataBar:{},dataPie:{},annee:2019,loaded:!1}},watch:{location:{async handler(i){i&&(this.loaded=!1,await this.processLocation(mt(i)))},immediate:!0,deep:!0}},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:"Chart.js Doughnut Chart"}}},methods:{getChartData(i,e,t,n){return{labels:e,datasets:[{label:i,data:t,backgroundColor:n}]}},parseJsonBar(i){const e=i.stats.map(s=>s.surface),t=i.stats.map(s=>s.barColor),n=i.stats.map(s=>s.habitants);this.dataBar=this.getChartData("Habitants par m² de parc",e,n,t)},parseJsonPie(i){const e=i.seuils.map(s=>s.surface),t=i.seuils.map(s=>s.barColor),n=i.seuils.map(s=>s.habitants);this.dataPie=this.getChartData("Habitants par m² de parc",e,n,t)},async processLocation(i){this.location.regionId,this.location.com2coId,this.location.cityId;let e="";e="https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/stats/test.json",this.loaded=!1;const n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();this.parseJsonBar(s),this.parseJsonPie(s),this.loaded=!0}}},DR={key:0},PR={key:1};function kR(i,e,t,n,s,r){const o=yi("Bar"),l=yi("Pie");return s.loaded?(Pt(),ti("div",DR,[Xe("p",null,[ft(o,{data:s.dataBar,style:{width:"80%",height:"300px"}},null,8,["data"])]),Xe("p",null,[ft(l,{data:s.dataPie,options:i.myOptions,style:{width:"80%",height:"300px"}},null,8,["data","options"])])])):(Pt(),ti("div",PR,"Chargement en cours..."))}const IR=mr(AR,[["render",kR]]);console.log("AppStatistics");const LR={name:"AppStatistics",components:{SearchLocation:DS,StatsGraph:IR},data(){return{location:null,componentKey:0}},methods:{async updateLocation(i){this.location=i,this.componentKey++}}},OR={id:"appStatistics",valign:"top",align:"left"},MR={style:{border:"2px"}},RR={id:"statsGrapg",align:"center",valign:"middle",style:{position:"relative, z-index: 10"}};function NR(i,e,t,n,s,r){const o=yi("SearchLocation"),l=yi("StatsGraph");return Pt(),ti("div",OR,[ft(o,{onUpdateLocation:r.updateLocation,onLocationSelected:r.updateLocation,displaySearchAddress:!1},null,8,["onUpdateLocation","onLocationSelected"]),Xe("span",MR,[Xe("div",RR,[(Pt(),Bo(l,{key:s.componentKey,location:s.location},null,8,["location"]))])])])}const BR=mr(LR,[["render",NR]]),FR={name:"AppInformation",components:{},methods:{toPlain(i){return i.map(e=>String.fromCharCode(e)).join("")},sendRequest(){const i=[77,65,73,76,84,79],e=[111,120,121,103,101,110,101,46,108,109],t=[64,103,109,97,105,108,46,99,111,109],n=this.toPlain(i),s=this.toPlain(e)+this.toPlain(t),r="Isochrone: Demande d'accès pour contribution";window.location.href=`${n}:${s}?subject=${r}`}}},UR={id:"appInformation",valign:"top",align:"left"},jR={style:{border:"2px"}};function zR(i,e,t,n,s,r){return Pt(),ti("div",UR,[Xe("span",jR,[e[6]||(e[6]=BE('<h1>Information sur l&#39;application</h1><h2>Objectif</h2><p> L&#39;objectif de cette application est de permettre aux habitants des villes et des regroupements de communes de connaitre les parcs et jardins qui sont accessibles à pieds. <br> Elle permet de visualiser sur la carte et de connaitre la population qui partage les parcs ainsi que la densité de population. </p><h2>Parcs et Jardins</h2><p> Les parcs et jardins publiques sont des espaces verts accessibles qui permettent de se détendre, de se promener, de jouer, de se reposer, de pique-niquer, de lire, de se rencontrer,de s’aérer... <br> Les villes comptabilisent certains espaces comme des parcs et jardins, comme les cimetières, les bosquets, des places minéralisées. L&#39;application les exclus des surfaces mais les noms sont disposibles dans les détails avec une croix. </p><p> Ils sont intégrés et géolocalisés sur une carte interactive qui permet d&#39;évaluer les populations qui peuvent en bénéficier. <br> Nous avons intégré les recommandation de l&#39;OMS qui préconisent au minimum 10m²/habitant en zone urbaine et 25 m²/habitant en zone périurbaine, les surfaces conseillées sont respectivement de 12 et 45 m²/habitant. De plus la distance pour accéder aux parcs est de 5 minutes à pieds (soit 300m) en ville et 20 minutes à la campagne (soit 1200m). <br><br> La zone d&#39;accessibilité isochrone est établie par l&#39;intermédiaire du service de calcul d&#39;isochrone de l&#39;IGN. Les données de densité des communes, des populations, des données carroyées sont fournies par l&#39;INSEE. Le cadastre provient du site opendata du gouvernement. <br> Certaines villes proposent également les données de parc via opendata et elles ont été intégrées. <br></p><h2>Les données utilisées et l&#39;algorithme</h2><p> Nous utilisons les données disponibles en OpenData lorsque cela est possible auquel s&#39;ajoute un travail collaboratif de plusieurs assocations à permis de recenser les entrées de chaque parcs.<br> Pour chaque entrée, nous déterminons la zone d&#39;accessibilité &quot;isochrone&quot; grace au service de calcul d&#39;isochrone de l&#39;IGN.<br> Les données de densité des communes, des populations, des données carroyées sont fournies par l&#39;INSEE. </p><p> L&#39;algorithme de calcul de la zone d&#39;accessibilité est le suivant : </p><ul><li> Déterminer les carreaux d&#39;une commune avec le cadastre</li><li> Pour chaque carreau:</li><ul><li> recherche des isochones d&#39;accesibilité de parcs qui ont une intersection avec le carré</li><li> fusion des polygones des isochrones</li><li> déterminations de tous les carrés qui ont une intersection avec ce polygone d&#39;accès</li><ol><li> Pour les carrés complètement recouvert par le polygone, toute la population est contabilisée</li><li> pour les autres carrés la polulation est estimée au prorata le la surface en recouvrement </li><li> la surface de tous les parcs accessibles est comptabilisée et la densité est calculée au vu de la population qui partage les parcs</li></ol></ul></ul><br><p> Ce calcul est réalisé pour les années disponibles avec l&#39;INSEE. </p><h2>Code source et contribution à l&#39;application</h2><p> Le programme est disponible en opensource, il a été réalisé par des bénévoles et des associations. Il est possible de contribuer à l&#39;amélioration des données, des algorithmes et des fonctionnalités. <br> Pour cela, il suffit de se rendre sur le <a target="_blank" rel="noopener noreferrer" href="https://github.com/cunvoas/opendata-tools/issues">site github du projet</a> et de proposer des améliorations. <br> Le programme peut aussi être copié en respectant la <a target="_blank" rel="noopener noreferrer" href="https://www.gnu.org/licenses/gpl-3.0.fr.html">licence GPLv3</a>. <br> Pour plus d&#39;information, vous pouvez consulter la documentation sur le site du projet. </p><h2>Contribution à la saisie</h2>',15)),Xe("p",null,[e[1]||(e[1]=hi(" Les contributions aux données sont réalisées sur une application dédiée. Pour y accéder, il faut en faire la demande via ")),Xe("a",{href:"javascript:void(0);",onClick:e[0]||(e[0]=(...o)=>r.sendRequest&&r.sendRequest(...o))},"email"),e[2]||(e[2]=Xe("br",null,null,-1)),e[3]||(e[3]=hi(" Nous limitons le nombres de contributeur par territoire afin de garantir la qualité des données et la stabilité de notre seurveur. ")),e[4]||(e[4]=Xe("br",null,null,-1)),e[5]||(e[5]=hi(" Les données sont ensuite vérifiées et intégrées dans la base de données avant d'être publiée sur le site publique. "))])])])}const HR=mr(FR,[["render",zR]]);var Yp,qv;function ff(){if(qv)return Yp;qv=1;var i;return typeof window<"u"?i=window:typeof $r<"u"?i=$r:typeof self<"u"?i=self:i={},Yp=i,Yp}var $R=ff();const q=sa($R),VR={},qR=Object.freeze(Object.defineProperty({__proto__:null,default:VR},Symbol.toStringTag,{value:"Module"})),WR=bA(qR);var Qp,Wv;function _1(){if(Wv)return Qp;Wv=1;var i=typeof $r<"u"?$r:typeof window<"u"?window:{},e=WR,t;return typeof document<"u"?t=document:(t=i["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=i["__GLOBAL_DOCUMENT_CACHE@4"]=e)),Qp=t,Qp}var GR=_1();const Ae=sa(GR);var Mh={exports:{}},Jp={exports:{}},Gv;function XR(){return Gv||(Gv=1,function(i){function e(){return i.exports=e=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},i.exports.__esModule=!0,i.exports.default=i.exports,e.apply(null,arguments)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports}(Jp)),Jp.exports}var em,Xv;function KR(){if(Xv)return em;Xv=1,em=e;var i=Object.prototype.toString;function e(t){if(!t)return!1;var n=i.call(t);return n==="[object Function]"||typeof t=="function"&&n!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return em}var tm,Kv;function ZR(){if(Kv)return tm;Kv=1;function i(s,r){var o=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(o)return(o=o.call(s)).next.bind(o);if(Array.isArray(s)||(o=e(s))||r){o&&(s=o);var l=0;return function(){return l>=s.length?{done:!0}:{done:!1,value:s[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(s,r){if(s){if(typeof s=="string")return t(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(s,r)}}function t(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,l=new Array(r);o<r;o++)l[o]=s[o];return l}var n=function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=s.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(l,u){this.typeToInterceptorsMap_.has(l)||this.typeToInterceptorsMap_.set(l,new Set);var h=this.typeToInterceptorsMap_.get(l);return h.has(u)?!1:(h.add(u),!0)},r.removeInterceptor=function(l,u){var h=this.typeToInterceptorsMap_.get(l);return h&&h.has(u)?(h.delete(u),!0):!1},r.clearInterceptorsByType=function(l){var u=this.typeToInterceptorsMap_.get(l);return u?(this.typeToInterceptorsMap_.delete(l),this.typeToInterceptorsMap_.set(l,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(l){return this.typeToInterceptorsMap_.get(l)||new Set},r.execute=function(l,u){for(var h=this.getForType(l),d=i(h),m;!(m=d()).done;){var b=m.value;try{u=b(u)}catch{}}return u},s}();return tm=n,tm}var im,Zv;function YR(){if(Zv)return im;Zv=1;var i=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var n=t.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},n.getMaxAttempts=function(){return this.maxAttempts_},n.setMaxAttempts=function(r){this.maxAttempts_=r},n.getDelayFactor=function(){return this.delayFactor_},n.setDelayFactor=function(r){this.delayFactor_=r},n.getFuzzFactor=function(){return this.fuzzFactor_},n.setFuzzFactor=function(r){this.fuzzFactor_=r},n.getInitialDelay=function(){return this.initialDelay_},n.setInitialDelay=function(r){this.initialDelay_=r},n.createRetry=function(r){var o=r===void 0?{}:r,l=o.maxAttempts,u=o.delayFactor,h=o.fuzzFactor,d=o.initialDelay;return new e({maxAttempts:l||this.maxAttempts_,delayFactor:u||this.delayFactor_,fuzzFactor:h||this.fuzzFactor_,initialDelay:d||this.initialDelay_})},t}(),e=function(){function t(s){this.maxAttempts_=s.maxAttempts,this.delayFactor_=s.delayFactor,this.fuzzFactor_=s.fuzzFactor,this.currentDelay_=s.initialDelay,this.currentAttempt_=1}var n=t.prototype;return n.moveToNextAttempt=function(){this.currentAttempt_++;var r=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+r},n.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},n.getCurrentDelay=function(){return this.currentDelay_},n.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},n.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},n.getCurrentFuzzedDelay=function(){var r=this.getCurrentMinPossibleDelay(),o=this.getCurrentMaxPossibleDelay();return r+Math.random()*(o-r)},t}();return im=i,im}var nm,Yv;function QR(){if(Yv)return nm;Yv=1;var i=ff(),e=function(s,r){return r===void 0&&(r=!1),function(o,l,u){if(o){s(o);return}if(l.statusCode>=400&&l.statusCode<=599){var h=u;if(r)if(i.TextDecoder){var d=t(l.headers&&l.headers["content-type"]);try{h=new TextDecoder(d).decode(u)}catch{}}else h=String.fromCharCode.apply(null,new Uint8Array(u));s({cause:h});return}s(null,u)}};function t(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(s,r){var o=r.split("="),l=o[0],u=o[1];return l.trim()==="charset"?u.trim():s},"utf-8")}return nm=e,nm}var Qv;function JR(){if(Qv)return Mh.exports;Qv=1;var i=ff(),e=XR(),t=KR(),n=ZR(),s=YR();h.httpHandler=QR(),h.requestInterceptorsStorage=new n,h.responseInterceptorsStorage=new n,h.retryManager=new s;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var r=function(C){var x={};return C&&C.trim().split(`
`).forEach(function(A){var P=A.indexOf(":"),k=A.slice(0,P).trim().toLowerCase(),I=A.slice(P+1).trim();typeof x[k]>"u"?x[k]=I:Array.isArray(x[k])?x[k].push(I):x[k]=[x[k],I]}),x};Mh.exports=h,Mh.exports.default=h,h.XMLHttpRequest=i.XMLHttpRequest||b,h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:i.XDomainRequest,o(["get","put","post","patch","head","delete"],function(T){h[T==="delete"?"del":T]=function(C,x,A){return x=u(C,x,A),x.method=T.toUpperCase(),d(x)}});function o(T,C){for(var x=0;x<T.length;x++)C(T[x])}function l(T){for(var C in T)if(T.hasOwnProperty(C))return!1;return!0}function u(T,C,x){var A=T;return t(C)?(x=C,typeof T=="string"&&(A={uri:T})):A=e({},C,{uri:T}),A.callback=x,A}function h(T,C,x){return C=u(T,C,x),d(C)}function d(T){if(typeof T.callback>"u")throw new Error("callback argument missing");if(T.requestType&&h.requestInterceptorsStorage.getIsEnabled()){var C={uri:T.uri||T.url,headers:T.headers||{},body:T.body,metadata:T.metadata||{},retry:T.retry,timeout:T.timeout},x=h.requestInterceptorsStorage.execute(T.requestType,C);T.uri=x.uri,T.headers=x.headers,T.body=x.body,T.metadata=x.metadata,T.retry=x.retry,T.timeout=x.timeout}var A=!1,P=function(ee,fe,re){A||(A=!0,T.callback(ee,fe,re))};function k(){V.readyState===4&&!h.responseInterceptorsStorage.getIsEnabled()&&setTimeout(j,0)}function I(){var ne=void 0;if(V.response?ne=V.response:ne=V.responseText||m(V),ae)try{ne=JSON.parse(ne)}catch{}return ne}function F(ne){if(clearTimeout(ce),clearTimeout(T.retryTimeout),ne instanceof Error||(ne=new Error(""+(ne||"Unknown XMLHttpRequest Error"))),ne.statusCode=0,!K&&h.retryManager.getIsEnabled()&&T.retry&&T.retry.shouldRetry()){T.retryTimeout=setTimeout(function(){T.retry.moveToNextAttempt(),T.xhr=V,d(T)},T.retry.getCurrentFuzzedDelay());return}if(T.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var ee={headers:le.headers||{},body:le.body,responseUrl:V.responseURL,responseType:V.responseType},fe=h.responseInterceptorsStorage.execute(T.requestType,ee);le.body=fe.body,le.headers=fe.headers}return P(ne,le)}function j(){if(!K){var ne;clearTimeout(ce),clearTimeout(T.retryTimeout),T.useXDR&&V.status===void 0?ne=200:ne=V.status===1223?204:V.status;var ee=le,fe=null;if(ne!==0?(ee={body:I(),statusCode:ne,method:R,headers:{},url:D,rawRequest:V},V.getAllResponseHeaders&&(ee.headers=r(V.getAllResponseHeaders()))):fe=new Error("Internal XMLHttpRequest Error"),T.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var re={headers:ee.headers||{},body:ee.body,responseUrl:V.responseURL,responseType:V.responseType},de=h.responseInterceptorsStorage.execute(T.requestType,re);ee.body=de.body,ee.headers=de.headers}return P(fe,ee,ee.body)}}var V=T.xhr||null;V||(T.cors||T.useXDR?V=new h.XDomainRequest:V=new h.XMLHttpRequest);var U,K,D=V.url=T.uri||T.url,R=V.method=T.method||"GET",Y=T.body||T.data,Q=V.headers=T.headers||{},J=!!T.sync,ae=!1,ce,le={body:void 0,headers:{},statusCode:0,method:R,url:D,rawRequest:V};if("json"in T&&T.json!==!1&&(ae=!0,Q.accept||Q.Accept||(Q.Accept="application/json"),R!=="GET"&&R!=="HEAD"&&(Q["content-type"]||Q["Content-Type"]||(Q["Content-Type"]="application/json"),Y=JSON.stringify(T.json===!0?Y:T.json))),V.onreadystatechange=k,V.onload=j,V.onerror=F,V.onprogress=function(){},V.onabort=function(){K=!0,clearTimeout(T.retryTimeout)},V.ontimeout=F,V.open(R,D,!J,T.username,T.password),J||(V.withCredentials=!!T.withCredentials),!J&&T.timeout>0&&(ce=setTimeout(function(){if(!K){K=!0,V.abort("timeout");var ne=new Error("XMLHttpRequest timeout");ne.code="ETIMEDOUT",F(ne)}},T.timeout)),V.setRequestHeader)for(U in Q)Q.hasOwnProperty(U)&&V.setRequestHeader(U,Q[U]);else if(T.headers&&!l(T.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in T&&(V.responseType=T.responseType),"beforeSend"in T&&typeof T.beforeSend=="function"&&T.beforeSend(V),V.send(Y||null),V}function m(T){try{if(T.responseType==="document")return T.responseXML;var C=T.responseXML&&T.responseXML.documentElement.nodeName==="parsererror";if(T.responseType===""&&!C)return T.responseXML}catch{}return null}function b(){}return Mh.exports}var e3=JR();const y1=sa(e3);var sm={exports:{}},rm,Jv;function t3(){if(Jv)return rm;Jv=1;var i=_1(),e=Object.create||function(){function D(){}return function(R){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return D.prototype=R,new D}}();function t(D,R){this.name="ParsingError",this.code=D.code,this.message=R||D.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(D){function R(Q,J,ae,ce){return(Q|0)*3600+(J|0)*60+(ae|0)+(ce|0)/1e3}var Y=D.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Y?Y[3]?R(Y[1],Y[2],Y[3].replace(":",""),Y[4]):Y[1]>59?R(Y[1],Y[2],0,Y[4]):R(0,Y[1],Y[2],Y[4]):null}function s(){this.values=e(null)}s.prototype={set:function(D,R){!this.get(D)&&R!==""&&(this.values[D]=R)},get:function(D,R,Y){return Y?this.has(D)?this.values[D]:R[Y]:this.has(D)?this.values[D]:R},has:function(D){return D in this.values},alt:function(D,R,Y){for(var Q=0;Q<Y.length;++Q)if(R===Y[Q]){this.set(D,R);break}},integer:function(D,R){/^-?\d+$/.test(R)&&this.set(D,parseInt(R,10))},percent:function(D,R){return R.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(R=parseFloat(R),R>=0&&R<=100)?(this.set(D,R),!0):!1}};function r(D,R,Y,Q){var J=Q?D.split(Q):[D];for(var ae in J)if(typeof J[ae]=="string"){var ce=J[ae].split(Y);if(ce.length===2){var le=ce[0].trim(),ne=ce[1].trim();R(le,ne)}}}function o(D,R,Y){var Q=D;function J(){var le=n(D);if(le===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+Q);return D=D.replace(/^[^\sa-zA-Z-]+/,""),le}function ae(le,ne){var ee=new s;r(le,function(fe,re){switch(fe){case"region":for(var de=Y.length-1;de>=0;de--)if(Y[de].id===re){ee.set(fe,Y[de].region);break}break;case"vertical":ee.alt(fe,re,["rl","lr"]);break;case"line":var Le=re.split(","),$e=Le[0];ee.integer(fe,$e),ee.percent(fe,$e)&&ee.set("snapToLines",!1),ee.alt(fe,$e,["auto"]),Le.length===2&&ee.alt("lineAlign",Le[1],["start","center","end"]);break;case"position":Le=re.split(","),ee.percent(fe,Le[0]),Le.length===2&&ee.alt("positionAlign",Le[1],["start","center","end"]);break;case"size":ee.percent(fe,re);break;case"align":ee.alt(fe,re,["start","center","end","left","right"]);break}},/:/,/\s/),ne.region=ee.get("region",null),ne.vertical=ee.get("vertical","");try{ne.line=ee.get("line","auto")}catch{}ne.lineAlign=ee.get("lineAlign","start"),ne.snapToLines=ee.get("snapToLines",!0),ne.size=ee.get("size",100);try{ne.align=ee.get("align","center")}catch{ne.align=ee.get("align","middle")}try{ne.position=ee.get("position","auto")}catch{ne.position=ee.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ne.align)}ne.positionAlign=ee.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ne.align)}function ce(){D=D.replace(/^\s+/,"")}if(ce(),R.startTime=J(),ce(),D.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+Q);D=D.substr(3),ce(),R.endTime=J(),ce(),ae(D,R)}var l=i.createElement&&i.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},d={v:"title",lang:"lang"},m={rt:"ruby"};function b(D,R){function Y(){if(!R)return null;function $e(Ie){return R=R.substr(Ie.length),Ie}var Fe=R.match(/^([^<]*)(<[^>]*>?)?/);return $e(Fe[1]?Fe[1]:Fe[2])}function Q($e){return l.innerHTML=$e,$e=l.textContent,l.textContent="",$e}function J($e,Fe){return!m[Fe.localName]||m[Fe.localName]===$e.localName}function ae($e,Fe){var Ie=u[$e];if(!Ie)return null;var ze=D.document.createElement(Ie),pe=d[$e];return pe&&Fe&&(ze[pe]=Fe.trim()),ze}for(var ce=D.document.createElement("div"),le=ce,ne,ee=[];(ne=Y())!==null;){if(ne[0]==="<"){if(ne[1]==="/"){ee.length&&ee[ee.length-1]===ne.substr(2).replace(">","")&&(ee.pop(),le=le.parentNode);continue}var fe=n(ne.substr(1,ne.length-2)),re;if(fe){re=D.document.createProcessingInstruction("timestamp",fe),le.appendChild(re);continue}var de=ne.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!de||(re=ae(de[1],de[3]),!re)||!J(le,re))continue;if(de[2]){var Le=de[2].split(".");Le.forEach(function($e){var Fe=/^bg_/.test($e),Ie=Fe?$e.slice(3):$e;if(h.hasOwnProperty(Ie)){var ze=Fe?"background-color":"color",pe=h[Ie];re.style[ze]=pe}}),re.className=Le.join(" ")}ee.push(de[1]),le.appendChild(re),le=re;continue}le.appendChild(D.document.createTextNode(Q(ne)))}return ce}var T=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function C(D){for(var R=0;R<T.length;R++){var Y=T[R];if(D>=Y[0]&&D<=Y[1])return!0}return!1}function x(D){var R=[],Y="",Q;if(!D||!D.childNodes)return"ltr";function J(le,ne){for(var ee=ne.childNodes.length-1;ee>=0;ee--)le.push(ne.childNodes[ee])}function ae(le){if(!le||!le.length)return null;var ne=le.pop(),ee=ne.textContent||ne.innerText;if(ee){var fe=ee.match(/^.*(\n|\r)/);return fe?(le.length=0,fe[0]):ee}if(ne.tagName==="ruby")return ae(le);if(ne.childNodes)return J(le,ne),ae(le)}for(J(R,D);Y=ae(R);)for(var ce=0;ce<Y.length;ce++)if(Q=Y.charCodeAt(ce),C(Q))return"rtl";return"ltr"}function A(D){if(typeof D.line=="number"&&(D.snapToLines||D.line>=0&&D.line<=100))return D.line;if(!D.track||!D.track.textTrackList||!D.track.textTrackList.mediaElement)return-1;for(var R=D.track,Y=R.textTrackList,Q=0,J=0;J<Y.length&&Y[J]!==R;J++)Y[J].mode==="showing"&&Q++;return++Q*-1}function P(){}P.prototype.applyStyles=function(D,R){R=R||this.div;for(var Y in D)D.hasOwnProperty(Y)&&(R.style[Y]=D[Y])},P.prototype.formatStyle=function(D,R){return D===0?0:D+R};function k(D,R,Y){P.call(this),this.cue=R,this.cueDiv=b(D,R.text);var Q={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Q,this.cueDiv),this.div=D.document.createElement("div"),Q={direction:x(this.cueDiv),writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:R.align==="middle"?"center":R.align,font:Y.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Q),this.div.appendChild(this.cueDiv);var J=0;switch(R.positionAlign){case"start":case"line-left":J=R.position;break;case"center":J=R.position-R.size/2;break;case"end":case"line-right":J=R.position-R.size;break}R.vertical===""?this.applyStyles({left:this.formatStyle(J,"%"),width:this.formatStyle(R.size,"%")}):this.applyStyles({top:this.formatStyle(J,"%"),height:this.formatStyle(R.size,"%")}),this.move=function(ae){this.applyStyles({top:this.formatStyle(ae.top,"px"),bottom:this.formatStyle(ae.bottom,"px"),left:this.formatStyle(ae.left,"px"),right:this.formatStyle(ae.right,"px"),height:this.formatStyle(ae.height,"px"),width:this.formatStyle(ae.width,"px")})}}k.prototype=e(P.prototype),k.prototype.constructor=k;function I(D){var R,Y,Q,J;if(D.div){Y=D.div.offsetHeight,Q=D.div.offsetWidth,J=D.div.offsetTop;var ae=(ae=D.div.childNodes)&&(ae=ae[0])&&ae.getClientRects&&ae.getClientRects();D=D.div.getBoundingClientRect(),R=ae?Math.max(ae[0]&&ae[0].height||0,D.height/ae.length):0}this.left=D.left,this.right=D.right,this.top=D.top||J,this.height=D.height||Y,this.bottom=D.bottom||J+(D.height||Y),this.width=D.width||Q,this.lineHeight=R!==void 0?R:D.lineHeight}I.prototype.move=function(D,R){switch(R=R!==void 0?R:this.lineHeight,D){case"+x":this.left+=R,this.right+=R;break;case"-x":this.left-=R,this.right-=R;break;case"+y":this.top+=R,this.bottom+=R;break;case"-y":this.top-=R,this.bottom-=R;break}},I.prototype.overlaps=function(D){return this.left<D.right&&this.right>D.left&&this.top<D.bottom&&this.bottom>D.top},I.prototype.overlapsAny=function(D){for(var R=0;R<D.length;R++)if(this.overlaps(D[R]))return!0;return!1},I.prototype.within=function(D){return this.top>=D.top&&this.bottom<=D.bottom&&this.left>=D.left&&this.right<=D.right},I.prototype.overlapsOppositeAxis=function(D,R){switch(R){case"+x":return this.left<D.left;case"-x":return this.right>D.right;case"+y":return this.top<D.top;case"-y":return this.bottom>D.bottom}},I.prototype.intersectPercentage=function(D){var R=Math.max(0,Math.min(this.right,D.right)-Math.max(this.left,D.left)),Y=Math.max(0,Math.min(this.bottom,D.bottom)-Math.max(this.top,D.top)),Q=R*Y;return Q/(this.height*this.width)},I.prototype.toCSSCompatValues=function(D){return{top:this.top-D.top,bottom:D.bottom-this.bottom,left:this.left-D.left,right:D.right-this.right,height:this.height,width:this.width}},I.getSimpleBoxPosition=function(D){var R=D.div?D.div.offsetHeight:D.tagName?D.offsetHeight:0,Y=D.div?D.div.offsetWidth:D.tagName?D.offsetWidth:0,Q=D.div?D.div.offsetTop:D.tagName?D.offsetTop:0;D=D.div?D.div.getBoundingClientRect():D.tagName?D.getBoundingClientRect():D;var J={left:D.left,right:D.right,top:D.top||Q,height:D.height||R,bottom:D.bottom||Q+(D.height||R),width:D.width||Y};return J};function F(D,R,Y,Q){function J(Ie,ze){for(var pe,Ce=new I(Ie),De=1,Ue=0;Ue<ze.length;Ue++){for(;Ie.overlapsOppositeAxis(Y,ze[Ue])||Ie.within(Y)&&Ie.overlapsAny(Q);)Ie.move(ze[Ue]);if(Ie.within(Y))return Ie;var Qe=Ie.intersectPercentage(Y);De>Qe&&(pe=new I(Ie),De=Qe),Ie=new I(Ce)}return pe||Ce}var ae=new I(R),ce=R.cue,le=A(ce),ne=[];if(ce.snapToLines){var ee;switch(ce.vertical){case"":ne=["+y","-y"],ee="height";break;case"rl":ne=["+x","-x"],ee="width";break;case"lr":ne=["-x","+x"],ee="width";break}var fe=ae.lineHeight,re=fe*Math.round(le),de=Y[ee]+fe,Le=ne[0];Math.abs(re)>de&&(re=re<0?-1:1,re*=Math.ceil(de/fe)*fe),le<0&&(re+=ce.vertical===""?Y.height:Y.width,ne=ne.reverse()),ae.move(Le,re)}else{var $e=ae.lineHeight/Y.height*100;switch(ce.lineAlign){case"center":le-=$e/2;break;case"end":le-=$e;break}switch(ce.vertical){case"":R.applyStyles({top:R.formatStyle(le,"%")});break;case"rl":R.applyStyles({left:R.formatStyle(le,"%")});break;case"lr":R.applyStyles({right:R.formatStyle(le,"%")});break}ne=["+y","-x","+x","-y"],ae=new I(R)}var Fe=J(ae,ne);R.move(Fe.toCSSCompatValues(Y))}function j(){}j.StringDecoder=function(){return{decode:function(D){if(!D)return"";if(typeof D!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(D))}}},j.convertCueToDOMTree=function(D,R){return!D||!R?null:b(D,R)};var V=.05,U="sans-serif",K="1.5%";return j.processCues=function(D,R,Y){if(!D||!R||!Y)return null;for(;Y.firstChild;)Y.removeChild(Y.firstChild);var Q=D.document.createElement("div");Q.style.position="absolute",Q.style.left="0",Q.style.right="0",Q.style.top="0",Q.style.bottom="0",Q.style.margin=K,Y.appendChild(Q);function J(fe){for(var re=0;re<fe.length;re++)if(fe[re].hasBeenReset||!fe[re].displayState)return!0;return!1}if(!J(R)){for(var ae=0;ae<R.length;ae++)Q.appendChild(R[ae].displayState);return}var ce=[],le=I.getSimpleBoxPosition(Q),ne=Math.round(le.height*V*100)/100,ee={font:ne+"px "+U};(function(){for(var fe,re,de=0;de<R.length;de++)re=R[de],fe=new k(D,re,ee),Q.appendChild(fe.div),F(D,fe,le,ce),re.displayState=fe.div,ce.push(I.getSimpleBoxPosition(fe))})()},j.Parser=function(D,R,Y){Y||(Y=R,R={}),R||(R={}),this.window=D,this.vttjs=R,this.state="INITIAL",this.buffer="",this.decoder=Y||new TextDecoder("utf8"),this.regionList=[]},j.Parser.prototype={reportOrThrowError:function(D){if(D instanceof t)this.onparsingerror&&this.onparsingerror(D);else throw D},parse:function(D){var R=this;D&&(R.buffer+=R.decoder.decode(D,{stream:!0}));function Y(){for(var fe=R.buffer,re=0;re<fe.length&&fe[re]!=="\r"&&fe[re]!==`
`;)++re;var de=fe.substr(0,re);return fe[re]==="\r"&&++re,fe[re]===`
`&&++re,R.buffer=fe.substr(re),de}function Q(fe){var re=new s;if(r(fe,function(Le,$e){switch(Le){case"id":re.set(Le,$e);break;case"width":re.percent(Le,$e);break;case"lines":re.integer(Le,$e);break;case"regionanchor":case"viewportanchor":var Fe=$e.split(",");if(Fe.length!==2)break;var Ie=new s;if(Ie.percent("x",Fe[0]),Ie.percent("y",Fe[1]),!Ie.has("x")||!Ie.has("y"))break;re.set(Le+"X",Ie.get("x")),re.set(Le+"Y",Ie.get("y"));break;case"scroll":re.alt(Le,$e,["up"]);break}},/=/,/\s/),re.has("id")){var de=new(R.vttjs.VTTRegion||R.window.VTTRegion);de.width=re.get("width",100),de.lines=re.get("lines",3),de.regionAnchorX=re.get("regionanchorX",0),de.regionAnchorY=re.get("regionanchorY",100),de.viewportAnchorX=re.get("viewportanchorX",0),de.viewportAnchorY=re.get("viewportanchorY",100),de.scroll=re.get("scroll",""),R.onregion&&R.onregion(de),R.regionList.push({id:re.get("id"),region:de})}}function J(fe){var re=new s;r(fe,function(de,Le){switch(de){case"MPEGT":re.integer(de+"S",Le);break;case"LOCA":re.set(de+"L",n(Le));break}},/[^\d]:/,/,/),R.ontimestampmap&&R.ontimestampmap({MPEGTS:re.get("MPEGTS"),LOCAL:re.get("LOCAL")})}function ae(fe){fe.match(/X-TIMESTAMP-MAP/)?r(fe,function(re,de){switch(re){case"X-TIMESTAMP-MAP":J(de);break}},/=/):r(fe,function(re,de){switch(re){case"Region":Q(de);break}},/:/)}try{var ce;if(R.state==="INITIAL"){if(!/\r\n|\n/.test(R.buffer))return this;ce=Y();var le=ce.match(/^WEBVTT([ \t].*)?$/);if(!le||!le[0])throw new t(t.Errors.BadSignature);R.state="HEADER"}for(var ne=!1;R.buffer;){if(!/\r\n|\n/.test(R.buffer))return this;switch(ne?ne=!1:ce=Y(),R.state){case"HEADER":/:/.test(ce)?ae(ce):ce||(R.state="ID");continue;case"NOTE":ce||(R.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ce)){R.state="NOTE";break}if(!ce)continue;R.cue=new(R.vttjs.VTTCue||R.window.VTTCue)(0,0,"");try{R.cue.align="center"}catch{R.cue.align="middle"}if(R.state="CUE",ce.indexOf("-->")===-1){R.cue.id=ce;continue}case"CUE":try{o(ce,R.cue,R.regionList)}catch(fe){R.reportOrThrowError(fe),R.cue=null,R.state="BADCUE";continue}R.state="CUETEXT";continue;case"CUETEXT":var ee=ce.indexOf("-->")!==-1;if(!ce||ee&&(ne=!0)){R.oncue&&R.oncue(R.cue),R.cue=null,R.state="ID";continue}R.cue.text&&(R.cue.text+=`
`),R.cue.text+=ce.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":ce||(R.state="ID");continue}}}catch(fe){R.reportOrThrowError(fe),R.state==="CUETEXT"&&R.cue&&R.oncue&&R.oncue(R.cue),R.cue=null,R.state=R.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var D=this;try{if(D.buffer+=D.decoder.decode(),(D.cue||D.state==="HEADER")&&(D.buffer+=`

`,D.parse()),D.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(R){D.reportOrThrowError(R)}return D.onflush&&D.onflush(),this}},rm=j,rm}var om,eb;function i3(){if(eb)return om;eb=1;var i="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(o){if(typeof o!="string")return!1;var l=e[o.toLowerCase()];return l?o.toLowerCase():!1}function s(o){if(typeof o!="string")return!1;var l=t[o.toLowerCase()];return l?o.toLowerCase():!1}function r(o,l,u){this.hasBeenReset=!1;var h="",d=!1,m=o,b=l,T=u,C=null,x="",A=!0,P="auto",k="start",I="auto",F="auto",j=100,V="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return h},set:function(U){h=""+U}},pauseOnExit:{enumerable:!0,get:function(){return d},set:function(U){d=!!U}},startTime:{enumerable:!0,get:function(){return m},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");m=U,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return b},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");b=U,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return T},set:function(U){T=""+U,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return C},set:function(U){C=U,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return x},set:function(U){var K=n(U);if(K===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");x=K,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return A},set:function(U){A=!!U,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return P},set:function(U){if(typeof U!="number"&&U!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");P=U,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return k},set:function(U){var K=s(U);K?(k=K,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return I},set:function(U){if(U<0||U>100)throw new Error("Position must be between 0 and 100.");I=U,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return F},set:function(U){var K=s(U);K?(F=K,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return j},set:function(U){if(U<0||U>100)throw new Error("Size must be between 0 and 100.");j=U,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return V},set:function(U){var K=s(U);if(!K)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");V=K,this.hasBeenReset=!0}}}),this.displayState=void 0}return r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},om=r,om}var am,tb;function n3(){if(tb)return am;tb=1;var i={"":!0,up:!0};function e(s){if(typeof s!="string")return!1;var r=i[s.toLowerCase()];return r?s.toLowerCase():!1}function t(s){return typeof s=="number"&&s>=0&&s<=100}function n(){var s=100,r=3,o=0,l=100,u=0,h=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(m){if(!t(m))throw new Error("Width must be between 0 and 100.");s=m}},lines:{enumerable:!0,get:function(){return r},set:function(m){if(typeof m!="number")throw new TypeError("Lines must be set to a number.");r=m}},regionAnchorY:{enumerable:!0,get:function(){return l},set:function(m){if(!t(m))throw new Error("RegionAnchorX must be between 0 and 100.");l=m}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(m){if(!t(m))throw new Error("RegionAnchorY must be between 0 and 100.");o=m}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(m){if(!t(m))throw new Error("ViewportAnchorY must be between 0 and 100.");h=m}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(m){if(!t(m))throw new Error("ViewportAnchorX must be between 0 and 100.");u=m}},scroll:{enumerable:!0,get:function(){return d},set:function(m){var b=e(m);b===!1?console.warn("Scroll: an invalid or illegal string was specified."):d=b}}})}return am=n,am}var ib;function s3(){if(ib)return sm.exports;ib=1;var i=ff(),e=sm.exports={WebVTT:t3(),VTTCue:i3(),VTTRegion:n3()};i.vttjs=e,i.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,s=i.VTTCue,r=i.VTTRegion;return e.shim=function(){i.VTTCue=t,i.VTTRegion=n},e.restore=function(){i.VTTCue=s,i.VTTRegion=r},i.VTTCue||e.shim(),sm.exports}var r3=s3();const nb=sa(r3);function ii(){return ii=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ii.apply(null,arguments)}var sb="https://example.com",pf=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=q.location&&q.location.href||"");var n=/^\/\//.test(e),s=!q.location&&!/\/\//i.test(e);e=new q.URL(e,q.location||sb);var r=new URL(t,e);return s?r.href.slice(sb.length):n?r.href.slice(r.protocol.length):r.href},x_=function(){function i(){this.listeners={}}var e=i.prototype;return e.on=function(n,s){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(s)},e.off=function(n,s){if(!this.listeners[n])return!1;var r=this.listeners[n].indexOf(s);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(r,1),r>-1},e.trigger=function(n){var s=this.listeners[n];if(s)if(arguments.length===2)for(var r=s.length,o=0;o<r;++o)s[o].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),u=s.length,h=0;h<u;++h)s[h].apply(this,l)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(s){n.push(s)})},i}(),o3=function(e){return q.atob?q.atob(e):Buffer.from(e,"base64").toString("binary")};function v1(i){for(var e=o3(i),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class a3 extends x_{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const l3="	",lm=function(i){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},u3=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},zi=function(i){const e={};if(!i)return e;const t=i.split(u3());let n=t.length,s;for(;n--;)t[n]!==""&&(s=/([^=]*)=(.*)/.exec(t[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e},rb=i=>{const e=i.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class c3 extends x_{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,o)=>{const l=o(e);return l===e?r:r.concat([l])},[e]).forEach(r=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),t=/^#EXTM3U/.exec(r),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),t){n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),this.trigger("data",n);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),t){n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),t){n=ii(lm(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),t){n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(r),t){if(n={type:"tag",tagType:"map"},t[1]){const o=zi(t[1]);o.URI&&(n.uri=o.URI),o.BYTERANGE&&(n.byterange=lm(o.BYTERANGE))}this.trigger("data",n);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),t){n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=zi(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=rb(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(r),t){n={type:"tag",tagType:"media"},t[1]&&(n.attributes=zi(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-ENDLIST/.exec(r),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),t){n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(r),t){n={type:"tag",tagType:"key"},t[1]&&(n.attributes=zi(t[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(t=/^#EXT-X-START:(.*)$/.exec(r),t){n={type:"tag",tagType:"start"},t[1]&&(n.attributes=zi(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),t){n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"skip"},n.attributes=zi(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(l3)),this.trigger("data",n);return}if(t=/^#EXT-X-PART:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"part"},n.attributes=zi(t[1]),["DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/.test(n.attributes[o]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=lm(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"server-control"},n.attributes=zi(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/.test(n.attributes[o]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"part-inf"},n.attributes=zi(t[1]),["PART-TARGET"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=zi(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(n.attributes.hasOwnProperty(o)){n.attributes[o]=parseInt(n.attributes[o],10);const l=o==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[l]=n.attributes[o],delete n.attributes[o]}}),this.trigger("data",n);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=zi(t[1]),["LAST-MSN","LAST-PART"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseInt(n.attributes[o],10))}),this.trigger("data",n);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(r),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=zi(t[1]),["ID","CLASS"].forEach(function(l){n.attributes.hasOwnProperty(l)&&(n.attributes[l]=String(n.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){n.attributes.hasOwnProperty(l)&&(n.attributes[l]=new Date(n.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){n.attributes.hasOwnProperty(l)&&(n.attributes[l]=parseFloat(n.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){n.attributes.hasOwnProperty(l)&&(n.attributes[l]=/YES/i.test(n.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){n.attributes.hasOwnProperty(l)&&(n.attributes[l]=n.attributes[l].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const l in n.attributes){if(!o.test(l))continue;const u=/[0-9A-Fa-f]{6}/g.test(n.attributes[l]),h=/^\d+(\.\d+)?$/.test(n.attributes[l]);n.attributes[l]=u?n.attributes[l].toString(16):h?parseFloat(n.attributes[l]):String(n.attributes[l])}this.trigger("data",n);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),t){n={type:"tag",tagType:"content-steering"},n.attributes=zi(t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),t){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=zi(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=rb(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(r),t){n={type:"tag",tagType:"define"},n.attributes=zi(t[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:t,dataParser:n,segment:s}){typeof n!="function"&&(n=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:s}),!0})}addTagMapper({expression:e,map:t}){const n=s=>e.test(s)?t(s):s;this.tagMappers.push(n)}}const h3=i=>i.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),kr=function(i){const e={};return Object.keys(i).forEach(function(t){e[h3(t)]=i[t]}),e},um=function(i){const{serverControl:e,targetDuration:t,partTargetDuration:n}=i;if(!e)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",l=t&&t*3,u=n&&n*2;t&&!e.hasOwnProperty(r)&&(e[r]=l,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&e[r]<l&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${l})`}),e[r]=l),n&&!e.hasOwnProperty(o)&&(e[o]=n*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),n&&e[o]<u&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${u}).`}),e[o]=u)};class d3 extends x_{constructor(e={}){super(),this.lineStream=new a3,this.parseStream=new c3,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let s={},r,o,l=!1;const u=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let m=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let b=0,T=0;const C={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&o&&(s.key=o),!s.timeline&&typeof m=="number"&&(s.timeline=m),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(x){let A,P;if(t.manifest.definitions){for(const k in t.manifest.definitions)if(x.uri&&(x.uri=x.uri.replace(`{$${k}}`,t.manifest.definitions[k])),x.attributes)for(const I in x.attributes)typeof x.attributes[I]=="string"&&(x.attributes[I]=x.attributes[I].replace(`{$${k}}`,t.manifest.definitions[k]))}({tag(){({version(){x.version&&(this.manifest.version=x.version)},"allow-cache"(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const k={};"length"in x&&(s.byterange=k,k.length=x.length,"offset"in x||(x.offset=b)),"offset"in x&&(s.byterange=k,k.offset=x.offset),b=k.offset+k.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.title&&(s.title=x.title),x.duration>0&&(s.duration=x.duration),x.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){o=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:v1(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(o.iv=x.attributes.IV)},"media-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,m=x.number},"playlist-type"(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map(){r={},x.uri&&(r.uri=x.uri),x.byterange&&(r.byterange=x.byterange),o&&(r.key=o)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),ii(s.attributes,x.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const k=this.manifest.mediaGroups[x.attributes.TYPE];k[x.attributes["GROUP-ID"]]=k[x.attributes["GROUP-ID"]]||{},A=k[x.attributes["GROUP-ID"]],P={default:/yes/i.test(x.attributes.DEFAULT)},P.default?P.autoselect=!0:P.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(P.language=x.attributes.LANGUAGE),x.attributes.URI&&(P.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(P.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(P.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(P.forced=/yes/i.test(x.attributes.FORCED)),A[x.attributes.NAME]=P},discontinuity(){m+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),s.dateTimeString=x.dateTimeString,s.dateTimeObject=x.dateTimeObject;const{lastProgramDateTime:k}=this;this.lastProgramDateTime=new Date(x.dateTimeString).getTime(),k===null&&this.manifest.segments.reduceRight((I,F)=>(F.programDateTime=I-F.duration*1e3,F.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,um.call(this,this.manifest)},start(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out"(){s.cueOut=x.data},"cue-out-cont"(){s.cueOutCont=x.data},"cue-in"(){s.cueIn=x.data},skip(){this.manifest.skip=kr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const k=this.manifest.segments.length,I=kr(x.attributes);s.parts=s.parts||[],s.parts.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=T),T=I.byterange.offset+I.byterange.length);const F=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${F} for segment #${k}`,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((j,V)=>{j.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${V} lacks required attribute(s): LAST-PART`})})},"server-control"(){const k=this.manifest.serverControl=kr(x.attributes);k.hasOwnProperty("canBlockReload")||(k.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),um.call(this,this.manifest),k.canSkipDateranges&&!k.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const k=this.manifest.segments.length,I=kr(x.attributes),F=I.type&&I.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=F?T:0,F&&(T=I.byterange.offset+I.byterange.length)));const j=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${j} for segment #${k}`,x.attributes,["TYPE","URI"]),!!I.type)for(let V=0;V<s.preloadHints.length-1;V++){const U=s.preloadHints[V];U.type&&U.type===I.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${j} for segment #${k} has the same TYPE ${I.type} as preload hint #${V}`})}},"rendition-report"(){const k=kr(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(k);const I=this.manifest.renditionReports.length-1,F=["LAST-MSN","URI"];l&&F.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${I}`,x.attributes,F)},"part-inf"(){this.manifest.partInf=kr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),um.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(kr(x.attributes));const k=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${k}`,x.attributes,["ID","START-DATE"]);const I=this.manifest.dateRanges[k];I.endDate&&I.startDate&&new Date(I.endDate)<new Date(I.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),I.duration&&I.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),I.plannedDuration&&I.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const F=!!I.endOnNext;if(F&&!I.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),F&&(I.duration||I.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),I.duration&&I.endDate){const V=I.startDate.getTime()+I.duration*1e3;this.manifest.dateRanges[k].endDate=new Date(V)}if(!C[I.id])C[I.id]=I;else{for(const V in C[I.id])if(I[V]&&JSON.stringify(C[I.id][V])!==JSON.stringify(I[V])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const j=this.manifest.dateRanges.findIndex(V=>V.id===I.id);this.manifest.dateRanges[j]=ii(this.manifest.dateRanges[j],I),C[I.id]=ii(C[I.id],I),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=kr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",x.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const k=(I,F)=>{if(I in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${I}`});return}this.manifest.definitions[I]=F};if("QUERYPARAM"in x.attributes){if("NAME"in x.attributes||"IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const I=this.params.get(x.attributes.QUERYPARAM);if(!I){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${x.attributes.QUERYPARAM}`});return}k(x.attributes.QUERYPARAM,decodeURIComponent(I));return}if("NAME"in x.attributes){if("IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in x.attributes)||typeof x.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${x.attributes.NAME}`});return}k(x.attributes.NAME,x.attributes.VALUE);return}if("IMPORT"in x.attributes){if(!this.mainDefinitions[x.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${x.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}k(x.attributes.IMPORT,this.mainDefinitions[x.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:x.attributes,uri:x.uri,timeline:m}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",x.attributes,["BANDWIDTH","URI"])}}[x.tagType]||u).call(t)},uri(){s.uri=x.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),o&&(s.key=o),s.timeline=m,r&&(s.map=r),T=0,this.lastProgramDateTime!==null&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=s.duration*1e3),s={}},comment(){},custom(){x.segment?(s.custom=s.custom||{},s.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const s=[];n.forEach(function(r){t.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Wo={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},f3=["video","audio","text"],ob=["Video","Audio","Text"],b1=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,s){var r=("00"+Number(n).toString(16)).slice(-2),o=("00"+Number(s).toString(16)).slice(-2);return"avc1."+r+"00"+o})},Ds=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(s){s=s.trim();var r;f3.forEach(function(o){var l=Wo[o].exec(s.toLowerCase());if(!(!l||l.length<=1)){r=o;var u=s.substring(0,l[1].length),h=s.replace(u,"");n.push({type:u,details:h,mediaType:o})}}),r||n.push({type:s,details:"",mediaType:"unknown"})}),n},p3=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var s in n){var r=n[s];if(r.default&&r.playlists)return Ds(r.playlists[0].attributes.CODECS)}return null},T1=function(e){return e===void 0&&(e=""),Wo.audio.test(e.trim().toLowerCase())},m3=function(e){return e===void 0&&(e=""),Wo.text.test(e.trim().toLowerCase())},cl=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(r){return b1(r.trim())}),n="video";t.length===1&&T1(t[0])?n="audio":t.length===1&&m3(t[0])&&(n="application");var s="mp4";return t.every(function(r){return Wo.mp4.test(r)})?s="mp4":t.every(function(r){return Wo.webm.test(r)})?s="webm":t.every(function(r){return Wo.ogg.test(r)})&&(s="ogg"),n+"/"+s+';codecs="'+e+'"'}},Gu=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),q.MediaSource&&q.MediaSource.isTypeSupported&&q.MediaSource.isTypeSupported(cl(e))||t&&q.ManagedMediaSource&&q.ManagedMediaSource.isTypeSupported&&q.ManagedMediaSource.isTypeSupported(cl(e))||!1},cm=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<ob.length;n++){var s=ob[n];if(Wo["muxer"+s].test(t))return!0}return!1})},ab="mp4a.40.2",g3="avc1.4d400d",_3=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,y3=/^application\/dash\+xml/i,x1=function(e){return _3.test(e)?"hls":y3.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},v3=function(e){return e.toString(2).length},b3=function(e){return Math.ceil(v3(e)/8)},S1=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},T3=function(e){return S1(e)},Ge=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!T3(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},wi=q.BigInt||Number,ng=[wi("0x1"),wi("0x100"),wi("0x10000"),wi("0x1000000"),wi("0x100000000"),wi("0x10000000000"),wi("0x1000000000000"),wi("0x100000000000000"),wi("0x10000000000000000")];(function(){var i=new Uint16Array([65484]),e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var x3=function(e,t){var n=t===void 0?{}:t,s=n.signed,r=s===void 0?!1:s,o=n.le,l=o===void 0?!1:o;e=Ge(e);var u=l?"reduce":"reduceRight",h=e[u]?e[u]:Array.prototype[u],d=h.call(e,function(b,T,C){var x=l?C:Math.abs(C+1-e.length);return b+wi(T)*ng[x]},wi(0));if(r){var m=ng[e.length]/wi(2)-wi(1);d=wi(d),d>m&&(d-=m,d-=m,d-=wi(2))}return Number(d)},S3=function(e,t){var n={},s=n.le,r=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=wi(e);for(var o=b3(e),l=new Uint8Array(new ArrayBuffer(o)),u=0;u<o;u++){var h=r?u:Math.abs(u+1-l.length);l[h]=Number(e/ng[u]&wi(255)),e<0&&(l[h]=Math.abs(~l[h]),l[h]-=u===0?1:2)}return l},w1=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n},w3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),t.length<=1)return Ge(t[0]);var s=t.reduce(function(l,u,h){return l+(u.byteLength||u.length)},0),r=new Uint8Array(s),o=0;return t.forEach(function(l){l=Ge(l),r.set(l,o),o+=l.byteLength}),r},$t=function(e,t,n){var s=n===void 0?{}:n,r=s.offset,o=r===void 0?0:r,l=s.mask,u=l===void 0?[]:l;e=Ge(e),t=Ge(t);var h=t.every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&h.call(t,function(d,m){var b=u[m]?u[m]&e[o+m]:e[o+m];return d===b})},C3=function(e,t,n){t.forEach(function(s){for(var r in e.mediaGroups[s])for(var o in e.mediaGroups[s][r]){var l=e.mediaGroups[s][r][o];n(l,s,r,o)}})},bu={},tr={},Io={},lb;function mf(){if(lb)return Io;lb=1;function i(r,o,l){if(l===void 0&&(l=Array.prototype),r&&typeof l.find=="function")return l.find.call(r,o);for(var u=0;u<r.length;u++)if(Object.prototype.hasOwnProperty.call(r,u)){var h=r[u];if(o.call(void 0,h,u,r))return h}}function e(r,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(r):r}function t(r,o){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l]);return r}var n=e({HTML:"text/html",isHTML:function(r){return r===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Io.assign=t,Io.find=i,Io.freeze=e,Io.MIME_TYPE=n,Io.NAMESPACE=s,Io}var ub;function C1(){if(ub)return tr;ub=1;var i=mf(),e=i.find,t=i.NAMESPACE;function n(O){return O!==""}function s(O){return O?O.split(/[\t\n\f\r ]+/).filter(n):[]}function r(O,N){return O.hasOwnProperty(N)||(O[N]=!0),O}function o(O){if(!O)return[];var N=s(O);return Object.keys(N.reduce(r,{}))}function l(O){return function(N){return O&&O.indexOf(N)!==-1}}function u(O,N){for(var Z in O)Object.prototype.hasOwnProperty.call(O,Z)&&(N[Z]=O[Z])}function h(O,N){var Z=O.prototype;if(!(Z instanceof N)){let ke=function(){};var he=ke;ke.prototype=N.prototype,ke=new ke,u(Z,ke),O.prototype=Z=ke}Z.constructor!=O&&(typeof O!="function"&&console.error("unknown Class:"+O),Z.constructor=O)}var d={},m=d.ELEMENT_NODE=1,b=d.ATTRIBUTE_NODE=2,T=d.TEXT_NODE=3,C=d.CDATA_SECTION_NODE=4,x=d.ENTITY_REFERENCE_NODE=5,A=d.ENTITY_NODE=6,P=d.PROCESSING_INSTRUCTION_NODE=7,k=d.COMMENT_NODE=8,I=d.DOCUMENT_NODE=9,F=d.DOCUMENT_TYPE_NODE=10,j=d.DOCUMENT_FRAGMENT_NODE=11,V=d.NOTATION_NODE=12,U={},K={};U.INDEX_SIZE_ERR=(K[1]="Index size error",1),U.DOMSTRING_SIZE_ERR=(K[2]="DOMString size error",2);var D=U.HIERARCHY_REQUEST_ERR=(K[3]="Hierarchy request error",3);U.WRONG_DOCUMENT_ERR=(K[4]="Wrong document",4),U.INVALID_CHARACTER_ERR=(K[5]="Invalid character",5),U.NO_DATA_ALLOWED_ERR=(K[6]="No data allowed",6),U.NO_MODIFICATION_ALLOWED_ERR=(K[7]="No modification allowed",7);var R=U.NOT_FOUND_ERR=(K[8]="Not found",8);U.NOT_SUPPORTED_ERR=(K[9]="Not supported",9);var Y=U.INUSE_ATTRIBUTE_ERR=(K[10]="Attribute in use",10);U.INVALID_STATE_ERR=(K[11]="Invalid state",11),U.SYNTAX_ERR=(K[12]="Syntax error",12),U.INVALID_MODIFICATION_ERR=(K[13]="Invalid modification",13),U.NAMESPACE_ERR=(K[14]="Invalid namespace",14),U.INVALID_ACCESS_ERR=(K[15]="Invalid access",15);function Q(O,N){if(N instanceof Error)var Z=N;else Z=this,Error.call(this,K[O]),this.message=K[O],Error.captureStackTrace&&Error.captureStackTrace(this,Q);return Z.code=O,N&&(this.message=this.message+": "+N),Z}Q.prototype=Error.prototype,u(U,Q);function J(){}J.prototype={length:0,item:function(O){return O>=0&&O<this.length?this[O]:null},toString:function(O,N){for(var Z=[],he=0;he<this.length;he++)Ti(this[he],Z,O,N);return Z.join("")},filter:function(O){return Array.prototype.filter.call(this,O)},indexOf:function(O){return Array.prototype.indexOf.call(this,O)}};function ae(O,N){this._node=O,this._refresh=N,ce(this)}function ce(O){var N=O._node._inc||O._node.ownerDocument._inc;if(O._inc!==N){var Z=O._refresh(O._node);if(no(O,"length",Z.length),!O.$$length||Z.length<O.$$length)for(var he=Z.length;he in O;he++)Object.prototype.hasOwnProperty.call(O,he)&&delete O[he];u(Z,O),O._inc=N}}ae.prototype.item=function(O){return ce(this),this[O]||null},h(ae,J);function le(){}function ne(O,N){for(var Z=O.length;Z--;)if(O[Z]===N)return Z}function ee(O,N,Z,he){if(he?N[ne(N,he)]=Z:N[N.length++]=Z,O){Z.ownerElement=O;var ke=O.ownerDocument;ke&&(he&&ze(ke,O,he),Ie(ke,O,Z))}}function fe(O,N,Z){var he=ne(N,Z);if(he>=0){for(var ke=N.length-1;he<ke;)N[he]=N[++he];if(N.length=ke,O){var Ke=O.ownerDocument;Ke&&(ze(Ke,O,Z),Z.ownerElement=null)}}else throw new Q(R,new Error(O.tagName+"@"+Z))}le.prototype={length:0,item:J.prototype.item,getNamedItem:function(O){for(var N=this.length;N--;){var Z=this[N];if(Z.nodeName==O)return Z}},setNamedItem:function(O){var N=O.ownerElement;if(N&&N!=this._ownerElement)throw new Q(Y);var Z=this.getNamedItem(O.nodeName);return ee(this._ownerElement,this,O,Z),Z},setNamedItemNS:function(O){var N=O.ownerElement,Z;if(N&&N!=this._ownerElement)throw new Q(Y);return Z=this.getNamedItemNS(O.namespaceURI,O.localName),ee(this._ownerElement,this,O,Z),Z},removeNamedItem:function(O){var N=this.getNamedItem(O);return fe(this._ownerElement,this,N),N},removeNamedItemNS:function(O,N){var Z=this.getNamedItemNS(O,N);return fe(this._ownerElement,this,Z),Z},getNamedItemNS:function(O,N){for(var Z=this.length;Z--;){var he=this[Z];if(he.localName==N&&he.namespaceURI==O)return he}return null}};function re(){}re.prototype={hasFeature:function(O,N){return!0},createDocument:function(O,N,Z){var he=new Fe;if(he.implementation=this,he.childNodes=new J,he.doctype=Z||null,Z&&he.appendChild(Z),N){var ke=he.createElementNS(O,N);he.appendChild(ke)}return he},createDocumentType:function(O,N,Z){var he=new lt;return he.name=O,he.nodeName=O,he.publicId=N||"",he.systemId=Z||"",he}};function de(){}de.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(O,N){return Ee(this,O,N)},replaceChild:function(O,N){Ee(this,O,N,Pe),N&&this.removeChild(N)},removeChild:function(O){return Ce(this,O)},appendChild:function(O){return this.insertBefore(O,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(O){return io(this.ownerDocument||this,this,O)},normalize:function(){for(var O=this.firstChild;O;){var N=O.nextSibling;N&&N.nodeType==T&&O.nodeType==T?(this.removeChild(N),O.appendData(N.data)):(O.normalize(),O=N)}},isSupported:function(O,N){return this.ownerDocument.implementation.hasFeature(O,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(O){for(var N=this;N;){var Z=N._nsMap;if(Z){for(var he in Z)if(Object.prototype.hasOwnProperty.call(Z,he)&&Z[he]===O)return he}N=N.nodeType==b?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(O){for(var N=this;N;){var Z=N._nsMap;if(Z&&Object.prototype.hasOwnProperty.call(Z,O))return Z[O];N=N.nodeType==b?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(O){var N=this.lookupPrefix(O);return N==null}};function Le(O){return O=="<"&&"&lt;"||O==">"&&"&gt;"||O=="&"&&"&amp;"||O=='"'&&"&quot;"||"&#"+O.charCodeAt()+";"}u(d,de),u(d,de.prototype);function $e(O,N){if(N(O))return!0;if(O=O.firstChild)do if($e(O,N))return!0;while(O=O.nextSibling)}function Fe(){this.ownerDocument=this}function Ie(O,N,Z){O&&O._inc++;var he=Z.namespaceURI;he===t.XMLNS&&(N._nsMap[Z.prefix?Z.localName:""]=Z.value)}function ze(O,N,Z,he){O&&O._inc++;var ke=Z.namespaceURI;ke===t.XMLNS&&delete N._nsMap[Z.prefix?Z.localName:""]}function pe(O,N,Z){if(O&&O._inc){O._inc++;var he=N.childNodes;if(Z)he[he.length++]=Z;else{for(var ke=N.firstChild,Ke=0;ke;)he[Ke++]=ke,ke=ke.nextSibling;he.length=Ke,delete he[he.length]}}}function Ce(O,N){var Z=N.previousSibling,he=N.nextSibling;return Z?Z.nextSibling=he:O.firstChild=he,he?he.previousSibling=Z:O.lastChild=Z,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,pe(O.ownerDocument,O),N}function De(O){return O&&(O.nodeType===de.DOCUMENT_NODE||O.nodeType===de.DOCUMENT_FRAGMENT_NODE||O.nodeType===de.ELEMENT_NODE)}function Ue(O){return O&&($(O)||G(O)||Qe(O)||O.nodeType===de.DOCUMENT_FRAGMENT_NODE||O.nodeType===de.COMMENT_NODE||O.nodeType===de.PROCESSING_INSTRUCTION_NODE)}function Qe(O){return O&&O.nodeType===de.DOCUMENT_TYPE_NODE}function $(O){return O&&O.nodeType===de.ELEMENT_NODE}function G(O){return O&&O.nodeType===de.TEXT_NODE}function ie(O,N){var Z=O.childNodes||[];if(e(Z,$)||Qe(N))return!1;var he=e(Z,Qe);return!(N&&he&&Z.indexOf(he)>Z.indexOf(N))}function be(O,N){var Z=O.childNodes||[];function he(Ke){return $(Ke)&&Ke!==N}if(e(Z,he))return!1;var ke=e(Z,Qe);return!(N&&ke&&Z.indexOf(ke)>Z.indexOf(N))}function ye(O,N,Z){if(!De(O))throw new Q(D,"Unexpected parent node type "+O.nodeType);if(Z&&Z.parentNode!==O)throw new Q(R,"child not in parent");if(!Ue(N)||Qe(N)&&O.nodeType!==de.DOCUMENT_NODE)throw new Q(D,"Unexpected node type "+N.nodeType+" for parent node type "+O.nodeType)}function xe(O,N,Z){var he=O.childNodes||[],ke=N.childNodes||[];if(N.nodeType===de.DOCUMENT_FRAGMENT_NODE){var Ke=ke.filter($);if(Ke.length>1||e(ke,G))throw new Q(D,"More than one element or text in fragment");if(Ke.length===1&&!ie(O,Z))throw new Q(D,"Element in fragment can not be inserted before doctype")}if($(N)&&!ie(O,Z))throw new Q(D,"Only one element can be added and only after doctype");if(Qe(N)){if(e(he,Qe))throw new Q(D,"Only one doctype is allowed");var St=e(he,$);if(Z&&he.indexOf(St)<he.indexOf(Z))throw new Q(D,"Doctype can only be inserted before an element");if(!Z&&St)throw new Q(D,"Doctype can not be appended since element is present")}}function Pe(O,N,Z){var he=O.childNodes||[],ke=N.childNodes||[];if(N.nodeType===de.DOCUMENT_FRAGMENT_NODE){var Ke=ke.filter($);if(Ke.length>1||e(ke,G))throw new Q(D,"More than one element or text in fragment");if(Ke.length===1&&!be(O,Z))throw new Q(D,"Element in fragment can not be inserted before doctype")}if($(N)&&!be(O,Z))throw new Q(D,"Only one element can be added and only after doctype");if(Qe(N)){let gn=function(Fi){return Qe(Fi)&&Fi!==Z};var si=gn;if(e(he,gn))throw new Q(D,"Only one doctype is allowed");var St=e(he,$);if(Z&&he.indexOf(St)<he.indexOf(Z))throw new Q(D,"Doctype can only be inserted before an element")}}function Ee(O,N,Z,he){ye(O,N,Z),O.nodeType===de.DOCUMENT_NODE&&(he||xe)(O,N,Z);var ke=N.parentNode;if(ke&&ke.removeChild(N),N.nodeType===j){var Ke=N.firstChild;if(Ke==null)return N;var St=N.lastChild}else Ke=St=N;var si=Z?Z.previousSibling:O.lastChild;Ke.previousSibling=si,St.nextSibling=Z,si?si.nextSibling=Ke:O.firstChild=Ke,Z==null?O.lastChild=St:Z.previousSibling=St;do Ke.parentNode=O;while(Ke!==St&&(Ke=Ke.nextSibling));return pe(O.ownerDocument||O,O),N.nodeType==j&&(N.firstChild=N.lastChild=null),N}function Se(O,N){return N.parentNode&&N.parentNode.removeChild(N),N.parentNode=O,N.previousSibling=O.lastChild,N.nextSibling=null,N.previousSibling?N.previousSibling.nextSibling=N:O.firstChild=N,O.lastChild=N,pe(O.ownerDocument,O,N),N}Fe.prototype={nodeName:"#document",nodeType:I,doctype:null,documentElement:null,_inc:1,insertBefore:function(O,N){if(O.nodeType==j){for(var Z=O.firstChild;Z;){var he=Z.nextSibling;this.insertBefore(Z,N),Z=he}return O}return Ee(this,O,N),O.ownerDocument=this,this.documentElement===null&&O.nodeType===m&&(this.documentElement=O),O},removeChild:function(O){return this.documentElement==O&&(this.documentElement=null),Ce(this,O)},replaceChild:function(O,N){Ee(this,O,N,Pe),O.ownerDocument=this,N&&this.removeChild(N),$(O)&&(this.documentElement=O)},importNode:function(O,N){return aa(this,O,N)},getElementById:function(O){var N=null;return $e(this.documentElement,function(Z){if(Z.nodeType==m&&Z.getAttribute("id")==O)return N=Z,!0}),N},getElementsByClassName:function(O){var N=o(O);return new ae(this,function(Z){var he=[];return N.length>0&&$e(Z.documentElement,function(ke){if(ke!==Z&&ke.nodeType===m){var Ke=ke.getAttribute("class");if(Ke){var St=O===Ke;if(!St){var si=o(Ke);St=N.every(l(si))}St&&he.push(ke)}}}),he})},createElement:function(O){var N=new ve;N.ownerDocument=this,N.nodeName=O,N.tagName=O,N.localName=O,N.childNodes=new J;var Z=N.attributes=new le;return Z._ownerElement=N,N},createDocumentFragment:function(){var O=new Jt;return O.ownerDocument=this,O.childNodes=new J,O},createTextNode:function(O){var N=new Ve;return N.ownerDocument=this,N.appendData(O),N},createComment:function(O){var N=new qe;return N.ownerDocument=this,N.appendData(O),N},createCDATASection:function(O){var N=new Je;return N.ownerDocument=this,N.appendData(O),N},createProcessingInstruction:function(O,N){var Z=new rt;return Z.ownerDocument=this,Z.tagName=Z.nodeName=Z.target=O,Z.nodeValue=Z.data=N,Z},createAttribute:function(O){var N=new je;return N.ownerDocument=this,N.name=O,N.nodeName=O,N.localName=O,N.specified=!0,N},createEntityReference:function(O){var N=new Ht;return N.ownerDocument=this,N.nodeName=O,N},createElementNS:function(O,N){var Z=new ve,he=N.split(":"),ke=Z.attributes=new le;return Z.childNodes=new J,Z.ownerDocument=this,Z.nodeName=N,Z.tagName=N,Z.namespaceURI=O,he.length==2?(Z.prefix=he[0],Z.localName=he[1]):Z.localName=N,ke._ownerElement=Z,Z},createAttributeNS:function(O,N){var Z=new je,he=N.split(":");return Z.ownerDocument=this,Z.nodeName=N,Z.name=N,Z.namespaceURI=O,Z.specified=!0,he.length==2?(Z.prefix=he[0],Z.localName=he[1]):Z.localName=N,Z}},h(Fe,de);function ve(){this._nsMap={}}ve.prototype={nodeType:m,hasAttribute:function(O){return this.getAttributeNode(O)!=null},getAttribute:function(O){var N=this.getAttributeNode(O);return N&&N.value||""},getAttributeNode:function(O){return this.attributes.getNamedItem(O)},setAttribute:function(O,N){var Z=this.ownerDocument.createAttribute(O);Z.value=Z.nodeValue=""+N,this.setAttributeNode(Z)},removeAttribute:function(O){var N=this.getAttributeNode(O);N&&this.removeAttributeNode(N)},appendChild:function(O){return O.nodeType===j?this.insertBefore(O,null):Se(this,O)},setAttributeNode:function(O){return this.attributes.setNamedItem(O)},setAttributeNodeNS:function(O){return this.attributes.setNamedItemNS(O)},removeAttributeNode:function(O){return this.attributes.removeNamedItem(O.nodeName)},removeAttributeNS:function(O,N){var Z=this.getAttributeNodeNS(O,N);Z&&this.removeAttributeNode(Z)},hasAttributeNS:function(O,N){return this.getAttributeNodeNS(O,N)!=null},getAttributeNS:function(O,N){var Z=this.getAttributeNodeNS(O,N);return Z&&Z.value||""},setAttributeNS:function(O,N,Z){var he=this.ownerDocument.createAttributeNS(O,N);he.value=he.nodeValue=""+Z,this.setAttributeNode(he)},getAttributeNodeNS:function(O,N){return this.attributes.getNamedItemNS(O,N)},getElementsByTagName:function(O){return new ae(this,function(N){var Z=[];return $e(N,function(he){he!==N&&he.nodeType==m&&(O==="*"||he.tagName==O)&&Z.push(he)}),Z})},getElementsByTagNameNS:function(O,N){return new ae(this,function(Z){var he=[];return $e(Z,function(ke){ke!==Z&&ke.nodeType===m&&(O==="*"||ke.namespaceURI===O)&&(N==="*"||ke.localName==N)&&he.push(ke)}),he})}},Fe.prototype.getElementsByTagName=ve.prototype.getElementsByTagName,Fe.prototype.getElementsByTagNameNS=ve.prototype.getElementsByTagNameNS,h(ve,de);function je(){}je.prototype.nodeType=b,h(je,de);function Oe(){}Oe.prototype={data:"",substringData:function(O,N){return this.data.substring(O,O+N)},appendData:function(O){O=this.data+O,this.nodeValue=this.data=O,this.length=O.length},insertData:function(O,N){this.replaceData(O,0,N)},appendChild:function(O){throw new Error(K[D])},deleteData:function(O,N){this.replaceData(O,N,"")},replaceData:function(O,N,Z){var he=this.data.substring(0,O),ke=this.data.substring(O+N);Z=he+Z+ke,this.nodeValue=this.data=Z,this.length=Z.length}},h(Oe,de);function Ve(){}Ve.prototype={nodeName:"#text",nodeType:T,splitText:function(O){var N=this.data,Z=N.substring(O);N=N.substring(0,O),this.data=this.nodeValue=N,this.length=N.length;var he=this.ownerDocument.createTextNode(Z);return this.parentNode&&this.parentNode.insertBefore(he,this.nextSibling),he}},h(Ve,Oe);function qe(){}qe.prototype={nodeName:"#comment",nodeType:k},h(qe,Oe);function Je(){}Je.prototype={nodeName:"#cdata-section",nodeType:C},h(Je,Oe);function lt(){}lt.prototype.nodeType=F,h(lt,de);function ut(){}ut.prototype.nodeType=V,h(ut,de);function Qt(){}Qt.prototype.nodeType=A,h(Qt,de);function Ht(){}Ht.prototype.nodeType=x,h(Ht,de);function Jt(){}Jt.prototype.nodeName="#document-fragment",Jt.prototype.nodeType=j,h(Jt,de);function rt(){}rt.prototype.nodeType=P,h(rt,de);function mn(){}mn.prototype.serializeToString=function(O,N,Z){return Yi.call(O,N,Z)},de.prototype.toString=Yi;function Yi(O,N){var Z=[],he=this.nodeType==9&&this.documentElement||this,ke=he.prefix,Ke=he.namespaceURI;if(Ke&&ke==null){var ke=he.lookupPrefix(Ke);if(ke==null)var St=[{namespace:Ke,prefix:null}]}return Ti(this,Z,O,N,St),Z.join("")}function ei(O,N,Z){var he=O.prefix||"",ke=O.namespaceURI;if(!ke||he==="xml"&&ke===t.XML||ke===t.XMLNS)return!1;for(var Ke=Z.length;Ke--;){var St=Z[Ke];if(St.prefix===he)return St.namespace!==ke}return!0}function mi(O,N,Z){O.push(" ",N,'="',Z.replace(/[<>&"\t\n\r]/g,Le),'"')}function Ti(O,N,Z,he,ke){if(ke||(ke=[]),he)if(O=he(O),O){if(typeof O=="string"){N.push(O);return}}else return;switch(O.nodeType){case m:var Ke=O.attributes,St=Ke.length,wt=O.firstChild,si=O.tagName;Z=t.isHTML(O.namespaceURI)||Z;var gn=si;if(!Z&&!O.prefix&&O.namespaceURI){for(var Fi,Qi=0;Qi<Ke.length;Qi++)if(Ke.item(Qi).name==="xmlns"){Fi=Ke.item(Qi).value;break}if(!Fi)for(var _n=ke.length-1;_n>=0;_n--){var qt=ke[_n];if(qt.prefix===""&&qt.namespace===O.namespaceURI){Fi=qt.namespace;break}}if(Fi!==O.namespaceURI)for(var _n=ke.length-1;_n>=0;_n--){var qt=ke[_n];if(qt.namespace===O.namespaceURI){qt.prefix&&(gn=qt.prefix+":"+si);break}}}N.push("<",gn);for(var Re=0;Re<St;Re++){var Ui=Ke.item(Re);Ui.prefix=="xmlns"?ke.push({prefix:Ui.localName,namespace:Ui.value}):Ui.nodeName=="xmlns"&&ke.push({prefix:"",namespace:Ui.value})}for(var Re=0;Re<St;Re++){var Ui=Ke.item(Re);if(ei(Ui,Z,ke)){var In=Ui.prefix||"",yn=Ui.namespaceURI;mi(N,In?"xmlns:"+In:"xmlns",yn),ke.push({prefix:In,namespace:yn})}Ti(Ui,N,Z,he,ke)}if(si===gn&&ei(O,Z,ke)){var In=O.prefix||"",yn=O.namespaceURI;mi(N,In?"xmlns:"+In:"xmlns",yn),ke.push({prefix:In,namespace:yn})}if(wt||Z&&!/^(?:meta|link|img|br|hr|input)$/i.test(si)){if(N.push(">"),Z&&/^script$/i.test(si))for(;wt;)wt.data?N.push(wt.data):Ti(wt,N,Z,he,ke.slice()),wt=wt.nextSibling;else for(;wt;)Ti(wt,N,Z,he,ke.slice()),wt=wt.nextSibling;N.push("</",gn,">")}else N.push("/>");return;case I:case j:for(var wt=O.firstChild;wt;)Ti(wt,N,Z,he,ke.slice()),wt=wt.nextSibling;return;case b:return mi(N,O.name,O.value);case T:return N.push(O.data.replace(/[<&>]/g,Le));case C:return N.push("<![CDATA[",O.data,"]]>");case k:return N.push("<!--",O.data,"-->");case F:var Zn=O.publicId,dt=O.systemId;if(N.push("<!DOCTYPE ",O.name),Zn)N.push(" PUBLIC ",Zn),dt&&dt!="."&&N.push(" ",dt),N.push(">");else if(dt&&dt!=".")N.push(" SYSTEM ",dt,">");else{var Yn=O.internalSubset;Yn&&N.push(" [",Yn,"]"),N.push(">")}return;case P:return N.push("<?",O.target," ",O.data,"?>");case x:return N.push("&",O.nodeName,";");default:N.push("??",O.nodeName)}}function aa(O,N,Z){var he;switch(N.nodeType){case m:he=N.cloneNode(!1),he.ownerDocument=O;case j:break;case b:Z=!0;break}if(he||(he=N.cloneNode(!1)),he.ownerDocument=O,he.parentNode=null,Z)for(var ke=N.firstChild;ke;)he.appendChild(aa(O,ke,Z)),ke=ke.nextSibling;return he}function io(O,N,Z){var he=new N.constructor;for(var ke in N)if(Object.prototype.hasOwnProperty.call(N,ke)){var Ke=N[ke];typeof Ke!="object"&&Ke!=he[ke]&&(he[ke]=Ke)}switch(N.childNodes&&(he.childNodes=new J),he.ownerDocument=O,he.nodeType){case m:var St=N.attributes,si=he.attributes=new le,gn=St.length;si._ownerElement=he;for(var Fi=0;Fi<gn;Fi++)he.setAttributeNode(io(O,St.item(Fi),!0));break;case b:Z=!0}if(Z)for(var Qi=N.firstChild;Qi;)he.appendChild(io(O,Qi,Z)),Qi=Qi.nextSibling;return he}function no(O,N,Z){O[N]=Z}try{if(Object.defineProperty){let O=function(N){switch(N.nodeType){case m:case j:var Z=[];for(N=N.firstChild;N;)N.nodeType!==7&&N.nodeType!==8&&Z.push(O(N)),N=N.nextSibling;return Z.join("");default:return N.nodeValue}};var Rl=O;Object.defineProperty(ae.prototype,"length",{get:function(){return ce(this),this.$$length}}),Object.defineProperty(de.prototype,"textContent",{get:function(){return O(this)},set:function(N){switch(this.nodeType){case m:case j:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),no=function(N,Z,he){N["$$"+Z]=he}}}catch{}return tr.DocumentType=lt,tr.DOMException=Q,tr.DOMImplementation=re,tr.Element=ve,tr.Node=de,tr.NodeList=J,tr.XMLSerializer=mn,tr}var Tu={},hm={},cb;function E3(){return cb||(cb=1,function(i){var e=mf().freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES}(hm)),hm}var Rh={},hb;function A3(){if(hb)return Rh;hb=1;var i=mf().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),s=0,r=1,o=2,l=3,u=4,h=5,d=6,m=7;function b(D,R){this.message=D,this.locator=R,Error.captureStackTrace&&Error.captureStackTrace(this,b)}b.prototype=new Error,b.prototype.name=b.name;function T(){}T.prototype={parse:function(D,R,Y){var Q=this.domBuilder;Q.startDocument(),F(R,R={}),C(D,R,Y,Q,this.errorHandler),Q.endDocument()}};function C(D,R,Y,Q,J){function ae(ve){if(ve>65535){ve-=65536;var je=55296+(ve>>10),Oe=56320+(ve&1023);return String.fromCharCode(je,Oe)}else return String.fromCharCode(ve)}function ce(ve){var je=ve.slice(1,-1);return Object.hasOwnProperty.call(Y,je)?Y[je]:je.charAt(0)==="#"?ae(parseInt(je.substr(1).replace("x","0x"))):(J.error("entity not found:"+ve),ve)}function le(ve){if(ve>Fe){var je=D.substring(Fe,ve).replace(/&#?\w+;/g,ce);de&&ne(Fe),Q.characters(je,0,ve-Fe),Fe=ve}}function ne(ve,je){for(;ve>=fe&&(je=re.exec(D));)ee=je.index,fe=ee+je[0].length,de.lineNumber++;de.columnNumber=ve-ee+1}for(var ee=0,fe=0,re=/.*(?:\r\n?|\n)|.*$/g,de=Q.locator,Le=[{currentNSMap:R}],$e={},Fe=0;;){try{var Ie=D.indexOf("<",Fe);if(Ie<0){if(!D.substr(Fe).match(/^\s*$/)){var ze=Q.doc,pe=ze.createTextNode(D.substr(Fe));ze.appendChild(pe),Q.currentElement=pe}return}switch(Ie>Fe&&le(Ie),D.charAt(Ie+1)){case"/":var ye=D.indexOf(">",Ie+3),Ce=D.substring(Ie+2,ye).replace(/[ \t\n\r]+$/g,""),De=Le.pop();ye<0?(Ce=D.substring(Ie+2).replace(/[\s<].*/,""),J.error("end tag name: "+Ce+" is not complete:"+De.tagName),ye=Ie+1+Ce.length):Ce.match(/\s</)&&(Ce=Ce.replace(/[\s<].*/,""),J.error("end tag name: "+Ce+" maybe not complete"),ye=Ie+1+Ce.length);var Ue=De.localNSMap,Qe=De.tagName==Ce,$=Qe||De.tagName&&De.tagName.toLowerCase()==Ce.toLowerCase();if($){if(Q.endElement(De.uri,De.localName,Ce),Ue)for(var G in Ue)Object.prototype.hasOwnProperty.call(Ue,G)&&Q.endPrefixMapping(G);Qe||J.fatalError("end tag name: "+Ce+" is not match the current start tagName:"+De.tagName)}else Le.push(De);ye++;break;case"?":de&&ne(Ie),ye=V(D,Ie,Q);break;case"!":de&&ne(Ie),ye=j(D,Ie,Q,J);break;default:de&&ne(Ie);var ie=new U,be=Le[Le.length-1].currentNSMap,ye=A(D,Ie,ie,be,ce,J),xe=ie.length;if(!ie.closed&&I(D,ye,ie.tagName,$e)&&(ie.closed=!0,Y.nbsp||J.warning("unclosed xml attribute")),de&&xe){for(var Pe=x(de,{}),Ee=0;Ee<xe;Ee++){var Se=ie[Ee];ne(Se.offset),Se.locator=x(de,{})}Q.locator=Pe,P(ie,Q,be)&&Le.push(ie),Q.locator=de}else P(ie,Q,be)&&Le.push(ie);i.isHTML(ie.uri)&&!ie.closed?ye=k(D,ye,ie.tagName,ce,Q):ye++}}catch(ve){if(ve instanceof b)throw ve;J.error("element parse error: "+ve),ye=-1}ye>Fe?Fe=ye:le(Math.max(Ie,Fe)+1)}}function x(D,R){return R.lineNumber=D.lineNumber,R.columnNumber=D.columnNumber,R}function A(D,R,Y,Q,J,ae){function ce(de,Le,$e){Y.attributeNames.hasOwnProperty(de)&&ae.fatalError("Attribute "+de+" redefined"),Y.addValue(de,Le.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,J),$e)}for(var le,ne,ee=++R,fe=s;;){var re=D.charAt(ee);switch(re){case"=":if(fe===r)le=D.slice(R,ee),fe=l;else if(fe===o)fe=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(fe===l||fe===r)if(fe===r&&(ae.warning('attribute value must after "="'),le=D.slice(R,ee)),R=ee+1,ee=D.indexOf(re,R),ee>0)ne=D.slice(R,ee),ce(le,ne,R-1),fe=h;else throw new Error("attribute value no end '"+re+"' match");else if(fe==u)ne=D.slice(R,ee),ce(le,ne,R),ae.warning('attribute "'+le+'" missed start quot('+re+")!!"),R=ee+1,fe=h;else throw new Error('attribute value must after "="');break;case"/":switch(fe){case s:Y.setTagName(D.slice(R,ee));case h:case d:case m:fe=m,Y.closed=!0;case u:case r:break;case o:Y.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ae.error("unexpected end of input"),fe==s&&Y.setTagName(D.slice(R,ee)),ee;case">":switch(fe){case s:Y.setTagName(D.slice(R,ee));case h:case d:case m:break;case u:case r:ne=D.slice(R,ee),ne.slice(-1)==="/"&&(Y.closed=!0,ne=ne.slice(0,-1));case o:fe===o&&(ne=le),fe==u?(ae.warning('attribute "'+ne+'" missed quot(")!'),ce(le,ne,R)):((!i.isHTML(Q[""])||!ne.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+ne+'" missed value!! "'+ne+'" instead!!'),ce(ne,ne,R));break;case l:throw new Error("attribute value missed!!")}return ee;case"":re=" ";default:if(re<=" ")switch(fe){case s:Y.setTagName(D.slice(R,ee)),fe=d;break;case r:le=D.slice(R,ee),fe=o;break;case u:var ne=D.slice(R,ee);ae.warning('attribute "'+ne+'" missed quot(")!!'),ce(le,ne,R);case h:fe=d;break}else switch(fe){case o:Y.tagName,(!i.isHTML(Q[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+le+'" missed value!! "'+le+'" instead2!!'),ce(le,le,R),R=ee,fe=r;break;case h:ae.warning('attribute space is required"'+le+'"!!');case d:fe=r,R=ee;break;case l:fe=u,R=ee;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function P(D,R,Y){for(var Q=D.tagName,J=null,re=D.length;re--;){var ae=D[re],ce=ae.qName,le=ae.value,de=ce.indexOf(":");if(de>0)var ne=ae.prefix=ce.slice(0,de),ee=ce.slice(de+1),fe=ne==="xmlns"&&ee;else ee=ce,ne=null,fe=ce==="xmlns"&&"";ae.localName=ee,fe!==!1&&(J==null&&(J={},F(Y,Y={})),Y[fe]=J[fe]=le,ae.uri=i.XMLNS,R.startPrefixMapping(fe,le))}for(var re=D.length;re--;){ae=D[re];var ne=ae.prefix;ne&&(ne==="xml"&&(ae.uri=i.XML),ne!=="xmlns"&&(ae.uri=Y[ne||""]))}var de=Q.indexOf(":");de>0?(ne=D.prefix=Q.slice(0,de),ee=D.localName=Q.slice(de+1)):(ne=null,ee=D.localName=Q);var Le=D.uri=Y[ne||""];if(R.startElement(Le,ee,Q,D),D.closed){if(R.endElement(Le,ee,Q),J)for(ne in J)Object.prototype.hasOwnProperty.call(J,ne)&&R.endPrefixMapping(ne)}else return D.currentNSMap=Y,D.localNSMap=J,!0}function k(D,R,Y,Q,J){if(/^(?:script|textarea)$/i.test(Y)){var ae=D.indexOf("</"+Y+">",R),ce=D.substring(R+1,ae);if(/[&<]/.test(ce))return/^script$/i.test(Y)?(J.characters(ce,0,ce.length),ae):(ce=ce.replace(/&#?\w+;/g,Q),J.characters(ce,0,ce.length),ae)}return R+1}function I(D,R,Y,Q){var J=Q[Y];return J==null&&(J=D.lastIndexOf("</"+Y+">"),J<R&&(J=D.lastIndexOf("</"+Y)),Q[Y]=J),J<R}function F(D,R){for(var Y in D)Object.prototype.hasOwnProperty.call(D,Y)&&(R[Y]=D[Y])}function j(D,R,Y,Q){var J=D.charAt(R+2);switch(J){case"-":if(D.charAt(R+3)==="-"){var ae=D.indexOf("-->",R+4);return ae>R?(Y.comment(D,R+4,ae-R-4),ae+3):(Q.error("Unclosed comment"),-1)}else return-1;default:if(D.substr(R+3,6)=="CDATA["){var ae=D.indexOf("]]>",R+9);return Y.startCDATA(),Y.characters(D,R+9,ae-R-9),Y.endCDATA(),ae+3}var ce=K(D,R),le=ce.length;if(le>1&&/!doctype/i.test(ce[0][0])){var ne=ce[1][0],ee=!1,fe=!1;le>3&&(/^public$/i.test(ce[2][0])?(ee=ce[3][0],fe=le>4&&ce[4][0]):/^system$/i.test(ce[2][0])&&(fe=ce[3][0]));var re=ce[le-1];return Y.startDTD(ne,ee,fe),Y.endDTD(),re.index+re[0].length}}return-1}function V(D,R,Y){var Q=D.indexOf("?>",R);if(Q){var J=D.substring(R,Q).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return J?(J[0].length,Y.processingInstruction(J[1],J[2]),Q+2):-1}return-1}function U(){this.attributeNames={}}U.prototype={setTagName:function(D){if(!n.test(D))throw new Error("invalid tagName:"+D);this.tagName=D},addValue:function(D,R,Y){if(!n.test(D))throw new Error("invalid attribute:"+D);this.attributeNames[D]=this.length,this[this.length++]={qName:D,value:R,offset:Y}},length:0,getLocalName:function(D){return this[D].localName},getLocator:function(D){return this[D].locator},getQName:function(D){return this[D].qName},getURI:function(D){return this[D].uri},getValue:function(D){return this[D].value}};function K(D,R){var Y,Q=[],J=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(J.lastIndex=R,J.exec(D);Y=J.exec(D);)if(Q.push(Y),Y[1])return Q}return Rh.XMLReader=T,Rh.ParseError=b,Rh}var db;function D3(){if(db)return Tu;db=1;var i=mf(),e=C1(),t=E3(),n=A3(),s=e.DOMImplementation,r=i.NAMESPACE,o=n.ParseError,l=n.XMLReader;function u(A){return A.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(A){this.options=A||{locator:{}}}h.prototype.parseFromString=function(A,P){var k=this.options,I=new l,F=k.domBuilder||new m,j=k.errorHandler,V=k.locator,U=k.xmlns||{},K=/\/x?html?$/.test(P),D=K?t.HTML_ENTITIES:t.XML_ENTITIES;V&&F.setDocumentLocator(V),I.errorHandler=d(j,F,V),I.domBuilder=k.domBuilder||F,K&&(U[""]=r.HTML),U.xml=U.xml||r.XML;var R=k.normalizeLineEndings||u;return A&&typeof A=="string"?I.parse(R(A),U,D):I.errorHandler.error("invalid doc source"),F.doc};function d(A,P,k){if(!A){if(P instanceof m)return P;A=P}var I={},F=A instanceof Function;k=k||{};function j(V){var U=A[V];!U&&F&&(U=A.length==2?function(K){A(V,K)}:A),I[V]=U&&function(K){U("[xmldom "+V+"]	"+K+T(k))}||function(){}}return j("warning"),j("error"),j("fatalError"),I}function m(){this.cdata=!1}function b(A,P){P.lineNumber=A.lineNumber,P.columnNumber=A.columnNumber}m.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(A,P,k,I){var F=this.doc,j=F.createElementNS(A,k||P),V=I.length;x(this,j),this.currentElement=j,this.locator&&b(this.locator,j);for(var U=0;U<V;U++){var A=I.getURI(U),K=I.getValue(U),k=I.getQName(U),D=F.createAttributeNS(A,k);this.locator&&b(I.getLocator(U),D),D.value=D.nodeValue=K,j.setAttributeNode(D)}},endElement:function(A,P,k){var I=this.currentElement;I.tagName,this.currentElement=I.parentNode},startPrefixMapping:function(A,P){},endPrefixMapping:function(A){},processingInstruction:function(A,P){var k=this.doc.createProcessingInstruction(A,P);this.locator&&b(this.locator,k),x(this,k)},ignorableWhitespace:function(A,P,k){},characters:function(A,P,k){if(A=C.apply(this,arguments),A){if(this.cdata)var I=this.doc.createCDATASection(A);else var I=this.doc.createTextNode(A);this.currentElement?this.currentElement.appendChild(I):/^\s*$/.test(A)&&this.doc.appendChild(I),this.locator&&b(this.locator,I)}},skippedEntity:function(A){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(A){(this.locator=A)&&(A.lineNumber=0)},comment:function(A,P,k){A=C.apply(this,arguments);var I=this.doc.createComment(A);this.locator&&b(this.locator,I),x(this,I)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(A,P,k){var I=this.doc.implementation;if(I&&I.createDocumentType){var F=I.createDocumentType(A,P,k);this.locator&&b(this.locator,F),x(this,F),this.doc.doctype=F}},warning:function(A){console.warn("[xmldom warning]	"+A,T(this.locator))},error:function(A){console.error("[xmldom error]	"+A,T(this.locator))},fatalError:function(A){throw new o(A,this.locator)}};function T(A){if(A)return`
@`+(A.systemId||"")+"#[line:"+A.lineNumber+",col:"+A.columnNumber+"]"}function C(A,P,k){return typeof A=="string"?A.substr(P,k):A.length>=P+k||P?new java.lang.String(A,P,k)+"":A}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(A){m.prototype[A]=function(){return null}});function x(A,P){A.currentElement?A.currentElement.appendChild(P):A.doc.appendChild(P)}return Tu.__DOMHandler=m,Tu.normalizeLineEndings=u,Tu.DOMParser=h,Tu}var fb;function P3(){if(fb)return bu;fb=1;var i=C1();return bu.DOMImplementation=i.DOMImplementation,bu.XMLSerializer=i.XMLSerializer,bu.DOMParser=D3().DOMParser,bu}var k3=P3();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const pb=i=>!!i&&typeof i=="object",vi=(...i)=>i.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):pb(e[n])&&pb(t[n])?e[n]=vi(e[n],t[n]):e[n]=t[n]}),e),{}),E1=i=>Object.keys(i).map(e=>i[e]),I3=(i,e)=>{const t=[];for(let n=i;n<e;n++)t.push(n);return t},hl=i=>i.reduce((e,t)=>e.concat(t),[]),A1=i=>{if(!i.length)return[];const e=[];for(let t=0;t<i.length;t++)e.push(i[t]);return e},L3=(i,e)=>i.reduce((t,n,s)=>(n[e]&&t.push(s),t),[]),O3=(i,e)=>E1(i.reduce((t,n)=>(n.forEach(s=>{t[e(s)]=s}),t),{}));var dl={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const fc=({baseUrl:i="",source:e="",range:t="",indexRange:n=""})=>{const s={uri:e,resolvedUri:pf(i||"",e)};if(t||n){const o=(t||n).split("-");let l=q.BigInt?q.BigInt(o[0]):parseInt(o[0],10),u=q.BigInt?q.BigInt(o[1]):parseInt(o[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u));let h;typeof u=="bigint"||typeof l=="bigint"?h=q.BigInt(u)-q.BigInt(l)+q.BigInt(1):h=u-l+1,typeof h=="bigint"&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),s.byterange={length:h,offset:l}}return s},M3=i=>{let e;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=q.BigInt(i.offset)+q.BigInt(i.length)-q.BigInt(1):e=i.offset+i.length-1,`${i.offset}-${e}`},mb=i=>(i&&typeof i!="number"&&(i=parseInt(i,10)),isNaN(i)?null:i),R3={static(i){const{duration:e,timescale:t=1,sourceDuration:n,periodDuration:s}=i,r=mb(i.endNumber),o=e/t;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/o}:{start:0,end:n/o}},dynamic(i){const{NOW:e,clientOffset:t,availabilityStartTime:n,timescale:s=1,duration:r,periodStart:o=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:u=1/0}=i,h=mb(i.endNumber),d=(e+t)/1e3,m=n+o,T=d+l-m,C=Math.ceil(T*s/r),x=Math.floor((d-m-u)*s/r),A=Math.floor((d-m)*s/r);return{start:Math.max(0,x),end:typeof h=="number"?h:Math.min(C,A)}}},N3=i=>e=>{const{duration:t,timescale:n=1,periodStart:s,startNumber:r=1}=i;return{number:r+e,duration:t/n,timeline:s,time:e*t}},S_=i=>{const{type:e,duration:t,timescale:n=1,periodDuration:s,sourceDuration:r}=i,{start:o,end:l}=R3[e](i),u=I3(o,l).map(N3(i));if(e==="static"){const h=u.length-1,d=typeof s=="number"?s:r;u[h].duration=d-t/n*h}return u},D1=i=>{const{baseUrl:e,initialization:t={},sourceDuration:n,indexRange:s="",periodStart:r,presentationTime:o,number:l=0,duration:u}=i;if(!e)throw new Error(dl.NO_BASE_URL);const h=fc({baseUrl:e,source:t.sourceURL,range:t.range}),d=fc({baseUrl:e,source:e,indexRange:s});if(d.map=h,u){const m=S_(i);m.length&&(d.duration=m[0].duration,d.timeline=m[0].timeline)}else n&&(d.duration=n,d.timeline=r);return d.presentationTime=o||r,d.number=l,[d]},w_=(i,e,t)=>{const n=i.sidx.map?i.sidx.map:null,s=i.sidx.duration,r=i.timeline||0,o=i.sidx.byterange,l=o.offset+o.length,u=e.timescale,h=e.references.filter(A=>A.referenceType!==1),d=[],m=i.endList?"static":"dynamic",b=i.sidx.timeline;let T=b,C=i.mediaSequence||0,x;typeof e.firstOffset=="bigint"?x=q.BigInt(l)+e.firstOffset:x=l+e.firstOffset;for(let A=0;A<h.length;A++){const P=e.references[A],k=P.referencedSize,I=P.subsegmentDuration;let F;typeof x=="bigint"?F=x+q.BigInt(k)-q.BigInt(1):F=x+k-1;const j=`${x}-${F}`,U=D1({baseUrl:t,timescale:u,timeline:r,periodStart:b,presentationTime:T,number:C,duration:I,sourceDuration:s,indexRange:j,type:m})[0];n&&(U.map=n),d.push(U),typeof x=="bigint"?x+=q.BigInt(k):x+=k,T+=I/u,C++}return i.segments=d,i},B3=["AUDIO","SUBTITLES"],F3=1/60,P1=i=>O3(i,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),U3=(i,e)=>{for(let t=0;t<i.length;t++)if(i[t].attributes.NAME===e)return i[t];return null},gb=i=>{let e=[];return C3(i,B3,(t,n,s,r)=>{e=e.concat(t.playlists||[])}),e},_b=({playlist:i,mediaSequence:e})=>{i.mediaSequence=e,i.segments.forEach((t,n)=>{t.number=i.mediaSequence+n})},j3=({oldPlaylists:i,newPlaylists:e,timelineStarts:t})=>{e.forEach(n=>{n.discontinuitySequence=t.findIndex(function({timeline:u}){return u===n.timeline});const s=U3(i,n.attributes.NAME);if(!s||n.sidx)return;const r=n.segments[0],o=s.segments.findIndex(function(u){return Math.abs(u.presentationTime-r.presentationTime)<F3});if(o===-1){_b({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}s.segments[o].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),_b({playlist:n,mediaSequence:s.segments[o].number})})},z3=({oldManifest:i,newManifest:e})=>{const t=i.playlists.concat(gb(i)),n=e.playlists.concat(gb(e));return e.timelineStarts=P1([i.timelineStarts,e.timelineStarts]),j3({oldPlaylists:t,newPlaylists:n,timelineStarts:e.timelineStarts}),e},gf=i=>i&&i.uri+"-"+M3(i.byterange),dm=i=>{const e=i.reduce(function(n,s){return n[s.attributes.baseUrl]||(n[s.attributes.baseUrl]=[]),n[s.attributes.baseUrl].push(s),n},{});let t=[];return Object.values(e).forEach(n=>{const s=E1(n.reduce((r,o)=>{const l=o.attributes.id+(o.attributes.lang||"");return r[l]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),r[l].segments.push(...o.segments)),o.attributes.contentProtection&&(r[l].attributes.contentProtection=o.attributes.contentProtection)):(r[l]=o,r[l].attributes.timelineStarts=[]),r[l].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),r},{}));t=t.concat(s)}),t.map(n=>(n.discontinuityStarts=L3(n.segments||[],"discontinuity"),n))},C_=(i,e)=>{const t=gf(i.sidx),n=t&&e[t]&&e[t].sidx;return n&&w_(i,n,i.sidx.resolvedUri),i},H3=(i,e={})=>{if(!Object.keys(e).length)return i;for(const t in i)i[t]=C_(i[t],e);return i},$3=({attributes:i,segments:e,sidx:t,mediaSequence:n,discontinuitySequence:s,discontinuityStarts:r},o)=>{const l={attributes:{NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:i.timelineStarts,mediaSequence:n,segments:e};return i.contentProtection&&(l.contentProtection=i.contentProtection),i.serviceLocation&&(l.attributes.serviceLocation=i.serviceLocation),t&&(l.sidx=t),o&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},V3=({attributes:i,segments:e,mediaSequence:t,discontinuityStarts:n,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);const r={NAME:i.id,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1};i.codecs&&(r.CODECS=i.codecs);const o={attributes:r,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:n,discontinuitySequence:s,mediaSequence:t,segments:e};return i.serviceLocation&&(o.attributes.serviceLocation=i.serviceLocation),o},q3=(i,e={},t=!1)=>{let n;const s=i.reduce((r,o)=>{const l=o.attributes.role&&o.attributes.role.value||"",u=o.attributes.lang||"";let h=o.attributes.label||"main";if(u&&!o.attributes.label){const m=l?` (${l})`:"";h=`${o.attributes.lang}${m}`}r[h]||(r[h]={language:u,autoselect:!0,default:l==="main",playlists:[],uri:""});const d=C_($3(o,t),e);return r[h].playlists.push(d),typeof n>"u"&&l==="main"&&(n=o,n.default=!0),r},{});if(!n){const r=Object.keys(s)[0];s[r].default=!0}return s},W3=(i,e={})=>i.reduce((t,n)=>{const s=n.attributes.label||n.attributes.lang||"text",r=n.attributes.lang||"und";return t[s]||(t[s]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),t[s].playlists.push(C_(V3(n),e)),t},{}),G3=i=>i.reduce((e,t)=>(t&&t.forEach(n=>{const{channel:s,language:r}=n;e[r]={autoselect:!1,default:!1,instreamId:s,language:r},n.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[r].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[r]["3D"]=n["3D"])}),e),{}),X3=({attributes:i,segments:e,sidx:t,discontinuityStarts:n})=>{const s={attributes:{NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuityStarts:n,timelineStarts:i.timelineStarts,segments:e};return i.frameRate&&(s.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(s.contentProtection=i.contentProtection),i.serviceLocation&&(s.attributes.serviceLocation=i.serviceLocation),t&&(s.sidx=t),s},K3=({attributes:i})=>i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video",Z3=({attributes:i})=>i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio",Y3=({attributes:i})=>i.mimeType==="text/vtt"||i.contentType==="text",Q3=(i,e)=>{i.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:n}){return n===t.timeline}),t.segments&&t.segments.forEach((n,s)=>{n.number=s})})},yb=i=>i?Object.keys(i).reduce((e,t)=>{const n=i[t];return e.concat(n.playlists)},[]):[],J3=({dashPlaylists:i,locations:e,contentSteering:t,sidxMapping:n={},previousManifest:s,eventStream:r})=>{if(!i.length)return{};const{sourceDuration:o,type:l,suggestedPresentationDelay:u,minimumUpdatePeriod:h}=i[0].attributes,d=dm(i.filter(K3)).map(X3),m=dm(i.filter(Z3)),b=dm(i.filter(Y3)),T=i.map(F=>F.attributes.captionServices).filter(Boolean),C={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:H3(d,n)};h>=0&&(C.minimumUpdatePeriod=h*1e3),e&&(C.locations=e),t&&(C.contentSteering=t),l==="dynamic"&&(C.suggestedPresentationDelay=u),r&&r.length>0&&(C.eventStream=r);const x=C.playlists.length===0,A=m.length?q3(m,n,x):null,P=b.length?W3(b,n):null,k=d.concat(yb(A),yb(P)),I=k.map(({timelineStarts:F})=>F);return C.timelineStarts=P1(I),Q3(k,C.timelineStarts),A&&(C.mediaGroups.AUDIO.audio=A),P&&(C.mediaGroups.SUBTITLES.subs=P),T.length&&(C.mediaGroups["CLOSED-CAPTIONS"].cc=G3(T)),s?z3({oldManifest:s,newManifest:C}):C},eN=(i,e,t)=>{const{NOW:n,clientOffset:s,availabilityStartTime:r,timescale:o=1,periodStart:l=0,minimumUpdatePeriod:u=0}=i,h=(n+s)/1e3,d=r+l,b=h+u-d;return Math.ceil((b*o-e)/t)},k1=(i,e)=>{const{type:t,minimumUpdatePeriod:n=0,media:s="",sourceDuration:r,timescale:o=1,startNumber:l=1,periodStart:u}=i,h=[];let d=-1;for(let m=0;m<e.length;m++){const b=e[m],T=b.d,C=b.r||0,x=b.t||0;d<0&&(d=x),x&&x>d&&(d=x);let A;if(C<0){const I=m+1;I===e.length?t==="dynamic"&&n>0&&s.indexOf("$Number$")>0?A=eN(i,d,T):A=(r*o-d)/T:A=(e[I].t-d)/T}else A=C+1;const P=l+h.length+A;let k=l+h.length;for(;k<P;)h.push({number:k,duration:T/o,time:d,timeline:u}),d+=T,k++}return h},tN=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,iN=i=>(e,t,n,s)=>{if(e==="$$")return"$";if(typeof i[t]>"u")return e;const r=""+i[t];return t==="RepresentationID"||(n?s=parseInt(s,10):s=1,r.length>=s)?r:`${new Array(s-r.length+1).join("0")}${r}`},vb=(i,e)=>i.replace(tN,iN(e)),nN=(i,e)=>!i.duration&&!e?[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]:i.duration?S_(i):k1(i,e),sN=(i,e)=>{const t={RepresentationID:i.id,Bandwidth:i.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=i,s=fc({baseUrl:i.baseUrl,source:vb(n.sourceURL,t),range:n.range});return nN(i,e).map(o=>{t.Number=o.number,t.Time=o.time;const l=vb(i.media||"",t),u=i.timescale||1,h=i.presentationTimeOffset||0,d=i.periodStart+(o.time-h)/u;return{uri:l,timeline:o.timeline,duration:o.duration,resolvedUri:pf(i.baseUrl||"",l),map:s,number:o.number,presentationTime:d}})},rN=(i,e)=>{const{baseUrl:t,initialization:n={}}=i,s=fc({baseUrl:t,source:n.sourceURL,range:n.range}),r=fc({baseUrl:t,source:e.media,range:e.mediaRange});return r.map=s,r},oN=(i,e)=>{const{duration:t,segmentUrls:n=[],periodStart:s}=i;if(!t&&!e||t&&e)throw new Error(dl.SEGMENT_TIME_UNSPECIFIED);const r=n.map(u=>rN(i,u));let o;return t&&(o=S_(i)),e&&(o=k1(i,e)),o.map((u,h)=>{if(r[h]){const d=r[h],m=i.timescale||1,b=i.presentationTimeOffset||0;return d.timeline=u.timeline,d.duration=u.duration,d.number=u.number,d.presentationTime=s+(u.time-b)/m,d}}).filter(u=>u)},aN=({attributes:i,segmentInfo:e})=>{let t,n;e.template?(n=sN,t=vi(i,e.template)):e.base?(n=D1,t=vi(i,e.base)):e.list&&(n=oN,t=vi(i,e.list));const s={attributes:i};if(!n)return s;const r=n(t,e.segmentTimeline);if(t.duration){const{duration:o,timescale:l=1}=t;t.duration=o/l}else r.length?t.duration=r.reduce((o,l)=>Math.max(o,Math.ceil(l.duration)),0):t.duration=0;return s.attributes=t,s.segments=r,e.base&&t.indexRange&&(s.sidx=r[0],s.segments=[]),s},lN=i=>i.map(aN),Vt=(i,e)=>A1(i.childNodes).filter(({tagName:t})=>t===e),Dc=i=>i.textContent.trim(),uN=i=>parseFloat(i.split("/").reduce((e,t)=>e/t)),Oa=i=>{const l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!l)return 0;const[u,h,d,m,b,T]=l.slice(1);return parseFloat(u||0)*31536e3+parseFloat(h||0)*2592e3+parseFloat(d||0)*86400+parseFloat(m||0)*3600+parseFloat(b||0)*60+parseFloat(T||0)},cN=i=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)),bb={mediaPresentationDuration(i){return Oa(i)},availabilityStartTime(i){return cN(i)/1e3},minimumUpdatePeriod(i){return Oa(i)},suggestedPresentationDelay(i){return Oa(i)},type(i){return i},timeShiftBufferDepth(i){return Oa(i)},start(i){return Oa(i)},width(i){return parseInt(i,10)},height(i){return parseInt(i,10)},bandwidth(i){return parseInt(i,10)},frameRate(i){return uN(i)},startNumber(i){return parseInt(i,10)},timescale(i){return parseInt(i,10)},presentationTimeOffset(i){return parseInt(i,10)},duration(i){const e=parseInt(i,10);return isNaN(e)?Oa(i):e},d(i){return parseInt(i,10)},t(i){return parseInt(i,10)},r(i){return parseInt(i,10)},presentationTime(i){return parseInt(i,10)},DEFAULT(i){return i}},oi=i=>i&&i.attributes?A1(i.attributes).reduce((e,t)=>{const n=bb[t.name]||bb.DEFAULT;return e[t.name]=n(t.value),e},{}):{},hN={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},_f=(i,e)=>e.length?hl(i.map(function(t){return e.map(function(n){const s=Dc(n),r=pf(t.baseUrl,s),o=vi(oi(n),{baseUrl:r});return r!==s&&!o.serviceLocation&&t.serviceLocation&&(o.serviceLocation=t.serviceLocation),o})})):i,E_=i=>{const e=Vt(i,"SegmentTemplate")[0],t=Vt(i,"SegmentList")[0],n=t&&Vt(t,"SegmentURL").map(m=>vi({tag:"SegmentURL"},oi(m))),s=Vt(i,"SegmentBase")[0],r=t||e,o=r&&Vt(r,"SegmentTimeline")[0],l=t||s||e,u=l&&Vt(l,"Initialization")[0],h=e&&oi(e);h&&u?h.initialization=u&&oi(u):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});const d={template:h,segmentTimeline:o&&Vt(o,"S").map(m=>oi(m)),list:t&&vi(oi(t),{segmentUrls:n,initialization:oi(u)}),base:s&&vi(oi(s),{initialization:oi(u)})};return Object.keys(d).forEach(m=>{d[m]||delete d[m]}),d},dN=(i,e,t)=>n=>{const s=Vt(n,"BaseURL"),r=_f(e,s),o=vi(i,oi(n)),l=E_(n);return r.map(u=>({segmentInfo:vi(t,l),attributes:vi(o,u)}))},fN=i=>i.reduce((e,t)=>{const n=oi(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const s=hN[n.schemeIdUri];if(s){e[s]={attributes:n};const r=Vt(t,"cenc:pssh")[0];if(r){const o=Dc(r);e[s].pssh=o&&v1(o)}}return e},{}),pN=i=>{if(i.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{let n,s;return s=t,/^CC\d=/.test(t)?[n,s]=t.split("="):/^CC\d$/.test(t)&&(n=t),{channel:n,language:s}});if(i.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[s,r=""]=t.split("=");n.channel=s,n.language=t,r.split(",").forEach(o=>{const[l,u]=o.split(":");l==="lang"?n.language=u:l==="er"?n.easyReader=Number(u):l==="war"?n.aspectRatio=Number(u):l==="3D"&&(n["3D"]=Number(u))})}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})},mN=i=>hl(Vt(i.node,"EventStream").map(e=>{const t=oi(e),n=t.schemeIdUri;return Vt(e,"Event").map(s=>{const r=oi(s),o=r.presentationTime||0,l=t.timescale||1,u=r.duration||0,h=o/l+i.attributes.start;return{schemeIdUri:n,value:t.value,id:r.id,start:h,end:h+u/l,messageData:Dc(s)||r.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),gN=(i,e,t)=>n=>{const s=oi(n),r=_f(e,Vt(n,"BaseURL")),o=Vt(n,"Role")[0],l={role:oi(o)};let u=vi(i,s,l);const h=Vt(n,"Accessibility")[0],d=pN(oi(h));d&&(u=vi(u,{captionServices:d}));const m=Vt(n,"Label")[0];if(m&&m.childNodes.length){const A=m.childNodes[0].nodeValue.trim();u=vi(u,{label:A})}const b=fN(Vt(n,"ContentProtection"));Object.keys(b).length&&(u=vi(u,{contentProtection:b}));const T=E_(n),C=Vt(n,"Representation"),x=vi(t,T);return hl(C.map(dN(u,r,x)))},_N=(i,e)=>(t,n)=>{const s=_f(e,Vt(t.node,"BaseURL")),r=vi(i,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(r.periodDuration=t.attributes.duration);const o=Vt(t.node,"AdaptationSet"),l=E_(t.node);return hl(o.map(gN(r,s,l)))},yN=(i,e)=>{if(i.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!i.length)return null;const t=vi({serverURL:Dc(i[0])},oi(i[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},vN=({attributes:i,priorPeriodAttributes:e,mpdType:t})=>typeof i.start=="number"?i.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,bN=(i,e={})=>{const{manifestUri:t="",NOW:n=Date.now(),clientOffset:s=0,eventHandler:r=function(){}}=e,o=Vt(i,"Period");if(!o.length)throw new Error(dl.INVALID_NUMBER_OF_PERIOD);const l=Vt(i,"Location"),u=oi(i),h=_f([{baseUrl:t}],Vt(i,"BaseURL")),d=Vt(i,"ContentSteering");u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=n,u.clientOffset=s,l.length&&(u.locations=l.map(Dc));const m=[];return o.forEach((b,T)=>{const C=oi(b),x=m[T-1];C.start=vN({attributes:C,priorPeriodAttributes:x?x.attributes:null,mpdType:u.type}),m.push({node:b,attributes:C})}),{locations:u.locations,contentSteeringInfo:yN(d,r),representationInfo:hl(m.map(_N(u,h))),eventStream:hl(m.map(mN))}},I1=i=>{if(i==="")throw new Error(dl.DASH_EMPTY_MANIFEST);const e=new k3.DOMParser;let t,n;try{t=e.parseFromString(i,"application/xml"),n=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(dl.DASH_INVALID_XML);return n},TN=i=>{const e=Vt(i,"UTCTiming")[0];if(!e)return null;const t=oi(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(dl.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},xN=(i,e={})=>{const t=bN(I1(i),e),n=lN(t.representationInfo);return J3({dashPlaylists:n,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},SN=i=>TN(I1(i));var fm,Tb;function wN(){if(Tb)return fm;Tb=1;var i=Math.pow(2,32),e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),s;return n.getBigUint64?(s=n.getBigUint64(0),s<Number.MAX_SAFE_INTEGER?Number(s):s):n.getUint32(0)*i+n.getUint32(4)};return fm={getUint64:e,MAX_UINT32:i},fm}var pm,xb;function CN(){if(xb)return pm;xb=1;var i=wN().getUint64,e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),s={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},r=12;s.version===0?(s.earliestPresentationTime=n.getUint32(r),s.firstOffset=n.getUint32(r+4),r+=8):(s.earliestPresentationTime=i(t.subarray(r)),s.firstOffset=i(t.subarray(r+8)),r+=16),r+=2;var o=n.getUint16(r);for(r+=2;o>0;r+=12,o--)s.references.push({referenceType:(t[r]&128)>>>7,referencedSize:n.getUint32(r)&2147483647,subsegmentDuration:n.getUint32(r+4),startsWithSap:!!(t[r+8]&128),sapType:(t[r+8]&112)>>>4,sapDeltaTime:n.getUint32(r+8)&268435455});return s};return pm=e,pm}var EN=CN();const AN=sa(EN);var DN=Ge([73,68,51]),PN=function(e,t){t===void 0&&(t=0),e=Ge(e);var n=e[t+5],s=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(n&16)>>4;return r?s+20:s+10},Lu=function i(e,t){return t===void 0&&(t=0),e=Ge(e),e.length-t<10||!$t(e,DN,{offset:t})?t:(t+=PN(e,t),i(e,t))},Sb=function(e){return typeof e=="string"?w1(e):e},kN=function(e){return Array.isArray(e)?e.map(function(t){return Sb(t)}):[Sb(e)]},IN=function i(e,t,n){n===void 0&&(n=!1),t=kN(t),e=Ge(e);var s=[];if(!t.length)return s;for(var r=0;r<e.length;){var o=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,l=e.subarray(r+4,r+8);if(o===0)break;var u=r+o;if(u>e.length){if(n)break;u=e.length}var h=e.subarray(r+8,u);$t(l,t[0])&&(t.length===1?s.push(h):s.push.apply(s,i(h,t.slice(1),n))),r=u}return s},Nh={EBML:Ge([26,69,223,163]),DocType:Ge([66,130]),Segment:Ge([24,83,128,103]),SegmentInfo:Ge([21,73,169,102]),Tracks:Ge([22,84,174,107]),Track:Ge([174]),TrackNumber:Ge([215]),DefaultDuration:Ge([35,227,131]),TrackEntry:Ge([174]),TrackType:Ge([131]),FlagDefault:Ge([136]),CodecID:Ge([134]),CodecPrivate:Ge([99,162]),VideoTrack:Ge([224]),AudioTrack:Ge([225]),Cluster:Ge([31,67,182,117]),Timestamp:Ge([231]),TimestampScale:Ge([42,215,177]),BlockGroup:Ge([160]),BlockDuration:Ge([155]),Block:Ge([161]),SimpleBlock:Ge([163])},sg=[128,64,32,16,8,4,2,1],LN=function(e){for(var t=1,n=0;n<sg.length&&!(e&sg[n]);n++)t++;return t},Td=function(e,t,n,s){n===void 0&&(n=!0),s===void 0&&(s=!1);var r=LN(e[t]),o=e.subarray(t,t+r);return n&&(o=Array.prototype.slice.call(e,t,t+r),o[0]^=sg[r-1]),{length:r,value:x3(o,{signed:s}),bytes:o}},wb=function i(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return i(t)}):typeof e=="number"?S3(e):e},ON=function(e){return Array.isArray(e)?e.map(function(t){return wb(t)}):[wb(e)]},MN=function i(e,t,n){if(n>=t.length)return t.length;var s=Td(t,n,!1);if($t(e.bytes,s.bytes))return n;var r=Td(t,n+s.length);return i(e,t,n+r.length+r.value+s.length)},Cb=function i(e,t){t=ON(t),e=Ge(e);var n=[];if(!t.length)return n;for(var s=0;s<e.length;){var r=Td(e,s,!1),o=Td(e,s+r.length),l=s+r.length+o.length;o.value===127&&(o.value=MN(r,e,l),o.value!==e.length&&(o.value-=l));var u=l+o.value>e.length?e.length:l+o.value,h=e.subarray(l,u);$t(t[0],r.bytes)&&(t.length===1?n.push(h):n=n.concat(i(h,t.slice(1))));var d=r.length+o.length+h.length;s+=d}return n},RN=Ge([0,0,0,1]),NN=Ge([0,0,1]),BN=Ge([0,0,3]),FN=function(e){for(var t=[],n=1;n<e.length-2;)$t(e.subarray(n,n+3),BN)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var s=e.length-t.length,r=new Uint8Array(s),o=0;for(n=0;n<s;o++,n++)o===t[0]&&(o++,t.shift()),r[n]=e[o];return r},L1=function(e,t,n,s){e=Ge(e),n=[].concat(n);for(var r=0,o,l=0;r<e.length&&(l<s||o);){var u=void 0;if($t(e.subarray(r),RN)?u=4:$t(e.subarray(r),NN)&&(u=3),!u){r++;continue}if(l++,o)return FN(e.subarray(o,r));var h=void 0;t==="h264"?h=e[r+u]&31:t==="h265"&&(h=e[r+u]>>1&63),n.indexOf(h)!==-1&&(o=r+u),r+=u+(t==="h264"?1:2)}return e.subarray(0,0)},UN=function(e,t,n){return L1(e,"h264",t,n)},jN=function(e,t,n){return L1(e,"h265",t,n)},Hi={webm:Ge([119,101,98,109]),matroska:Ge([109,97,116,114,111,115,107,97]),flac:Ge([102,76,97,67]),ogg:Ge([79,103,103,83]),ac3:Ge([11,119]),riff:Ge([82,73,70,70]),avi:Ge([65,86,73]),wav:Ge([87,65,86,69]),"3gp":Ge([102,116,121,112,51,103]),mp4:Ge([102,116,121,112]),fmp4:Ge([115,116,121,112]),mov:Ge([102,116,121,112,113,116]),moov:Ge([109,111,111,118]),moof:Ge([109,111,111,102])},fl={aac:function(e){var t=Lu(e);return $t(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Lu(e);return $t(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Cb(e,[Nh.EBML,Nh.DocType])[0];return $t(t,Hi.webm)},mkv:function(e){var t=Cb(e,[Nh.EBML,Nh.DocType])[0];return $t(t,Hi.matroska)},mp4:function(e){if(fl["3gp"](e)||fl.mov(e))return!1;if($t(e,Hi.mp4,{offset:4})||$t(e,Hi.fmp4,{offset:4})||$t(e,Hi.moof,{offset:4})||$t(e,Hi.moov,{offset:4}))return!0},mov:function(e){return $t(e,Hi.mov,{offset:4})},"3gp":function(e){return $t(e,Hi["3gp"],{offset:4})},ac3:function(e){var t=Lu(e);return $t(e,Hi.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Lu(e);return $t(e,Hi.flac,{offset:t})},ogg:function(e){return $t(e,Hi.ogg)},avi:function(e){return $t(e,Hi.riff)&&$t(e,Hi.avi,{offset:8})},wav:function(e){return $t(e,Hi.riff)&&$t(e,Hi.wav,{offset:8})},h264:function(e){return UN(e,7,3).length},h265:function(e){return jN(e,[32,33],3).length}},rg=Object.keys(fl).filter(function(i){return i!=="ts"&&i!=="h264"&&i!=="h265"}).concat(["ts","h264","h265"]);rg.forEach(function(i){var e=fl[i];fl[i]=function(t){return e(Ge(t))}});var zN=fl,A_=function(e){e=Ge(e);for(var t=0;t<rg.length;t++){var n=rg[t];if(zN[n](e))return n}return""},HN=function(e){return IN(e,["moof"]).length>0},mm,Eb;function $N(){if(Eb)return mm;Eb=1;var i=9e4,e,t,n,s,r,o,l;return e=function(u){return u*i},t=function(u,h){return u*h},n=function(u){return u/i},s=function(u,h){return u/h},r=function(u,h){return e(s(u,h))},o=function(u,h){return t(n(u),h)},l=function(u,h,d){return n(d?u:u-h)},mm={ONE_SECOND_IN_TS:i,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:s,audioTsToVideoTs:r,videoTsToAudioTs:o,metadataTsToSeconds:l},mm}var jo=$N();/**
 * @license
 * Video.js 8.22.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var og="8.22.0";const lr={},Zr=function(i,e){return lr[i]=lr[i]||[],e&&(lr[i]=lr[i].concat(e)),lr[i]},VN=function(i,e){Zr(i,e)},O1=function(i,e){const t=Zr(i).indexOf(e);return t<=-1?!1:(lr[i]=lr[i].slice(),lr[i].splice(t,1),!0)},qN=function(i,e){Zr(i,[].concat(e).map(t=>{const n=(...s)=>(O1(i,n),t(...s));return n}))},xd={prefixed:!0},Qh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Ab=Qh[0];let Ou;for(let i=0;i<Qh.length;i++)if(Qh[i][1]in Ae){Ou=Qh[i];break}if(Ou){for(let i=0;i<Ou.length;i++)xd[Ab[i]]=Ou[i];xd.prefixed=Ou[0]!==Ab[0]}let rn=[];const WN=(i,e,t)=>(n,s,r)=>{const o=e.levels[s],l=new RegExp(`^(${o})$`);let u=i;if(n!=="log"&&r.unshift(n.toUpperCase()+":"),t&&(u=`%c${i}`,r.unshift(t)),r.unshift(u+":"),rn){rn.push([].concat(r));const d=rn.length-1e3;rn.splice(0,d>0?d:0)}if(!q.console)return;let h=q.console[n];!h&&n==="debug"&&(h=q.console.info||q.console.log),!(!h||!o||!l.test(n))&&h[Array.isArray(r)?"apply":"call"](q.console,r)};function ag(i,e=":",t=""){let n="info",s;function r(...o){s("log",n,o)}return s=WN(i,r,t),r.createLogger=(o,l,u)=>{const h=l!==void 0?l:e,d=u!==void 0?u:t,m=`${i} ${h} ${o}`;return ag(m,h,d)},r.createNewLogger=(o,l,u)=>ag(o,l,u),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=o=>{if(typeof o=="string"){if(!r.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);n=o}return n},r.history=()=>rn?[].concat(rn):[],r.history.filter=o=>(rn||[]).filter(l=>new RegExp(`.*${o}.*`).test(l[0])),r.history.clear=()=>{rn&&(rn.length=0)},r.history.disable=()=>{rn!==null&&(rn.length=0,rn=null)},r.history.enable=()=>{rn===null&&(rn=[])},r.error=(...o)=>s("error",n,o),r.warn=(...o)=>s("warn",n,o),r.debug=(...o)=>s("debug",n,o),r}const ct=ag("VIDEOJS"),M1=ct.createLogger,GN=Object.prototype.toString,R1=function(i){return Fs(i)?Object.keys(i):[]};function Za(i,e){R1(i).forEach(t=>e(i[t],t))}function N1(i,e,t=0){return R1(i).reduce((n,s)=>e(n,i[s],s),t)}function Fs(i){return!!i&&typeof i=="object"}function pl(i){return Fs(i)&&GN.call(i)==="[object Object]"&&i.constructor===Object}function kt(...i){const e={};return i.forEach(t=>{t&&Za(t,(n,s)=>{if(!pl(n)){e[s]=n;return}pl(e[s])||(e[s]={}),e[s]=kt(e[s],n)})}),e}function B1(i={}){const e=[];for(const t in i)if(i.hasOwnProperty(t)){const n=i[t];e.push(n)}return e}function yf(i,e,t,n=!0){const s=o=>Object.defineProperty(i,e,{value:o,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const o=t();return s(o),o}};return n&&(r.set=s),Object.defineProperty(i,e,r)}var XN=Object.freeze({__proto__:null,each:Za,reduce:N1,isObject:Fs,isPlain:pl,merge:kt,values:B1,defineLazyProperty:yf});let D_=!1,F1=null,cs=!1,U1,j1=!1,Ya=!1,Qa=!1,Us=!1,P_=null,vf=null;const KN=!!(q.cast&&q.cast.framework&&q.cast.framework.CastReceiverContext);let z1=null,Sd=!1,bf=!1,wd=!1,Tf=!1,Cd=!1,Ed=!1,Ad=!1;const pc=!!(Dl()&&("ontouchstart"in q||q.navigator.maxTouchPoints||q.DocumentTouch&&q.document instanceof q.DocumentTouch)),Ir=q.navigator&&q.navigator.userAgentData;Ir&&Ir.platform&&Ir.brands&&(cs=Ir.platform==="Android",Ya=!!Ir.brands.find(i=>i.brand==="Microsoft Edge"),Qa=!!Ir.brands.find(i=>i.brand==="Chromium"),Us=!Ya&&Qa,P_=vf=(Ir.brands.find(i=>i.brand==="Chromium")||{}).version||null,bf=Ir.platform==="Windows");if(!Qa){const i=q.navigator&&q.navigator.userAgent||"";D_=/iPod/i.test(i),F1=function(){const e=i.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),cs=/Android/i.test(i),U1=function(){const e=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),j1=/Firefox/i.test(i),Ya=/Edg/i.test(i),Qa=/Chrome/i.test(i)||/CriOS/i.test(i),Us=!Ya&&Qa,P_=vf=function(){const e=i.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),z1=function(){const e=/MSIE\s(\d+)\.\d/.exec(i);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(t=11),t}(),Cd=/Tizen/i.test(i),Ed=/Web0S/i.test(i),Ad=Cd||Ed,Sd=/Safari/i.test(i)&&!Us&&!cs&&!Ya&&!Ad,bf=/Windows/i.test(i),wd=/iPad/i.test(i)||Sd&&pc&&!/iPhone/i.test(i),Tf=/iPhone/i.test(i)&&!wd}const Mi=Tf||wd||D_,xf=(Sd||Mi)&&!Us;var H1=Object.freeze({__proto__:null,get IS_IPOD(){return D_},get IOS_VERSION(){return F1},get IS_ANDROID(){return cs},get ANDROID_VERSION(){return U1},get IS_FIREFOX(){return j1},get IS_EDGE(){return Ya},get IS_CHROMIUM(){return Qa},get IS_CHROME(){return Us},get CHROMIUM_VERSION(){return P_},get CHROME_VERSION(){return vf},IS_CHROMECAST_RECEIVER:KN,get IE_VERSION(){return z1},get IS_SAFARI(){return Sd},get IS_WINDOWS(){return bf},get IS_IPAD(){return wd},get IS_IPHONE(){return Tf},get IS_TIZEN(){return Cd},get IS_WEBOS(){return Ed},get IS_SMART_TV(){return Ad},TOUCH_ENABLED:pc,IS_IOS:Mi,IS_ANY_SAFARI:xf});function Db(i){return typeof i=="string"&&!!i.trim()}function ZN(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Dl(){return Ae===q.document}function Pl(i){return Fs(i)&&i.nodeType===1}function $1(){try{return q.parent!==q.self}catch{return!0}}function V1(i){return function(e,t){if(!Db(e))return Ae[i](null);Db(t)&&(t=Ae.querySelector(t));const n=Pl(t)?t:Ae;return n[i]&&n[i](e)}}function Ye(i="div",e={},t={},n){const s=Ae.createElement(i);return Object.getOwnPropertyNames(e).forEach(function(r){const o=e[r];r==="textContent"?to(s,o):(s[r]!==o||r==="tabIndex")&&(s[r]=o)}),Object.getOwnPropertyNames(t).forEach(function(r){s.setAttribute(r,t[r])}),n&&k_(s,n),s}function to(i,e){return typeof i.textContent>"u"?i.innerText=e:i.textContent=e,i}function lg(i,e){e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}function Xu(i,e){return ZN(e),i.classList.contains(e)}function Go(i,...e){return i.classList.add(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),i}function Sf(i,...e){return i?(i.classList.remove(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),i):(ct.warn("removeClass was called with an element that doesn't exist"),null)}function q1(i,e,t){return typeof t=="function"&&(t=t(i,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(n=>i.classList.toggle(n,t)),i}function W1(i,e){Object.getOwnPropertyNames(e).forEach(function(t){const n=e[t];n===null||typeof n>"u"||n===!1?i.removeAttribute(t):i.setAttribute(t,n===!0?"":n)})}function Fr(i){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(i&&i.attributes&&i.attributes.length>0){const n=i.attributes;for(let s=n.length-1;s>=0;s--){const r=n[s].name;let o=n[s].value;t.includes(r)&&(o=o!==null),e[r]=o}}return e}function G1(i,e){return i.getAttribute(e)}function ml(i,e,t){i.setAttribute(e,t)}function wf(i,e){i.removeAttribute(e)}function X1(){Ae.body.focus(),Ae.onselectstart=function(){return!1}}function K1(){Ae.onselectstart=function(){return!0}}function gl(i){if(i&&i.getBoundingClientRect&&i.parentNode){const e=i.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(_l(i,"height"))),t.width||(t.width=parseFloat(_l(i,"width"))),t}}function mc(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};const e=i.offsetWidth,t=i.offsetHeight;let n=0,s=0;for(;i.offsetParent&&i!==Ae[xd.fullscreenElement];)n+=i.offsetLeft,s+=i.offsetTop,i=i.offsetParent;return{left:n,top:s,width:e,height:t}}function Cf(i,e){const t={x:0,y:0};if(Mi){let d=i;for(;d&&d.nodeName.toLowerCase()!=="html";){const m=_l(d,"transform");if(/^matrix/.test(m)){const b=m.slice(7,-1).split(/,\s/).map(Number);t.x+=b[4],t.y+=b[5]}else if(/^matrix3d/.test(m)){const b=m.slice(9,-1).split(/,\s/).map(Number);t.x+=b[12],t.y+=b[13]}if(d.assignedSlot&&d.assignedSlot.parentElement&&q.WebKitCSSMatrix){const b=q.getComputedStyle(d.assignedSlot.parentElement).transform,T=new q.WebKitCSSMatrix(b);t.x+=T.m41,t.y+=T.m42}d=d.parentNode||d.host}}const n={},s=mc(e.target),r=mc(i),o=r.width,l=r.height;let u=e.offsetY-(r.top-s.top),h=e.offsetX-(r.left-s.left);return e.changedTouches&&(h=e.changedTouches[0].pageX-r.left,u=e.changedTouches[0].pageY+r.top,Mi&&(h-=t.x,u-=t.y)),n.y=1-Math.max(0,Math.min(1,u/l)),n.x=Math.max(0,Math.min(1,h/o)),n}function Z1(i){return Fs(i)&&i.nodeType===3}function Ef(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function Y1(i){return typeof i=="function"&&(i=i()),(Array.isArray(i)?i:[i]).map(e=>{if(typeof e=="function"&&(e=e()),Pl(e)||Z1(e))return e;if(typeof e=="string"&&/\S/.test(e))return Ae.createTextNode(e)}).filter(e=>e)}function k_(i,e){return Y1(e).forEach(t=>i.appendChild(t)),i}function Q1(i,e){return k_(Ef(i),e)}function gc(i){return i.button===void 0&&i.buttons===void 0||i.button===0&&i.buttons===void 0||i.type==="mouseup"&&i.button===0&&i.buttons===0||i.type==="mousedown"&&i.button===0&&i.buttons===0?!0:!(i.button!==0||i.buttons!==1)}const Yr=V1("querySelector"),J1=V1("querySelectorAll");function _l(i,e){if(!i||!e)return"";if(typeof q.getComputedStyle=="function"){let t;try{t=q.getComputedStyle(i)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function e2(i){[...Ae.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(s=>s.cssText).join(""),n=Ae.createElement("style");n.textContent=t,i.document.head.appendChild(n)}catch{const n=Ae.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,i.document.head.appendChild(n)}})}var t2=Object.freeze({__proto__:null,isReal:Dl,isEl:Pl,isInFrame:$1,createEl:Ye,textContent:to,prependTo:lg,hasClass:Xu,addClass:Go,removeClass:Sf,toggleClass:q1,setAttributes:W1,getAttributes:Fr,getAttribute:G1,setAttribute:ml,removeAttribute:wf,blockTextSelection:X1,unblockTextSelection:K1,getBoundingClientRect:gl,findPosition:mc,getPointerPosition:Cf,isTextNode:Z1,emptyEl:Ef,normalizeContent:Y1,appendContent:k_,insertContent:Q1,isSingleLeftClick:gc,$:Yr,$$:J1,computedStyle:_l,copyStyleSheetsToWindow:e2});let i2=!1,ug;const YN=function(){if(ug.options.autoSetup===!1)return;const i=Array.prototype.slice.call(Ae.getElementsByTagName("video")),e=Array.prototype.slice.call(Ae.getElementsByTagName("audio")),t=Array.prototype.slice.call(Ae.getElementsByTagName("video-js")),n=i.concat(e,t);if(n&&n.length>0)for(let s=0,r=n.length;s<r;s++){const o=n[s];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&ug(o);else{cg(1);break}}else i2||cg(1)};function cg(i,e){Dl()&&(e&&(ug=e),q.setTimeout(YN,i))}function hg(){i2=!0,q.removeEventListener("load",hg)}Dl()&&(Ae.readyState==="complete"?hg():q.addEventListener("load",hg));const n2=function(i){const e=Ae.createElement("style");return e.className=i,e},s2=function(i,e){i.styleSheet?i.styleSheet.cssText=e:i.textContent=e};var Gi=new WeakMap;const QN=3;let JN=QN;function Wn(){return JN++}function Pb(i,e){if(!Gi.has(i))return;const t=Gi.get(i);t.handlers[e].length===0&&(delete t.handlers[e],i.removeEventListener?i.removeEventListener(e,t.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Gi.delete(i)}function I_(i,e,t,n){t.forEach(function(s){i(e,s,n)})}function Af(i){if(i.fixed_)return i;function e(){return!0}function t(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){const n=i||q.event;i={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in n)s.includes(r)||r==="returnValue"&&n.preventDefault||(i[r]=n[r]);if(i.target||(i.target=i.srcElement||Ae),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){n.preventDefault&&n.preventDefault(),i.returnValue=!1,n.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),i.cancelBubble=!0,n.cancelBubble=!0,i.isPropagationStopped=e},i.isPropagationStopped=t,i.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),i.isImmediatePropagationStopped=e,i.stopPropagation()},i.isImmediatePropagationStopped=t,i.clientX!==null&&i.clientX!==void 0){const r=Ae.documentElement,o=Ae.body;i.pageX=i.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),i.pageY=i.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}i.which=i.charCode||i.keyCode,i.button!==null&&i.button!==void 0&&(i.button=i.button&1?0:i.button&4?1:i.button&2?2:0)}return i.fixed_=!0,i}let Bh;const eB=function(){if(typeof Bh!="boolean"){Bh=!1;try{const i=Object.defineProperty({},"passive",{get(){Bh=!0}});q.addEventListener("test",null,i),q.removeEventListener("test",null,i)}catch{}}return Bh},tB=["touchstart","touchmove"];function Pn(i,e,t){if(Array.isArray(e))return I_(Pn,i,e,t);Gi.has(i)||Gi.set(i,{});const n=Gi.get(i);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=Wn()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,r){if(n.disabled)return;s=Af(s);const o=n.handlers[s.type];if(o){const l=o.slice(0);for(let u=0,h=l.length;u<h&&!s.isImmediatePropagationStopped();u++)try{l[u].call(i,s,r)}catch(d){ct.error(d)}}}),n.handlers[e].length===1)if(i.addEventListener){let s=!1;eB()&&tB.indexOf(e)>-1&&(s={passive:!0}),i.addEventListener(e,n.dispatcher,s)}else i.attachEvent&&i.attachEvent("on"+e,n.dispatcher)}function Ri(i,e,t){if(!Gi.has(i))return;const n=Gi.get(i);if(!n.handlers)return;if(Array.isArray(e))return I_(Ri,i,e,t);const s=function(o,l){n.handlers[l]=[],Pb(o,l)};if(e===void 0){for(const o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&s(i,o);return}const r=n.handlers[e];if(r){if(!t){s(i,e);return}if(t.guid)for(let o=0;o<r.length;o++)r[o].guid===t.guid&&r.splice(o--,1);Pb(i,e)}}function kl(i,e,t){const n=Gi.has(i)?Gi.get(i):{},s=i.parentNode||i.ownerDocument;if(typeof e=="string"?e={type:e,target:i}:e.target||(e.target=i),e=Af(e),n.dispatcher&&n.dispatcher.call(i,e,t),s&&!e.isPropagationStopped()&&e.bubbles===!0)kl.call(null,s,e,t);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){Gi.has(e.target)||Gi.set(e.target,{});const r=Gi.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function Df(i,e,t){if(Array.isArray(e))return I_(Df,i,e,t);const n=function(){Ri(i,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||Wn(),Pn(i,e,n)}function L_(i,e,t){const n=function(){Ri(i,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||Wn(),Pn(i,e,n)}var iB=Object.freeze({__proto__:null,fixEvent:Af,on:Pn,off:Ri,trigger:kl,one:Df,any:L_});const Gn=30,Rt=function(i,e,t){e.guid||(e.guid=Wn());const n=e.bind(i);return n.guid=t?t+"_"+e.guid:e.guid,n},js=function(i,e){let t=q.performance.now();return function(...s){const r=q.performance.now();r-t>=e&&(i(...s),t=r)}},r2=function(i,e,t,n=q){let s;const r=()=>{n.clearTimeout(s),s=null},o=function(){const l=this,u=arguments;let h=function(){s=null,h=null,t||i.apply(l,u)};!s&&t&&i.apply(l,u),n.clearTimeout(s),s=n.setTimeout(h,e)};return o.cancel=r,o};var nB=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Gn,bind_:Rt,throttle:js,debounce:r2});let xu;class kn{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Pn(this,e,t),this.addEventListener=n}off(e,t){Ri(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Df(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},L_(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=Af(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),kl(this,e)}queueTrigger(e){xu||(xu=new Map);const t=e.type||e;let n=xu.get(this);n||(n=new Map,xu.set(this,n));const s=n.get(t);n.delete(t),q.clearTimeout(s);const r=q.setTimeout(()=>{n.delete(t),n.size===0&&(n=null,xu.delete(this)),this.trigger(e)},0);n.set(t,r)}}kn.prototype.allowedEvents_={};kn.prototype.addEventListener=kn.prototype.on;kn.prototype.removeEventListener=kn.prototype.off;kn.prototype.dispatchEvent=kn.prototype.trigger;const Pf=i=>typeof i.name=="function"?i.name():typeof i.name=="string"?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i,dr=i=>i instanceof kn||!!i.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof i[e]=="function"),sB=(i,e)=>{dr(i)?e():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(e))},dg=i=>typeof i=="string"&&/\S/.test(i)||Array.isArray(i)&&!!i.length,Dd=(i,e,t)=>{if(!i||!i.nodeName&&!dr(i))throw new Error(`Invalid target for ${Pf(e)}#${t}; must be a DOM node or evented object.`)},o2=(i,e,t)=>{if(!dg(i))throw new Error(`Invalid event type for ${Pf(e)}#${t}; must be a non-empty string or array.`)},a2=(i,e,t)=>{if(typeof i!="function")throw new Error(`Invalid listener for ${Pf(e)}#${t}; must be a function.`)},gm=(i,e,t)=>{const n=e.length<3||e[0]===i||e[0]===i.eventBusEl_;let s,r,o;return n?(s=i.eventBusEl_,e.length>=3&&e.shift(),[r,o]=e):(s=e[0],r=e[1],o=e[2]),Dd(s,i,t),o2(r,i,t),a2(o,i,t),o=Rt(i,o),{isTargetingSelf:n,target:s,type:r,listener:o}},Lo=(i,e,t,n)=>{Dd(i,i,e),i.nodeName?iB[e](i,t,n):i[e](t,n)},rB={on(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=gm(this,i,"on");if(Lo(t,"on",n,s),!e){const r=()=>this.off(t,n,s);r.guid=s.guid;const o=()=>this.off("dispose",r);o.guid=s.guid,Lo(this,"on","dispose",r),Lo(t,"on","dispose",o)}},one(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=gm(this,i,"one");if(e)Lo(t,"one",n,s);else{const r=(...o)=>{this.off(t,n,r),s.apply(null,o)};r.guid=s.guid,Lo(t,"one",n,r)}},any(...i){const{isTargetingSelf:e,target:t,type:n,listener:s}=gm(this,i,"any");if(e)Lo(t,"any",n,s);else{const r=(...o)=>{this.off(t,n,r),s.apply(null,o)};r.guid=s.guid,Lo(t,"any",n,r)}},off(i,e,t){if(!i||dg(i))Ri(this.eventBusEl_,i,e);else{const n=i,s=e;Dd(n,this,"off"),o2(s,this,"off"),a2(t,this,"off"),t=Rt(this,t),this.off("dispose",t),n.nodeName?(Ri(n,s,t),Ri(n,"dispose",t)):dr(n)&&(n.off(s,t),n.off("dispose",t))}},trigger(i,e){Dd(this.eventBusEl_,this,"trigger");const t=i&&typeof i!="string"?i.type:i;if(!dg(t))throw new Error(`Invalid event type for ${Pf(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return kl(this.eventBusEl_,i,e)}};function O_(i,e={}){const{eventBusKey:t}=e;if(t){if(!i[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);i.eventBusEl_=i[t]}else i.eventBusEl_=Ye("span",{className:"vjs-event-bus"});return Object.assign(i,rB),i.eventedCallbacks&&i.eventedCallbacks.forEach(n=>{n()}),i.on("dispose",()=>{i.off(),[i,i.el_,i.eventBusEl_].forEach(function(n){n&&Gi.has(n)&&Gi.delete(n)}),q.setTimeout(()=>{i.eventBusEl_=null},0)}),i}const oB={state:{},setState(i){typeof i=="function"&&(i=i());let e;return Za(i,(t,n)=>{this.state[n]!==t&&(e=e||{},e[n]={from:this.state[n],to:t}),this.state[n]=t}),e&&dr(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function l2(i,e){return Object.assign(i,oB),i.state=Object.assign({},i.state,e),typeof i.handleStateChanged=="function"&&dr(i)&&i.on("statechanged",i.handleStateChanged),i}const Ku=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toLowerCase())},Yt=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},u2=function(i,e){return Yt(i)===Yt(e)};var aB=Object.freeze({__proto__:null,toLowerCase:Ku,toTitleCase:Yt,titleCaseEquals:u2});class _e{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=kt({},this.options_),t=this.options_=kt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${Wn()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),t.evented!==!1&&(O_(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),l2(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(n),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=kt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Ye(e,t,n)}localize(e,t,n=e){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[s],l=s&&s.split("-")[0],u=r&&r[l];let h=n;return o&&o[e]?h=o[e]:u&&u[e]&&(h=u[e]),t&&(h=h.replace(/\{(\d+)\}/g,function(d,m){const b=t[m-1];let T=b;return typeof b>"u"&&(T=d),T})),h}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,s)=>n.concat(s),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",s=Ye("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=Ae.createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const o=Ae.createElementNS(n,"use");return r.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(r),this.iconIsSet_?t.replaceChild(s,t.querySelector(".vjs-icon-placeholder")):t.appendChild(s),this.iconIsSet_=!0,s}addChild(e,t={},n=this.children_.length){let s,r;if(typeof e=="string"){r=Yt(e);const o=t.componentClass||r;t.name=r;const l=_e.getComponent(o);if(!l)throw new Error(`Component ${o} does not exist`);if(typeof l!="function")return null;s=new l(this.player_||this,t)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&Yt(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[Ku(r)]=s),typeof s.el=="function"&&s.el()){let o=null;this.children_[n+1]&&(this.children_[n+1].el_?o=this.children_[n+1].el_:Pl(this.children_[n+1])&&(o=this.children_[n+1])),this.contentEl().insertBefore(s.el(),o)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){t=!0,this.children_.splice(s,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Yt(e.name())]=null,this.childNameIndex_[Ku(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=o=>{const l=o.name;let u=o.opts;if(t[l]!==void 0&&(u=t[l]),u===!1)return;u===!0&&(u={}),u.playerOptions=this.options_.playerOptions;const h=this.addChild(l,u);h&&(this[l]=h)};let s;const r=_e.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(o){return!s.some(function(l){return typeof l=="string"?o===l:o===l.name})})).map(o=>{let l,u;return typeof o=="string"?(l=o,u=e[l]||this.options_[l]||{}):(l=o.name,u=o),{name:l,opts:u}}).filter(o=>{const l=_e.getComponent(o.opts.componentClass||Yt(o.name));return l&&!r.isTech(l)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return Yr(e,t||this.contentEl())}$$(e,t){return J1(e,t||this.contentEl())}hasClass(e){return Xu(this.el_,e)}addClass(...e){Go(this.el_,...e)}removeClass(...e){Sf(this.el_,...e)}toggleClass(e,t){q1(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return G1(this.el_,e)}setAttribute(e,t){ml(this.el_,e,t)}removeAttribute(e){wf(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+Yt(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=_l(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const n=`offset${Yt(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,s=200;let r;this.on("touchstart",function(l){l.touches.length===1&&(t={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},e=q.performance.now(),r=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)r=!1;else if(t){const u=l.touches[0].pageX-t.pageX,h=l.touches[0].pageY-t.pageY;Math.sqrt(u*u+h*h)>n&&(r=!1)}});const o=function(){r=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(l){t=null,r===!0&&q.performance.now()-e<s&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Rt(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(s){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=Rt(this,e),this.clearTimersOnDispose_(),n=q.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),q.clearTimeout(e)),e}setInterval(e,t){e=Rt(this,e),this.clearTimersOnDispose_();const n=q.setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),q.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Rt(this,e),t=q.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=Rt(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),q.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((n,s)=>this[t](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(r){const o=q.getComputedStyle(r,null),l=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(l)}function n(r){return!(!t(r.parentElement)||!t(r)||r.style.opacity==="0"||q.getComputedStyle(r).height==="0px"||q.getComputedStyle(r).width==="0px")}function s(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;const o={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(o.x<0||o.x>(Ae.documentElement.clientWidth||q.innerWidth)||o.y<0||o.y>(Ae.documentElement.clientHeight||q.innerHeight))return!1;let l=Ae.elementFromPoint(o.x,o.y);for(;l;){if(l===r)return!0;if(l.parentNode)l=l.parentNode;else return!1}}return e||(e=this.el()),!!(s(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=_e.getComponent("Tech"),s=n&&n.isTech(t),r=_e===t||_e.prototype.isPrototypeOf(t.prototype);if(s||!r){let l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${e}"; ${l}.`)}e=Yt(e),_e.components_||(_e.components_={});const o=_e.getComponent("Player");if(e==="Player"&&o&&o.players){const l=o.players,u=Object.keys(l);if(l&&u.length>0){for(let h=0;h<u.length;h++)if(l[u[h]]!==null)throw new Error("Can not register Player component after player has been created.")}}return _e.components_[e]=t,_e.components_[Ku(e)]=t,t}static getComponent(e){if(!(!e||!_e.components_))return _e.components_[e]}}_e.registerComponent("Component",_e);function lB(i,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function kb(i,e,t,n){return lB(i,n,t.length-1),t[n][e]}function _m(i){let e;return i===void 0||i.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:i.length,start:kb.bind(null,"start",0,i),end:kb.bind(null,"end",1,i)},q.Symbol&&q.Symbol.iterator&&(e[q.Symbol.iterator]=()=>(i||[]).values()),e}function as(i,e){return Array.isArray(i)?_m(i):i===void 0||e===void 0?_m():_m([[i,e]])}const c2=function(i,e){i=i<0?0:i;let t=Math.floor(i%60),n=Math.floor(i/60%60),s=Math.floor(i/3600);const r=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(i)||i===1/0)&&(s=n=t="-"),s=s>0||o>0?s+":":"",n=((s||r>=10)&&n<10?"0"+n:n)+":",t=t<10?"0"+t:t,s+n+t};let M_=c2;function h2(i){M_=i}function d2(){M_=c2}function ia(i,e=i){return M_(i,e)}var uB=Object.freeze({__proto__:null,createTimeRanges:as,createTimeRange:as,setFormatTime:h2,resetFormatTime:d2,formatTime:ia});function f2(i,e){let t=0,n,s;if(!e)return 0;(!i||!i.length)&&(i=as(0,0));for(let r=0;r<i.length;r++)n=i.start(r),s=i.end(r),s>e&&(s=e),t+=s-n;return t/e}function Kt(i){if(i instanceof Kt)return i;typeof i=="number"?this.code=i:typeof i=="string"?this.message=i:Fs(i)&&(typeof i.code=="number"&&(this.code=i.code),Object.assign(this,i)),this.message||(this.message=Kt.defaultMessages[this.code]||"")}Kt.prototype.code=0;Kt.prototype.message="";Kt.prototype.status=null;Kt.prototype.metadata=null;Kt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Kt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Kt.MEDIA_ERR_CUSTOM=0;Kt.prototype.MEDIA_ERR_CUSTOM=0;Kt.MEDIA_ERR_ABORTED=1;Kt.prototype.MEDIA_ERR_ABORTED=1;Kt.MEDIA_ERR_NETWORK=2;Kt.prototype.MEDIA_ERR_NETWORK=2;Kt.MEDIA_ERR_DECODE=3;Kt.prototype.MEDIA_ERR_DECODE=3;Kt.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Kt.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Kt.MEDIA_ERR_ENCRYPTED=5;Kt.prototype.MEDIA_ERR_ENCRYPTED=5;function Zu(i){return i!=null&&typeof i.then=="function"}function Is(i){Zu(i)&&i.then(null,e=>{})}const fg=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,s)=>(i[n]&&(t[n]=i[n]),t),{cues:i.cues&&Array.prototype.map.call(i.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},cB=function(i){const e=i.$$("track"),t=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=fg(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(i.textTracks(),function(s){return t.indexOf(s)===-1}).map(fg))},hB=function(i,e){return i.forEach(function(t){const n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(s=>n.addCue(s))}),e.textTracks()};var Ib={textTracksToJson:cB,jsonToTextTracks:hB,trackToJson_:fg};const ym="vjs-modal-dialog";class Il extends _e{constructor(e,t){super(e,t),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ye("div",{className:`${ym}-content`},{role:"document"}),this.descEl_=Ye("p",{className:`${ym}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),to(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${ym} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const s=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,s=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Q1(t,e),this.trigger("modalfill"),s?n.insertBefore(t,s):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Ef(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Ae.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let s;for(let r=0;r<t.length;r++)if(n===t[r]){s=r;break}Ae.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof q.HTMLAnchorElement||t instanceof q.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof q.HTMLInputElement||t instanceof q.HTMLSelectElement||t instanceof q.HTMLTextAreaElement||t instanceof q.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof q.HTMLIFrameElement||t instanceof q.HTMLObjectElement||t instanceof q.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}Il.prototype.options_={pauseOnOpen:!0,temporary:!0};_e.registerComponent("ModalDialog",Il);class yl extends kn{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},dr(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}yl.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const i in yl.prototype.allowedEvents_)yl.prototype["on"+i]=null;const vm=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].enabled=!1)};class dB extends yl{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){vm(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&vm(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,vm(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const bm=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].selected=!1)};class fB extends yl{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){bm(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&bm(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,bm(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class p2 extends yl{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class pB{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class Pd{constructor(e){Pd.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const s=e.length;this.cues_=e,this.length_=e.length;const r=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(t<s)for(n=t;n<s;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,s=this.length;n<s;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}const mB={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},gB={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},_B={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Lb={disabled:"disabled",hidden:"hidden",showing:"showing"};class R_ extends kn{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Wn(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const s in t)Object.defineProperty(this,s,{get(){return t[s]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(s){s!==n&&(n=s,this.trigger("labelchange"))}})}}const N_=function(i){return new URL(i,Ae.baseURI)},m2=function(i){return new URL(i,Ae.baseURI).href},B_=function(i){if(typeof i=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(t)return t.pop().toLowerCase()}return""},kf=function(i,e=q.location){return N_(i).origin!==e.origin};var yB=Object.freeze({__proto__:null,parseUrl:N_,getAbsoluteURL:m2,getFileExtension:B_,isCrossOrigin:kf});const Ob=function(i,e){const t=new q.WebVTT.Parser(q,q.vttjs,q.WebVTT.StringDecoder()),n=[];t.oncue=function(s){e.addCue(s)},t.onparsingerror=function(s){n.push(s)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(i),n.length>0&&(q.console&&q.console.groupCollapsed&&q.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(s=>ct.error(s)),q.console&&q.console.groupEnd&&q.console.groupEnd()),t.flush()},Mb=function(i,e){const t={uri:i},n=kf(i);n&&(t.cors=n);const s=e.tech_.crossOrigin()==="use-credentials";s&&(t.withCredentials=s),y1(t,Rt(this,function(r,o,l){if(r)return ct.error(r,o);e.loaded_=!0,typeof q.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],u=>{if(u.type==="vttjserror"){ct.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return Ob(l,e)}):Ob(l,e)}))};class Pc extends R_{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=kt(e,{kind:_B[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=Lb[t.mode]||"disabled";const s=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new Pd(this.cues_),o=new Pd(this.activeCues_);let l=!1;this.timeupdateHandler=Rt(this,function(h={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const u=()=>{this.stopTracking()};this.tech_.one("dispose",u),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return n},set(h){Lb[h]&&n!==h&&(n=h,!this.preload_&&n!=="disabled"&&this.cues.length===0&&Mb(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const h=this.tech_.currentTime(),d=[];for(let m=0,b=this.cues.length;m<b;m++){const T=this.cues[m];T.startTime<=h&&T.endTime>=h&&d.push(T)}if(l=!1,d.length!==this.activeCues_.length)l=!0;else for(let m=0;m<d.length;m++)this.activeCues_.indexOf(d[m])===-1&&(l=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&Mb(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new q.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in t||(t[s]=e[s]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let s=0;s<n.length;s++)n[s]!==this&&n[s].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Pc.prototype.allowedEvents_={cuechange:"cuechange"};class g2 extends R_{constructor(e={}){const t=kt(e,{kind:gB[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class _2 extends R_{constructor(e={}){const t=kt(e,{kind:mB[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(s){typeof s!="boolean"||s===n||(n=s,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class fr extends kn{constructor(e={}){super();let t;const n=new Pc(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=fr.NONE,n.addEventListener("loadeddata",()=>{t=fr.LOADED,this.trigger({type:"load",target:this})})}}fr.prototype.allowedEvents_={load:"load"};fr.NONE=0;fr.LOADING=1;fr.LOADED=2;fr.ERROR=3;const Hn={audio:{ListClass:dB,TrackClass:g2,capitalName:"Audio"},video:{ListClass:fB,TrackClass:_2,capitalName:"Video"},text:{ListClass:p2,TrackClass:Pc,capitalName:"Text"}};Object.keys(Hn).forEach(function(i){Hn[i].getterName=`${i}Tracks`,Hn[i].privateName=`${i}Tracks_`});const vl={remoteText:{ListClass:p2,TrackClass:Pc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:pB,TrackClass:fr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},qi=Object.assign({},Hn,vl);vl.names=Object.keys(vl);Hn.names=Object.keys(Hn);qi.names=[].concat(vl.names).concat(Hn.names);function vB(i,e,t,n,s={}){const r=i.textTracks();s.kind=e,t&&(s.label=t),n&&(s.language=n),s.tech=i;const o=new qi.text.TrackClass(s);return r.addTrack(o),o}class nt extends _e{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),qi.names.forEach(n=>{const s=qi[n];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new qi.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Rt(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return as(0,0)}bufferedPercent(){return f2(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Hn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const n=this[`${t}Tracks`]()||[];let s=n.length;for(;s--;){const r=n[s];t==="text"&&this.removeRemoteTextTrack(r),n.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Kt(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?as(0,0):as()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Hn.names.forEach(e=>{const t=Hn[e],n=()=>{this.trigger(`${e}trackchange`)},s=this[t.getterName]();s.addEventListener("removetrack",n),s.addEventListener("addtrack",n),this.on("dispose",()=>{s.removeEventListener("removetrack",n),s.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!q.WebVTT)if(Ae.body.contains(this.el())){if(!this.options_["vtt.js"]&&pl(nb)&&Object.keys(nb).length>0){this.trigger("vttjsloaded");return}const e=Ae.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),q.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=l=>e.addTrack(l.track),s=l=>e.removeTrack(l.track);t.on("addtrack",n),t.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),o=()=>{r();for(let l=0;l<e.length;l++){const u=e[l];u.removeEventListener("cuechange",r),u.mode==="showing"&&u.addEventListener("cuechange",r)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",s),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let l=0;l<e.length;l++)e[l].removeEventListener("cuechange",r)})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return vB(this,e,t,n)}createRemoteTextTrack(e){const t=kt(e,{tech:this});return new vl.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Wn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return nt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof nt||e instanceof nt||e===nt}static registerTech(e,t){if(nt.techs_||(nt.techs_={}),!nt.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!nt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!nt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Yt(e),nt.techs_[e]=t,nt.techs_[Ku(e)]=t,e!=="Tech"&&nt.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(nt.techs_&&nt.techs_[e])return nt.techs_[e];if(e=Yt(e),q&&q.videojs&&q.videojs[e])return ct.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),q.videojs[e]}}}qi.names.forEach(function(i){const e=qi[i];nt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});nt.prototype.featuresVolumeControl=!0;nt.prototype.featuresMuteControl=!0;nt.prototype.featuresFullscreenResize=!1;nt.prototype.featuresPlaybackRate=!1;nt.prototype.featuresProgressEvents=!1;nt.prototype.featuresSourceset=!1;nt.prototype.featuresTimeupdateEvents=!1;nt.prototype.featuresNativeTextTracks=!1;nt.prototype.featuresVideoFrameCallback=!1;nt.withSourceHandlers=function(i){i.registerSourceHandler=function(t,n){let s=i.sourceHandlers;s||(s=i.sourceHandlers=[]),n===void 0&&(n=s.length),s.splice(n,0,t)},i.canPlayType=function(t){const n=i.sourceHandlers||[];let s;for(let r=0;r<n.length;r++)if(s=n[r].canPlayType(t),s)return s;return""},i.selectSourceHandler=function(t,n){const s=i.sourceHandlers||[];let r;for(let o=0;o<s.length;o++)if(r=s[o].canHandleSource(t,n),r)return s[o];return null},i.canPlaySource=function(t,n){const s=i.selectSourceHandler(t,n);return s?s.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){const n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(t){let n=i.selectSourceHandler(t,this.options_);n||(i.nativeSourceHandler?n=i.nativeSourceHandler:ct.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==i.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};_e.registerComponent("Tech",nt);nt.registerTech("Tech",nt);nt.defaultTechOrder_=[];const Xo={},kd={},Id={};function bB(i,e){Xo[i]=Xo[i]||[],Xo[i].push(e)}function TB(i,e,t){i.setTimeout(()=>Ro(e,Xo[e.type],t,i),1)}function xB(i,e){i.forEach(t=>t.setTech&&t.setTech(e))}function SB(i,e,t){return i.reduceRight(F_(t),e[t]())}function wB(i,e,t,n){return e[t](i.reduce(F_(t),n))}function Rb(i,e,t,n=null){const s="call"+Yt(t),r=i.reduce(F_(s),n),o=r===Id,l=o?null:e[t](r);return AB(i,t,l,o),l}const CB={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},EB={setCurrentTime:1,setMuted:1,setVolume:1},Nb={play:1,pause:1};function F_(i){return(e,t)=>e===Id?Id:t[i]?t[i](e):e}function AB(i,e,t,n){for(let s=i.length-1;s>=0;s--){const r=i[s];r[e]&&r[e](n,t)}}function DB(i){kd.hasOwnProperty(i.id())&&delete kd[i.id()]}function PB(i,e){const t=kd[i.id()];let n=null;if(t==null)return n=e(i),kd[i.id()]=[[e,n]],n;for(let s=0;s<t.length;s++){const[r,o]=t[s];r===e&&(n=o)}return n===null&&(n=e(i),t.push([e,n])),n}function Ro(i={},e=[],t,n,s=[],r=!1){const[o,...l]=e;if(typeof o=="string")Ro(i,Xo[o],t,n,s,r);else if(o){const u=PB(n,o);if(!u.setSource)return s.push(u),Ro(i,l,t,n,s,r);u.setSource(Object.assign({},i),function(h,d){if(h)return Ro(i,l,t,n,s,r);s.push(u),Ro(d,i.type===d.type?l:Xo[d.type],t,n,s,r)})}else l.length?Ro(i,l,t,n,s,r):r?t(i,s):Ro(i,Xo["*"],t,n,s,!0)}const kB={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ld=function(i=""){const e=B_(i);return kB[e.toLowerCase()]||""},IB=(i,e)=>{if(!e)return"";if(i.cache_.source.src===e&&i.cache_.source.type)return i.cache_.source.type;const t=i.cache_.sources.filter(s=>s.src===e);if(t.length)return t[0].type;const n=i.$$("source");for(let s=0;s<n.length;s++){const r=n[s];if(r.type&&r.src&&r.src===e)return r.type}return Ld(e)},y2=function(i){if(Array.isArray(i)){let e=[];i.forEach(function(t){t=y2(t),Array.isArray(t)?e=e.concat(t):Fs(t)&&e.push(t)}),i=e}else typeof i=="string"&&i.trim()?i=[Bb({src:i})]:Fs(i)&&typeof i.src=="string"&&i.src&&i.src.trim()?i=[Bb(i)]:i=[];return i};function Bb(i){if(!i.type){const e=Ld(i.src);e&&(i.type=e)}return i}var LB=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const Fb=Cd?10009:Ed?461:8,Ma={codes:{play:415,pause:19,ff:417,rw:412,back:Fb},names:{415:"play",19:"pause",417:"ff",412:"rw",[Fb]:"back"},isEventKey(i,e){return e=e.toLowerCase(),!!(this.names[i.keyCode]&&this.names[i.keyCode]===e)},getEventName(i){if(this.names[i.keyCode])return this.names[i.keyCode];if(this.codes[i.code]){const e=this.codes[i.code];return this.names[e]}return null}},Ub=5;class OB extends kn{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const n=t.key.substring(5).toLowerCase();this.move(n)}else if(Ma.isEventKey(t,"play")||Ma.isEventKey(t,"pause")||Ma.isEventKey(t,"ff")||Ma.isEventKey(t,"rw")){t.preventDefault();const n=Ma.getEventName(t);this.performMediaAction_(n)}else Ma.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+Ub);break;case"rw":this.userSeek_(this.player_.currentTime()-Ub);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const s=this.getCurrentComponent(e.target);t&&(n=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!t)&&(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(s){for(const r of s)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&t.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&n(r.children_)}return e.children_.forEach(s=>{if(s.hasOwnProperty("el_"))if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())){t.push(s);return}else s.hasOwnProperty("children_")&&s.children_.length>0?n(s.children_):s.hasOwnProperty("items")&&s.items.length>0?n(s.items):this.findSuitableDOMChild(s)&&t.push(s);if(s.name_==="ErrorDisplay"&&s.opened_){const r=s.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((l,u)=>{t.push({name:()=>"ModalButton"+(u+1),el:()=>l,getPositions:()=>{const h=l.getBoundingClientRect(),d={x:h.x,y:h.y,width:h.width,height:h.height,top:h.top,right:h.right,bottom:h.bottom,left:h.left},m={x:h.left+h.width/2,y:h.top+h.height/2,width:0,height:0,top:h.top+h.height/2,right:h.left+h.width/2,bottom:h.top+h.height/2,left:h.left+h.width/2};return{boundingClientRect:d,center:m}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:h=>!0,focus:()=>l.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let s=0;s<n.children.length;s++){const r=n.children[s],o=t(r);if(o)return o}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===t)return n}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),s=this.focusableComponents.filter(o=>o!==t&&this.isInDirection_(n.boundingClientRect,o.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(n.center,s,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let s=1/0,r=null;for(const o of t){const l=o.getPositions().center,u=this.calculateDistance_(e,l,n);u<s&&(s=u,r=o)}return r}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const s=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);let o;switch(n){case"right":case"left":o=s+r*100;break;case"up":o=r*2+s*.5;break;case"down":o=r*5+s;break;default:o=s+r}return o}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class MB extends _e{constructor(e,t,n){const s=kt({createEl:!1},t);if(super(e,s,n),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let r=0,o=t.playerOptions.techOrder;r<o.length;r++){const l=Yt(o[r]);let u=nt.getTech(l);if(l||(u=_e.getComponent(l)),u&&u.isSupported()){e.loadTech_(l);break}}else e.src(t.playerOptions.sources)}}_e.registerComponent("MediaLoader",MB);class If extends _e{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&ct.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const s=Ye(e,t,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ye("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,to(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}_e.registerComponent("ClickableComponent",If);class pg extends If{constructor(e,t){super(e,t),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ye("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ye("picture",{className:"vjs-poster",tabIndex:-1},{},Ye("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Is(this.player_.play()):this.player_.pause())}}pg.prototype.crossorigin=pg.prototype.crossOrigin;_e.registerComponent("PosterImage",pg);const Fn="#222",jb="#ccc",RB={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Tm(i,e){let t;if(i.length===4)t=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else if(i.length===7)t=i.slice(1);else throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function ws(i,e,t){try{i.style[e]=t}catch{return}}function zb(i){return i?`${i}px`:""}class NB extends _e{constructor(e,t,n){super(e,t,n);const s=o=>this.updateDisplay(o),r=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",s),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(Rt(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const o=q.screen.orientation||q,l=q.screen.orientation?"change":"orientationchange";o.addEventListener(l,r),e.on("dispose",()=>o.removeEventListener(l,r));const u=this.options_.playerOptions.tracks||[];for(let h=0;h<u.length;h++)this.player_.addRemoteTextTrack(u[h],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let s,r,o;for(let l=0;l<t.length;l++){const u=t[l];n&&n.enabled&&n.language&&n.language===u.language&&u.kind in e?u.kind===n.kind?o=u:o||(o=u):n&&!n.enabled?(o=null,s=null,r=null):u.default&&(u.kind==="descriptions"&&!s?s=u:u.kind in e&&!r&&(r=u))}o?o.mode="showing":r?r.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof q.WebVTT=="function"&&q.WebVTT.processCues(q,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const o=[];for(let l=0;l<e.length;++l){const u=e[l];u.mode==="showing"&&o.push(u)}this.updateForTrack(o);return}let n=null,s=null,r=e.length;for(;r--;){const o=e[r];o.mode==="showing"&&(o.kind==="descriptions"?n=o:s=o)}if(s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!q.CSS.supports("inset","10px")){const o=this.el_,l=o.querySelectorAll(".vjs-text-track-cue"),u=this.player_.controlBar.el_.getBoundingClientRect().height,h=this.player_.el_.getBoundingClientRect().height;o.style="",ws(o,"position","relative"),ws(o,"height",h-u+"px"),ws(o,"top","unset"),Ad?ws(o,"bottom",h+"px"):ws(o,"bottom","0px"),l.length>0&&l.forEach(d=>{if(d.style.inset){const m=d.style.inset.split(" ");m.length===3&&Object.assign(d.style,{top:m[0],right:m[1],bottom:m[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!q.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,s=this.player_.videoWidth()/this.player_.videoHeight();let r=0,o=0;Math.abs(n-s)>.1&&(n>s?r=Math.round((e-t*s)/2):o=Math.round((t-e/s)/2)),ws(this.el_,"insetInline",zb(r)),ws(this.el_,"insetBlock",zb(o))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let s=n.length;for(;s--;){const r=n[s];if(!r)continue;const o=r.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&ws(o.firstChild,"color",Tm(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ws(o.firstChild,"backgroundColor",Tm(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ws(o,"backgroundColor",Tm(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${Fn}, 2px 2px 4px ${Fn}, 2px 2px 5px ${Fn}`:t.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${Fn}, 2px 2px ${Fn}, 3px 3px ${Fn}`:t.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${jb}, 0 1px ${jb}, -1px -1px ${Fn}, 0 -1px ${Fn}`:t.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${Fn}, 0 0 4px ${Fn}, 0 0 4px ${Fn}, 0 0 4px ${Fn}`)),t.fontPercent&&t.fontPercent!==1){const l=q.parseFloat(o.style.fontSize);o.style.fontSize=l*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=RB[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof q.WebVTT!="function"||e.every(n=>!n.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r)t.push(s.activeCues[r])}q.WebVTT.processCues(q,t,this.el_);for(let n=0;n<e.length;++n){const s=e[n];for(let r=0;r<s.activeCues.length;++r){const o=s.activeCues[r].displayState;Go(o,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:n)),s.language&&ml(o,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}_e.registerComponent("TextTrackDisplay",NB);class BB extends _e{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Ye("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(n),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}_e.registerComponent("LoadingSpinner",BB);class Ni extends If{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const s=Ye(e,t,n);return this.player_.options_.experimentalSvgIcons||s.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,t={}){const n=this.constructor.name;return ct.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),_e.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}_e.registerComponent("Button",Ni);class v2 extends Ni{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){Is(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),s=n&&n.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const r=()=>s.focus();Zu(t)?t.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}v2.prototype.controlText_="Play Video";_e.registerComponent("BigPlayButton",v2);class FB extends Ni{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}_e.registerComponent("CloseButton",FB);class b2 extends Ni{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),t.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Is(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}b2.prototype.controlText_="Play";_e.registerComponent("PlayToggle",b2);class Ll extends _e{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Ye("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(n),this.contentEl_=Ye("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=ia(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,ct.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Ae.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Ll.prototype.labelText_="Time";Ll.prototype.controlText_="Time";_e.registerComponent("TimeDisplay",Ll);class U_ extends Ll{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}U_.prototype.labelText_="Current Time";U_.prototype.controlText_="Current Time";_e.registerComponent("CurrentTimeDisplay",U_);class j_ extends Ll{constructor(e,t){super(e,t);const n=s=>this.updateContent(s);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}j_.prototype.labelText_="Duration";j_.prototype.controlText_="Duration";_e.registerComponent("DurationDisplay",j_);class UB extends _e{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}}_e.registerComponent("TimeDivider",UB);class z_ extends Ll{constructor(e,t){super(e,t),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ye("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}z_.prototype.labelText_="Remaining Time";z_.prototype.controlText_="Remaining Time";_e.registerComponent("RemainingTimeDisplay",z_);class jB extends _e{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ye("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ye("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Ae.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}_e.registerComponent("LiveDisplay",jB);class T2 extends Ni{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ye("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}T2.prototype.controlText_="Seek to live, currently playing live";_e.registerComponent("SeekToLive",T2);function kc(i,e,t){return i=Number(i),Math.min(t,Math.max(e,isNaN(i)?e:i))}var zB=Object.freeze({__proto__:null,clamp:kc});class H_ extends _e{constructor(e,t){super(e,t),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Us&&e.preventDefault(),X1(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;K1(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(kc(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Cf(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,s=t&&t.horizontalSeek;n?s&&e.key==="ArrowLeft"||!s&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):s&&e.key==="ArrowRight"||!s&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}_e.registerComponent("Slider",H_);const xm=(i,e)=>kc(i/e*100,0,100).toFixed(2)+"%";class HB extends _e{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Ye("span",{className:"vjs-control-text"}),n=Ye("span",{textContent:this.localize("Loaded")}),s=Ae.createTextNode(": ");return this.percentageEl_=Ye("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(s),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,n=this.player_.buffered(),s=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),o=this.partEls_,l=xm(r,s);this.percent_!==l&&(this.el_.style.width=l,to(this.percentageEl_,l),this.percent_=l);for(let u=0;u<n.length;u++){const h=n.start(u),d=n.end(u);let m=o[u];m||(m=this.el_.appendChild(Ye()),o[u]=m),!(m.dataset.start===h&&m.dataset.end===d)&&(m.dataset.start=h,m.dataset.end=d,m.style.left=xm(h,r),m.style.width=xm(d-h,r))}for(let u=o.length;u>n.length;u--)this.el_.removeChild(o[u-1]);o.length=n.length})}}_e.registerComponent("LoadProgressBar",HB);class $B extends _e{constructor(e,t){super(e,t),this.update=js(Rt(this,this.update),Gn)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const s=mc(this.el_),r=gl(this.player_.el()),o=e.width*t;if(!r||!s)return;let l=e.left-r.left+o,u=e.width-o+(r.right-e.right);u||(u=e.width-o,l=o);let h=s.width/2;l<h?h+=h-l:u<h&&(h=u),h<0?h=0:h>s.width&&(h=s.width),h=Math.round(h),this.el_.style.right=`-${h}px`,this.write(n)}write(e){to(this.el_,e)}updateTime(e,t,n,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const l=this.player_.liveTracker.liveWindow(),u=l-t*l;r=(u<1?"":"-")+ia(u,l)}else r=ia(n,o);this.update(e,t,r),s&&s()})}}_e.registerComponent("TimeTooltip",$B);class $_ extends _e{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=js(Rt(this,this.update),Gn)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,s)}}$_.prototype.options_={children:[]};!Mi&&!cs&&$_.prototype.options_.children.push("timeTooltip");_e.registerComponent("PlayProgressBar",$_);class x2 extends _e{constructor(e,t){super(e,t),this.update=js(Rt(this,this.update),Gn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=`${e.width*t}px`})}}x2.prototype.options_={children:["timeTooltip"]};_e.registerComponent("MouseTimeDisplay",x2);class Lf extends H_{constructor(e,t){t=kt(Lf.prototype.options_,t),t.children=[...t.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(Mi||cs);(!Mi&&!cs||n)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbingOnMobile_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Rt(this,this.update),this.update=js(this.update_,Gn),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae&&"visibilityState"in Ae&&this.on(Ae,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Ae.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Gn))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Ae.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==n||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ia(n,r),ia(r,r)],"{1} of {2}")),this.currentTime_=n,this.duration_=r),this.bar&&this.bar.update(gl(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){gc(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!gc(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const s=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())n=s*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(s>=.99){r.seekToLiveEdge();return}const o=r.seekableStart(),l=r.liveCurrentTime();if(n=o+s*r.liveWindow(),n>=l&&(n=l),n<=o&&(n=o+.1),n===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=n:this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Is(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae&&"visibilityState"in Ae&&this.off(Ae,"visibilitychange",this.toggleVisibility_),super.dispose()}}Lf.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};_e.registerComponent("SeekBar",Lf);class S2 extends _e{constructor(e,t){super(e,t),this.handleMouseMove=js(Rt(this,this.handleMouseMove),Gn),this.throttledHandleMouseSeek=js(Rt(this,this.handleMouseSeek),Gn),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),s=t.getChild("mouseTimeDisplay");if(!n&&!s)return;const r=t.el(),o=mc(r);let l=Cf(r,e).x;l=kc(l,0,1),s&&s.update(o,l),n&&n.update(o,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Is(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}S2.prototype.options_={children:["seekBar"]};_e.registerComponent("ProgressControl",S2);class w2 extends Ni{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Ae.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in q?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Ae.exitPictureInPicture=="function"&&super.show()}}w2.prototype.controlText_="Picture-in-Picture";_e.registerComponent("PictureInPictureToggle",w2);class C2 extends Ni{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Ae[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}C2.prototype.controlText_="Fullscreen";_e.registerComponent("FullscreenToggle",C2);const VB=function(i,e){e.tech_&&!e.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class qB extends _e{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}_e.registerComponent("VolumeLevel",qB);class WB extends _e{constructor(e,t){super(e,t),this.update=js(Rt(this,this.update),Gn)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,s){if(!n){const r=gl(this.el_),o=gl(this.player_.el()),l=e.width*t;if(!o||!r)return;const u=e.left-o.left+l,h=e.width-l+(o.right-e.right);let d=r.width/2;u<d?d+=d-u:h<d&&(d=h),d<0?d=0:d>r.width&&(d=r.width),this.el_.style.right=`-${d}px`}this.write(`${s}%`)}write(e){to(this.el_,e)}updateVolume(e,t,n,s,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,s.toFixed(0)),r&&r()})}}_e.registerComponent("VolumeLevelTooltip",WB);class E2 extends _e{constructor(e,t){super(e,t),this.update=js(Rt(this,this.update),Gn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const s=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,s,()=>{n?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}E2.prototype.options_={children:["volumeLevelTooltip"]};_e.registerComponent("MouseVolumeLevelDisplay",E2);class Of extends H_{constructor(e,t){super(e,t),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){gc(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),s=gl(n),r=this.vertical();let o=Cf(n,e);o=r?o.y:o.x,o=kc(o,0,1),t.update(s,o,r)}gc(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Of.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Mi&&!cs&&Of.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Of.prototype.playerEvent="volumechange";_e.registerComponent("VolumeBar",Of);class A2 extends _e{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||pl(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),VB(this,e),this.throttledHandleMouseMove=js(Rt(this,this.handleMouseMove),Gn),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}A2.prototype.options_={children:["volumeBar"]};_e.registerComponent("VolumeControl",A2);const GB=function(i,e){e.tech_&&!e.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};class D2 extends Ni{constructor(e,t){super(e,t),GB(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(t===0){const s=n<.1?.1:n;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Mi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Sf(this.el_,[0,1,2,3].reduce((n,s)=>n+`${s?" ":""}vjs-vol-${s}`,"")),Go(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}D2.prototype.controlText_="Mute";_e.registerComponent("MuteToggle",D2);class P2 extends _e{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||pl(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Pn(Ae,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Ri(Ae,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}P2.prototype.options_={children:["muteToggle","volumeControl"]};_e.registerComponent("VolumePanel",P2);class k2 extends Ni{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;t+this.skipTime<=s?r=t+this.skipTime:r=s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}k2.prototype.controlText_="Skip Forward";_e.registerComponent("SkipForward",k2);class I2 extends Ni{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,s=n&&n.isLive()&&n.seekableStart();let r;s&&t-this.skipTime<=s?r=s:t>=this.skipTime?r=t-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}I2.prototype.controlText_="Skip Backward";_e.registerComponent("SkipBackward",I2);class L2 extends _e{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof _e&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof _e&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ye(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Pn(t,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Ae.activeElement;if(!this.children().some(n=>n.el()===t)){const n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(s=>s.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}_e.registerComponent("Menu",L2);class V_ extends _e{constructor(e,t={}){super(e,t),this.menuButton_=new Ni(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=Ni.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Pn(Ae,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new L2(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Ye("li",{className:"vjs-menu-title",textContent:Yt(this.options_.title),tabIndex:-1}),n=new _e(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Ni.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Ri(Ae,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Mi&&$1())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}_e.registerComponent("MenuButton",V_);class q_ extends V_{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const s=Rt(this,this.update);n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)})}}_e.registerComponent("TrackButton",q_);class Ic extends If{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),r=Ye("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}_e.registerComponent("MenuItem",Ic);class Lc extends Ic{constructor(e,t){const n=t.track,s=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected=n.mode==="showing",super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...l)=>{this.handleTracksChange.apply(this,l)},o=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(e.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",o)}),s.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof q.Event!="object")try{l=new q.Event("change")}catch{}l||(l=Ae.createEvent("Event"),l.initEvent("change",!0,!0)),s.dispatchEvent(l)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let s=0;s<n.length;s++){const r=n[s];this.kinds.indexOf(r.kind)!==-1&&(r===t?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}_e.registerComponent("TextTrackMenuItem",Lc);class O2 extends Lc{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}_e.registerComponent("OffTextTrackMenuItem",O2);class Ol extends q_{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Lc){let n;this.label_&&(n=`${this.label_} off`),e.push(new O2(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const o=s[r];if(this.kinds_.indexOf(o.kind)>-1){const l=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${o.kind}-menu-item`),e.push(l)}}return e}}_e.registerComponent("TextTrackButton",Ol);class M2 extends Ic{constructor(e,t){const n=t.track,s=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=s.text,t.selected=s.startTime<=r&&r<s.endTime,super(e,t),this.track=n,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}_e.registerComponent("ChaptersTrackMenuItem",M2);class W_ extends Ol{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Yt(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,s=t.length;n<s;n++){const r=t[n],o=new M2(this.player_,{track:this.track_,cue:r});e.push(o)}return e}}W_.prototype.kind_="chapters";W_.prototype.controlText_="Chapters";_e.registerComponent("ChaptersButton",W_);class G_ extends Ol{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const s=e.textTracks(),r=Rt(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(o.kind!==this.kind_&&o.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}G_.prototype.kind_="descriptions";G_.prototype.controlText_="Descriptions";_e.registerComponent("DescriptionsButton",G_);class X_ extends Ol{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}X_.prototype.kind_="subtitles";X_.prototype.controlText_="Subtitles";_e.registerComponent("SubtitlesButton",X_);class K_ extends Lc{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}_e.registerComponent("CaptionSettingsMenuItem",K_);class Z_ extends Ol{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new K_(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}Z_.prototype.kind_="captions";Z_.prototype.controlText_="Captions";_e.registerComponent("CaptionsButton",Z_);class R2 extends Lc{createEl(e,t,n){const s=super.createEl(e,t,n),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ye("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}_e.registerComponent("SubsCapsMenuItem",R2);class Y_ extends Ol{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Yt(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new K_(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,R2),e}}Y_.prototype.kinds_=["captions","subtitles"];Y_.prototype.controlText_="Subtitles";_e.registerComponent("SubsCapsButton",Y_);class N2 extends Ic{constructor(e,t){const n=t.track,s=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...o)=>{this.handleTracksChange.apply(this,o)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(e,t,n){const s=super.createEl(e,t,n),r=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ye("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const s=t[n];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}_e.registerComponent("AudioTrackMenuItem",N2);class B2 extends q_{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const s=t[n];e.push(new N2(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}B2.prototype.controlText_="Audio Track";_e.registerComponent("AudioTrackButton",B2);class Q_ extends Ic{constructor(e,t){const n=t.rate,s=parseFloat(n,10);t.label=n,t.selected=s===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=s,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}Q_.prototype.contentElType="button";_e.registerComponent("PlaybackRateMenuItem",Q_);class F2 extends V_{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ye("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new Q_(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}F2.prototype.controlText_="Playback Rate";_e.registerComponent("PlaybackRateMenuButton",F2);class U2 extends _e{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}_e.registerComponent("Spacer",U2);class XB extends U2{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}_e.registerComponent("CustomControlSpacer",XB);class j2 extends _e{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}j2.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};_e.registerComponent("ControlBar",j2);class z2 extends Il{constructor(e,t){super(e,t),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}z2.prototype.options_=Object.assign({},Il.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});_e.registerComponent("ErrorDisplay",z2);class H2 extends _e{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ye("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Wn()}`)+"-"+t[1].replace(/\W+/g,""),s=Ye("option",{id:n,value:this.localize(t[0]),textContent:this.localize(t[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),s}))}}_e.registerComponent("TextTrackSelect",H2);class Ko extends _e{constructor(e,t={}){super(e,t);const n=Ye("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const s=this.options_.selects;for(const r of s){const o=this.options_.selectConfigs[r],l=o.className,u=o.id.replace("%s",this.options_.id_);let h=null;const d=`vjs_select_${Wn()}`;if(this.options_.type==="colors"){h=Ye("span",{className:l});const b=Ye("label",{id:u,className:"vjs-label",textContent:this.localize(o.label)});b.setAttribute("for",d),h.appendChild(b)}const m=new H2(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:d,labelId:u});this.addChild(m),this.options_.type==="colors"&&(h.appendChild(m.el()),this.el().appendChild(h))}}createEl(){return Ye("fieldset",{className:this.options_.className})}}_e.registerComponent("TextTrackFieldset",Ko);class $2 extends _e{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,s=new Ko(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const r=new Ko(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const o=new Ko(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return Ye("div",{className:"vjs-track-settings-colors"})}}_e.registerComponent("TextTrackSettingsColors",$2);class V2 extends _e{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,s=new Ko(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const r=new Ko(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const o=new Ko(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return Ye("div",{className:"vjs-track-settings-font"})}}_e.registerComponent("TextTrackSettingsFont",V2);class q2 extends _e{constructor(e,t={}){super(e,t);const n=this.localize("restore all settings to the default values"),s=new Ni(e,{controlText:n,className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const r=new Ni(e,{controlText:n,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return Ye("div",{className:"vjs-track-settings-controls"})}}_e.registerComponent("TrackSettingsControls",q2);const Sm="vjs-text-track-settings",Hb=["#000","Black"],$b=["#00F","Blue"],Vb=["#0FF","Cyan"],qb=["#0F0","Green"],Wb=["#F0F","Magenta"],Gb=["#F00","Red"],Xb=["#FFF","White"],Kb=["#FF0","Yellow"],wm=["1","Opaque"],Cm=["0.5","Semi-Transparent"],Zb=["0","Transparent"],Ur={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Hb,Xb,Gb,qb,$b,Kb,Wb,Vb],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[wm,Cm,Zb],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Xb,Hb,Gb,qb,$b,Kb,Wb,Vb],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:i=>i==="1.00"?null:Number(i)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[wm,Cm],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Zb,Cm,wm],className:"vjs-window-opacity vjs-opacity"}};Ur.windowColor.options=Ur.backgroundColor.options;function W2(i,e){if(e&&(i=e(i)),i&&i!=="none")return i}function KB(i,e){const t=i.options[i.options.selectedIndex].value;return W2(t,e)}function ZB(i,e,t){if(e){for(let n=0;n<i.options.length;n++)if(W2(i.options[n].value,t)===e){i.selectedIndex=n;break}}}class YB extends Il{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ye("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new $2(e,{textTrackComponentid:this.id_,selectConfigs:Ur,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new V2(e,{textTrackComponentid:this.id_,selectConfigs:Ur,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const s=new q2(e);this.addChild(s)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Za(Ur,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return N1(Ur,(e,t,n)=>{const s=KB(this.$(t.selector),t.parser);return s!==void 0&&(e[n]=s),e},{})}setValues(e){Za(Ur,(t,n)=>{ZB(this.$(t.selector),e[n],t.parser)})}setDefaults(){Za(Ur,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(q.localStorage.getItem(Sm))}catch(t){ct.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?q.localStorage.setItem(Sm,JSON.stringify(e)):q.localStorage.removeItem(Sm)}catch(t){ct.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}_e.registerComponent("TextTrackSettings",YB);class QB extends _e{constructor(e,t){let n=t.ResizeObserver||q.ResizeObserver;t.ResizeObserver===null&&(n=!1);const s=kt({createEl:!n,reportTouchActivity:!1},t);super(e,s),this.ResizeObserver=t.ResizeObserver||q.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=r2(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let o=this.unloadListener_=function(){Ri(this,"resize",r),Ri(this,"unload",o),o=null};Pn(this.el_.contentWindow,"unload",o),Pn(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}_e.registerComponent("ResizeManager",QB);const JB={trackingThreshold:20,liveTolerance:15};class e4 extends _e{constructor(e,t){const n=kt(JB,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(q.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const s=this.liveCurrentTime(),r=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Gn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}_e.registerComponent("LiveTracker",e4);class t4 extends _e{constructor(e,t){super(e,t),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ye("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Wn()}`}),description:Ye("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Wn()}`})},Ye("div",{className:"vjs-title-bar"},{},B1(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const r=this.state[s],o=this.els[s],l=n[s];Ef(o),r&&to(o,r),t&&(t.removeAttribute(l),r&&t.setAttribute(l,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}_e.registerComponent("TitleBar",t4);const i4={initialDisplay:4e3,position:[],takeFocus:!1};class n4 extends Ni{constructor(e,t){t=kt(i4,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ye("button",{},{type:"button",class:this.buildCSSClass()},Ye("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}_e.registerComponent("TransientButton",n4);const mg=i=>{const e=i.el();if(e.hasAttribute("src"))return i.triggerSourceset(e.src),!0;const t=i.$$("source"),n=[];let s="";if(!t.length)return!1;for(let r=0;r<t.length;r++){const o=t[r].src;o&&n.indexOf(o)===-1&&n.push(o)}return n.length?(n.length===1&&(s=n[0]),i.triggerSourceset(s),!0):!1},s4=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(i){const e=Ae.createElement(this.nodeName.toLowerCase());e.innerHTML=i;const t=Ae.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",q.Element.prototype.appendChild.call(this,t),this.innerHTML}}),G2=(i,e)=>{let t={};for(let n=0;n<i.length&&(t=Object.getOwnPropertyDescriptor(i[n],e),!(t&&t.set&&t.get));n++);return t.enumerable=!0,t.configurable=!0,t},r4=i=>G2([i.el(),q.HTMLMediaElement.prototype,q.Element.prototype,s4],"innerHTML"),Yb=function(i){const e=i.el();if(e.resetSourceWatch_)return;const t={},n=r4(i),s=r=>(...o)=>{const l=r.apply(e,o);return mg(i),l};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(t[r]=e[r],e[r]=s(t[r]))}),Object.defineProperty(e,"innerHTML",kt(n,{set:s(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(r=>{e[r]=t[r]}),Object.defineProperty(e,"innerHTML",n)},i.one("sourceset",e.resetSourceWatch_)},o4=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?m2(q.Element.prototype.getAttribute.call(this,"src")):""},set(i){return q.Element.prototype.setAttribute.call(this,"src",i),i}}),a4=i=>G2([i.el(),q.HTMLMediaElement.prototype,o4],"src"),l4=function(i){if(!i.featuresSourceset)return;const e=i.el();if(e.resetSourceset_)return;const t=a4(i),n=e.setAttribute,s=e.load;Object.defineProperty(e,"src",kt(t,{set:r=>{const o=t.set.call(e,r);return i.triggerSourceset(e.src),o}})),e.setAttribute=(r,o)=>{const l=n.call(e,r,o);return/src/i.test(r)&&i.triggerSourceset(e.src),l},e.load=()=>{const r=s.call(e);return mg(i)||(i.triggerSourceset(""),Yb(i)),r},e.currentSrc?i.triggerSourceset(e.currentSrc):mg(i)||Yb(i),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=n,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class He extends nt{constructor(e,t){super(e,t);const n=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let o=r.length;const l=[];for(;o--;){const u=r[o];u.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),!s&&!this.el_.hasAttribute("crossorigin")&&kf(u.src)&&(s=!0)):l.push(u))}for(let u=0;u<l.length;u++)this.el_.removeChild(l[u])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&ct.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(pc||Tf)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),He.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){l4(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let r=0;r<e.length;r++){const o=e[r];o.kind==="metadata"&&t.push({track:o,storedMode:o.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const s=()=>{for(let r=0;r<t.length;r++){const o=t[r];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",s)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(s=>{this.el()[`${n}Tracks`].removeEventListener(s,this[`${n}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Hn[e],n=this.el()[t.getterName],s=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:l=>{const u={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(u),e==="text"&&this[vl.remoteText.getterName]().trigger(u)},addtrack(l){s.addTrack(l.track)},removetrack(l){s.removeTrack(l.track)}},o=function(){const l=[];for(let u=0;u<s.length;u++){let h=!1;for(let d=0;d<n.length;d++)if(n[d]===s[u]){h=!0;break}h||l.push(s[u])}for(;l.length;)s.removeTrack(l.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach(l=>{const u=r[l];n.addEventListener(l,u),this.on("dispose",h=>n.removeEventListener(l,u))}),this.on("loadstart",o),this.on("dispose",l=>this.off("loadstart",o))}proxyNativeTracks_(){Hn.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),He.disposeMediaElement(e),e=n}else{e=Ae.createElement("video");const n=this.options_.tag&&Fr(this.options_.tag),s=kt({},n);(!pc||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,W1(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&ml(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const s=t[n],r=this.options_[s];typeof r<"u"&&(r?ml(e,s,s):wf(e,s),e[s]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const s=function(){n=!0};this.on("loadstart",s);const r=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),n||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&xf?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){ct(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&cs&&Us&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Is(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return ct.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const s=Ye("source",{},n);return this.el_.appendChild(s),!0}removeSourceElement(e){if(!e)return ct.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return ct.warn(`No matching source element found with src: ${e}`),!1}reset(){He.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Ae.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)(e===t[n]||e===t[n].track)&&this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),q.performance&&(e.creationTime=q.performance.now()),e}}yf(He,"TEST_VID",function(){if(!Dl())return;const i=Ae.createElement("video"),e=Ae.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",i.appendChild(e),i});He.isSupported=function(){try{He.TEST_VID.volume=.5}catch{return!1}return!!(He.TEST_VID&&He.TEST_VID.canPlayType)};He.canPlayType=function(i){return He.TEST_VID.canPlayType(i)};He.canPlaySource=function(i,e){return He.canPlayType(i.type)};He.canControlVolume=function(){try{const i=He.TEST_VID.volume;He.TEST_VID.volume=i/2+.1;const e=i!==He.TEST_VID.volume;return e&&Mi?(q.setTimeout(()=>{He&&He.prototype&&(He.prototype.featuresVolumeControl=i!==He.TEST_VID.volume)}),!1):e}catch{return!1}};He.canMuteVolume=function(){try{const i=He.TEST_VID.muted;return He.TEST_VID.muted=!i,He.TEST_VID.muted?ml(He.TEST_VID,"muted","muted"):wf(He.TEST_VID,"muted","muted"),i!==He.TEST_VID.muted}catch{return!1}};He.canControlPlaybackRate=function(){if(cs&&Us&&vf<58)return!1;try{const i=He.TEST_VID.playbackRate;return He.TEST_VID.playbackRate=i/2+.1,i!==He.TEST_VID.playbackRate}catch{return!1}};He.canOverrideAttributes=function(){try{const i=()=>{};Object.defineProperty(Ae.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(Ae.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(Ae.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(Ae.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0};He.supportsNativeTextTracks=function(){return xf||Mi&&Us};He.supportsNativeVideoTracks=function(){return!!(He.TEST_VID&&He.TEST_VID.videoTracks)};He.supportsNativeAudioTracks=function(){return!!(He.TEST_VID&&He.TEST_VID.audioTracks)};He.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([i,e]){yf(He.prototype,i,()=>He[e](),!0)});He.prototype.featuresVolumeControl=He.canControlVolume();He.prototype.movingMediaElementInDOM=!Mi;He.prototype.featuresFullscreenResize=!0;He.prototype.featuresProgressEvents=!0;He.prototype.featuresTimeupdateEvents=!0;He.prototype.featuresVideoFrameCallback=!!(He.TEST_VID&&He.TEST_VID.requestVideoFrameCallback);He.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()}};He.resetMediaElement=function(i){if(!i)return;const e=i.querySelectorAll("source");let t=e.length;for(;t--;)i.removeChild(e[t]);i.removeAttribute("src"),typeof i.load=="function"&&function(){try{i.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){He.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){He.prototype["set"+Yt(i)]=function(e){this.el_[i]=e,e?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){He.prototype[i]=function(){return this.el_[i]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){He.prototype["set"+Yt(i)]=function(e){this.el_[i]=e}});["pause","load","play"].forEach(function(i){He.prototype[i]=function(){return this.el_[i]()}});nt.withSourceHandlers(He);He.nativeSourceHandler={};He.nativeSourceHandler.canPlayType=function(i){try{return He.TEST_VID.canPlayType(i)}catch{return""}};He.nativeSourceHandler.canHandleSource=function(i,e){if(i.type)return He.nativeSourceHandler.canPlayType(i.type);if(i.src){const t=B_(i.src);return He.nativeSourceHandler.canPlayType(`video/${t}`)}return""};He.nativeSourceHandler.handleSource=function(i,e,t){e.setSrc(i.src)};He.nativeSourceHandler.dispose=function(){};He.registerSourceHandler(He.nativeSourceHandler);nt.registerTech("Html5",He);const X2=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Em={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},gg=["tiny","xsmall","small","medium","large","xlarge","huge"],Jh={};gg.forEach(i=>{const e=i.charAt(0)==="x"?`x-${i.substring(1)}`:i;Jh[i]=`vjs-layout-${e}`});const u4={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class zt extends _e{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Wn()}`,t=Object.assign(zt.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const o=e.closest("[lang]");o&&(t.language=o.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=M1(this.id_),this.fsApi_=xd,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Fr(e),this.language(this.options_.language),t.languages){const o={};Object.getOwnPropertyNames(t.languages).forEach(function(l){o[l.toLowerCase()]=t.languages[l]}),this.languages_=o}else this.languages_=zt.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),O_(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Pn(Ae,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=kt(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(o=>{this[o](t.plugins[o])}),t.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const l=new q.DOMParser().parseFromString(LB,"image/svg+xml");if(l.querySelector("parsererror"))ct.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const h=l.documentElement;h.style.display="none",this.el_.appendChild(h),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new OB(this),this.addClass("vjs-spatial-navigation-enabled")),pc&&this.addClass("vjs-touch-enabled"),Mi||this.addClass("vjs-workinghover"),zt.players[this.id_]=this;const r=og.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ri(Ae,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ri(Ae,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),zt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),DB(this),qi.names.forEach(e=>{const t=qi[e],n=this[t.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";n?t=this.el_=e.parentNode:s||(t=this.el_=super.createEl("div"));const r=Fr(e);if(s){for(t=this.el_=e,e=this.tag=Ae.createElement("video");t.children.length;)e.appendChild(t.firstChild);Xu(t,"video-js")||Go(t,"video-js"),t.appendChild(e),n=this.playerElIngest_=t,Object.keys(t).forEach(u=>{try{e[u]=t[u]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",Us&&bf&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(u){s&&u==="class"||t.setAttribute(u,r[u]),s&&e.setAttribute(u,r[u])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(u=>H1[u]).map(u=>"vjs-device-"+u.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),q.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=n2("vjs-styles-dimensions");const u=Yr(".vjs-styles-defaults"),h=Yr("head");h.insertBefore(this.styleEl_,u?u.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let u=0;u<l.length;u++){const h=l.item(u);Go(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),lg(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){ct.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(t===void 0)return this[n]||0;if(t===""||t==="auto"){this[n]=void 0,this.updateStyleEl_();return}const s=parseFloat(t);if(isNaN(s)){ct.error(`Improper value "${t}" supplied for for ${e}`);return}this[n]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,dr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),sB(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(q.VIDEOJS_NO_DYNAMIC_STYLE===!0){const l=typeof this.width_=="number"?this.width_:this.options_.width,u=typeof this.height_=="number"?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(l>=0&&(h.width=l),u>=0&&(h.height=u));return}let e,t,n,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const r=n.split(":"),o=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*o,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),s2(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${t}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Yt(e),s=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(nt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const o={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};qi.names.forEach(u=>{const h=qi[u];o[h.getterName]=this[h.privateName]}),Object.assign(o,this.options_[n]),Object.assign(o,this.options_[s]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const l=nt.getTech(e);if(!l)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new l(o),this.tech_.ready(Rt(this,this.handleTechReady_),!0),Ib.jsonToTextTracks(this.textTracksJson_||[],this.tech_),X2.forEach(u=>{this.on(this.tech_,u,h=>this[`handleTech${Yt(u)}_`](h))}),Object.keys(Em).forEach(u=>{this.on(this.tech_,u,h=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Em[u]}_`].bind(this),event:h});return}this[`handleTech${Em[u]}_`](h)})}),this.on(this.tech_,"loadstart",u=>this.handleTechLoadStart_(u)),this.on(this.tech_,"sourceset",u=>this.handleTechSourceset_(u)),this.on(this.tech_,"waiting",u=>this.handleTechWaiting_(u)),this.on(this.tech_,"ended",u=>this.handleTechEnded_(u)),this.on(this.tech_,"seeking",u=>this.handleTechSeeking_(u)),this.on(this.tech_,"play",u=>this.handleTechPlay_(u)),this.on(this.tech_,"pause",u=>this.handleTechPause_(u)),this.on(this.tech_,"durationchange",u=>this.handleTechDurationChange_(u)),this.on(this.tech_,"fullscreenchange",(u,h)=>this.handleTechFullscreenChange_(u,h)),this.on(this.tech_,"fullscreenerror",(u,h)=>this.handleTechFullscreenError_(u,h)),this.on(this.tech_,"enterpictureinpicture",u=>this.handleTechEnterPictureInPicture_(u)),this.on(this.tech_,"leavepictureinpicture",u=>this.handleTechLeavePictureInPicture_(u)),this.on(this.tech_,"error",u=>this.handleTechError_(u)),this.on(this.tech_,"posterchange",u=>this.handleTechPosterChange_(u)),this.on(this.tech_,"textdata",u=>this.handleTechTextData_(u)),this.on(this.tech_,"ratechange",u=>this.handleTechRateChange_(u)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&lg(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){qi.names.forEach(e=>{const t=qi[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=Ib.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&ct.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":og}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const o=this.play();if(Zu(o))return o.catch(l=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),Zu(n)&&(n=n.catch(t))):e==="muted"&&!this.muted()?n=t():n=this.play(),!!Zu(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,n="";typeof t!="string"&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=IB(this,t)),this.cache_.source=kt({},e,{src:t,type:n});const s=this.cache_.sources.filter(u=>u.src&&u.src===t),r=[],o=this.$$("source"),l=[];for(let u=0;u<o.length;u++){const h=Fr(o[u]);r.push(h),h.src&&h.src===t&&l.push(h.src)}l.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=r=>this.updateSourceCaches_(r);const n=this.currentSource().src,s=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==n)&&(t=()=>{}),t(s),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Is(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Ae.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let s=Ae[this.fsApi_.fullscreenElement]===n;!s&&n.matches&&(s=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in EB)return wB(this.middleware_,this.tech_,e,t);if(e in Nb)return Rb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw ct(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in CB)return SB(this.middleware_,this.tech_,e);if(e in Nb)return Rb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(ct(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(ct(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(ct(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Is){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(xf||Mi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&n&&this.load();return}const s=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||as(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=as(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=as(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return f2(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,s)=>{function r(){t.off("fullscreenerror",l),t.off("fullscreenchange",o)}function o(){r(),n()}function l(h,d){r(),s(d)}t.one("fullscreenchange",o),t.one("fullscreenerror",l);const u=t.requestFullscreenHelper_(e);u&&(u.then(r,r),u.then(n,s))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function s(){e.off("fullscreenerror",o),e.off("fullscreenchange",r)}function r(){s(),t()}function o(u,h){s(),n(h)}e.one("fullscreenchange",r),e.one("fullscreenerror",o);const l=e.exitFullscreenHelper_();l&&(l.then(s,s),l.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Ae[this.fsApi_.exitFullscreen]();return e&&Is(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ae.documentElement.style.overflow,Pn(Ae,"keydown",this.boundFullWindowOnEscKey_),Ae.documentElement.style.overflow="hidden",Go(Ae.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ri(Ae,"keydown",this.boundFullWindowOnEscKey_),Ae.documentElement.style.overflow=this.docOrigOverflow,Sf(Ae.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&q.documentPictureInPicture){const e=Ae.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ye("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),q.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(e2(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",n=>{const s=n.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Ae&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(q.documentPictureInPicture&&q.documentPictureInPicture.window)return q.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Ae)return Ae.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(s=>{const r=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?o.indexOf(s.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=o=>e.key.toLowerCase()==="f",muteKey:s=o=>e.key.toLowerCase()==="m",playPauseKey:r=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const o=_e.getComponent("FullscreenToggle");Ae[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),_e.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),_e.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,s=this.options_.techOrder;n<s.length;n++){const r=s[n];let o=nt.getTech(r);if(o||(o=_e.getComponent(r)),!o){ct.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(t=o.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(l=>[l,nt.getTech(l)]).filter(([l,u])=>u?u.isSupported():(ct.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(l,u,h){let d;return l.some(m=>u.some(b=>{if(d=h(m,b),d)return!0})),d};let s;const r=l=>(u,h)=>l(h,u),o=([l,u],h)=>{if(u.canPlaySource(h,this.options_[l.toLowerCase()]))return{source:h,tech:l}};return this.options_.sourceOrder?s=n(e,t,r(o)):s=n(t,e,o),s||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=y2(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),TB(this,n[0],(s,r)=>{if(this.middleware_=r,t||(this.cache_.sources=n),this.updateSourceCaches_(s),this.src_(s)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}xB(r,this.tech_)}),n.length>1){const s=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?u2(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Is(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),dr(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),t&&t.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Zr("beforeerror").forEach(t=>{const n=t(this,e);if(!(Fs(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Kt(e),this.addClass("vjs-error"),ct.error(`(CODE:${this.error_.code} ${Kt.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Zr("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const s=Rt(this,this.reportUserActivity),r=function(m){(m.screenX!==t||m.screenY!==n)&&(t=m.screenX,n=m.screenY,s())},o=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},l=function(m){s(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",r),this.on("mouseup",l),this.on("mouseleave",l);const u=this.getChild("controlBar");u&&!Mi&&!cs&&(u.on("mouseenter",function(m){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(m){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let h;const d=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);const m=this.options_.inactivityTimeout;m<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},m))};this.setInterval(d,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(s=>{s!==t&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),dr(this)&&this.trigger("languagechange"))}languages(){return kt(zt.prototype.options_.languages,this.languages_)}toJSON(){const e=kt(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let s=t[n];s=kt(s),s.player=void 0,e.tracks[n]=s}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new Il(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<gg.length;n++){const s=gg[n],r=this.breakpoints_[s];if(t<=r){if(e===s)return;e&&this.removeClass(Jh[e]),this.addClass(Jh[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},u4,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Jh[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=kt(e);const{artist:s,artwork:r,description:o,poster:l,src:u,textTracks:h,title:d}=this.cache_.media;!r&&l&&(this.cache_.media.artwork=[{src:l,type:Ld(l)}]),n&&this.crossOrigin(n),u&&this.src(u),l&&this.poster(l),Array.isArray(h)&&h.forEach(m=>this.addRemoteTextTrack(m,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||s||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),s={src:t,textTracks:n};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:Ld(s.poster)}]),s}return kt(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=Fr(e),s=n["data-setup"];if(Xu(e,"vjs-fill")&&(n.fill=!0),Xu(e,"vjs-fluid")&&(n.fluid=!0),s!==null)try{Object.assign(n,JSON.parse(s||"{}"))}catch(r){ct.error("data-setup",r)}if(Object.assign(t,n),e.hasChildNodes()){const r=e.childNodes;for(let o=0,l=r.length;o<l;o++){const u=r[o],h=u.nodeName.toLowerCase();h==="source"?t.sources.push(Fr(u)):h==="track"&&t.tracks.push(Fr(u))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}qi.names.forEach(function(i){const e=qi[i];zt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});zt.prototype.crossorigin=zt.prototype.crossOrigin;zt.players={};const Su=q.navigator;zt.prototype.options_={techOrder:nt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Su&&(Su.languages&&Su.languages[0]||Su.userLanguage||Su.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};X2.forEach(function(i){zt.prototype[`handleTech${Yt(i)}_`]=function(){return this.trigger(i)}});_e.registerComponent("Player",zt);const Od="plugin",Ja="activePlugins_",Fa={},Md=i=>Fa.hasOwnProperty(i),ed=i=>Md(i)?Fa[i]:void 0,K2=(i,e)=>{i[Ja]=i[Ja]||{},i[Ja][e]=!0},Rd=(i,e,t)=>{const n=(t?"before":"")+"pluginsetup";i.trigger(n,e),i.trigger(n+":"+e.name,e)},c4=function(i,e){const t=function(){Rd(this,{name:i,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return K2(this,i),Rd(this,{name:i,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},Qb=(i,e)=>(e.prototype.name=i,function(...t){Rd(this,{name:i,plugin:e,instance:null},!0);const n=new e(this,...t);return this[i]=()=>n,Rd(this,n.getEventHash()),n});class fn{constructor(e){if(this.constructor===fn)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),O_(this),delete this.trigger,l2(this,this.constructor.defaultState),K2(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return kl(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ja][e]=!1,this.player=this.state=null,t[e]=Qb(e,Fa[e])}static isBasic(e){const t=typeof e=="string"?ed(e):e;return typeof t=="function"&&!fn.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Md(e))ct.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(zt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Fa[e]=t,e!==Od&&(fn.isBasic(t)?zt.prototype[e]=c4(e,t):zt.prototype[e]=Qb(e,t)),t}static deregisterPlugin(e){if(e===Od)throw new Error("Cannot de-register base plugin.");Md(e)&&(delete Fa[e],delete zt.prototype[e])}static getPlugins(e=Object.keys(Fa)){let t;return e.forEach(n=>{const s=ed(n);s&&(t=t||{},t[n]=s)}),t}static getPluginVersion(e){const t=ed(e);return t&&t.VERSION||""}}fn.getPlugin=ed;fn.BASE_PLUGIN_NAME=Od;fn.registerPlugin(Od,fn);zt.prototype.usingPlugin=function(i){return!!this[Ja]&&this[Ja][i]===!0};zt.prototype.hasPlugin=function(i){return!!Md(i)};function h4(i,e){let t=!1;return function(...n){return t||ct.warn(i),t=!0,e.apply(this,n)}}function ds(i,e,t,n){return h4(`${e} is deprecated and will be removed in ${i}.0; please use ${t} instead.`,n)}var d4={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const Z2=i=>i.indexOf("#")===0?i.slice(1):i;function oe(i,e,t){let n=oe.getPlayer(i);if(n)return e&&ct.warn(`Player "${i}" is already initialised. Options will not be applied.`),t&&n.ready(t),n;const s=typeof i=="string"?Yr("#"+Z2(i)):i;if(!Pl(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in s?s.getRootNode()instanceof q.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!o.contains(s))&&ct.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),Zr("beforesetup").forEach(u=>{const h=u(s,kt(e));if(!Fs(h)||Array.isArray(h)){ct.error("please return an object in beforesetup hooks");return}e=kt(e,h)});const l=_e.getComponent("Player");return n=new l(s,e,t),Zr("setup").forEach(u=>u(n)),n}oe.hooks_=lr;oe.hooks=Zr;oe.hook=VN;oe.hookOnce=qN;oe.removeHook=O1;if(q.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Dl()){let i=Yr(".vjs-styles-defaults");if(!i){i=n2("vjs-styles-defaults");const e=Yr("head");e&&e.insertBefore(i,e.firstChild),s2(i,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}cg(1,oe);oe.VERSION=og;oe.options=zt.prototype.options_;oe.getPlayers=()=>zt.players;oe.getPlayer=i=>{const e=zt.players;let t;if(typeof i=="string"){const n=Z2(i),s=e[n];if(s)return s;t=Yr("#"+n)}else t=i;if(Pl(t)){const{player:n,playerId:s}=t;if(n||e[s])return n||e[s]}};oe.getAllPlayers=()=>Object.keys(zt.players).map(i=>zt.players[i]).filter(Boolean);oe.players=zt.players;oe.getComponent=_e.getComponent;oe.registerComponent=(i,e)=>(nt.isTech(e)&&ct.warn(`The ${i} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),_e.registerComponent.call(_e,i,e));oe.getTech=nt.getTech;oe.registerTech=nt.registerTech;oe.use=bB;Object.defineProperty(oe,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(oe.middleware,"TERMINATOR",{value:Id,writeable:!1,enumerable:!0});oe.browser=H1;oe.obj=XN;oe.mergeOptions=ds(9,"videojs.mergeOptions","videojs.obj.merge",kt);oe.defineLazyProperty=ds(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",yf);oe.bind=ds(9,"videojs.bind","native Function.prototype.bind",Rt);oe.registerPlugin=fn.registerPlugin;oe.deregisterPlugin=fn.deregisterPlugin;oe.plugin=(i,e)=>(ct.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),fn.registerPlugin(i,e));oe.getPlugins=fn.getPlugins;oe.getPlugin=fn.getPlugin;oe.getPluginVersion=fn.getPluginVersion;oe.addLanguage=function(i,e){return i=(""+i).toLowerCase(),oe.options.languages=kt(oe.options.languages,{[i]:e}),oe.options.languages[i]};oe.log=ct;oe.createLogger=M1;oe.time=uB;oe.createTimeRange=ds(9,"videojs.createTimeRange","videojs.time.createTimeRanges",as);oe.createTimeRanges=ds(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",as);oe.formatTime=ds(9,"videojs.formatTime","videojs.time.formatTime",ia);oe.setFormatTime=ds(9,"videojs.setFormatTime","videojs.time.setFormatTime",h2);oe.resetFormatTime=ds(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",d2);oe.parseUrl=ds(9,"videojs.parseUrl","videojs.url.parseUrl",N_);oe.isCrossOrigin=ds(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",kf);oe.EventTarget=kn;oe.any=L_;oe.on=Pn;oe.one=Df;oe.off=Ri;oe.trigger=kl;oe.xhr=y1;oe.TextTrack=Pc;oe.AudioTrack=g2;oe.VideoTrack=_2;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(i=>{oe[i]=function(){return ct.warn(`videojs.${i}() is deprecated; use videojs.dom.${i}() instead`),t2[i].apply(null,arguments)}});oe.computedStyle=ds(9,"videojs.computedStyle","videojs.dom.computedStyle",_l);oe.dom=t2;oe.fn=nB;oe.num=zB;oe.str=aB;oe.url=yB;oe.Error=d4;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class f4{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(n){t.enabled_(n)}}),t}}class Nd extends oe.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new f4(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,s=this.length;n<s;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const s=this[t];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Nd.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const i in Nd.prototype.allowedEvents_)Nd.prototype["on"+i]=null;var Y2="4.1.0";const p4=function(i,e){const t=i.qualityLevels,n=new Nd,s=function(){n.dispose(),i.qualityLevels=t,i.off("dispose",s)};return i.on("dispose",s),i.qualityLevels=()=>n,i.qualityLevels.VERSION=Y2,n},Q2=function(i){return p4(this,oe.obj.merge({},i))};oe.registerPlugin("qualityLevels",Q2);Q2.VERSION=Y2;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const on=pf,Bd=(i,e)=>e&&e.responseURL&&i!==e.responseURL?e.responseURL:i,Kn=i=>oe.log.debug?oe.log.debug.bind(oe,"VHS:",`${i} >`):function(){};function xt(...i){const e=oe.obj||oe;return(e.merge||e.mergeOptions).apply(e,i)}function bi(...i){const e=oe.time||oe;return(e.createTimeRanges||e.createTimeRanges).apply(e,i)}function m4(i){if(i.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<i.length;t++){const n=i.start(t),s=i.end(t);e+=`${n} --> ${s}. Duration (${s-n})
`}return e}const Ls=1/30,Os=Ls*3,J2=function(i,e){const t=[];let n;if(i&&i.length)for(n=0;n<i.length;n++)e(i.start(n),i.end(n))&&t.push([i.start(n),i.end(n)]);return bi(t)},Ua=function(i,e){return J2(i,function(t,n){return t-Os<=e&&n+Os>=e})},Fh=function(i,e){return J2(i,function(t){return t-Ls>=e})},g4=function(i){if(i.length<2)return bi();const e=[];for(let t=1;t<i.length;t++){const n=i.end(t-1),s=i.start(t);e.push([n,s])}return bi(e)},_4=function(i,e){let t=null,n=null,s=0;const r=[],o=[];if(!i||!i.length||!e||!e.length)return bi();let l=i.length;for(;l--;)r.push({time:i.start(l),type:"start"}),r.push({time:i.end(l),type:"end"});for(l=e.length;l--;)r.push({time:e.start(l),type:"start"}),r.push({time:e.end(l),type:"end"});for(r.sort(function(u,h){return u.time-h.time}),l=0;l<r.length;l++)r[l].type==="start"?(s++,s===2&&(t=r[l].time)):r[l].type==="end"&&(s--,s===1&&(n=r[l].time)),t!==null&&n!==null&&(o.push([t,n]),t=null,n=null);return bi(o)},ew=i=>{const e=[];if(!i||!i.length)return"";for(let t=0;t<i.length;t++)e.push(i.start(t)+" => "+i.end(t));return e.join(", ")},y4=function(i,e,t=1){return((i.length?i.end(i.length-1):0)-e)/t},zo=i=>{const e=[];for(let t=0;t<i.length;t++)e.push({start:i.start(t),end:i.end(t)});return e},v4=function(i,e){if(i===e)return!1;if(!i&&e||!e&&i||i.length!==e.length)return!0;for(let t=0;t<i.length;t++)if(i.start(t)!==e.start(t)||i.end(t)!==e.end(t))return!0;return!1},Am=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},J_=function(i,e){let t=0;if(!i||!i.length)return t;for(let n=0;n<i.length;n++){const s=i.start(n),r=i.end(n);if(!(e>r)){if(e>s&&e<=r){t+=r-e;continue}t+=r-s}}return t},e0=(i,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=i.partTargetDuration)}),t},_g=i=>(i.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(s,r){e.push({duration:s.duration,segmentIndex:n,partIndex:r,part:s,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),tw=i=>{const e=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return e&&e.parts||[]},iw=({preloadSegment:i})=>{if(!i)return;const{parts:e,preloadHints:t}=i;let n=(t||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},nw=(i,e)=>{if(e.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const t=tw(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},b4=function(i,e){let t=0,n=e-i.mediaSequence,s=i.segments[n];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;n--;){if(s=i.segments[n],typeof s.end<"u")return{result:t+s.end,precise:!0};if(t+=e0(i,s),typeof s.start<"u")return{result:t+s.start,precise:!0}}return{result:t,precise:!1}},T4=function(i,e){let t=0,n,s=e-i.mediaSequence;for(;s<i.segments.length;s++){if(n=i.segments[s],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=e0(i,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},sw=function(i,e,t){if(typeof e>"u"&&(e=i.mediaSequence+i.segments.length),e<i.mediaSequence)return 0;const n=b4(i,e);if(n.precise)return n.result;const s=T4(i,e);return s.precise?s.result:n.result+t},rw=function(i,e,t){if(!i)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return q.Infinity}return sw(i,e,t)},Yu=function({defaultDuration:i,durationList:e,startIndex:t,endIndex:n}){let s=0;if(t>n&&([t,n]=[n,t]),t<0){for(let r=t;r<Math.min(0,n);r++)s+=i;t=0}for(let r=t;r<n;r++)s+=e[r].duration;return s},ow=function(i,e,t,n){if(!i||!i.segments)return null;if(i.endList)return rw(i);if(e===null)return null;e=e||0;let s=sw(i,i.mediaSequence+i.segments.length,e);return t&&(n=typeof n=="number"?n:nw(null,i),s-=n),Math.max(0,s)},x4=function(i,e,t){const s=e||0;let r=ow(i,e,!0,t);return r===null?bi():(r<s&&(r=s),bi(s,r))},S4=function({playlist:i,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:s,exactManifestTimings:r}){let o=e-s;const l=_g(i);let u=0;for(let h=0;h<l.length;h++){const d=l[h];if(t===d.segmentIndex&&!(typeof n=="number"&&typeof d.partIndex=="number"&&n!==d.partIndex)){u=h;break}}if(o<0){if(u>0)for(let h=u-1;h>=0;h--){const d=l[h];if(o+=d.duration,r){if(o<0)continue}else if(o+Ls<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:s-Yu({defaultDuration:i.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e}}if(u<0){for(let h=u;h<0;h++)if(o-=i.targetDuration,o<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e};u=0}for(let h=u;h<l.length;h++){const d=l[h];o-=d.duration;const m=d.duration>Ls,b=o===0,T=m&&o+Ls>=0;if(!((b||T)&&h!==l.length-1)){if(r){if(o>0)continue}else if(o-Ls>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:s+Yu({defaultDuration:i.targetDuration,durationList:l,startIndex:u,endIndex:h})}}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:e}},aw=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},t0=function(i){return i.excludeUntil&&i.excludeUntil===1/0},Mf=function(i){const e=aw(i);return!i.disabled&&!e},w4=function(i){return i.disabled},C4=function(i){for(let e=0;e<i.segments.length;e++)if(i.segments[e].key)return!0;return!1},lw=function(i,e){return e.attributes&&e.attributes[i]},E4=function(i,e,t,n=0){return lw("BANDWIDTH",t)?(i*t.attributes.BANDWIDTH-n*8)/e:NaN},yg=(i,e)=>{if(i.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(n=>Mf(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},i0=(i,e)=>!i&&!e||!i&&e||i&&!e?!1:!!(i===e||i.id&&e.id&&i.id===e.id||i.resolvedUri&&e.resolvedUri&&i.resolvedUri===e.resolvedUri||i.uri&&e.uri&&i.uri===e.uri),Jb=function(i,e){const t=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let n=!1;for(const s in t){for(const r in t[s])if(n=e(t[s][r]),n)break;if(n)break}return!!n},Oc=i=>{if(!i||!i.playlists||!i.playlists.length)return Jb(i,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<i.playlists.length;e++){const t=i.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(r=>T1(r))||Jb(i,r=>i0(t,r))))return!1}return!0};var ln={liveEdgeDelay:nw,duration:rw,seekable:x4,getMediaInfoForTime:S4,isEnabled:Mf,isDisabled:w4,isExcluded:aw,isIncompatible:t0,playlistEnd:ow,isAes:C4,hasAttribute:lw,estimateSegmentRequestTime:E4,isLowestEnabledRendition:yg,isAudioOnly:Oc,playlistMatch:i0,segmentDurationWithParts:e0};const{log:uw}=oe,el=(i,e)=>`${i}-${e}`,cw=(i,e,t)=>`placeholder-uri-${i}-${e}-${t}`,A4=({onwarn:i,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:s=[],llhls:r})=>{const o=new d3;i&&o.on("warn",i),e&&o.on("info",e),n.forEach(h=>o.addParser(h)),s.forEach(h=>o.addTagMapper(h)),o.push(t),o.end();const l=o.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(h){l.hasOwnProperty(h)&&delete l[h]}),l.segments&&l.segments.forEach(function(h){["parts","preloadHints"].forEach(function(d){h.hasOwnProperty(d)&&delete h[d]})})),!l.targetDuration){let h=10;l.segments&&l.segments.length&&(h=l.segments.reduce((d,m)=>Math.max(d,m.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${h}`}),l.targetDuration=h}const u=tw(l);if(u.length&&!l.partTargetDuration){const h=u.reduce((d,m)=>Math.max(d,m.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${h}`}),uw.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=h}return l},Ml=(i,e)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(i.mediaGroups[t])for(const n in i.mediaGroups[t])for(const s in i.mediaGroups[t][n]){const r=i.mediaGroups[t][n][s];e(r,t,n,s)}})},hw=({playlist:i,uri:e,id:t})=>{i.id=t,i.playlistErrors_=0,e&&(i.uri=e),i.attributes=i.attributes||{}},D4=i=>{let e=i.playlists.length;for(;e--;){const t=i.playlists[e];hw({playlist:t,id:el(e,t.uri)}),t.resolvedUri=on(i.uri,t.uri),i.playlists[t.id]=t,i.playlists[t.uri]=t,t.attributes.BANDWIDTH||uw.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},P4=i=>{Ml(i,e=>{e.uri&&(e.resolvedUri=on(i.uri,e.uri))})},k4=(i,e)=>{const t=el(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.location.href,resolvedUri:q.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},dw=(i,e,t=cw)=>{i.uri=e;for(let s=0;s<i.playlists.length;s++)if(!i.playlists[s].uri){const r=`placeholder-uri-${s}`;i.playlists[s].uri=r}const n=Oc(i);Ml(i,(s,r,o,l)=>{if(!s.playlists||!s.playlists.length){if(n&&r==="AUDIO"&&!s.uri)for(let u=0;u<i.playlists.length;u++){const h=i.playlists[u];if(h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===o)return}s.playlists=[ii({},s)]}s.playlists.forEach(function(u,h){const d=t(r,o,l,u),m=el(h,d);u.uri?u.resolvedUri=u.resolvedUri||on(i.uri,u.uri):(u.uri=h===0?d:m,u.resolvedUri=u.uri),u.id=u.id||m,u.attributes=u.attributes||{},i.playlists[u.id]=u,i.playlists[u.uri]=u})}),D4(i),P4(i)};class eT{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,s)=>{if(!this.processedDateRanges_.has(s)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const r=e[n.class].push(n);n.classListIndex=r-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const s=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&s[n.classListIndex+1]?n.endTime=s[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,s)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const fw=22,Zo=({requestType:i,request:e,error:t,parseFailure:n})=>{const s=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:i},l=s&&!r||n;if(t&&r)o.error=ii({},t),o.errorType=oe.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=oe.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=oe.Error.NetworkRequestTimeout;else if(l){const u=n?oe.Error.NetworkBodyParserFailed:oe.Error.NetworkBadStatus;o.errorType=u,o.status=e.status,o.headers=e.headers}return o},I4=Kn("CodecUtils"),pw=function(i){const e=i.attributes||{};if(e.CODECS)return Ds(e.CODECS)},mw=(i,e)=>{const t=e.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&t.AUDIO&&i.mediaGroups.AUDIO[t.AUDIO]},L4=(i,e)=>{if(!mw(i,e))return!0;const t=e.attributes||{},n=i.mediaGroups.AUDIO[t.AUDIO];for(const s in n)if(!n[s].uri&&!n[s].playlists)return!0;return!1},_c=function(i){const e={};return i.forEach(({mediaType:t,type:n,details:s})=>{e[t]=e[t]||[],e[t].push(b1(`${n}${s}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){I4(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},tT=function(i){let e=0;return i.audio&&e++,i.video&&e++,e},Qu=function(i,e){const t=e.attributes||{},n=_c(pw(e)||[]);if(mw(i,e)&&!n.audio&&!L4(i,e)){const s=_c(p3(i,t.AUDIO)||[]);s.audio&&(n.audio=s.audio)}return n},{EventTarget:O4}=oe,M4=(i,e)=>{if(e.endList||!e.serverControl)return i;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let s=e.mediaSequence+e.segments.length;if(n){const r=n.parts||[],o=iw(e)-1;o>-1&&o!==r.length-1&&(t._HLS_part=o),(o>-1||r.length)&&s--}t._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new q.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){t.hasOwnProperty(s)&&n.searchParams.set(s,t[s])}),i=n.toString()}return i},R4=(i,e)=>{if(!i)return e;const t=xt(i,e);if(i.preloadHints&&!e.preloadHints&&delete t.preloadHints,i.parts&&!e.parts)delete t.parts;else if(i.parts&&e.parts)for(let n=0;n<e.parts.length;n++)i.parts&&i.parts[n]&&(t.parts[n]=xt(i.parts[n],e.parts[n]));return!i.skipped&&e.skipped&&(t.skipped=!1),i.preload&&!e.preload&&(t.preload=!1),t},N4=(i,e,t)=>{const n=i.slice(),s=e.slice();t=t||0;const r=[];let o;for(let l=0;l<s.length;l++){const u=n[l+t],h=s[l];u?(o=u.map||o,r.push(R4(u,h))):(o&&!h.map&&(h.map=o),r.push(h))}return r},gw=(i,e)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=on(e,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=on(e,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=on(e,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=on(e,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=on(e,t.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=on(e,t.uri))})},_w=function(i){const e=i.segments||[],t=i.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=i.targetDuration,t.preload=!0,e.push(t)}return e},yw=(i,e)=>i===e||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.endList===e.endList&&i.mediaSequence===e.mediaSequence&&i.preloadSegment===e.preloadSegment,vg=(i,e,t=yw)=>{const n=xt(i,{}),s=n.playlists[e.id];if(!s||t(s,e))return null;e.segments=_w(e);const r=xt(s,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}r.segments=N4(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}r.segments.forEach(o=>{gw(o,r.resolvedUri)});for(let o=0;o<n.playlists.length;o++)n.playlists[o].id===e.id&&(n.playlists[o]=r);return n.playlists[e.id]=r,n.playlists[e.uri]=r,Ml(i,(o,l,u,h)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=r)}),n},bg=(i,e)=>{const t=i.segments||[],n=t[t.length-1],s=n&&n.parts&&n.parts[n.parts.length-1],r=s&&s.duration||n&&n.duration;return e&&r?r*1e3:(i.partTargetDuration||i.targetDuration||10)*500},iT=(i,e,t)=>{if(!i)return;const n=[];return i.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:r,RESOLUTION:o,CODECS:l}=s.attributes;n.push({id:s.id,bandwidth:r,resolution:o,codecs:l})}),{type:e,isLive:t,renditions:n}};class ja extends O4{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Kn("PlaylistLoader");const{withCredentials:s=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=s,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new eT,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=on(this.main.uri,e.uri);this.llhls&&(t=M4(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:s,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Zo({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const n=A4({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!n.playlists||!n.playlists.length||this.excludeAudioOnlyVariants(n.playlists),n}catch(n){this.error=n,this.error.metadata={errorType:oe.Error.StreamingHlsPlaylistParserError,error:n}}}excludeAudioOnlyVariants(e){const t=n=>{const s=n.attributes||{},{width:r,height:o}=s.RESOLUTION||{};if(r&&o)return!0;const l=pw(n)||[];return!!_c(l).video};e.some(t)&&e.forEach(n=>{t(n)||(n.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:s}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:r});const o=t||this.parseManifest_({url:n,manifestString:e});o.lastRequest=Date.now(),hw({playlist:o,uri:n,id:s});const l=vg(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(bg(this.media(),!!l)),r.parsedPlaylist=iT(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),q.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new eT,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(q.clearTimeout(this.finalRenditionTimeout),t){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=q.setTimeout(this.media.bind(this,e,!1),l);return}const n=this.state,s=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(bg(e,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(l,u)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Bd(e.resolvedUri,u),l)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:u.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=q.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:Zo({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Bd(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const s=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=iT(s.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,dw(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=_w(n),n.segments.forEach(s=>{gw(s,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||q.location.href;this.main=k4(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,s=e.ID;let r=n.playlists.length;for(;r--;){const o=n.playlists[r];if(o.attributes["PATHWAY-ID"]===s){const l=o.resolvedUri,u=o.id;if(t){const h=this.createCloneURI_(o.resolvedUri,e),d=el(s,h),m=this.createCloneAttributes_(s,o.attributes),b=this.createClonePlaylist_(o,d,e,m);n.playlists[r]=b,n.playlists[d]=b,n.playlists[h]=b}else n.playlists.splice(r,1);delete n.playlists[u],delete n.playlists[l]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!n.mediaGroups[r]||!n.mediaGroups[r][s])){for(const o in n.mediaGroups[r])if(o===s){for(const l in n.mediaGroups[r][o])n.mediaGroups[r][o][l].playlists.forEach((h,d)=>{const m=n.playlists[h.id],b=m.id,T=m.resolvedUri;delete n.playlists[b],delete n.playlists[T]});delete n.mediaGroups[r][o]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,s=n.playlists.length,r=this.createCloneURI_(t.resolvedUri,e),o=el(e.ID,r),l=this.createCloneAttributes_(e.ID,t.attributes),u=this.createClonePlaylist_(t,o,e,l);n.playlists[s]=u,n.playlists[o]=u,n.playlists[r]=u,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||s.mediaGroups[r][t]))for(const o in s.mediaGroups[r]){if(o===n)s.mediaGroups[r][t]={};else continue;for(const l in s.mediaGroups[r][o]){const u=s.mediaGroups[r][o][l];s.mediaGroups[r][t][l]=ii({},u);const h=s.mediaGroups[r][t][l],d=this.createCloneURI_(u.resolvedUri,e);h.resolvedUri=d,h.uri=d,h.playlists=[],u.playlists.forEach((m,b)=>{const T=s.playlists[m.id],C=cw(r,t,l),x=el(t,C);if(T&&!s.playlists[x]){const A=this.createClonePlaylist_(T,x,e),P=A.resolvedUri;s.playlists[x]=A,s.playlists[P]=A}h.playlists[b]=this.createClonePlaylist_(m,x,e)})}}})}createClonePlaylist_(e,t,n,s){const r=this.createCloneURI_(e.resolvedUri,n),o={resolvedUri:r,uri:r,id:t};return e.segments&&(o.segments=[]),s&&(o.attributes=s),xt(e,o)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const s=t["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))n.searchParams.set(r,s[r]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{t[s]&&(n[s]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes.keyId;s&&t.add(s.toLowerCase())}return t}}}const Tg=function(i,e,t,n){const s=i.responseType==="arraybuffer"?i.response:i.responseText;!e&&s&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=s.byteLength||s.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),t.headers&&(i.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(i.timedout=!0),!e&&!i.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(i&&(s||i.responseText)))),n(e,i)},B4=(i,e)=>{if(!i||!i.size)return;let t=e;return i.forEach(n=>{t=n(t)}),t},F4=(i,e,t,n)=>{!i||!i.size||i.forEach(s=>{s(e,t,n)})},vw=function(){const i=function e(t,n){t=xt({timeout:45e3},t);const s=e.beforeRequest||oe.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||oe.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||oe.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(oe.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const l=oe.Vhs.xhr.original===!0?oe.xhr:oe.Vhs.xhr,u=B4(r,t);r.delete(s);const h=l(u||t,function(m,b){return F4(o,h,m,b),Tg(h,m,b,n)}),d=h.abort;return h.abort=function(){return h.aborted=!0,d.apply(h,arguments)},h.uri=t.uri,h.requestType=t.requestType,h.requestTime=Date.now(),h};return i.original=!0,i},U4=function(i){let e;const t=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=q.BigInt(i.offset)+q.BigInt(i.length)-q.BigInt(1):e=i.offset+i.length-1,"bytes="+t+"-"+e},xg=function(i){const e={};return i.byterange&&(e.Range=U4(i.byterange)),e},j4=function(i,e){return i.start(e)+"-"+i.end(e)},z4=function(i,e){const t=i.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},H4=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},bw=function(i){const e={};return Object.keys(i).forEach(t=>{const n=i[t];S1(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},Fd=function(i){const e=i.byterange||{length:1/0,offset:0};return[e.length,e.offset,i.resolvedUri].join(",")},Tw=function(i){return i.resolvedUri},xw=i=>{const e=Array.prototype.slice.call(i),t=16;let n="",s,r;for(let o=0;o<e.length/t;o++)s=e.slice(o*t,o*t+t).map(z4).join(""),r=e.slice(o*t,o*t+t).map(H4).join(""),n+=s+" "+r+`
`;return n},$4=({bytes:i})=>xw(i),V4=i=>{let e="",t;for(t=0;t<i.length;t++)e+=j4(i,t)+" ";return e};var q4=Object.freeze({__proto__:null,createTransferableMessage:bw,initSegmentId:Fd,segmentKeyId:Tw,hexDump:xw,tagDump:$4,textRanges:V4});const Sw=.25,W4=(i,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+t,r=i-s;return new Date(e.dateTimeObject.getTime()+r*1e3)},G4=i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,X4=(i,e)=>{let t;try{t=new Date(i)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let u=0;u<e.segments.length-1;u++){n=e.segments[u];const h=new Date(e.segments[u+1].dateTimeObject);if(t<h)break}const s=e.segments[e.segments.length-1],r=s.dateTimeObject,o=s.videoTimingInfo?G4(s.videoTimingInfo):s.duration+s.duration*Sw,l=new Date(r.getTime()+o*1e3);return t>l?null:(t>new Date(r)&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:ln.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},K4=(i,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let r=0;r<e.segments.length&&(n=e.segments[r],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(i<=t));r++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>t){if(i>t+s.duration*Sw)return null;n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},Z4=(i,e)=>{let t,n;try{t=new Date(i),n=new Date(e)}catch{}const s=t.getTime();return(n.getTime()-s)/1e3},Y4=i=>{if(!i.segments||i.segments.length===0)return!1;for(let e=0;e<i.segments.length;e++)if(!i.segments[e].dateTimeObject)return!1;return!0},Q4=({playlist:i,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=K4(e,i);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const s={mediaSeconds:e},r=W4(e,n.segment);return r&&(s.programDateTime=r.toISOString()),t(null,s)},ww=({programTime:i,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:s=!0,tech:r,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!e||!n)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!Y4(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const l=X4(i,e);if(!l)return o({message:`${i} was not found in the stream`});const u=l.segment,h=Z4(u.dateTimeObject,i);if(l.type==="estimate"){if(t===0)return o({message:`${i} is not buffered yet. Try again`});n(l.estimatedStart+h),r.one("seeked",()=>{ww({programTime:i,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:s,tech:r,callback:o})});return}const d=u.start+h,m=()=>o(null,r.currentTime());r.one("seeked",m),s&&r.pause(),n(d)},Dm=(i,e)=>{if(i.readyState===4)return e()},J4=(i,e,t,n)=>{let s=[],r,o=!1;const l=function(m,b,T,C){return b.abort(),o=!0,t(m,b,T,C)},u=function(m,b){if(o)return;if(m)return m.metadata=Zo({requestType:n,request:b,error:m}),l(m,b,"",s);const T=b.responseText.substring(s&&s.byteLength||0,b.responseText.length);if(s=w3(s,w1(T,!0)),r=r||Lu(s),s.length<10||r&&s.length<r+2)return Dm(b,()=>l(m,b,"",s));const C=A_(s);return C==="ts"&&s.length<188?Dm(b,()=>l(m,b,"",s)):!C&&s.length<376?Dm(b,()=>l(m,b,"",s)):l(null,b,C,s)},d=e({uri:i,beforeSend(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function({total:b,loaded:T}){return Tg(m,null,{statusCode:m.status},u)})}},function(m,b){return Tg(d,m,b,u)});return d},{EventTarget:eF}=oe,nT=function(i,e){if(!yw(i,e)||i.sidx&&e.sidx&&(i.sidx.offset!==e.sidx.offset||i.sidx.length!==e.sidx.length))return!1;if(!i.sidx&&e.sidx||i.sidx&&!e.sidx||i.segments&&!e.segments||!i.segments&&e.segments)return!1;if(!i.segments&&!e.segments)return!0;for(let t=0;t<i.segments.length;t++){const n=i.segments[t],s=e.segments[t];if(n.uri!==s.uri)return!1;if(!n.byterange&&!s.byterange)continue;const r=n.byterange,o=s.byterange;if(r&&!o||!r&&o||r.offset!==o.offset||r.length!==o.length)return!1}return!0},tF=(i,e,t,n)=>{const s=n.attributes.NAME||t;return`placeholder-uri-${i}-${e}-${s}`},iF=({mainXml:i,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:s})=>{const r=xN(i,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:s});return dw(r,e,tF),r},nF=(i,e)=>{Ml(i,(t,n,s,r)=>{(!e.mediaGroups[n][s]||!(r in e.mediaGroups[n][s]))&&delete i.mediaGroups[n][s][r]})},sF=(i,e,t)=>{let n=!0,s=xt(i,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const o=e.playlists[r];if(o.sidx){const u=gf(o.sidx);t&&t[u]&&t[u].sidx&&w_(o,t[u].sidx,o.sidx.resolvedUri)}const l=vg(s,o,nT);l&&(s=l,n=!1)}return Ml(e,(r,o,l,u)=>{if(r.playlists&&r.playlists.length){const h=r.playlists[0].id,d=vg(s,r.playlists[0],nT);d&&(s=d,u in s.mediaGroups[o][l]||(s.mediaGroups[o][l][u]=r),s.mediaGroups[o][l][u].playlists[0]=s.playlists[h],n=!1)}}),nF(s,e),e.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(n=!1),n?null:s},rF=(i,e)=>(!i.map&&!e.map||!!(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length))&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length,sT=(i,e)=>{const t={};for(const n in i){const r=i[n].sidx;if(r){const o=gf(r);if(!e[o])break;const l=e[o].sidxInfo;rF(l,r)&&(t[o]=e[o])}}return t},oF=(i,e)=>{let n=sT(i.playlists,e);return Ml(i,(s,r,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists;n=xt(n,sT(u,e))}}),n};class Sg extends eF{constructor(e,t,n={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Kn("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const s=e.sidx&&gf(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>n(!1),0);return}const r=Bd(e.sidx.resolvedUri),o=(u,h)=>{if(this.requestErrored_(u,h,t))return;const d=this.mainPlaylistLoader_.sidxMapping_,{requestType:m}=h;let b;try{b=AN(Ge(h.response).subarray(8))}catch(T){T.metadata=Zo({requestType:m,request:h,parseFailure:!0}),this.requestErrored_(T,h,t);return}return d[s]={sidxInfo:e.sidx,sidx:b},w_(e,b,e.sidx.resolvedUri),n(!0)},l="dash-sidx";this.request=J4(r,this.vhs_.xhr,(u,h,d,m)=>{if(u)return o(u,h);if(!d||d!=="mp4"){const C=d||"unknown";return o({status:h.status,message:`Unsupported ${C} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},h)}const{offset:b,length:T}=e.sidx.byterange;if(m.length>=T+b)return o(u,{response:m.subarray(b,b+T),status:h.status,uri:h.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:xg({byterange:e.sidx.byterange})},o)},l)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},q.clearTimeout(this.minimumUpdatePeriodTimeout_),q.clearTimeout(this.mediaRequest_),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,s=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(q.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,s)=>{if(n){const{requestType:o}=s;n.metadata=Zo({requestType:o,request:s,error:n})}if(this.requestErrored_(n,s)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const r=s.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Bd(this.mainPlaylistLoader_.srcUrl,s),r){this.handleMain_(),this.syncClientServerClock_(()=>e(s,r));return}return e(s,r)})}syncClientServerClock_(e){const t=SN(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:on(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,s)=>{if(!this.request)return;if(n){const{requestType:o}=s;return this.error.metadata=Zo({requestType:o,request:s,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;t.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(s.responseHeaders.date):r=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=iF({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:oe.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(n=sF(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:r,endList:o}=n,l=[];n.playlists.forEach(h=>{l.push({id:h.id,bandwidth:h.attributes.BANDWIDTH,resolution:h.attributes.RESOLUTION,codecs:h.attributes.CODECS})});const u={duration:r,isLive:!o,renditions:l};t.parsedManifest=u,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(q.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=q.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=oF(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=q.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},bg(this.media(),!!n)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const s=e.contentProtection[n].attributes["cenc:default_KID"];s&&t.add(s.replace(/-/g,"").toLowerCase())}return t}}}var _i={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const aF=i=>{const e=new Uint8Array(new ArrayBuffer(i.length));for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e.buffer},Cw=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},lF=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(i),URL.createObjectURL(t.getBlob())}},Ew=function(i){return function(){const e=lF(i),t=Cw(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},Aw=function(i){return`var browserWorkerPolyFill = ${Cw.toString()};
browserWorkerPolyFill(self);
`+i},Dw=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},uF=Aw(Dw(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(g,y){f[g]||(f[g]=[]),f[g]=f[g].concat(y)},this.off=function(g,y){var _;return f[g]?(_=f[g].indexOf(y),f[g]=f[g].slice(),f[g].splice(_,1),_>-1):!1},this.trigger=function(g){var y,_,S,E;if(y=f[g],!!y)if(arguments.length===2)for(S=y.length,_=0;_<S;++_)y[_].call(this,arguments[1]);else{for(E=[],_=arguments.length,_=1;_<arguments.length;++_)E.push(arguments[_]);for(S=y.length,_=0;_<S;++_)y[_].apply(this,E)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(g){f.push(g)}),this.on("done",function(g){f.flush(g)}),this.on("partialdone",function(g){f.partialFlush(g)}),this.on("endedtimeline",function(g){f.endTimeline(g)}),this.on("reset",function(g){f.reset(g)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,n=Math.pow(2,32),s=function(f){var g=new DataView(f.buffer,f.byteOffset,f.byteLength),y;return g.getBigUint64?(y=g.getBigUint64(0),y<Number.MAX_SAFE_INTEGER?Number(y):y):g.getUint32(0)*n+g.getUint32(4)},r={getUint64:s,MAX_UINT32:n},o=r.MAX_UINT32,l,u,h,d,m,b,T,C,x,A,P,k,I,F,j,V,U,K,D,R,Y,Q,J,ae,ce,le,ne,ee,fe,re,de,Le,$e,Fe,Ie,ze;(function(){var f;if(J={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in J)J.hasOwnProperty(f)&&(J[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);ae=new Uint8Array([105,115,111,109]),le=new Uint8Array([97,118,99,49]),ce=new Uint8Array([0,0,0,1]),ne=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ee=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:ne,audio:ee},Le=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),de=new Uint8Array([0,0,0,0,0,0,0,0]),$e=new Uint8Array([0,0,0,0,0,0,0,0]),Fe=$e,Ie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ze=$e,re=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(f){var g=[],y=0,_,S,E;for(_=1;_<arguments.length;_++)g.push(arguments[_]);for(_=g.length;_--;)y+=g[_].byteLength;for(S=new Uint8Array(y+8),E=new DataView(S.buffer,S.byteOffset,S.byteLength),E.setUint32(0,S.byteLength),S.set(f,4),_=0,y=8;_<g.length;_++)S.set(g[_],y),y+=g[_].byteLength;return S},u=function(){return l(J.dinf,l(J.dref,Le))},h=function(f){return l(J.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},d=function(){return l(J.ftyp,ae,ce,ae,le)},V=function(f){return l(J.hdlr,fe[f])},m=function(f){return l(J.mdat,f)},j=function(f){var g=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(g[12]=f.samplerate>>>24&255,g[13]=f.samplerate>>>16&255,g[14]=f.samplerate>>>8&255,g[15]=f.samplerate&255),l(J.mdhd,g)},F=function(f){return l(J.mdia,j(f),V(f.type),T(f))},b=function(f){return l(J.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},T=function(f){return l(J.minf,f.type==="video"?l(J.vmhd,re):l(J.smhd,de),u(),K(f))},C=function(f,g){for(var y=[],_=g.length;_--;)y[_]=R(g[_]);return l.apply(null,[J.moof,b(f)].concat(y))},x=function(f){for(var g=f.length,y=[];g--;)y[g]=k(f[g]);return l.apply(null,[J.moov,P(4294967295)].concat(y).concat(A(f)))},A=function(f){for(var g=f.length,y=[];g--;)y[g]=Y(f[g]);return l.apply(null,[J.mvex].concat(y))},P=function(f){var g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(J.mvhd,g)},U=function(f){var g=f.samples||[],y=new Uint8Array(4+g.length),_,S;for(S=0;S<g.length;S++)_=g[S].flags,y[S+4]=_.dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy;return l(J.sdtp,y)},K=function(f){return l(J.stbl,D(f),l(J.stts,ze),l(J.stsc,Fe),l(J.stsz,Ie),l(J.stco,$e))},function(){var f,g;D=function(y){return l(J.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),y.type==="video"?f(y):g(y))},f=function(y){var _=y.sps||[],S=y.pps||[],E=[],B=[],z,H;for(z=0;z<_.length;z++)E.push((_[z].byteLength&65280)>>>8),E.push(_[z].byteLength&255),E=E.concat(Array.prototype.slice.call(_[z]));for(z=0;z<S.length;z++)B.push((S[z].byteLength&65280)>>>8),B.push(S[z].byteLength&255),B=B.concat(Array.prototype.slice.call(S[z]));if(H=[J.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(y.width&65280)>>8,y.width&255,(y.height&65280)>>8,y.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(J.avcC,new Uint8Array([1,y.profileIdc,y.profileCompatibility,y.levelIdc,255].concat([_.length],E,[S.length],B))),l(J.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],y.sarRatio){var W=y.sarRatio[0],te=y.sarRatio[1];H.push(l(J.pasp,new Uint8Array([(W&4278190080)>>24,(W&16711680)>>16,(W&65280)>>8,W&255,(te&4278190080)>>24,(te&16711680)>>16,(te&65280)>>8,te&255])))}return l.apply(null,H)},g=function(y){return l(J.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(y.channelcount&65280)>>8,y.channelcount&255,(y.samplesize&65280)>>8,y.samplesize&255,0,0,0,0,(y.samplerate&65280)>>8,y.samplerate&255,0,0]),h(y))}}(),I=function(f){var g=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return l(J.tkhd,g)},R=function(f){var g,y,_,S,E,B,z;return g=l(J.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),B=Math.floor(f.baseMediaDecodeTime/o),z=Math.floor(f.baseMediaDecodeTime%o),y=l(J.tfdt,new Uint8Array([1,0,0,0,B>>>24&255,B>>>16&255,B>>>8&255,B&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255])),E=92,f.type==="audio"?(_=Q(f,E),l(J.traf,g,y,_)):(S=U(f),_=Q(f,S.length+E),l(J.traf,g,y,_,S))},k=function(f){return f.duration=f.duration||4294967295,l(J.trak,I(f),F(f))},Y=function(f){var g=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(g[g.length-1]=0),l(J.trex,g)},function(){var f,g,y;y=function(_,S){var E=0,B=0,z=0,H=0;return _.length&&(_[0].duration!==void 0&&(E=1),_[0].size!==void 0&&(B=2),_[0].flags!==void 0&&(z=4),_[0].compositionTimeOffset!==void 0&&(H=8)),[0,0,E|B|z|H,1,(_.length&4278190080)>>>24,(_.length&16711680)>>>16,(_.length&65280)>>>8,_.length&255,(S&4278190080)>>>24,(S&16711680)>>>16,(S&65280)>>>8,S&255]},g=function(_,S){var E,B,z,H,W,te;for(H=_.samples||[],S+=20+16*H.length,z=y(H,S),B=new Uint8Array(z.length+H.length*16),B.set(z),E=z.length,te=0;te<H.length;te++)W=H[te],B[E++]=(W.duration&4278190080)>>>24,B[E++]=(W.duration&16711680)>>>16,B[E++]=(W.duration&65280)>>>8,B[E++]=W.duration&255,B[E++]=(W.size&4278190080)>>>24,B[E++]=(W.size&16711680)>>>16,B[E++]=(W.size&65280)>>>8,B[E++]=W.size&255,B[E++]=W.flags.isLeading<<2|W.flags.dependsOn,B[E++]=W.flags.isDependedOn<<6|W.flags.hasRedundancy<<4|W.flags.paddingValue<<1|W.flags.isNonSyncSample,B[E++]=W.flags.degradationPriority&61440,B[E++]=W.flags.degradationPriority&15,B[E++]=(W.compositionTimeOffset&4278190080)>>>24,B[E++]=(W.compositionTimeOffset&16711680)>>>16,B[E++]=(W.compositionTimeOffset&65280)>>>8,B[E++]=W.compositionTimeOffset&255;return l(J.trun,B)},f=function(_,S){var E,B,z,H,W,te;for(H=_.samples||[],S+=20+8*H.length,z=y(H,S),E=new Uint8Array(z.length+H.length*8),E.set(z),B=z.length,te=0;te<H.length;te++)W=H[te],E[B++]=(W.duration&4278190080)>>>24,E[B++]=(W.duration&16711680)>>>16,E[B++]=(W.duration&65280)>>>8,E[B++]=W.duration&255,E[B++]=(W.size&4278190080)>>>24,E[B++]=(W.size&16711680)>>>16,E[B++]=(W.size&65280)>>>8,E[B++]=W.size&255;return l(J.trun,E)},Q=function(_,S){return _.type==="audio"?f(_,S):g(_,S)}}();var pe={ftyp:d,mdat:m,moof:C,moov:x,initSegment:function(f){var g=d(),y=x(f),_;return _=new Uint8Array(g.byteLength+y.byteLength),_.set(g),_.set(y,g.byteLength),_}},Ce=function(f){var g,y,_=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,_.byteLength=0,g=0;g<f.length;g++)y=f[g],y.nalUnitType==="access_unit_delimiter_rbsp"?(_.length&&(_.duration=y.dts-_.dts,S.byteLength+=_.byteLength,S.nalCount+=_.length,S.duration+=_.duration,S.push(_)),_=[y],_.byteLength=y.data.byteLength,_.pts=y.pts,_.dts=y.dts):(y.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(_.keyFrame=!0),_.duration=y.dts-_.dts,_.byteLength+=y.data.byteLength,_.push(y));return S.length&&(!_.duration||_.duration<=0)&&(_.duration=S[S.length-1].duration),S.byteLength+=_.byteLength,S.nalCount+=_.length,S.duration+=_.duration,S.push(_),S},De=function(f){var g,y,_=[],S=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=f[0].pts,_.dts=f[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=f[0].pts,S.dts=f[0].dts,g=0;g<f.length;g++)y=f[g],y.keyFrame?(_.length&&(S.push(_),S.byteLength+=_.byteLength,S.nalCount+=_.nalCount,S.duration+=_.duration),_=[y],_.nalCount=y.length,_.byteLength=y.byteLength,_.pts=y.pts,_.dts=y.dts,_.duration=y.duration):(_.duration+=y.duration,_.nalCount+=y.length,_.byteLength+=y.byteLength,_.push(y));return S.length&&_.duration<=0&&(_.duration=S[S.length-1].duration),S.byteLength+=_.byteLength,S.nalCount+=_.nalCount,S.duration+=_.duration,S.push(_),S},Ue=function(f){var g;return!f[0][0].keyFrame&&f.length>1&&(g=f.shift(),f.byteLength-=g.byteLength,f.nalCount-=g.nalCount,f[0][0].dts=g.dts,f[0][0].pts=g.pts,f[0][0].duration+=g.duration),f},Qe=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},$=function(f,g){var y=Qe();return y.dataOffset=g,y.compositionTimeOffset=f.pts-f.dts,y.duration=f.duration,y.size=4*f.length,y.size+=f.byteLength,f.keyFrame&&(y.flags.dependsOn=2,y.flags.isNonSyncSample=0),y},G=function(f,g){var y,_,S,E,B,z=g||0,H=[];for(y=0;y<f.length;y++)for(E=f[y],_=0;_<E.length;_++)B=E[_],S=$(B,z),z+=S.size,H.push(S);return H},ie=function(f){var g,y,_,S,E,B,z=0,H=f.byteLength,W=f.nalCount,te=H+4*W,me=new Uint8Array(te),Me=new DataView(me.buffer);for(g=0;g<f.length;g++)for(S=f[g],y=0;y<S.length;y++)for(E=S[y],_=0;_<E.length;_++)B=E[_],Me.setUint32(z,B.data.byteLength),z+=4,me.set(B.data,z),z+=B.data.byteLength;return me},be=function(f,g){var y,_=g||0,S=[];return y=$(f,_),S.push(y),S},ye=function(f){var g,y,_=0,S=f.byteLength,E=f.length,B=S+4*E,z=new Uint8Array(B),H=new DataView(z.buffer);for(g=0;g<f.length;g++)y=f[g],H.setUint32(_,y.data.byteLength),_+=4,z.set(y.data,_),_+=y.data.byteLength;return z},xe={groupNalsIntoFrames:Ce,groupFramesIntoGops:De,extendFirstKeyFrame:Ue,generateSampleTable:G,concatenateNalData:ie,generateSampleTableForFrame:be,concatenateNalDataForFrame:ye},Pe=[33,16,5,32,164,27],Ee=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Se=function(f){for(var g=[];f--;)g.push(0);return g},ve=function(f){return Object.keys(f).reduce(function(g,y){return g[y]=new Uint8Array(f[y].reduce(function(_,S){return _.concat(S)},[])),g},{})},je,Oe=function(){if(!je){var f={96e3:[Pe,[227,64],Se(154),[56]],88200:[Pe,[231],Se(170),[56]],64e3:[Pe,[248,192],Se(240),[56]],48e3:[Pe,[255,192],Se(268),[55,148,128],Se(54),[112]],44100:[Pe,[255,192],Se(268),[55,163,128],Se(84),[112]],32e3:[Pe,[255,192],Se(268),[55,234],Se(226),[112]],24e3:[Pe,[255,192],Se(268),[55,255,128],Se(268),[111,112],Se(126),[224]],16e3:[Pe,[255,192],Se(268),[55,255,128],Se(268),[111,255],Se(269),[223,108],Se(195),[1,192]],12e3:[Ee,Se(268),[3,127,248],Se(268),[6,255,240],Se(268),[13,255,224],Se(268),[27,253,128],Se(259),[56]],11025:[Ee,Se(268),[3,127,248],Se(268),[6,255,240],Se(268),[13,255,224],Se(268),[27,255,192],Se(268),[55,175,128],Se(108),[112]],8e3:[Ee,Se(268),[3,121,16],Se(47),[7]]};je=ve(f)}return je},Ve=9e4,qe,Je,lt,ut,Qt,Ht,Jt;qe=function(f){return f*Ve},Je=function(f,g){return f*g},lt=function(f){return f/Ve},ut=function(f,g){return f/g},Qt=function(f,g){return qe(ut(f,g))},Ht=function(f,g){return Je(lt(f),g)},Jt=function(f,g,y){return lt(y?f:f-g)};var rt={ONE_SECOND_IN_TS:Ve,secondsToVideoTs:qe,secondsToAudioTs:Je,videoTsToSeconds:lt,audioTsToSeconds:ut,audioTsToVideoTs:Qt,videoTsToAudioTs:Ht,metadataTsToSeconds:Jt},mn=Oe,Yi=rt,ei=function(f){var g,y,_=0;for(g=0;g<f.length;g++)y=f[g],_+=y.data.byteLength;return _},mi=function(f,g,y,_){var S,E=0,B=0,z=0,H=0,W,te,me;if(g.length&&(S=Yi.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),E=Math.ceil(Yi.ONE_SECOND_IN_TS/(f.samplerate/1024)),y&&_&&(B=S-Math.max(y,_),z=Math.floor(B/E),H=z*E),!(z<1||H>Yi.ONE_SECOND_IN_TS/2))){for(W=mn()[f.samplerate],W||(W=g[0].data),te=0;te<z;te++)me=g[0],g.splice(0,0,{data:W,dts:me.dts-E,pts:me.pts-E});return f.baseMediaDecodeTime-=Math.floor(Yi.videoTsToAudioTs(H,f.samplerate)),H}},Ti=function(f,g,y){return g.minSegmentDts>=y?f:(g.minSegmentDts=1/0,f.filter(function(_){return _.dts>=y?(g.minSegmentDts=Math.min(g.minSegmentDts,_.dts),g.minSegmentPts=g.minSegmentDts,!0):!1}))},aa=function(f){var g,y,_=[];for(g=0;g<f.length;g++)y=f[g],_.push({size:y.data.byteLength,duration:1024});return _},io=function(f){var g,y,_=0,S=new Uint8Array(ei(f));for(g=0;g<f.length;g++)y=f[g],S.set(y.data,_),_+=y.data.byteLength;return S},no={prefixWithSilence:mi,trimAdtsFramesByEarliestDts:Ti,generateSampleTable:aa,concatenateFrameData:io},Rl=rt.ONE_SECOND_IN_TS,O=function(f,g){typeof g.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=g.pts),f.minSegmentPts===void 0?f.minSegmentPts=g.pts:f.minSegmentPts=Math.min(f.minSegmentPts,g.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=g.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,g.pts)),typeof g.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=g.dts),f.minSegmentDts===void 0?f.minSegmentDts=g.dts:f.minSegmentDts=Math.min(f.minSegmentDts,g.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=g.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,g.dts))},N=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Z=function(f,g){var y,_,S=f.minSegmentDts;return g||(S-=f.timelineStartInfo.dts),y=f.timelineStartInfo.baseMediaDecodeTime,y+=S,y=Math.max(0,y),f.type==="audio"&&(_=f.samplerate/Rl,y*=_,y=Math.floor(y)),y},he={clearDtsInfo:N,calculateTrackBaseMediaDecodeTime:Z,collectDtsInfo:O},ke=4,Ke=128,St=function(f){for(var g=0,y={payloadType:-1,payloadSize:0},_=0,S=0;g<f.byteLength&&f[g]!==Ke;){for(;f[g]===255;)_+=255,g++;for(_+=f[g++];f[g]===255;)S+=255,g++;if(S+=f[g++],!y.payload&&_===ke){var E=String.fromCharCode(f[g+3],f[g+4],f[g+5],f[g+6]);if(E==="GA94"){y.payloadType=_,y.payloadSize=S,y.payload=f.subarray(g,g+S);break}else y.payload=void 0}g+=S,_=0,S=0}return y},si=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},gn=function(f,g){var y=[],_,S,E,B;if(!(g[0]&64))return y;for(S=g[0]&31,_=0;_<S;_++)E=_*3,B={type:g[E+2]&3,pts:f},g[E+2]&4&&(B.ccData=g[E+3]<<8|g[E+4],y.push(B));return y},Fi=function(f){for(var g=f.byteLength,y=[],_=1,S,E;_<g-2;)f[_]===0&&f[_+1]===0&&f[_+2]===3?(y.push(_+2),_+=2):_++;if(y.length===0)return f;S=g-y.length,E=new Uint8Array(S);var B=0;for(_=0;_<S;B++,_++)B===y[0]&&(B++,y.shift()),E[_]=f[B];return E},Qi={parseSei:St,parseUserData:si,parseCaptionPackets:gn,discardEmulationPreventionBytes:Fi,USER_DATA_REGISTERED_ITU_T_T35:ke},_n=t,qt=Qi,Re=function(f){f=f||{},Re.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Lt(0,0),new Lt(0,1),new Lt(1,0),new Lt(1,1)],this.parse708captions_&&(this.cc708Stream_=new dt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(g){g.on("data",this.trigger.bind(this,"data")),g.on("partialdone",this.trigger.bind(this,"partialdone")),g.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Re.prototype=new _n,Re.prototype.push=function(f){var g,y,_;if(f.nalUnitType==="sei_rbsp"&&(g=qt.parseSei(f.escapedRBSP),!!g.payload&&g.payloadType===qt.USER_DATA_REGISTERED_ITU_T_T35&&(y=qt.parseUserData(g),!!y))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}_=qt.parseCaptionPackets(f.pts,y),this.captionPackets_=this.captionPackets_.concat(_),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},Re.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(g){return f==="flush"?g.flush():g.partialFlush()},this)},Re.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(g,y){g.presortIndex=y}),this.captionPackets_.sort(function(g,y){return g.pts===y.pts?g.presortIndex-y.presortIndex:g.pts-y.pts}),this.captionPackets_.forEach(function(g){g.type<2?this.dispatchCea608Packet(g):this.dispatchCea708Packet(g)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},Re.prototype.flush=function(){return this.flushStream("flush")},Re.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Re.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},Re.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},Re.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},Re.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},Re.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},Re.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var Ui={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},In=function(f){var g=Ui[f]||f;return f&4096&&f===g?"":String.fromCharCode(g)},yn=function(f){return 32<=f&&f<=127||160<=f&&f<=255},wt=function(f){this.windowNum=f,this.reset()};wt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},wt.prototype.getText=function(){return this.rows.join(`
`)},wt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},wt.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},wt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},wt.prototype.addText=function(f){this.rows[this.rowIdx]+=f},wt.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var Zn=function(f,g,y){this.serviceNum=f,this.text="",this.currentWindow=new wt(-1),this.windows=[],this.stream=y,typeof g=="string"&&this.createTextDecoder(g)};Zn.prototype.init=function(f,g){this.startPts=f;for(var y=0;y<8;y++)this.windows[y]=new wt(y),typeof g=="function"&&(this.windows[y].beforeRowOverflow=g)},Zn.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},Zn.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(g){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+g})}};var dt=function(f){f=f||{},dt.prototype.init.call(this);var g=this,y=f.captionServices||{},_={},S;Object.keys(y).forEach(E=>{S=y[E],/^SERVICE/.test(E)&&(_[E]=S.encoding)}),this.serviceEncodings=_,this.current708Packet=null,this.services={},this.push=function(E){E.type===3?(g.new708Packet(),g.add708Bytes(E)):(g.current708Packet===null&&g.new708Packet(),g.add708Bytes(E))}};dt.prototype=new _n,dt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},dt.prototype.add708Bytes=function(f){var g=f.ccData,y=g>>>8,_=g&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(y),this.current708Packet.data.push(_)},dt.prototype.push708Packet=function(){var f=this.current708Packet,g=f.data,y=null,_=null,S=0,E=g[S++];for(f.seq=E>>6,f.sizeCode=E&63;S<g.length;S++)E=g[S++],y=E>>5,_=E&31,y===7&&_>0&&(E=g[S++],y=E),this.pushServiceBlock(y,S,_),_>0&&(S+=_-1)},dt.prototype.pushServiceBlock=function(f,g,y){var _,S=g,E=this.current708Packet.data,B=this.services[f];for(B||(B=this.initService(f,S));S<g+y&&S<E.length;S++)_=E[S],yn(_)?S=this.handleText(S,B):_===24?S=this.multiByteCharacter(S,B):_===16?S=this.extendedCommands(S,B):128<=_&&_<=135?S=this.setCurrentWindow(S,B):152<=_&&_<=159?S=this.defineWindow(S,B):_===136?S=this.clearWindows(S,B):_===140?S=this.deleteWindows(S,B):_===137?S=this.displayWindows(S,B):_===138?S=this.hideWindows(S,B):_===139?S=this.toggleWindows(S,B):_===151?S=this.setWindowAttributes(S,B):_===144?S=this.setPenAttributes(S,B):_===145?S=this.setPenColor(S,B):_===146?S=this.setPenLocation(S,B):_===143?B=this.reset(S,B):_===8?B.currentWindow.backspace():_===12?B.currentWindow.clearText():_===13?B.currentWindow.pendingNewLine=!0:_===14?B.currentWindow.clearText():_===141&&S++},dt.prototype.extendedCommands=function(f,g){var y=this.current708Packet.data,_=y[++f];return yn(_)&&(f=this.handleText(f,g,{isExtended:!0})),f},dt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},dt.prototype.initService=function(f,g){var _="SERVICE"+f,y=this,_,S;return _ in this.serviceEncodings&&(S=this.serviceEncodings[_]),this.services[f]=new Zn(f,S,y),this.services[f].init(this.getPts(g),function(E){y.flushDisplayed(E,y.services[f])}),this.services[f]},dt.prototype.handleText=function(f,g,y){var _=y&&y.isExtended,S=y&&y.isMultiByte,E=this.current708Packet.data,B=_?4096:0,z=E[f],H=E[f+1],W=g.currentWindow,te,me;function Me(Te){return Te.map(We=>("0"+(We&255).toString(16)).slice(-2)).join("")}if(S?(me=[z,H],f++):me=[z],g.textDecoder_&&!_)te=g.textDecoder_.decode(new Uint8Array(me));else if(S){const Te=Me(me);te=String.fromCharCode(parseInt(Te,16))}else te=In(B|z);return W.pendingNewLine&&!W.isEmpty()&&W.newLine(this.getPts(f)),W.pendingNewLine=!1,W.addText(te),f},dt.prototype.multiByteCharacter=function(f,g){var y=this.current708Packet.data,_=y[f+1],S=y[f+2];return yn(_)&&yn(S)&&(f=this.handleText(++f,g,{isMultiByte:!0})),f},dt.prototype.setCurrentWindow=function(f,g){var y=this.current708Packet.data,_=y[f],S=_&7;return g.setCurrentWindow(S),f},dt.prototype.defineWindow=function(f,g){var y=this.current708Packet.data,_=y[f],S=_&7;g.setCurrentWindow(S);var E=g.currentWindow;return _=y[++f],E.visible=(_&32)>>5,E.rowLock=(_&16)>>4,E.columnLock=(_&8)>>3,E.priority=_&7,_=y[++f],E.relativePositioning=(_&128)>>7,E.anchorVertical=_&127,_=y[++f],E.anchorHorizontal=_,_=y[++f],E.anchorPoint=(_&240)>>4,E.rowCount=_&15,_=y[++f],E.columnCount=_&63,_=y[++f],E.windowStyle=(_&56)>>3,E.penStyle=_&7,E.virtualRowCount=E.rowCount+1,f},dt.prototype.setWindowAttributes=function(f,g){var y=this.current708Packet.data,_=y[f],S=g.currentWindow.winAttr;return _=y[++f],S.fillOpacity=(_&192)>>6,S.fillRed=(_&48)>>4,S.fillGreen=(_&12)>>2,S.fillBlue=_&3,_=y[++f],S.borderType=(_&192)>>6,S.borderRed=(_&48)>>4,S.borderGreen=(_&12)>>2,S.borderBlue=_&3,_=y[++f],S.borderType+=(_&128)>>5,S.wordWrap=(_&64)>>6,S.printDirection=(_&48)>>4,S.scrollDirection=(_&12)>>2,S.justify=_&3,_=y[++f],S.effectSpeed=(_&240)>>4,S.effectDirection=(_&12)>>2,S.displayEffect=_&3,f},dt.prototype.flushDisplayed=function(f,g){for(var y=[],_=0;_<8;_++)g.windows[_].visible&&!g.windows[_].isEmpty()&&y.push(g.windows[_].getText());g.endPts=f,g.text=y.join(`

`),this.pushCaption(g),g.startPts=f},dt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},dt.prototype.displayWindows=function(f,g){var y=this.current708Packet.data,_=y[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var E=0;E<8;E++)_&1<<E&&(g.windows[E].visible=1);return f},dt.prototype.hideWindows=function(f,g){var y=this.current708Packet.data,_=y[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var E=0;E<8;E++)_&1<<E&&(g.windows[E].visible=0);return f},dt.prototype.toggleWindows=function(f,g){var y=this.current708Packet.data,_=y[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var E=0;E<8;E++)_&1<<E&&(g.windows[E].visible^=1);return f},dt.prototype.clearWindows=function(f,g){var y=this.current708Packet.data,_=y[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var E=0;E<8;E++)_&1<<E&&g.windows[E].clearText();return f},dt.prototype.deleteWindows=function(f,g){var y=this.current708Packet.data,_=y[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var E=0;E<8;E++)_&1<<E&&g.windows[E].reset();return f},dt.prototype.setPenAttributes=function(f,g){var y=this.current708Packet.data,_=y[f],S=g.currentWindow.penAttr;return _=y[++f],S.textTag=(_&240)>>4,S.offset=(_&12)>>2,S.penSize=_&3,_=y[++f],S.italics=(_&128)>>7,S.underline=(_&64)>>6,S.edgeType=(_&56)>>3,S.fontStyle=_&7,f},dt.prototype.setPenColor=function(f,g){var y=this.current708Packet.data,_=y[f],S=g.currentWindow.penColor;return _=y[++f],S.fgOpacity=(_&192)>>6,S.fgRed=(_&48)>>4,S.fgGreen=(_&12)>>2,S.fgBlue=_&3,_=y[++f],S.bgOpacity=(_&192)>>6,S.bgRed=(_&48)>>4,S.bgGreen=(_&12)>>2,S.bgBlue=_&3,_=y[++f],S.edgeRed=(_&48)>>4,S.edgeGreen=(_&12)>>2,S.edgeBlue=_&3,f},dt.prototype.setPenLocation=function(f,g){var y=this.current708Packet.data,_=y[f],S=g.currentWindow.penLoc;return g.currentWindow.pendingNewLine=!0,_=y[++f],S.row=_&15,_=y[++f],S.column=_&63,f},dt.prototype.reset=function(f,g){var y=this.getPts(f);return this.flushDisplayed(y,g),this.initService(g.serviceNum,f)};var Yn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},so=function(f){return f===null?"":(f=Yn[f]||f,String.fromCharCode(f))},la=14,Rf=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Vs=function(){for(var f=[],g=la+1;g--;)f.push({text:"",indent:0,offset:0});return f},Lt=function(f,g){Lt.prototype.init.call(this),this.field_=f||0,this.dataChannel_=g||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(y){var _,S,E,B,z;if(_=y.ccData&32639,_===this.lastControlCode_){this.lastControlCode_=null;return}if((_&61440)===4096?this.lastControlCode_=_:_!==this.PADDING_&&(this.lastControlCode_=null),E=_>>>8,B=_&255,_!==this.PADDING_)if(_===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(_===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(y.pts),this.flushDisplayed(y.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=y.pts;else if(_===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(y.pts);else if(_===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(y.pts);else if(_===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(y.pts);else if(_===this.CARRIAGE_RETURN_)this.clearFormatting(y.pts),this.flushDisplayed(y.pts),this.shiftRowsUp_(),this.startPts_=y.pts;else if(_===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(_===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(y.pts),this.displayed_=Vs();else if(_===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Vs();else if(_===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(y.pts),this.displayed_=Vs()),this.mode_="paintOn",this.startPts_=y.pts;else if(this.isSpecialCharacter(E,B))E=(E&3)<<8,z=so(E|B),this[this.mode_](y.pts,z),this.column_++;else if(this.isExtCharacter(E,B))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),E=(E&3)<<8,z=so(E|B),this[this.mode_](y.pts,z),this.column_++;else if(this.isMidRowCode(E,B))this.clearFormatting(y.pts),this[this.mode_](y.pts," "),this.column_++,(B&14)===14&&this.addFormatting(y.pts,["i"]),(B&1)===1&&this.addFormatting(y.pts,["u"]);else if(this.isOffsetControlCode(E,B)){const W=B&3;this.nonDisplayed_[this.row_].offset=W,this.column_+=W}else if(this.isPAC(E,B)){var H=Rf.indexOf(_&7968);if(this.mode_==="rollUp"&&(H-this.rollUpRows_+1<0&&(H=this.rollUpRows_-1),this.setRollUp(y.pts,H)),H!==this.row_&&H>=0&&H<=14&&(this.clearFormatting(y.pts),this.row_=H),B&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(y.pts,["u"]),(_&16)===16){const W=(_&14)>>1;this.column_=W*4,this.nonDisplayed_[this.row_].indent+=W}this.isColorPAC(B)&&(B&14)===14&&this.addFormatting(y.pts,["i"])}else this.isNormalChar(E)&&(B===0&&(B=null),z=so(E),z+=so(B),this[this.mode_](y.pts,z),this.column_+=z.length)}};Lt.prototype=new _n,Lt.prototype.flushDisplayed=function(f){const g=_=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+_+"."})},y=[];this.displayed_.forEach((_,S)=>{if(_&&_.text&&_.text.length){try{_.text=_.text.trim()}catch{g(S)}_.text.length&&y.push({text:_.text,line:S+1,position:10+Math.min(70,_.indent*10)+_.offset*2.5})}else _==null&&g(S)}),y.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:y,stream:this.name_})},Lt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Vs(),this.nonDisplayed_=Vs(),this.lastControlCode_=null,this.column_=0,this.row_=la,this.rollUpRows_=2,this.formatting_=[]},Lt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Lt.prototype.isSpecialCharacter=function(f,g){return f===this.EXT_&&g>=48&&g<=63},Lt.prototype.isExtCharacter=function(f,g){return(f===this.EXT_+1||f===this.EXT_+2)&&g>=32&&g<=63},Lt.prototype.isMidRowCode=function(f,g){return f===this.EXT_&&g>=32&&g<=47},Lt.prototype.isOffsetControlCode=function(f,g){return f===this.OFFSET_&&g>=33&&g<=35},Lt.prototype.isPAC=function(f,g){return f>=this.BASE_&&f<this.BASE_+8&&g>=64&&g<=127},Lt.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},Lt.prototype.isNormalChar=function(f){return f>=32&&f<=127},Lt.prototype.setRollUp=function(f,g){if(this.mode_!=="rollUp"&&(this.row_=la,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Vs(),this.displayed_=Vs()),g!==void 0&&g!==this.row_)for(var y=0;y<this.rollUpRows_;y++)this.displayed_[g-y]=this.displayed_[this.row_-y],this.displayed_[this.row_-y]={text:"",indent:0,offset:0};g===void 0&&(g=this.row_),this.topRow_=g-this.rollUpRows_+1},Lt.prototype.addFormatting=function(f,g){this.formatting_=this.formatting_.concat(g);var y=g.reduce(function(_,S){return _+"<"+S+">"},"");this[this.mode_](f,y)},Lt.prototype.clearFormatting=function(f){if(this.formatting_.length){var g=this.formatting_.reverse().reduce(function(y,_){return y+"</"+_+">"},"");this.formatting_=[],this[this.mode_](f,g)}},Lt.prototype.popOn=function(f,g){var y=this.nonDisplayed_[this.row_].text;y+=g,this.nonDisplayed_[this.row_].text=y},Lt.prototype.rollUp=function(f,g){var y=this.displayed_[this.row_].text;y+=g,this.displayed_[this.row_].text=y},Lt.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<la+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Lt.prototype.paintOn=function(f,g){var y=this.displayed_[this.row_].text;y+=g,this.displayed_[this.row_].text=y};var Nl={CaptionStream:Re,Cea608Stream:Lt,Cea708Stream:dt},ua={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ca=t,Nf=8589934592,Bf=4294967296,Mc="shared",Bl=function(f,g){var y=1;for(f>g&&(y=-1);Math.abs(g-f)>Bf;)f+=y*Nf;return f},Fl=function(f){var g,y;Fl.prototype.init.call(this),this.type_=f||Mc,this.push=function(_){if(_.type==="metadata"){this.trigger("data",_);return}this.type_!==Mc&&_.type!==this.type_||(y===void 0&&(y=_.dts),_.dts=Bl(_.dts,y),_.pts=Bl(_.pts,y),g=_.dts,this.trigger("data",_))},this.flush=function(){y=g,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){y=void 0,g=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Fl.prototype=new ca;var ha={TimestampRolloverStream:Fl,handleRollover:Bl},ro=(f,g,y)=>{if(!f)return-1;for(var _=y;_<f.length;_++)if(f[_]===g)return _;return-1},Rc={typedArrayIndexOf:ro},oo=Rc.typedArrayIndexOf,fs={Utf8:3},pt=function(f,g,y){var _,S="";for(_=g;_<y;_++)S+="%"+("00"+f[_].toString(16)).slice(-2);return S},Ct=function(f,g,y){return decodeURIComponent(pt(f,g,y))},ps=function(f,g,y){return unescape(pt(f,g,y))},Ln=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},On={APIC:function(f){var g=1,y,_,S="-->";f.data[0]===fs.Utf8&&(y=oo(f.data,0,g),!(y<0)&&(f.mimeType=ps(f.data,g,y),g=y+1,f.pictureType=f.data[g],g++,_=oo(f.data,0,g),!(_<0)&&(f.description=Ct(f.data,g,_),g=_+1,f.mimeType===S?f.url=ps(f.data,g,f.data.length):f.pictureData=f.data.subarray(g,f.data.length))))},"T*":function(f){f.data[0]===fs.Utf8&&(f.value=Ct(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var g;f.data[0]===fs.Utf8&&(g=oo(f.data,0,1),g!==-1&&(f.description=Ct(f.data,1,g),f.value=Ct(f.data,g+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=ps(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var g;f.data[0]===fs.Utf8&&(g=oo(f.data,0,1),g!==-1&&(f.description=Ct(f.data,1,g),f.url=ps(f.data,g+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var g;for(g=0;g<f.data.length;g++)if(f.data[g]===0){f.owner=ps(f.data,0,g);break}f.privateData=f.data.subarray(g+1),f.data=f.privateData}},Ul=function(f){var g,y,_=10,S=0,E=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){S=Ln(f.subarray(6,10)),S+=10;var B=f[5]&64;B&&(_+=4,_+=Ln(f.subarray(10,14)),S-=Ln(f.subarray(16,20)));do{if(g=Ln(f.subarray(_+4,_+8)),g<1)break;y=String.fromCharCode(f[_],f[_+1],f[_+2],f[_+3]);var z={id:y,data:f.subarray(_+10,_+g+10)};z.key=z.id,On[z.id]?On[z.id](z):z.id[0]==="T"?On["T*"](z):z.id[0]==="W"&&On["W*"](z),E.push(z),_+=10,_+=g}while(_<S);return E}},it={parseId3Frames:Ul,parseSyncSafeInteger:Ln,frameParsers:On},Wt=t,jl=ua,vn=it,xi;xi=function(f){var g={descriptor:f&&f.descriptor},y=0,_=[],S=0,E;if(xi.prototype.init.call(this),this.dispatchType=jl.METADATA_STREAM_TYPE.toString(16),g.descriptor)for(E=0;E<g.descriptor.length;E++)this.dispatchType+=("00"+g.descriptor[E].toString(16)).slice(-2);this.push=function(B){var z,H,W,te,me,Me;if(B.type==="timed-metadata"){if(B.dataAlignmentIndicator&&(S=0,_.length=0),_.length===0&&(B.data.length<10||B.data[0]!==73||B.data[1]!==68||B.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(_.push(B),S+=B.data.byteLength,_.length===1&&(y=vn.parseSyncSafeInteger(B.data.subarray(6,10)),y+=10),!(S<y)){for(z={data:new Uint8Array(y),frames:[],pts:_[0].pts,dts:_[0].dts},me=0;me<y;)z.data.set(_[0].data.subarray(0,y-me),me),me+=_[0].data.byteLength,S-=_[0].data.byteLength,_.shift();H=10,z.data[5]&64&&(H+=4,H+=vn.parseSyncSafeInteger(z.data.subarray(10,14)),y-=vn.parseSyncSafeInteger(z.data.subarray(16,20)));do{if(W=vn.parseSyncSafeInteger(z.data.subarray(H+4,H+8)),W<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Me=String.fromCharCode(z.data[H],z.data[H+1],z.data[H+2],z.data[H+3]),te={id:Me,data:z.data.subarray(H+10,H+W+10)},te.key=te.id,vn.frameParsers[te.id]?vn.frameParsers[te.id](te):te.id[0]==="T"?vn.frameParsers["T*"](te):te.id[0]==="W"&&vn.frameParsers["W*"](te),te.owner==="com.apple.streaming.transportStreamTimestamp"){var Te=te.data,We=(Te[3]&1)<<30|Te[4]<<22|Te[5]<<14|Te[6]<<6|Te[7]>>>2;We*=4,We+=Te[7]&3,te.timeStamp=We,z.pts===void 0&&z.dts===void 0&&(z.pts=te.timeStamp,z.dts=te.timeStamp),this.trigger("timestamp",te)}z.frames.push(te),H+=10,H+=W}while(H<y);this.trigger("data",z)}}}},xi.prototype=new Wt;var Ff=xi,gr=t,Qn=Nl,_t=ua,qs=ha.TimestampRolloverStream,ms,Jn,_r,Mn=188,ao=71;ms=function(){var f=new Uint8Array(Mn),g=0;ms.prototype.init.call(this),this.push=function(y){var _=0,S=Mn,E;for(g?(E=new Uint8Array(y.byteLength+g),E.set(f.subarray(0,g)),E.set(y,g),g=0):E=y;S<E.byteLength;){if(E[_]===ao&&E[S]===ao){this.trigger("data",E.subarray(_,S)),_+=Mn,S+=Mn;continue}_++,S++}_<E.byteLength&&(f.set(E.subarray(_),0),g=E.byteLength-_)},this.flush=function(){g===Mn&&f[0]===ao&&(this.trigger("data",f),g=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){g=0,this.trigger("reset")}},ms.prototype=new gr,Jn=function(){var f,g,y,_;Jn.prototype.init.call(this),_=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(S,E){var B=0;E.payloadUnitStartIndicator&&(B+=S[B]+1),E.type==="pat"?g(S.subarray(B),E):y(S.subarray(B),E)},g=function(S,E){E.section_number=S[7],E.last_section_number=S[8],_.pmtPid=(S[10]&31)<<8|S[11],E.pmtPid=_.pmtPid},y=function(S,E){var B,z,H,W;if(S[5]&1){for(_.programMapTable={video:null,audio:null,"timed-metadata":{}},B=(S[1]&15)<<8|S[2],z=3+B-4,H=(S[10]&15)<<8|S[11],W=12+H;W<z;){var te=S[W],me=(S[W+1]&31)<<8|S[W+2];te===_t.H264_STREAM_TYPE&&_.programMapTable.video===null?_.programMapTable.video=me:te===_t.ADTS_STREAM_TYPE&&_.programMapTable.audio===null?_.programMapTable.audio=me:te===_t.METADATA_STREAM_TYPE&&(_.programMapTable["timed-metadata"][me]=te),W+=((S[W+3]&15)<<8|S[W+4])+5}E.programMapTable=_.programMapTable}},this.push=function(S){var E={},B=4;if(E.payloadUnitStartIndicator=!!(S[1]&64),E.pid=S[1]&31,E.pid<<=8,E.pid|=S[2],(S[3]&48)>>>4>1&&(B+=S[B]+1),E.pid===0)E.type="pat",f(S.subarray(B),E),this.trigger("data",E);else if(E.pid===this.pmtPid)for(E.type="pmt",f(S.subarray(B),E),this.trigger("data",E);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([S,B,E]):this.processPes_(S,B,E)},this.processPes_=function(S,E,B){B.pid===this.programMapTable.video?B.streamType=_t.H264_STREAM_TYPE:B.pid===this.programMapTable.audio?B.streamType=_t.ADTS_STREAM_TYPE:B.streamType=this.programMapTable["timed-metadata"][B.pid],B.type="pes",B.data=S.subarray(E),this.trigger("data",B)}},Jn.prototype=new gr,Jn.STREAM_TYPES={h264:27,adts:15},_r=function(){var f=this,g=!1,y={data:[],size:0},_={data:[],size:0},S={data:[],size:0},E,B=function(H,W){var te;const me=H[0]<<16|H[1]<<8|H[2];W.data=new Uint8Array,me===1&&(W.packetLength=6+(H[4]<<8|H[5]),W.dataAlignmentIndicator=(H[6]&4)!==0,te=H[7],te&192&&(W.pts=(H[9]&14)<<27|(H[10]&255)<<20|(H[11]&254)<<12|(H[12]&255)<<5|(H[13]&254)>>>3,W.pts*=4,W.pts+=(H[13]&6)>>>1,W.dts=W.pts,te&64&&(W.dts=(H[14]&14)<<27|(H[15]&255)<<20|(H[16]&254)<<12|(H[17]&255)<<5|(H[18]&254)>>>3,W.dts*=4,W.dts+=(H[18]&6)>>>1)),W.data=H.subarray(9+H[8]))},z=function(H,W,te){var me=new Uint8Array(H.size),Me={type:W},Te=0,We=0,at=!1,gi;if(!(!H.data.length||H.size<9)){for(Me.trackId=H.data[0].pid,Te=0;Te<H.data.length;Te++)gi=H.data[Te],me.set(gi.data,We),We+=gi.data.byteLength;B(me,Me),at=W==="video"||Me.packetLength<=H.size,(te||at)&&(H.size=0,H.data.length=0),at&&f.trigger("data",Me)}};_r.prototype.init.call(this),this.push=function(H){({pat:function(){},pes:function(){var W,te;switch(H.streamType){case _t.H264_STREAM_TYPE:W=y,te="video";break;case _t.ADTS_STREAM_TYPE:W=_,te="audio";break;case _t.METADATA_STREAM_TYPE:W=S,te="timed-metadata";break;default:return}H.payloadUnitStartIndicator&&z(W,te,!0),W.data.push(H),W.size+=H.data.byteLength},pmt:function(){var W={type:"metadata",tracks:[]};E=H.programMapTable,E.video!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),g=!0,f.trigger("data",W)}})[H.type]()},this.reset=function(){y.size=0,y.data.length=0,_.size=0,_.data.length=0,this.trigger("reset")},this.flushStreams_=function(){z(y,"video"),z(_,"audio"),z(S,"timed-metadata")},this.flush=function(){if(!g&&E){var H={type:"metadata",tracks:[]};E.video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),f.trigger("data",H)}g=!1,this.flushStreams_(),this.trigger("done")}},_r.prototype=new gr;var da={PAT_PID:0,MP2T_PACKET_LENGTH:Mn,TransportPacketStream:ms,TransportParseStream:Jn,ElementaryStream:_r,TimestampRolloverStream:qs,CaptionStream:Qn.CaptionStream,Cea608Stream:Qn.Cea608Stream,Cea708Stream:Qn.Cea708Stream,MetadataStream:Ff};for(var yr in _t)_t.hasOwnProperty(yr)&&(da[yr]=_t[yr]);var zl=da,Hl=t,fa=rt.ONE_SECOND_IN_TS,lo,pa=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];lo=function(f){var g,y=0;lo.prototype.init.call(this),this.skipWarn_=function(_,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${_} to ${S} in frame ${y} outside syncword`})},this.push=function(_){var S=0,E,B,z,H,W;if(f||(y=0),_.type==="audio"){g&&g.length?(z=g,g=new Uint8Array(z.byteLength+_.data.byteLength),g.set(z),g.set(_.data,z.byteLength)):g=_.data;for(var te;S+7<g.length;){if(g[S]!==255||(g[S+1]&246)!==240){typeof te!="number"&&(te=S),S++;continue}if(typeof te=="number"&&(this.skipWarn_(te,S),te=null),B=(~g[S+1]&1)*2,E=(g[S+3]&3)<<11|g[S+4]<<3|(g[S+5]&224)>>5,H=((g[S+6]&3)+1)*1024,W=H*fa/pa[(g[S+2]&60)>>>2],g.byteLength-S<E)break;this.trigger("data",{pts:_.pts+y*W,dts:_.dts+y*W,sampleCount:H,audioobjecttype:(g[S+2]>>>6&3)+1,channelcount:(g[S+2]&1)<<2|(g[S+3]&192)>>>6,samplerate:pa[(g[S+2]&60)>>>2],samplingfrequencyindex:(g[S+2]&60)>>>2,samplesize:16,data:g.subarray(S+7+B,S+E)}),y++,S+=E}typeof te=="number"&&(this.skipWarn_(te,S),te=null),g=g.subarray(S)}},this.flush=function(){y=0,this.trigger("done")},this.reset=function(){g=void 0,this.trigger("reset")},this.endTimeline=function(){g=void 0,this.trigger("endedtimeline")}},lo.prototype=new Hl;var Uf=lo,tt;tt=function(f){var g=f.byteLength,y=0,_=0;this.length=function(){return 8*g},this.bitsAvailable=function(){return 8*g+_},this.loadWord=function(){var S=f.byteLength-g,E=new Uint8Array(4),B=Math.min(4,g);if(B===0)throw new Error("no bytes available");E.set(f.subarray(S,S+B)),y=new DataView(E.buffer).getUint32(0),_=B*8,g-=B},this.skipBits=function(S){var E;_>S?(y<<=S,_-=S):(S-=_,E=Math.floor(S/8),S-=E*8,g-=E,this.loadWord(),y<<=S,_-=S)},this.readBits=function(S){var E=Math.min(_,S),B=y>>>32-E;return _-=E,_>0?y<<=E:g>0&&this.loadWord(),E=S-E,E>0?B<<E|this.readBits(E):B},this.skipLeadingZeros=function(){var S;for(S=0;S<_;++S)if((y&2147483648>>>S)!==0)return y<<=S,_-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Rn=tt,Et=t,Nc=Rn,vr,br,ma;br=function(){var f=0,g,y;br.prototype.init.call(this),this.push=function(_){var S;y?(S=new Uint8Array(y.byteLength+_.data.byteLength),S.set(y),S.set(_.data,y.byteLength),y=S):y=_.data;for(var E=y.byteLength;f<E-3;f++)if(y[f+2]===1){g=f+5;break}for(;g<E;)switch(y[g]){case 0:if(y[g-1]!==0){g+=2;break}else if(y[g-2]!==0){g++;break}f+3!==g-2&&this.trigger("data",y.subarray(f+3,g-2));do g++;while(y[g]!==1&&g<E);f=g-2,g+=3;break;case 1:if(y[g-1]!==0||y[g-2]!==0){g+=3;break}this.trigger("data",y.subarray(f+3,g-2)),f=g-2,g+=3;break;default:g+=3;break}y=y.subarray(f),g-=f,f=0},this.reset=function(){y=null,f=0,this.trigger("reset")},this.flush=function(){y&&y.byteLength>3&&this.trigger("data",y.subarray(f+3)),y=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},br.prototype=new Et,ma={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},vr=function(){var f=new br,g,y,_,S,E,B,z;vr.prototype.init.call(this),g=this,this.push=function(H){H.type==="video"&&(y=H.trackId,_=H.pts,S=H.dts,f.push(H))},f.on("data",function(H){var W={trackId:y,pts:_,dts:S,data:H,nalUnitTypeCode:H[0]&31};switch(W.nalUnitTypeCode){case 5:W.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:W.nalUnitType="sei_rbsp",W.escapedRBSP=E(H.subarray(1));break;case 7:W.nalUnitType="seq_parameter_set_rbsp",W.escapedRBSP=E(H.subarray(1)),W.config=B(W.escapedRBSP);break;case 8:W.nalUnitType="pic_parameter_set_rbsp";break;case 9:W.nalUnitType="access_unit_delimiter_rbsp";break}g.trigger("data",W)}),f.on("done",function(){g.trigger("done")}),f.on("partialdone",function(){g.trigger("partialdone")}),f.on("reset",function(){g.trigger("reset")}),f.on("endedtimeline",function(){g.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},z=function(H,W){var te=8,me=8,Me,Te;for(Me=0;Me<H;Me++)me!==0&&(Te=W.readExpGolomb(),me=(te+Te+256)%256),te=me===0?te:me},E=function(H){for(var W=H.byteLength,te=[],me=1,Me,Te;me<W-2;)H[me]===0&&H[me+1]===0&&H[me+2]===3?(te.push(me+2),me+=2):me++;if(te.length===0)return H;Me=W-te.length,Te=new Uint8Array(Me);var We=0;for(me=0;me<Me;We++,me++)We===te[0]&&(We++,te.shift()),Te[me]=H[We];return Te},B=function(H){var W=0,te=0,me=0,Me=0,Te,We,at,gi,Tn,Dr,ou,au,lu,uu,mh,Ft=[1,1],cu,rs;if(Te=new Nc(H),We=Te.readUnsignedByte(),gi=Te.readUnsignedByte(),at=Te.readUnsignedByte(),Te.skipUnsignedExpGolomb(),ma[We]&&(Tn=Te.readUnsignedExpGolomb(),Tn===3&&Te.skipBits(1),Te.skipUnsignedExpGolomb(),Te.skipUnsignedExpGolomb(),Te.skipBits(1),Te.readBoolean()))for(mh=Tn!==3?8:12,rs=0;rs<mh;rs++)Te.readBoolean()&&(rs<6?z(16,Te):z(64,Te));if(Te.skipUnsignedExpGolomb(),Dr=Te.readUnsignedExpGolomb(),Dr===0)Te.readUnsignedExpGolomb();else if(Dr===1)for(Te.skipBits(1),Te.skipExpGolomb(),Te.skipExpGolomb(),ou=Te.readUnsignedExpGolomb(),rs=0;rs<ou;rs++)Te.skipExpGolomb();if(Te.skipUnsignedExpGolomb(),Te.skipBits(1),au=Te.readUnsignedExpGolomb(),lu=Te.readUnsignedExpGolomb(),uu=Te.readBits(1),uu===0&&Te.skipBits(1),Te.skipBits(1),Te.readBoolean()&&(W=Te.readUnsignedExpGolomb(),te=Te.readUnsignedExpGolomb(),me=Te.readUnsignedExpGolomb(),Me=Te.readUnsignedExpGolomb()),Te.readBoolean()&&Te.readBoolean()){switch(cu=Te.readUnsignedByte(),cu){case 1:Ft=[1,1];break;case 2:Ft=[12,11];break;case 3:Ft=[10,11];break;case 4:Ft=[16,11];break;case 5:Ft=[40,33];break;case 6:Ft=[24,11];break;case 7:Ft=[20,11];break;case 8:Ft=[32,11];break;case 9:Ft=[80,33];break;case 10:Ft=[18,11];break;case 11:Ft=[15,11];break;case 12:Ft=[64,33];break;case 13:Ft=[160,99];break;case 14:Ft=[4,3];break;case 15:Ft=[3,2];break;case 16:Ft=[2,1];break;case 255:{Ft=[Te.readUnsignedByte()<<8|Te.readUnsignedByte(),Te.readUnsignedByte()<<8|Te.readUnsignedByte()];break}}Ft&&Ft[0]/Ft[1]}return{profileIdc:We,levelIdc:at,profileCompatibility:gi,width:(au+1)*16-W*2-te*2,height:(2-uu)*(lu+1)*16-me*2-Me*2,sarRatio:Ft}}},vr.prototype=new Et;var Ws={H264Stream:vr},$l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Tr=function(f,g){var y=f[g+6]<<21|f[g+7]<<14|f[g+8]<<7|f[g+9],_=f[g+5],S=(_&16)>>4;return y=y>=0?y:0,S?y+20:y+10},ri=function(f,g){return f.length-g<10||f[g]!==73||f[g+1]!==68||f[g+2]!==51?g:(g+=Tr(f,g),ri(f,g))},Gs=function(f){var g=ri(f,0);return f.length>=g+2&&(f[g]&255)===255&&(f[g+1]&240)===240&&(f[g+1]&22)===16},Vl=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Bc=function(f,g,y){var _,S="";for(_=g;_<y;_++)S+="%"+("00"+f[_].toString(16)).slice(-2);return S},jf=function(f,g,y){return unescape(Bc(f,g,y))},Fc=function(f,g){var y=(f[g+5]&224)>>5,_=f[g+4]<<3,S=f[g+3]&6144;return S|_|y},ql=function(f,g){return f[g]===73&&f[g+1]===68&&f[g+2]===51?"timed-metadata":f[g]&!0&&(f[g+1]&240)===240?"audio":null},zf=function(f){for(var g=0;g+5<f.length;){if(f[g]!==255||(f[g+1]&246)!==240){g++;continue}return $l[(f[g+2]&60)>>>2]}return null},Uc=function(f){var g,y,_,S;g=10,f[5]&64&&(g+=4,g+=Vl(f.subarray(10,14)));do{if(y=Vl(f.subarray(g+4,g+8)),y<1)return null;if(S=String.fromCharCode(f[g],f[g+1],f[g+2],f[g+3]),S==="PRIV"){_=f.subarray(g+10,g+y+10);for(var E=0;E<_.byteLength;E++)if(_[E]===0){var B=jf(_,0,E);if(B==="com.apple.streaming.transportStreamTimestamp"){var z=_.subarray(E+1),H=(z[3]&1)<<30|z[4]<<22|z[5]<<14|z[6]<<6|z[7]>>>2;return H*=4,H+=z[7]&3,H}break}}g+=10,g+=y}while(g<f.byteLength);return null},ht={isLikelyAacData:Gs,parseId3TagSize:Tr,parseAdtsSize:Fc,parseType:ql,parseSampleRate:zf,parseAacTimestamp:Uc},Hf=t,Ji=ht,gs;gs=function(){var f=new Uint8Array,g=0;gs.prototype.init.call(this),this.setTimestamp=function(y){g=y},this.push=function(y){var _=0,S=0,E,B,z,H;for(f.length?(H=f.length,f=new Uint8Array(y.byteLength+H),f.set(f.subarray(0,H)),f.set(y,H)):f=y;f.length-S>=3;){if(f[S]===73&&f[S+1]===68&&f[S+2]===51){if(f.length-S<10||(_=Ji.parseId3TagSize(f,S),S+_>f.length))break;B={type:"timed-metadata",data:f.subarray(S,S+_)},this.trigger("data",B),S+=_;continue}else if((f[S]&255)===255&&(f[S+1]&240)===240){if(f.length-S<7||(_=Ji.parseAdtsSize(f,S),S+_>f.length))break;z={type:"audio",data:f.subarray(S,S+_),pts:g,dts:g},this.trigger("data",z),S+=_;continue}S++}E=f.length-S,E>0?f=f.subarray(S):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},gs.prototype=new Hf;var jc=gs,$f=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Wl=$f,Vf=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],zc=Vf,ga=t,uo=pe,Xs=xe,_a=no,Zt=he,es=zl,co=rt,ts=Uf,Hc=Ws.H264Stream,$c=jc,Gl=ht.isLikelyAacData,qf=rt.ONE_SECOND_IN_TS,Xl=Wl,Kl=zc,ya,ho,xr,Ks,Vc=function(f,g){g.stream=f,this.trigger("log",g)},Zl=function(f,g){for(var y=Object.keys(g),_=0;_<y.length;_++){var S=y[_];S==="headOfPipeline"||!g[S].on||g[S].on("log",Vc.bind(f,S))}},fo=function(f,g){var y;if(f.length!==g.length)return!1;for(y=0;y<f.length;y++)if(f[y]!==g[y])return!1;return!0},_s=function(f,g,y,_,S,E){var B=y-g,z=_-g,H=S-y;return{start:{dts:f,pts:f+B},end:{dts:f+z,pts:f+H},prependedContentDuration:E,baseMediaDecodeTime:f}};ho=function(f,g){var y=[],_,S=0,E=0,B=1/0;g=g||{},_=g.firstSequenceNumber||0,ho.prototype.init.call(this),this.push=function(z){Zt.collectDtsInfo(f,z),f&&Xl.forEach(function(H){f[H]=z[H]}),y.push(z)},this.setEarliestDts=function(z){S=z},this.setVideoBaseMediaDecodeTime=function(z){B=z},this.setAudioAppendStart=function(z){E=z},this.flush=function(){var z,H,W,te,me,Me,Te;if(y.length===0){this.trigger("done","AudioSegmentStream");return}z=_a.trimAdtsFramesByEarliestDts(y,f,S),f.baseMediaDecodeTime=Zt.calculateTrackBaseMediaDecodeTime(f,g.keepOriginalTimestamps),Te=_a.prefixWithSilence(f,z,E,B),f.samples=_a.generateSampleTable(z),W=uo.mdat(_a.concatenateFrameData(z)),y=[],H=uo.moof(_,[f]),te=new Uint8Array(H.byteLength+W.byteLength),_++,te.set(H),te.set(W,H.byteLength),Zt.clearDtsInfo(f),me=Math.ceil(qf*1024/f.samplerate),z.length&&(Me=z.length*me,this.trigger("segmentTimingInfo",_s(co.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),z[0].dts,z[0].pts,z[0].dts+Me,z[0].pts+Me,Te||0)),this.trigger("timingInfo",{start:z[0].pts,end:z[0].pts+Me})),this.trigger("data",{track:f,boxes:te}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Zt.clearDtsInfo(f),y=[],this.trigger("reset")}},ho.prototype=new ga,ya=function(f,g){var y,_=[],S=[],E,B;g=g||{},y=g.firstSequenceNumber||0,ya.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(z){Zt.collectDtsInfo(f,z),z.nalUnitType==="seq_parameter_set_rbsp"&&!E&&(E=z.config,f.sps=[z.data],Kl.forEach(function(H){f[H]=E[H]},this)),z.nalUnitType==="pic_parameter_set_rbsp"&&!B&&(B=z.data,f.pps=[z.data]),_.push(z)},this.flush=function(){for(var z,H,W,te,me,Me,Te=0,We,at;_.length&&_[0].nalUnitType!=="access_unit_delimiter_rbsp";)_.shift();if(_.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(z=Xs.groupNalsIntoFrames(_),W=Xs.groupFramesIntoGops(z),W[0][0].keyFrame||(H=this.getGopForFusion_(_[0],f),H?(Te=H.duration,W.unshift(H),W.byteLength+=H.byteLength,W.nalCount+=H.nalCount,W.pts=H.pts,W.dts=H.dts,W.duration+=H.duration):W=Xs.extendFirstKeyFrame(W)),S.length){var gi;if(g.alignGopsAtEnd?gi=this.alignGopsAtEnd_(W):gi=this.alignGopsAtStart_(W),!gi){this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Zt.clearDtsInfo(f),W=gi}Zt.collectDtsInfo(f,W),f.samples=Xs.generateSampleTable(W),me=uo.mdat(Xs.concatenateNalData(W)),f.baseMediaDecodeTime=Zt.calculateTrackBaseMediaDecodeTime(f,g.keepOriginalTimestamps),this.trigger("processedGopsInfo",W.map(function(Tn){return{pts:Tn.pts,dts:Tn.dts,byteLength:Tn.byteLength}})),We=W[0],at=W[W.length-1],this.trigger("segmentTimingInfo",_s(f.baseMediaDecodeTime,We.dts,We.pts,at.dts+at.duration,at.pts+at.duration,Te)),this.trigger("timingInfo",{start:W[0].pts,end:W[W.length-1].pts+W[W.length-1].duration}),this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),te=uo.moof(y,[f]),Me=new Uint8Array(te.byteLength+me.byteLength),y++,Me.set(te),Me.set(me,te.byteLength),this.trigger("data",{track:f,boxes:Me}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),_=[],this.gopCache_.length=0,S.length=0,this.trigger("reset")},this.resetStream_=function(){Zt.clearDtsInfo(f),E=void 0,B=void 0},this.getGopForFusion_=function(z){var H=45e3,W=1/0,te,me,Me,Te,We;for(We=0;We<this.gopCache_.length;We++)Te=this.gopCache_[We],Me=Te.gop,!(!(f.pps&&fo(f.pps[0],Te.pps[0]))||!(f.sps&&fo(f.sps[0],Te.sps[0])))&&(Me.dts<f.timelineStartInfo.dts||(te=z.dts-Me.dts-Me.duration,te>=-1e4&&te<=H&&(!me||W>te)&&(me=Te,W=te)));return me?me.gop:null},this.alignGopsAtStart_=function(z){var H,W,te,me,Me,Te,We,at;for(Me=z.byteLength,Te=z.nalCount,We=z.duration,H=W=0;H<S.length&&W<z.length&&(te=S[H],me=z[W],te.pts!==me.pts);){if(me.pts>te.pts){H++;continue}W++,Me-=me.byteLength,Te-=me.nalCount,We-=me.duration}return W===0?z:W===z.length?null:(at=z.slice(W),at.byteLength=Me,at.duration=We,at.nalCount=Te,at.pts=at[0].pts,at.dts=at[0].dts,at)},this.alignGopsAtEnd_=function(z){var H,W,te,me,Me,Te;for(H=S.length-1,W=z.length-1,Me=null,Te=!1;H>=0&&W>=0;){if(te=S[H],me=z[W],te.pts===me.pts){Te=!0;break}if(te.pts>me.pts){H--;continue}H===S.length-1&&(Me=W),W--}if(!Te&&Me===null)return null;var We;if(Te?We=W:We=Me,We===0)return z;var at=z.slice(We),gi=at.reduce(function(Tn,Dr){return Tn.byteLength+=Dr.byteLength,Tn.duration+=Dr.duration,Tn.nalCount+=Dr.nalCount,Tn},{byteLength:0,duration:0,nalCount:0});return at.byteLength=gi.byteLength,at.duration=gi.duration,at.nalCount=gi.nalCount,at.pts=at[0].pts,at.dts=at[0].dts,at},this.alignGopsWith=function(z){S=z}},ya.prototype=new ga,Ks=function(f,g){this.numberOfTracks=0,this.metadataStream=g,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ks.prototype.init.call(this),this.push=function(y){if(y.content||y.text)return this.pendingCaptions.push(y);if(y.frames)return this.pendingMetadata.push(y);this.pendingTracks.push(y.track),this.pendingBytes+=y.boxes.byteLength,y.track.type==="video"&&(this.videoTrack=y.track,this.pendingBoxes.push(y.boxes)),y.track.type==="audio"&&(this.audioTrack=y.track,this.pendingBoxes.unshift(y.boxes))}},Ks.prototype=new ga,Ks.prototype.flush=function(f){var g=0,y={captions:[],captionStreams:{},metadata:[],info:{}},_,S,E,B=0,z;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(B=this.videoTrack.timelineStartInfo.pts,Kl.forEach(function(H){y.info[H]=this.videoTrack[H]},this)):this.audioTrack&&(B=this.audioTrack.timelineStartInfo.pts,Xl.forEach(function(H){y.info[H]=this.audioTrack[H]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?y.type=this.pendingTracks[0].type:y.type="combined",this.emittedTracks+=this.pendingTracks.length,E=uo.initSegment(this.pendingTracks),y.initSegment=new Uint8Array(E.byteLength),y.initSegment.set(E),y.data=new Uint8Array(this.pendingBytes),z=0;z<this.pendingBoxes.length;z++)y.data.set(this.pendingBoxes[z],g),g+=this.pendingBoxes[z].byteLength;for(z=0;z<this.pendingCaptions.length;z++)_=this.pendingCaptions[z],_.startTime=co.metadataTsToSeconds(_.startPts,B,this.keepOriginalTimestamps),_.endTime=co.metadataTsToSeconds(_.endPts,B,this.keepOriginalTimestamps),y.captionStreams[_.stream]=!0,y.captions.push(_);for(z=0;z<this.pendingMetadata.length;z++)S=this.pendingMetadata[z],S.cueTime=co.metadataTsToSeconds(S.pts,B,this.keepOriginalTimestamps),y.metadata.push(S);for(y.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",y),z=0;z<y.captions.length;z++)_=y.captions[z],this.trigger("caption",_);for(z=0;z<y.metadata.length;z++)S=y.metadata[z],this.trigger("id3Frame",S)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ks.prototype.setRemux=function(f){this.remuxTracks=f},xr=function(f){var g=this,y=!0,_,S;xr.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="aac",E.metadataStream=new es.MetadataStream,E.aacStream=new $c,E.audioTimestampRolloverStream=new es.TimestampRolloverStream("audio"),E.timedMetadataTimestampRolloverStream=new es.TimestampRolloverStream("timed-metadata"),E.adtsStream=new ts,E.coalesceStream=new Ks(f,E.metadataStream),E.headOfPipeline=E.aacStream,E.aacStream.pipe(E.audioTimestampRolloverStream).pipe(E.adtsStream),E.aacStream.pipe(E.timedMetadataTimestampRolloverStream).pipe(E.metadataStream).pipe(E.coalesceStream),E.metadataStream.on("timestamp",function(B){E.aacStream.setTimestamp(B.timeStamp)}),E.aacStream.on("data",function(B){B.type!=="timed-metadata"&&B.type!=="audio"||E.audioSegmentStream||(S=S||{timelineStartInfo:{baseMediaDecodeTime:g.baseMediaDecodeTime},codec:"adts",type:"audio"},E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new ho(S,f),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream),g.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!_}))}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),Zl(this,E)},this.setupTsPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="ts",E.metadataStream=new es.MetadataStream,E.packetStream=new es.TransportPacketStream,E.parseStream=new es.TransportParseStream,E.elementaryStream=new es.ElementaryStream,E.timestampRolloverStream=new es.TimestampRolloverStream,E.adtsStream=new ts,E.h264Stream=new Hc,E.captionStream=new es.CaptionStream(f),E.coalesceStream=new Ks(f,E.metadataStream),E.headOfPipeline=E.packetStream,E.packetStream.pipe(E.parseStream).pipe(E.elementaryStream).pipe(E.timestampRolloverStream),E.timestampRolloverStream.pipe(E.h264Stream),E.timestampRolloverStream.pipe(E.adtsStream),E.timestampRolloverStream.pipe(E.metadataStream).pipe(E.coalesceStream),E.h264Stream.pipe(E.captionStream).pipe(E.coalesceStream),E.elementaryStream.on("data",function(B){var z;if(B.type==="metadata"){for(z=B.tracks.length;z--;)!_&&B.tracks[z].type==="video"?(_=B.tracks[z],_.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime):!S&&B.tracks[z].type==="audio"&&(S=B.tracks[z],S.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime);_&&!E.videoSegmentStream&&(E.coalesceStream.numberOfTracks++,E.videoSegmentStream=new ya(_,f),E.videoSegmentStream.on("log",g.getLogTrigger_("videoSegmentStream")),E.videoSegmentStream.on("timelineStartInfo",function(H){S&&!f.keepOriginalTimestamps&&(S.timelineStartInfo=H,E.audioSegmentStream.setEarliestDts(H.dts-g.baseMediaDecodeTime))}),E.videoSegmentStream.on("processedGopsInfo",g.trigger.bind(g,"gopInfo")),E.videoSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"videoSegmentTimingInfo")),E.videoSegmentStream.on("baseMediaDecodeTime",function(H){S&&E.audioSegmentStream.setVideoBaseMediaDecodeTime(H)}),E.videoSegmentStream.on("timingInfo",g.trigger.bind(g,"videoTimingInfo")),E.h264Stream.pipe(E.videoSegmentStream).pipe(E.coalesceStream)),S&&!E.audioSegmentStream&&(E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new ho(S,f),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.audioSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"audioSegmentTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream)),g.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!_})}}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("id3Frame",function(B){B.dispatchType=E.metadataStream.dispatchType,g.trigger("id3Frame",B)}),E.coalesceStream.on("caption",this.trigger.bind(this,"caption")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),Zl(this,E)},this.setBaseMediaDecodeTime=function(E){var B=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=E),S&&(S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,Zt.clearDtsInfo(S),B.audioTimestampRolloverStream&&B.audioTimestampRolloverStream.discontinuity()),_&&(B.videoSegmentStream&&(B.videoSegmentStream.gopCache_=[]),_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Zt.clearDtsInfo(_),B.captionStream.reset()),B.timestampRolloverStream&&B.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(E){S&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(E)},this.setRemux=function(E){var B=this.transmuxPipeline_;f.remux=E,B&&B.coalesceStream&&B.coalesceStream.setRemux(E)},this.alignGopsWith=function(E){_&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(E)},this.getLogTrigger_=function(E){var B=this;return function(z){z.stream=E,B.trigger("log",z)}},this.push=function(E){if(y){var B=Gl(E);B&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!B&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),y=!1}this.transmuxPipeline_.headOfPipeline.push(E)},this.flush=function(){y=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},xr.prototype=new ga;var Wf={Transmuxer:xr},po=function(f){return f>>>0},en=function(f){return("00"+f.toString(16)).slice(-2)},mo={toUnsigned:po,toHexString:en},qc=function(f){var g="";return g+=String.fromCharCode(f[0]),g+=String.fromCharCode(f[1]),g+=String.fromCharCode(f[2]),g+=String.fromCharCode(f[3]),g},Wc=qc,Yl=mo.toUnsigned,Ql=Wc,Gc=function(f,g){var y=[],_,S,E,B,z;if(!g.length)return null;for(_=0;_<f.byteLength;)S=Yl(f[_]<<24|f[_+1]<<16|f[_+2]<<8|f[_+3]),E=Ql(f.subarray(_+4,_+8)),B=S>1?_+S:f.byteLength,E===g[0]&&(g.length===1?y.push(f.subarray(_+8,B)):(z=Gc(f.subarray(_+8,B),g.slice(1)),z.length&&(y=y.concat(z)))),_=B;return y},Jl=Gc,Xc=mo.toUnsigned,Gf=r.getUint64,bn=function(f){var g={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return g.version===1?g.baseMediaDecodeTime=Gf(f.subarray(4)):g.baseMediaDecodeTime=Xc(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),g},ys=bn,Xf=function(f){var g=new DataView(f.buffer,f.byteOffset,f.byteLength),y={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:g.getUint32(4)},_=y.flags[2]&1,S=y.flags[2]&2,E=y.flags[2]&8,B=y.flags[2]&16,z=y.flags[2]&32,H=y.flags[0]&65536,W=y.flags[0]&131072,te;return te=8,_&&(te+=4,y.baseDataOffset=g.getUint32(12),te+=4),S&&(y.sampleDescriptionIndex=g.getUint32(te),te+=4),E&&(y.defaultSampleDuration=g.getUint32(te),te+=4),B&&(y.defaultSampleSize=g.getUint32(te),te+=4),z&&(y.defaultSampleFlags=g.getUint32(te)),H&&(y.durationIsEmpty=!0),!_&&W&&(y.baseDataOffsetIsMoof=!0),y},Nn=Xf,Kf=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},Sr=Kf,Kc=Sr,go=function(f){var g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=g.flags[2]&1,S=g.flags[2]&4,E=g.flags[1]&1,B=g.flags[1]&2,z=g.flags[1]&4,H=g.flags[1]&8,W=y.getUint32(4),te=8,me;for(_&&(g.dataOffset=y.getInt32(te),te+=4),S&&W&&(me={flags:Kc(f.subarray(te,te+4))},te+=4,E&&(me.duration=y.getUint32(te),te+=4),B&&(me.size=y.getUint32(te),te+=4),H&&(g.version===1?me.compositionTimeOffset=y.getInt32(te):me.compositionTimeOffset=y.getUint32(te),te+=4),g.samples.push(me),W--);W--;)me={},E&&(me.duration=y.getUint32(te),te+=4),B&&(me.size=y.getUint32(te),te+=4),z&&(me.flags=Kc(f.subarray(te,te+4)),te+=4),H&&(g.version===1?me.compositionTimeOffset=y.getInt32(te):me.compositionTimeOffset=y.getUint32(te),te+=4),g.samples.push(me);return g},eu=go,_o={tfdt:ys,trun:eu},Zc={parseTfdt:_o.tfdt,parseTrun:_o.trun},vs=function(f){for(var g=0,y=String.fromCharCode(f[g]),_="";y!=="\0";)_+=y,g++,y=String.fromCharCode(f[g]);return _+=y,_},va={uint8ToCString:vs},ba=va.uint8ToCString,tu=r.getUint64,Zf=function(f){var g=4,y=f[0],_,S,E,B,z,H,W,te;if(y===0){_=ba(f.subarray(g)),g+=_.length,S=ba(f.subarray(g)),g+=S.length;var me=new DataView(f.buffer);E=me.getUint32(g),g+=4,z=me.getUint32(g),g+=4,H=me.getUint32(g),g+=4,W=me.getUint32(g),g+=4}else if(y===1){var me=new DataView(f.buffer);E=me.getUint32(g),g+=4,B=tu(f.subarray(g)),g+=8,H=me.getUint32(g),g+=4,W=me.getUint32(g),g+=4,_=ba(f.subarray(g)),g+=_.length,S=ba(f.subarray(g)),g+=S.length}te=new Uint8Array(f.subarray(g,f.byteLength));var Me={scheme_id_uri:_,value:S,timescale:E||1,presentation_time:B,presentation_time_delta:z,event_duration:H,id:W,message_data:te};return Yf(y,Me)?Me:void 0},is=function(f,g,y,_){return f||f===0?f/g:_+y/g},Yf=function(f,g){var y=g.scheme_id_uri!=="\0",_=f===0&&Zs(g.presentation_time_delta)&&y,S=f===1&&Zs(g.presentation_time)&&y;return!(f>1)&&_||S},Zs=function(f){return f!==void 0||f!==null},Qf={parseEmsgBox:Zf,scaleTime:is},ji;typeof window<"u"?ji=window:typeof i<"u"?ji=i:typeof self<"u"?ji=self:ji={};var yo=ji,vo=mo.toUnsigned,Ys=mo.toHexString,Ot=Jl,bs=Wc,wr=Qf,Cr=Nn,Ta=eu,iu=ys,Yc=r.getUint64,Qc,bo,Jc,nu,eh,xa,th,tn=yo,Sa=it.parseId3Frames;Qc=function(f){var g={},y=Ot(f,["moov","trak"]);return y.reduce(function(_,S){var E,B,z,H,W;return E=Ot(S,["tkhd"])[0],!E||(B=E[0],z=B===0?12:20,H=vo(E[z]<<24|E[z+1]<<16|E[z+2]<<8|E[z+3]),W=Ot(S,["mdia","mdhd"])[0],!W)?null:(B=W[0],z=B===0?12:20,_[H]=vo(W[z]<<24|W[z+1]<<16|W[z+2]<<8|W[z+3]),_)},g)},bo=function(f,g){var y;y=Ot(g,["moof","traf"]);var _=y.reduce(function(S,E){var B=Ot(E,["tfhd"])[0],z=vo(B[4]<<24|B[5]<<16|B[6]<<8|B[7]),H=f[z]||9e4,W=Ot(E,["tfdt"])[0],te=new DataView(W.buffer,W.byteOffset,W.byteLength),me;W[0]===1?me=Yc(W.subarray(4,12)):me=te.getUint32(4);let Me;return typeof me=="bigint"?Me=me/tn.BigInt(H):typeof me=="number"&&!isNaN(me)&&(Me=me/H),Me<Number.MAX_SAFE_INTEGER&&(Me=Number(Me)),Me<S&&(S=Me),S},1/0);return typeof _=="bigint"||isFinite(_)?_:0},Jc=function(f,g){var y=Ot(g,["moof","traf"]),_=0,S=0,E;if(y&&y.length){var B=Ot(y[0],["tfhd"])[0],z=Ot(y[0],["trun"])[0],H=Ot(y[0],["tfdt"])[0];if(B){var W=Cr(B);E=W.trackId}if(H){var te=iu(H);_=te.baseMediaDecodeTime}if(z){var me=Ta(z);me.samples&&me.samples.length&&(S=me.samples[0].compositionTimeOffset||0)}}var Me=f[E]||9e4;typeof _=="bigint"&&(S=tn.BigInt(S),Me=tn.BigInt(Me));var Te=(_+S)/Me;return typeof Te=="bigint"&&Te<Number.MAX_SAFE_INTEGER&&(Te=Number(Te)),Te},nu=function(f){var g=Ot(f,["moov","trak"]),y=[];return g.forEach(function(_){var S=Ot(_,["mdia","hdlr"]),E=Ot(_,["tkhd"]);S.forEach(function(B,z){var H=bs(B.subarray(8,12)),W=E[z],te,me,Me;H==="vide"&&(te=new DataView(W.buffer,W.byteOffset,W.byteLength),me=te.getUint8(0),Me=me===0?te.getUint32(12):te.getUint32(20),y.push(Me))})}),y},xa=function(f){var g=f[0],y=g===0?12:20;return vo(f[y]<<24|f[y+1]<<16|f[y+2]<<8|f[y+3])},eh=function(f){var g=Ot(f,["moov","trak"]),y=[];return g.forEach(function(_){var S={},E=Ot(_,["tkhd"])[0],B,z;E&&(B=new DataView(E.buffer,E.byteOffset,E.byteLength),z=B.getUint8(0),S.id=z===0?B.getUint32(12):B.getUint32(20));var H=Ot(_,["mdia","hdlr"])[0];if(H){var W=bs(H.subarray(8,12));W==="vide"?S.type="video":W==="soun"?S.type="audio":S.type=W}var te=Ot(_,["mdia","minf","stbl","stsd"])[0];if(te){var me=te.subarray(8);S.codec=bs(me.subarray(4,8));var Me=Ot(me,[S.codec])[0],Te,We;Me&&(/^[asm]vc[1-9]$/i.test(S.codec)?(Te=Me.subarray(78),We=bs(Te.subarray(4,8)),We==="avcC"&&Te.length>11?(S.codec+=".",S.codec+=Ys(Te[9]),S.codec+=Ys(Te[10]),S.codec+=Ys(Te[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(Te=Me.subarray(28),We=bs(Te.subarray(4,8)),We==="esds"&&Te.length>20&&Te[19]!==0?(S.codec+="."+Ys(Te[19]),S.codec+="."+Ys(Te[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var at=Ot(_,["mdia","mdhd"])[0];at&&(S.timescale=xa(at)),y.push(S)}),y},th=function(f,g=0){var y=Ot(f,["emsg"]);return y.map(_=>{var S=wr.parseEmsgBox(new Uint8Array(_)),E=Sa(S.message_data);return{cueTime:wr.scaleTime(S.presentation_time,S.timescale,S.presentation_time_delta,g),duration:wr.scaleTime(S.event_duration,S.timescale),frames:E}})};var To={findBox:Ot,parseType:bs,timescale:Qc,startTime:bo,compositionStartTime:Jc,videoTrackIds:nu,tracks:eh,getTimescaleFromMediaHeader:xa,getEmsgID3:th};const{parseTrun:wa}=Zc,{findBox:ih}=To;var su=yo,Jf=function(f){var g=ih(f,["moof","traf"]),y=ih(f,["mdat"]),_=[];return y.forEach(function(S,E){var B=g[E];_.push({mdat:S,traf:B})}),_},xo=function(f,g,y){var _=g,S=y.defaultSampleDuration||0,E=y.defaultSampleSize||0,B=y.trackId,z=[];return f.forEach(function(H){var W=wa(H),te=W.samples;te.forEach(function(me){me.duration===void 0&&(me.duration=S),me.size===void 0&&(me.size=E),me.trackId=B,me.dts=_,me.compositionTimeOffset===void 0&&(me.compositionTimeOffset=0),typeof _=="bigint"?(me.pts=_+su.BigInt(me.compositionTimeOffset),_+=su.BigInt(me.duration)):(me.pts=_+me.compositionTimeOffset,_+=me.duration)}),z=z.concat(te)}),z},nh={getMdatTrafPairs:Jf,parseSamples:xo},Er=Qi.discardEmulationPreventionBytes,sh=Nl.CaptionStream,Ca=Jl,ep=ys,ns=Nn,{getMdatTrafPairs:rh,parseSamples:oh}=nh,So=function(f,g){for(var y=f,_=0;_<g.length;_++){var S=g[_];if(y<S.size)return S;y-=S.size}return null},tp=function(f,g,y){var _=new DataView(f.buffer,f.byteOffset,f.byteLength),S={logs:[],seiNals:[]},E,B,z,H;for(B=0;B+4<f.length;B+=z)if(z=_.getUint32(B),B+=4,!(z<=0))switch(f[B]&31){case 6:var W=f.subarray(B+1,B+1+z),te=So(B,g);if(E={nalUnitType:"sei_rbsp",size:z,data:W,escapedRBSP:Er(W),trackId:y},te)E.pts=te.pts,E.dts=te.dts,H=te;else if(H)E.pts=H.pts,E.dts=H.dts;else{S.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+B+" for trackId "+y+". See mux.js#223."});break}S.seiNals.push(E);break}return S},Ea=function(f,g){var y={},_=rh(f);return _.forEach(function(S){var E=S.mdat,B=S.traf,z=Ca(B,["tfhd"]),H=ns(z[0]),W=H.trackId,te=Ca(B,["tfdt"]),me=te.length>0?ep(te[0]).baseMediaDecodeTime:0,Me=Ca(B,["trun"]),Te,We;g===W&&Me.length>0&&(Te=oh(Me,me,H),We=tp(E,Te,W),y[W]||(y[W]={seiNals:[],logs:[]}),y[W].seiNals=y[W].seiNals.concat(We.seiNals),y[W].logs=y[W].logs.concat(We.logs))}),y},wo=function(f,g,y){var _;if(g===null)return null;_=Ea(f,g);var S=_[g]||{};return{seiNals:S.seiNals,logs:S.logs,timescale:y}},ah=function(){var f=!1,g,y,_,S,E,B;this.isInitialized=function(){return f},this.init=function(z){g=new sh,f=!0,B=z?z.isPartial:!1,g.on("data",function(H){H.startTime=H.startPts/S,H.endTime=H.endPts/S,E.captions.push(H),E.captionStreams[H.stream]=!0}),g.on("log",function(H){E.logs.push(H)})},this.isNewInit=function(z,H){return z&&z.length===0||H&&typeof H=="object"&&Object.keys(H).length===0?!1:_!==z[0]||S!==H[_]},this.parse=function(z,H,W){var te;if(this.isInitialized()){if(!H||!W)return null;if(this.isNewInit(H,W))_=H[0],S=W[_];else if(_===null||!S)return y.push(z),null}else return null;for(;y.length>0;){var me=y.shift();this.parse(me,H,W)}return te=wo(z,_,S),te&&te.logs&&(E.logs=E.logs.concat(te.logs)),te===null||!te.seiNals?E.logs.length?{logs:E.logs,captions:[],captionStreams:[]}:null:(this.pushNals(te.seiNals),this.flushStream(),E)},this.pushNals=function(z){if(!this.isInitialized()||!z||z.length===0)return null;z.forEach(function(H){g.push(H)})},this.flushStream=function(){if(!this.isInitialized())return null;B?g.partialFlush():g.flush()},this.clearParsedCaptions=function(){E.captions=[],E.captionStreams={},E.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;g.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){y=[],_=null,S=null,E?this.clearParsedCaptions():E={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},lh=ah;const{parseTfdt:ip}=Zc,ss=Jl,{getTimescaleFromMediaHeader:uh}=To,{parseSamples:ch,getMdatTrafPairs:hh}=nh;var dh=function(){let f=9e4;this.init=function(g){const y=ss(g,["moov","trak","mdia","mdhd"])[0];y&&(f=uh(y))},this.parseSegment=function(g){const y=[],_=hh(g);let S=0;return _.forEach(function(E){const B=E.mdat,z=E.traf,H=ss(z,["tfdt"])[0],W=ss(z,["tfhd"])[0],te=ss(z,["trun"]);if(H&&(S=ip(H).baseMediaDecodeTime),te.length&&W){const me=ch(te,S,W);let Me=0;me.forEach(function(Te){const We="utf-8",at=new TextDecoder(We),gi=B.slice(Me,Me+Te.size);if(ss(gi,["vtte"])[0]){Me+=Te.size;return}ss(gi,["vttc"]).forEach(function(ou){const au=ss(ou,["payl"])[0],lu=ss(ou,["sttg"])[0],uu=Te.pts/f,mh=(Te.pts+Te.duration)/f;let Ft,cu;if(au)try{Ft=at.decode(au)}catch(rs){console.error(rs)}if(lu)try{cu=at.decode(lu)}catch(rs){console.error(rs)}Te.duration&&Ft&&y.push({cueText:Ft,start:uu,end:mh,settings:cu})}),Me+=Te.size})}}),y}},Aa=ua,ru=function(f){var g=f[1]&31;return g<<=8,g|=f[2],g},Da=function(f){return!!(f[1]&64)},a=function(f){var g=0;return(f[3]&48)>>>4>1&&(g+=f[4]+1),g},c=function(f,g){var y=ru(f);return y===0?"pat":y===g?"pmt":g?"pes":null},p=function(f){var g=Da(f),y=4+a(f);return g&&(y+=f[y]+1),(f[y+10]&31)<<8|f[y+11]},v=function(f){var g={},y=Da(f),_=4+a(f);if(y&&(_+=f[_]+1),!!(f[_+5]&1)){var S,E,B;S=(f[_+1]&15)<<8|f[_+2],E=3+S-4,B=(f[_+10]&15)<<8|f[_+11];for(var z=12+B;z<E;){var H=_+z;g[(f[H+1]&31)<<8|f[H+2]]=f[H],z+=((f[H+3]&15)<<8|f[H+4])+5}return g}},w=function(f,g){var y=ru(f),_=g[y];switch(_){case Aa.H264_STREAM_TYPE:return"video";case Aa.ADTS_STREAM_TYPE:return"audio";case Aa.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},M=function(f){var g=Da(f);if(!g)return null;var y=4+a(f);if(y>=f.byteLength)return null;var _=null,S;return S=f[y+7],S&192&&(_={},_.pts=(f[y+9]&14)<<27|(f[y+10]&255)<<20|(f[y+11]&254)<<12|(f[y+12]&255)<<5|(f[y+13]&254)>>>3,_.pts*=4,_.pts+=(f[y+13]&6)>>>1,_.dts=_.pts,S&64&&(_.dts=(f[y+14]&14)<<27|(f[y+15]&255)<<20|(f[y+16]&254)<<12|(f[y+17]&255)<<5|(f[y+18]&254)>>>3,_.dts*=4,_.dts+=(f[y+18]&6)>>>1)),_},X=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},se=function(f){for(var g=4+a(f),y=f.subarray(g),_=0,S=0,E=!1,B;S<y.byteLength-3;S++)if(y[S+2]===1){_=S+5;break}for(;_<y.byteLength;)switch(y[_]){case 0:if(y[_-1]!==0){_+=2;break}else if(y[_-2]!==0){_++;break}S+3!==_-2&&(B=X(y[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0));do _++;while(y[_]!==1&&_<y.length);S=_-2,_+=3;break;case 1:if(y[_-1]!==0||y[_-2]!==0){_+=3;break}B=X(y[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0),S=_-2,_+=3;break;default:_+=3;break}return y=y.subarray(S),_-=S,S=0,y&&y.byteLength>3&&(B=X(y[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0)),E},ue={parseType:c,parsePat:p,parsePmt:v,parsePayloadUnitStartIndicator:Da,parsePesType:w,parsePesTime:M,videoPacketContainsKeyFrame:se},we=ua,Be=ha.handleRollover,Ne={};Ne.ts=ue,Ne.aac=ht;var et=rt.ONE_SECOND_IN_TS,yt=188,At=71,nn=function(f,g){for(var y=0,_=yt,S,E;_<f.byteLength;){if(f[y]===At&&f[_]===At){switch(S=f.subarray(y,_),E=Ne.ts.parseType(S,g.pid),E){case"pat":g.pid=Ne.ts.parsePat(S);break;case"pmt":var B=Ne.ts.parsePmt(S);g.table=g.table||{},Object.keys(B).forEach(function(z){g.table[z]=B[z]});break}y+=yt,_+=yt;continue}y++,_++}},Si=function(f,g,y){for(var _=0,S=yt,E,B,z,H,W,te=!1;S<=f.byteLength;){if(f[_]===At&&(f[S]===At||S===f.byteLength)){switch(E=f.subarray(_,S),B=Ne.ts.parseType(E,g.pid),B){case"pes":z=Ne.ts.parsePesType(E,g.table),H=Ne.ts.parsePayloadUnitStartIndicator(E),z==="audio"&&H&&(W=Ne.ts.parsePesTime(E),W&&(W.type="audio",y.audio.push(W),te=!0));break}if(te)break;_+=yt,S+=yt;continue}_++,S++}for(S=f.byteLength,_=S-yt,te=!1;_>=0;){if(f[_]===At&&(f[S]===At||S===f.byteLength)){switch(E=f.subarray(_,S),B=Ne.ts.parseType(E,g.pid),B){case"pes":z=Ne.ts.parsePesType(E,g.table),H=Ne.ts.parsePayloadUnitStartIndicator(E),z==="audio"&&H&&(W=Ne.ts.parsePesTime(E),W&&(W.type="audio",y.audio.push(W),te=!0));break}if(te)break;_-=yt,S-=yt;continue}_--,S--}},Ar=function(f,g,y){for(var _=0,S=yt,E,B,z,H,W,te,me,Me,Te=!1,We={data:[],size:0};S<f.byteLength;){if(f[_]===At&&f[S]===At){switch(E=f.subarray(_,S),B=Ne.ts.parseType(E,g.pid),B){case"pes":if(z=Ne.ts.parsePesType(E,g.table),H=Ne.ts.parsePayloadUnitStartIndicator(E),z==="video"&&(H&&!Te&&(W=Ne.ts.parsePesTime(E),W&&(W.type="video",y.video.push(W),Te=!0)),!y.firstKeyFrame)){if(H&&We.size!==0){for(te=new Uint8Array(We.size),me=0;We.data.length;)Me=We.data.shift(),te.set(Me,me),me+=Me.byteLength;if(Ne.ts.videoPacketContainsKeyFrame(te)){var at=Ne.ts.parsePesTime(te);at?(y.firstKeyFrame=at,y.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}We.size=0}We.data.push(E),We.size+=E.byteLength}break}if(Te&&y.firstKeyFrame)break;_+=yt,S+=yt;continue}_++,S++}for(S=f.byteLength,_=S-yt,Te=!1;_>=0;){if(f[_]===At&&f[S]===At){switch(E=f.subarray(_,S),B=Ne.ts.parseType(E,g.pid),B){case"pes":z=Ne.ts.parsePesType(E,g.table),H=Ne.ts.parsePayloadUnitStartIndicator(E),z==="video"&&H&&(W=Ne.ts.parsePesTime(E),W&&(W.type="video",y.video.push(W),Te=!0));break}if(Te)break;_-=yt,S-=yt;continue}_--,S--}},sp=function(f,g){if(f.audio&&f.audio.length){var y=g;(typeof y>"u"||isNaN(y))&&(y=f.audio[0].dts),f.audio.forEach(function(E){E.dts=Be(E.dts,y),E.pts=Be(E.pts,y),E.dtsTime=E.dts/et,E.ptsTime=E.pts/et})}if(f.video&&f.video.length){var _=g;if((typeof _>"u"||isNaN(_))&&(_=f.video[0].dts),f.video.forEach(function(E){E.dts=Be(E.dts,_),E.pts=Be(E.pts,_),E.dtsTime=E.dts/et,E.ptsTime=E.pts/et}),f.firstKeyFrame){var S=f.firstKeyFrame;S.dts=Be(S.dts,_),S.pts=Be(S.pts,_),S.dtsTime=S.dts/et,S.ptsTime=S.pts/et}}},rp=function(f){for(var g=!1,y=0,_=null,S=null,E=0,B=0,z;f.length-B>=3;){var H=Ne.aac.parseType(f,B);switch(H){case"timed-metadata":if(f.length-B<10){g=!0;break}if(E=Ne.aac.parseId3TagSize(f,B),E>f.length){g=!0;break}S===null&&(z=f.subarray(B,B+E),S=Ne.aac.parseAacTimestamp(z)),B+=E;break;case"audio":if(f.length-B<7){g=!0;break}if(E=Ne.aac.parseAdtsSize(f,B),E>f.length){g=!0;break}_===null&&(z=f.subarray(B,B+E),_=Ne.aac.parseSampleRate(z)),y++,B+=E;break;default:B++;break}if(g)return null}if(_===null||S===null)return null;var W=et/_,te={audio:[{type:"audio",dts:S,pts:S},{type:"audio",dts:S+y*1024*W,pts:S+y*1024*W}]};return te},op=function(f){var g={pid:null,table:null},y={};nn(f,g);for(var _ in g.table)if(g.table.hasOwnProperty(_)){var S=g.table[_];switch(S){case we.H264_STREAM_TYPE:y.video=[],Ar(f,g,y),y.video.length===0&&delete y.video;break;case we.ADTS_STREAM_TYPE:y.audio=[],Si(f,g,y),y.audio.length===0&&delete y.audio;break}}return y},fh=function(f,g){var y=Ne.aac.isLikelyAacData(f),_;return y?_=rp(f):_=op(f),!_||!_.audio&&!_.video?null:(sp(_,g),_)},ap={inspect:fh,parseAudioPes_:Si};const ph=function(f,g){g.on("data",function(y){const _=y.initSegment;y.initSegment={data:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength};const S=y.data;y.data=S.buffer,f.postMessage({action:"data",segment:y,byteOffset:S.byteOffset,byteLength:S.byteLength},[y.data])}),g.on("done",function(y){f.postMessage({action:"done"})}),g.on("gopInfo",function(y){f.postMessage({action:"gopInfo",gopInfo:y})}),g.on("videoSegmentTimingInfo",function(y){const _={start:{decode:rt.videoTsToSeconds(y.start.dts),presentation:rt.videoTsToSeconds(y.start.pts)},end:{decode:rt.videoTsToSeconds(y.end.dts),presentation:rt.videoTsToSeconds(y.end.pts)},baseMediaDecodeTime:rt.videoTsToSeconds(y.baseMediaDecodeTime)};y.prependedContentDuration&&(_.prependedContentDuration=rt.videoTsToSeconds(y.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:_})}),g.on("audioSegmentTimingInfo",function(y){const _={start:{decode:rt.videoTsToSeconds(y.start.dts),presentation:rt.videoTsToSeconds(y.start.pts)},end:{decode:rt.videoTsToSeconds(y.end.dts),presentation:rt.videoTsToSeconds(y.end.pts)},baseMediaDecodeTime:rt.videoTsToSeconds(y.baseMediaDecodeTime)};y.prependedContentDuration&&(_.prependedContentDuration=rt.videoTsToSeconds(y.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:_})}),g.on("id3Frame",function(y){f.postMessage({action:"id3Frame",id3Frame:y})}),g.on("caption",function(y){f.postMessage({action:"caption",caption:y})}),g.on("trackinfo",function(y){f.postMessage({action:"trackinfo",trackInfo:y})}),g.on("audioTimingInfo",function(y){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:rt.videoTsToSeconds(y.start),end:rt.videoTsToSeconds(y.end)}})}),g.on("videoTimingInfo",function(y){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:rt.videoTsToSeconds(y.start),end:rt.videoTsToSeconds(y.end)}})}),g.on("log",function(y){f.postMessage({action:"log",log:y})})};class Gt{constructor(g,y){this.options=y||{},this.self=g,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Wf.Transmuxer(this.options),ph(this.self,this.transmuxer)}pushMp4Captions(g){this.captionParser||(this.captionParser=new lh,this.captionParser.init());const y=new Uint8Array(g.data,g.byteOffset,g.byteLength),_=this.captionParser.parse(y,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:y.buffer},[y.buffer])}initMp4WebVttParser(g){this.webVttParser||(this.webVttParser=new dh);const y=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.webVttParser.init(y)}getMp4WebVttText(g){this.webVttParser||(this.webVttParser=new dh);const y=new Uint8Array(g.data,g.byteOffset,g.byteLength),_=this.webVttParser.parseSegment(y);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:_||[],data:y.buffer},[y.buffer])}probeMp4StartTime({timescales:g,data:y}){const _=To.startTime(g,y);this.self.postMessage({action:"probeMp4StartTime",startTime:_,data:y},[y.buffer])}probeMp4Tracks({data:g}){const y=To.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:y,data:g},[g.buffer])}probeEmsgID3({data:g,offset:y}){const _=To.getEmsgID3(g,y);this.self.postMessage({action:"probeEmsgID3",id3Frames:_,emsgData:g},[g.buffer])}probeTs({data:g,baseStartTime:y}){const _=typeof y=="number"&&!isNaN(y)?y*rt.ONE_SECOND_IN_TS:void 0,S=ap.inspect(g,_);let E=null;S&&(E={hasVideo:S.video&&S.video.length===2||!1,hasAudio:S.audio&&S.audio.length===2||!1},E.hasVideo&&(E.videoStart=S.video[0].ptsTime),E.hasAudio&&(E.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:E,data:g},[g.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(g){const y=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(y)}reset(){this.transmuxer.reset()}setTimestampOffset(g){const y=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(rt.secondsToVideoTs(y)))}setAudioAppendStart(g){this.transmuxer.setAudioAppendStart(Math.ceil(rt.secondsToVideoTs(g.appendStart)))}setRemux(g){this.transmuxer.setRemux(g.remux)}flush(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Gt(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Gt(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var cF=Ew(uF);const hF=(i,e,t)=>{const{type:n,initSegment:s,captions:r,captionStreams:o,metadata:l,videoFrameDtsTime:u,videoFramePtsTime:h}=i.data.segment;e.buffer.push({captions:r,captionStreams:o,metadata:l});const d=i.data.segment.boxes||{data:i.data.segment.data},m={type:n,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof u<"u"&&(m.videoFrameDtsTime=u),typeof h<"u"&&(m.videoFramePtsTime=h),t(m)},dF=({transmuxedData:i,callback:e})=>{i.buffer=[],e(i)},fF=(i,e)=>{e.gopInfo=i.data.gopInfo},Pw=i=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:s,remux:r,onData:o,onTrackInfo:l,onAudioTimingInfo:u,onVideoTimingInfo:h,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:m,onId3:b,onCaptions:T,onDone:C,onEndedTimeline:x,onTransmuxerLog:A,isEndOfTimeline:P,segment:k,triggerSegmentEventFn:I}=i,F={buffer:[]};let j=P;const V=K=>{e.currentTransmux===i&&(K.data.action==="data"&&hF(K,F,o),K.data.action==="trackinfo"&&l(K.data.trackInfo),K.data.action==="gopInfo"&&fF(K,F),K.data.action==="audioTimingInfo"&&u(K.data.audioTimingInfo),K.data.action==="videoTimingInfo"&&h(K.data.videoTimingInfo),K.data.action==="videoSegmentTimingInfo"&&d(K.data.videoSegmentTimingInfo),K.data.action==="audioSegmentTimingInfo"&&m(K.data.audioSegmentTimingInfo),K.data.action==="id3Frame"&&b([K.data.id3Frame],K.data.id3Frame.dispatchType),K.data.action==="caption"&&T(K.data.caption),K.data.action==="endedtimeline"&&(j=!1,x()),K.data.action==="log"&&A(K.data.log),K.data.type==="transmuxed"&&(j||(e.onmessage=null,dF({transmuxedData:F,callback:C}),kw(e))))},U=()=>{const K={message:"Received an error message from the transmuxer worker",metadata:{errorType:oe.Error.StreamingFailedToTransmuxSegment,segmentInfo:No({segment:k})}};C(null,K)};if(e.onmessage=V,e.onerror=U,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),t.byteLength){const K=t instanceof ArrayBuffer?t:t.buffer,D=t instanceof ArrayBuffer?0:t.byteOffset;I({type:"segmenttransmuxingstart",segment:k}),e.postMessage({action:"push",data:K,byteOffset:D,byteLength:t.byteLength},[K])}P&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},kw=i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():Pw(i.currentTransmux))},rT=(i,e)=>{i.postMessage({action:e}),kw(i)},Iw=(i,e)=>{if(!e.currentTransmux){e.currentTransmux=i,rT(e,i);return}e.transmuxQueue.push(rT.bind(null,e,i))},pF=i=>{Iw("reset",i)},mF=i=>{Iw("endTimeline",i)},Lw=i=>{if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,Pw(i);return}i.transmuxer.transmuxQueue.push(i)},gF=i=>{const e=new cF;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:i}),e};var Pm={reset:pF,endTimeline:mF,transmux:Lw,createTransmuxer:gF};const tl=function(i){const e=i.transmuxer,t=i.endAction||i.action,n=i.callback,s=ii({},i,{endAction:null,transmuxer:null,callback:null}),r=o=>{o.data.action===t&&(e.removeEventListener("message",r),o.data.data&&(o.data.data=new Uint8Array(o.data.data,i.byteOffset||0,i.byteLength||o.data.data.byteLength),i.data&&(i.data=o.data.data)),n(o.data))};if(e.addEventListener("message",r),i.data){const o=i.data instanceof ArrayBuffer;s.byteOffset=o?0:i.data.byteOffset,s.byteLength=i.data.byteLength;const l=[o?i.data:i.data.buffer];e.postMessage(s,l)}else e.postMessage(s)},Ms={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Ow="wvtt",wg=i=>{i.forEach(e=>{e.abort()})},_F=i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),yF=i=>{const e=i.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=i.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},n0=(i,e)=>{const{requestType:t}=e,n=Zo({requestType:t,request:e,error:i});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Ms.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Ms.ABORTED,xhr:e,metadata:n}:i?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Ms.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Ms.FAILURE,xhr:e,metadata:n}:null},oT=(i,e,t,n)=>(s,r)=>{const o=r.response,l=n0(s,r);if(l)return t(l,i);if(o.byteLength!==16)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Ms.FAILURE,xhr:r},i);const u=new DataView(o),h=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]);for(let m=0;m<e.length;m++)e[m].bytes=h;const d={uri:r.uri};return n({type:"segmentkeyloadcomplete",segment:i,keyInfo:d}),t(null,i)},vF=(i,e)=>{e===Ow&&i.transmuxer.postMessage({action:"initMp4WebVttParser",data:i.map.bytes})},bF=(i,e,t)=>{e===Ow&&tl({action:"getMp4WebVttText",data:i.bytes,transmuxer:i.transmuxer,callback:({data:n,mp4VttCues:s})=>{i.bytes=n,t(null,i,{mp4VttCues:s})}})},Mw=(i,e)=>{const t=A_(i.map.bytes);if(t!=="mp4"){const n=i.map.resolvedUri||i.map.uri,s=t||"unknown";return e({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${n}`,code:Ms.FAILURE,metadata:{mediaType:s}})}tl({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:({tracks:n,data:s})=>(i.map.bytes=s,n.forEach(function(r){i.map.tracks=i.map.tracks||{},!i.map.tracks[r.type]&&(i.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[r.id]=r.timescale),r.type==="text"&&vF(i,r.codec))}),e(null))})},TF=({segment:i,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,s)=>{const r=n0(n,s);if(r)return e(r,i);const o=new Uint8Array(s.response);if(t({type:"segmentloaded",segment:i}),i.map.key)return i.map.encryptedBytes=o,e(null,i);i.map.bytes=o,Mw(i,function(l){if(l)return l.xhr=s,l.status=s.status,e(l,i);e(null,i)})},xF=({segment:i,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(s,r)=>{const o=n0(s,r);if(o)return e(o,i);n({type:"segmentloaded",segment:i});const l=t==="arraybuffer"||!r.responseText?r.response:aF(r.responseText.substring(i.lastReachedChar||0));return i.stats=_F(r),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),e(null,i)},SF=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})=>{const C=i.map&&i.map.tracks||{},x=!!(C.audio&&C.video);let A=n.bind(null,i,"audio","start");const P=n.bind(null,i,"audio","end");let k=n.bind(null,i,"video","start");const I=n.bind(null,i,"video","end"),F=()=>Lw({bytes:e,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:x,onData:j=>{j.type=j.type==="combined"?"video":j.type,d(i,j)},onTrackInfo:j=>{t&&(x&&(j.isMuxed=!0),t(i,j))},onAudioTimingInfo:j=>{A&&typeof j.start<"u"&&(A(j.start),A=null),P&&typeof j.end<"u"&&P(j.end)},onVideoTimingInfo:j=>{k&&typeof j.start<"u"&&(k(j.start),k=null),I&&typeof j.end<"u"&&I(j.end)},onVideoSegmentTimingInfo:j=>{const V={pts:{start:j.start.presentation,end:j.end.presentation},dts:{start:j.start.decode,end:j.end.decode}};T({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:V}),s(j)},onAudioSegmentTimingInfo:j=>{const V={pts:{start:j.start.pts,end:j.end.pts},dts:{start:j.start.dts,end:j.end.dts}};T({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:V}),r(j)},onId3:(j,V)=>{o(i,j,V)},onCaptions:j=>{l(i,[j])},isEndOfTimeline:u,onEndedTimeline:()=>{h()},onTransmuxerLog:b,onDone:(j,V)=>{m&&(j.type=j.type==="combined"?"video":j.type,T({type:"segmenttransmuxingcomplete",segment:i}),m(V,i,j))},segment:i,triggerSegmentEventFn:T});tl({action:"probeTs",transmuxer:i.transmuxer,data:e,baseStartTime:i.baseStartTime,callback:j=>{i.bytes=e=j.data;const V=j.result;V&&(t(i,{hasAudio:V.hasAudio,hasVideo:V.hasVideo,isMuxed:x}),t=null),F()}})},Rw=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})=>{let C=new Uint8Array(e);if(HN(C)){i.isFmp4=!0;const{tracks:x}=i.map;if(x.text&&(!x.audio||!x.video)){d(i,{data:C,type:"text"}),bF(i,x.text.codec,m);return}const P={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(P.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(P.videoCodec=x.video.codec),x.video&&x.audio&&(P.isMuxed=!0),t(i,P);const k=(I,F)=>{d(i,{data:C,type:P.hasAudio&&!P.isMuxed?"audio":"video"}),F&&F.length&&o(i,F),I&&I.length&&l(i,I),m(null,i,{})};tl({action:"probeMp4StartTime",timescales:i.map.timescales,data:C,transmuxer:i.transmuxer,callback:({data:I,startTime:F})=>{e=I.buffer,i.bytes=C=I,P.hasAudio&&!P.isMuxed&&n(i,"audio","start",F),P.hasVideo&&n(i,"video","start",F),tl({action:"probeEmsgID3",data:C,transmuxer:i.transmuxer,offset:F,callback:({emsgData:j,id3Frames:V})=>{if(e=j.buffer,i.bytes=C=j,!x.video||!j.byteLength||!i.transmuxer){k(void 0,V);return}tl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:C,timescales:i.map.timescales,trackIds:[x.video.id],callback:U=>{e=U.data.buffer,i.bytes=C=U.data,U.logs.forEach(function(K){b(xt(K,{stream:"mp4CaptionParser"}))}),k(U.captions,V)}})}})}});return}if(!i.transmuxer){m(null,i,{});return}if(typeof i.container>"u"&&(i.container=A_(C)),i.container!=="ts"&&i.container!=="aac"){t(i,{hasAudio:!1,hasVideo:!1}),m(null,i,{});return}SF({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})},Nw=function({id:i,key:e,encryptedBytes:t,decryptionWorker:n,segment:s,doneFn:r},o){const l=h=>{if(h.data.source===i){n.removeEventListener("message",l);const d=h.data.decrypted;o(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};n.onerror=()=>{const h="An error occurred in the decryption worker",d=No({segment:s}),m={message:h,metadata:{error:new Error(h),errorType:oe.Error.StreamingFailedToDecryptSegment,segmentInfo:d,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};r(m,s)},n.addEventListener("message",l);let u;e.bytes.slice?u=e.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(bw({source:i,encrypted:t,key:u,iv:e.iv}),[t.buffer,u.buffer])},wF=({decryptionWorker:i,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})=>{T({type:"segmentdecryptionstart"}),Nw({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:i,segment:e,doneFn:m},C=>{e.bytes=C,T({type:"segmentdecryptioncomplete",segment:e}),Rw({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})})},CF=({activeXhrs:i,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})=>{let C=0,x=!1;return(A,P)=>{if(!x){if(A)return x=!0,wg(i),m(A,P);if(C+=1,C===i.length){const k=function(){if(P.encryptedBytes)return wF({decryptionWorker:e,segment:P,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T});Rw({segment:P,bytes:P.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:b,triggerSegmentEventFn:T})};if(P.endOfAllRequests=Date.now(),P.map&&P.map.encryptedBytes&&!P.map.bytes)return T({type:"segmentdecryptionstart",segment:P}),Nw({decryptionWorker:e,id:P.requestId+"-init",encryptedBytes:P.map.encryptedBytes,key:P.map.key,segment:P,doneFn:m},I=>{P.map.bytes=I,T({type:"segmentdecryptioncomplete",segment:P}),Mw(P,F=>{if(F)return wg(i),m(F,P);k()})});k()}}}},EF=({loadendState:i,abortFn:e})=>t=>{t.target.aborted&&e&&!i.calledAbortFn&&(e(),i.calledAbortFn=!0)},AF=({segment:i,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d})=>m=>{if(!m.target.aborted)return i.stats=xt(i.stats,yF(m)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),e(m,i)},DF=({xhr:i,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:s,progressFn:r,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:b,endedTimelineFn:T,dataFn:C,doneFn:x,onTransmuxerLog:A,triggerSegmentEventFn:P})=>{const k=[],I=CF({activeXhrs:k,decryptionWorker:t,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:b,endedTimelineFn:T,dataFn:C,doneFn:x,onTransmuxerLog:A,triggerSegmentEventFn:P});if(n.key&&!n.key.bytes){const K=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&K.push(n.map.key);const D=xt(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),R=oT(n,K,I,P),Y={uri:n.key.resolvedUri};P({type:"segmentkeyloadstart",segment:n,keyInfo:Y});const Q=i(D,R);k.push(Q)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const Q=xt(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),J=oT(n,[n.map.key],I,P),ae={uri:n.map.key.resolvedUri};P({type:"segmentkeyloadstart",segment:n,keyInfo:ae});const ce=i(Q,J);k.push(ce)}const D=xt(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:xg(n.map),requestType:"segment-media-initialization"}),R=TF({segment:n,finishProcessingFn:I,triggerSegmentEventFn:P});P({type:"segmentloadstart",segment:n});const Y=i(D,R);k.push(Y)}const F=xt(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:xg(n),requestType:"segment"}),j=xF({segment:n,finishProcessingFn:I,responseType:F.responseType,triggerSegmentEventFn:P});P({type:"segmentloadstart",segment:n});const V=i(F,j);V.addEventListener("progress",AF({segment:n,progressFn:r,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:b,endedTimelineFn:T,dataFn:C})),k.push(V);const U={};return k.forEach(K=>{K.addEventListener("loadend",EF({loadendState:U,abortFn:s}))}),()=>wg(k)},Uh=Kn("PlaylistSelector"),aT=function(i){if(!i||!i.playlist)return;const e=i.playlist;return JSON.stringify({id:e.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:e.attributes&&e.attributes.CODECS||""})},il=function(i,e){if(!i)return"";const t=q.getComputedStyle(i);return t?t[e]:""},nl=function(i,e){const t=i.slice();i.sort(function(n,s){const r=e(n,s);return r===0?t.indexOf(n)-t.indexOf(s):r})},s0=function(i,e){let t,n;return i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH),t=t||q.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||q.Number.MAX_VALUE,t-n},PF=function(i,e){let t,n;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(t=i.attributes.RESOLUTION.width),t=t||q.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||q.Number.MAX_VALUE,t===n&&i.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?i.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let Bw=function(i){const{main:e,bandwidth:t,playerWidth:n,playerHeight:s,playerObjectFit:r,limitRenditionByPlayerDimensions:o,playlistController:l}=i;if(!e)return;const u={bandwidth:t,width:n,height:s,limitRenditionByPlayerDimensions:o};let h=e.playlists;ln.isAudioOnly(e)&&(h=l.getAudioTrackPlaylists_(),u.audioOnly=!0);let d=h.map(U=>{let K;const D=U.attributes&&U.attributes.RESOLUTION&&U.attributes.RESOLUTION.width,R=U.attributes&&U.attributes.RESOLUTION&&U.attributes.RESOLUTION.height;return K=U.attributes&&U.attributes.BANDWIDTH,K=K||q.Number.MAX_VALUE,{bandwidth:K,width:D,height:R,playlist:U}});nl(d,(U,K)=>U.bandwidth-K.bandwidth),d=d.filter(U=>!ln.isIncompatible(U.playlist));let m=d.filter(U=>ln.isEnabled(U.playlist));m.length||(m=d.filter(U=>!ln.isDisabled(U.playlist)));const b=m.filter(U=>U.bandwidth*_i.BANDWIDTH_VARIANCE<t);let T=b[b.length-1];const C=b.filter(U=>U.bandwidth===T.bandwidth)[0];if(o===!1){const U=C||m[0]||d[0];if(U&&U.playlist){let K="sortedPlaylistReps";return C&&(K="bandwidthBestRep"),m[0]&&(K="enabledPlaylistReps"),Uh(`choosing ${aT(U)} using ${K} with options`,u),U.playlist}return Uh("could not choose a playlist with options",u),null}const x=b.filter(U=>U.width&&U.height);nl(x,(U,K)=>U.width-K.width);const A=x.filter(U=>U.width===n&&U.height===s);T=A[A.length-1];const P=A.filter(U=>U.bandwidth===T.bandwidth)[0];let k,I,F;P||(k=x.filter(U=>r==="cover"?U.width>n&&U.height>s:U.width>n||U.height>s),I=k.filter(U=>U.width===k[0].width&&U.height===k[0].height),T=I[I.length-1],F=I.filter(U=>U.bandwidth===T.bandwidth)[0]);let j;if(l.leastPixelDiffSelector){const U=x.map(K=>(K.pixelDiff=Math.abs(K.width-n)+Math.abs(K.height-s),K));nl(U,(K,D)=>K.pixelDiff===D.pixelDiff?D.bandwidth-K.bandwidth:K.pixelDiff-D.pixelDiff),j=U[0]}const V=j||F||P||C||m[0]||d[0];if(V&&V.playlist){let U="sortedPlaylistReps";return j?U="leastPixelDiffRep":F?U="resolutionPlusOneRep":P?U="resolutionBestRep":C?U="bandwidthBestRep":m[0]&&(U="enabledPlaylistReps"),Uh(`choosing ${aT(V)} using ${U} with options`,u),V.playlist}return Uh("could not choose a playlist with options",u),null};const lT=function(){let i=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),Bw({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(il(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(il(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?il(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},kF=function(i){let e=-1,t=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=i*this.systemBandwidth+(1-i)*e,t=this.systemBandwidth),Bw({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(il(this.tech_.el(),"width"),10)*n,playerHeight:parseInt(il(this.tech_.el(),"height"),10)*n,playerObjectFit:this.usePlayerObjectFit?il(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},IF=function(i){const{main:e,currentTime:t,bandwidth:n,duration:s,segmentDuration:r,timeUntilRebuffer:o,currentTimeline:l,syncController:u}=i,h=e.playlists.filter(C=>!ln.isIncompatible(C));let d=h.filter(ln.isEnabled);d.length||(d=h.filter(C=>!ln.isDisabled(C)));const b=d.filter(ln.hasAttribute.bind(null,"BANDWIDTH")).map(C=>{const A=u.getSyncPoint(C,s,l,t)?1:2,k=ln.estimateSegmentRequestTime(r,n,C)*A-o;return{playlist:C,rebufferingImpact:k}}),T=b.filter(C=>C.rebufferingImpact<=0);return nl(T,(C,x)=>s0(x.playlist,C.playlist)),T.length?T[0]:(nl(b,(C,x)=>C.rebufferingImpact-x.rebufferingImpact),b[0]||null)},LF=function(){const i=this.playlists.main.playlists.filter(ln.isEnabled);return nl(i,(t,n)=>s0(t,n)),i.filter(t=>!!Qu(this.playlists.main,t).video)[0]||null},OF=i=>{let e=0,t;return i.bytes&&(t=new Uint8Array(i.bytes),i.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function Fw(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch{return""}}const MF=function(i,e,t){if(!i[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const s=e.textTracks().getTrackById(n);if(s)i[t]=s;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=t,l=t,u=!1;const h=r[n];h&&(o=h.label,l=h.language,u=h.default),i[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:u,label:o,language:l},!1).track}}},RF=function({inbandTextTracks:i,captionArray:e,timestampOffset:t}){if(!e)return;const n=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{const r=s.stream;s.content?s.content.forEach(o=>{const l=new n(s.startTime+t,s.endTime+t,o.text);l.line=o.line,l.align="left",l.position=o.position,l.positionAlign="line-left",i[r].addCue(l)}):i[r].addCue(new n(s.startTime+t,s.endTime+t,s.text))})},NF=function(i){Object.defineProperties(i.frame,{id:{get(){return oe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get(){return oe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get(){return oe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},BF=({inbandTextTracks:i,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const s=q.WebKitDataCue||q.VTTCue,r=i.metadataTrack_;if(!r||(e.forEach(d=>{const m=d.cueTime+t;typeof m!="number"||q.isNaN(m)||m<0||!(m<1/0)||!d.frames||!d.frames.length||d.frames.forEach(b=>{const T=new s(m,m,b.value||b.url||b.data||"");T.frame=b,T.value=b,NF(T),r.addCue(T)})}),!r.cues||!r.cues.length))return;const o=r.cues,l=[];for(let d=0;d<o.length;d++)o[d]&&l.push(o[d]);const u=l.reduce((d,m)=>{const b=d[m.startTime]||[];return b.push(m),d[m.startTime]=b,d},{}),h=Object.keys(u).sort((d,m)=>Number(d)-Number(m));h.forEach((d,m)=>{const b=u[d],T=isFinite(n)?n:d,C=Number(h[m+1])||T;b.forEach(x=>{x.endTime=C})})},FF={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},UF=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),jF=({inbandTextTracks:i,dateRanges:e})=>{const t=i.metadataTrack_;if(!t)return;const n=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{for(const r of Object.keys(s)){if(UF.has(r))continue;const o=new n(s.startTime,s.endTime,"");o.id=s.id,o.type="com.apple.quicktime.HLS",o.value={key:FF[r],data:s[r]},(r==="scte35Out"||r==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(o)}s.processDateRange()})},uT=(i,e,t)=>{i.metadataTrack_||(i.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,oe.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=e))},Mu=function(i,e,t){let n,s;if(t&&t.cues)for(n=t.cues.length;n--;)s=t.cues[n],s.startTime>=i&&s.endTime<=e&&t.removeCue(s)},zF=function(i){const e=i.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const s=e[n],r=`${s.startTime}-${s.endTime}-${s.text}`;t[r]?i.removeCue(s):t[r]=s}},HF=(i,e,t)=>{if(typeof e>"u"||e===null||!i.length)return[];const n=Math.ceil((e-t+3)*jo.ONE_SECOND_IN_TS);let s;for(s=0;s<i.length&&!(i[s].pts>n);s++);return i.slice(s)},$F=(i,e,t)=>{if(!e.length)return i;if(t)return e.slice();const n=e[0].pts;let s=0;for(s;s<i.length&&!(i[s].pts>=n);s++);return i.slice(0,s).concat(e)},VF=(i,e,t,n)=>{const s=Math.ceil((e-n)*jo.ONE_SECOND_IN_TS),r=Math.ceil((t-n)*jo.ONE_SECOND_IN_TS),o=i.slice();let l=i.length;for(;l--&&!(i[l].pts<=r););if(l===-1)return o;let u=l+1;for(;u--&&!(i[u].pts<=s););return u=Math.max(u,0),o.splice(u,l-u+1),o},qF=function(i,e){if(!i&&!e||!i&&e||i&&!e)return!1;if(i===e)return!0;const t=Object.keys(i).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(r!==n[s]||i[r]!==e[r])return!1}return!0},WF=function(i,e,t){e=e||[];const n=[];let s=0;for(let r=0;r<e.length;r++){const o=e[r];if(i===o.timeline&&(n.push(r),s+=o.duration,s>t))return r}return n.length===0?0:n[n.length-1]},wu=1,GF=500,cT=i=>typeof i=="number"&&isFinite(i),jh=1/60,XF=(i,e,t)=>i!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,KF=(i,e,t)=>{let n=e-_i.BACK_BUFFER_LENGTH;i.length&&(n=Math.max(n,i.start(0)));const s=e-t;return Math.min(s,n)},Ra=i=>{const{startOfSegment:e,duration:t,segment:n,part:s,playlist:{mediaSequence:r,id:o,segments:l=[]},mediaIndex:u,partIndex:h,timeline:d}=i,m=l.length-1;let b="mediaIndex/partIndex increment";i.getMediaInfoForTime?b=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(b="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(b+=` with independent ${i.independent}`);const T=typeof h=="number",C=i.segment.uri?"segment":"pre-segment",x=T?iw({preloadSegment:n})-1:0;return`${C} [${r+u}/${r+m}]`+(T?` part [${h}/${x}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(T?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${d}] selected by [${b}] playlist [${o}]`},hT=i=>`${i}TimingInfo`,ZF=({segmentTimeline:i,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:s})=>!s&&i===e?null:i<e?t:n.length?n.end(n.length-1):t,Cg=({timelineChangeController:i,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:s})=>{if(e===t)return!1;if(n==="audio"){const r=i.lastTimelineChange({type:"main"});return!r||r.to!==t}if(n==="main"&&s){const r=i.pendingTimelineChange({type:"audio"});return!(r&&r.to===t)}return!1},YF=i=>{if(!i)return!1;const e=i.pendingTimelineChange({type:"audio"}),t=i.pendingTimelineChange({type:"main"}),n=e&&t,s=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&s)},QF=i=>{const e=i.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=i.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Lr=i=>{const e=i.pendingSegment_;if(!e)return;if(Cg({timelineChangeController:i.timelineChangeController_,currentTimeline:i.currentTimeline_,segmentTimeline:e.timeline,loaderType:i.loaderType_,audioDisabled:i.audioDisabled_})&&YF(i.timelineChangeController_)){if(QF(i)){i.timelineChangeController_.trigger("audioTimelineBehind");return}i.timelineChangeController_.trigger("fixBadTimelineChange")}},JF=i=>{let e=0;return["video","audio"].forEach(function(t){const n=i[`${t}TimingInfo`];if(!n)return;const{start:s,end:r}=n;let o;typeof s=="bigint"||typeof r=="bigint"?o=q.BigInt(r)-q.BigInt(s):typeof s=="number"&&typeof r=="number"&&(o=r-s),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},dT=({segmentDuration:i,maxDuration:e})=>i?Math.round(i)>e+Ls:!1,e5=(i,e)=>{if(e!=="hls")return null;const t=JF({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!t)return null;const n=i.playlist.targetDuration,s=dT({segmentDuration:t,maxDuration:n*2}),r=dT({segmentDuration:t,maxDuration:n}),o=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${t} when the reported duration is ${i.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:o}:null},No=({type:i,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),s=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:i||e.type,uri:e.resolvedUri||e.uri,start:s,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};class Eg extends oe.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Kn(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Lr(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(ii({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Lr(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(ii({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Lr(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Lr(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Pm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,q.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Pm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return bi();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:s}=e;if(n&&t&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Fd(e);let s=this.initSegments_[n];return t&&!s&&e.bytes&&(this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,t=!1){if(!e)return null;const n=Tw(e);let s=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!s&&e.bytes&&(this.keyCache_[n]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(s||e).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Am(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){const u=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=u}}s&&(s.mediaIndex-=o,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Pm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},s=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const o=()=>{r--,r===0&&n()};(s||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,t,o)),(s||this.loaderType_==="main")&&(this.gopBuffer_=VF(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,o));for(const l in this.inbandTextTracks_)Mu(e,t,this.inbandTextTracks_[l]);Mu(e,t,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),GF)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:No({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const s=typeof e=="number"&&t.segments[e],r=e+1===t.segments.length,o=!s||!s.parts||n+1===s.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&r&&o}chooseNextRequest_(){const e=this.buffered_(),t=Am(e)||0,n=J_(e,this.currentTime_()),s=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=WF(this.currentTimeline_,o,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${l.mediaIndex}`);else if(this.mediaIndex!==null){const b=o[this.mediaIndex],T=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=b.end?b.end:t,b.parts&&b.parts[T+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=T+1):l.mediaIndex=this.mediaIndex+1}else{let b,T,C;const x=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${x}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const A=this.getSyncInfoFromMediaSequenceSync_(x);if(!A){const P="No sync info found while using media sequence sync";return this.error({message:P,metadata:{errorType:oe.Error.StreamingFailedToSelectNextSegment,error:new Error(P)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${A.start} --> ${A.end})`),b=A.segmentIndex,T=A.partIndex,C=A.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const A=ln.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:x,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});b=A.segmentIndex,T=A.partIndex,C=A.startTime}l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${x}`:`currentTime ${x}`,l.mediaIndex=b,l.startOfSegment=C,l.partIndex=T,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${l.mediaIndex} `)}const u=o[l.mediaIndex];let h=u&&typeof l.partIndex=="number"&&u.parts&&u.parts[l.partIndex];if(!u||typeof l.partIndex=="number"&&!h)return null;typeof l.partIndex!="number"&&u.parts&&(l.partIndex=0,h=u.parts[0]);const d=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&h&&!d&&!h.independent)if(l.partIndex===0){const b=o[l.mediaIndex-1],T=b.parts&&b.parts.length&&b.parts[b.parts.length-1];T&&T.independent&&(l.mediaIndex-=1,l.partIndex=b.parts.length-1,l.independent="previous segment")}else u.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");const m=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=o.length-1&&m&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,l.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(l))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const s=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:s,startOfSegment:r,isSyncRequest:o,partIndex:l,forceTimestampOffset:u,getMediaInfoForTime:h}=e,d=n.segments[s],m=typeof l=="number"&&d.parts[l],b={requestId:"segment-loader-"+Math.random(),uri:m&&m.resolvedUri||d.resolvedUri,mediaIndex:s,partIndex:m?l:null,isSyncRequest:o,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:m&&m.duration||d.duration,segment:d,part:m,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:t},T=typeof u<"u"?u:this.isPendingTimestampOffset_;b.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:T});const C=Am(this.sourceUpdater_.audioBuffered());return typeof C=="number"&&(b.audioAppendStart=C-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(b.gopsToAlignWith=HF(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),b}timestampOffsetForSegment_(e){return ZF(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,s=this.pendingSegment_.duration,r=ln.estimateSegmentRequestTime(s,n,this.playlist_,e.bytesReceived),o=y4(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=o)return;const l=IF({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;const h=r-o-l.rebufferingImpact;let d=.5;o<=Ls&&(d=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||h<d)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*_i.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Ra(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:s}=t,r={segmentInfo:No({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},qF(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Lr(this))))}handleTimingInfo_(e,t,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,o=hT(t);r[o]=r[o]||{},r[o][n]=s,this.logger_(`timinginfo: ${t} - ${n} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Lr(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(o=>{r[o.stream]=r[o.stream]||{startTime:1/0,captions:[],endTime:0};const l=r[o.stream];l.startTime=Math.min(l.startTime,o.startTime+s),l.endTime=Math.max(l.endTime,o.endTime+s),l.captions.push(o)}),Object.keys(r).forEach(o=>{const{startTime:l,endTime:u,captions:h}=r[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${u} for ${o}`),MF(d,this.vhs_.tech_,o),Mu(l,u,d[o]),RF({captionArray:h,inbandTextTracks:d,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Cg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:s,isMuxed:r}=t;return!(s&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||Cg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Lr(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[hT(t.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let o;r&&(o=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:o,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:s}){if(n){const r=Fd(n);if(this.activeInitSegmentId_===r)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=r}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},s){const r=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+zo(r).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+zo(o).join(", "));const l=r.length?r.start(0):0,u=r.length?r.end(r.length-1):0,h=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(u-l<=wu&&d-h<=wu){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${zo(r).join(", ")}, video buffer: ${zo(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const b=this.currentTime_()-wu;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${b}`),this.remove(0,b,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${wu}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=q.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},wu*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},s){if(s){if(s.code===fw){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:oe.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:s,bytes:r}){if(!r){const l=[s];let u=s.byteLength;n&&(l.unshift(n),u+=n.byteLength),r=OF({bytes:u,segments:l})}const o={segmentInfo:No({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${e}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,s[r].transmuxedPresentationStart=n.start.presentation,s[r].transmuxedDecodeStart=n.start.decode,s[r].transmuxedPresentationEnd=n.end.presentation,s[r].transmuxedDecodeEnd=n.end.decode,s[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:s}=t;if(!s||!s.byteLength||n==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Lr(this),this.loadQueue_.push(()=>{const t=ii({},e,{forceTimestampOffset:!0});ii(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,o=n||s&&r;this.logger_(`Requesting
${Fw(e.uri)}
${Ra(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=DF({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:u,stream:h})=>{this.logger_(`${Ra(e)} logged from transmuxer stream ${h} as a ${u}: ${l}`)},triggerSegmentEventFn:({type:l,segment:u,keyInfo:h,trackInfo:d,timingInfo:m})=>{const T={segmentInfo:No({segment:u})};h&&(T.keyInfo=h),d&&(T.trackInfo=d),m&&(T.timingInfo=m),this.trigger({type:l,metadata:T})}})}trimBackBuffer_(e){const t=KF(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,s=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:s,isMediaInitialization:r},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===t.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),t.key){const u=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(t.key),o.key.iv=u}return t.map&&(o.map=this.initSegmentForMap(t.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<jh){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${jh}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Ms.ABORTED)return;if(this.pause(),e.code===Ms.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,t.stats),s.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=$F(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:o,videoTimingInfo:l,audioTimingInfo:u}){if(typeof e<"u")return e;if(!o)return u.start;const h=t.segments[n-1];return n===0||!h||typeof h.start>"u"||h.end!==s+r?s:l.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:s,isMuxed:r}=t,o=this.loaderType_==="main"&&s,l=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,l&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=XF(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),s=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const u={segmentInfo:No({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:u})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=e5(e,this.sourceType_);if(t&&(t.severity==="warn"?oe.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Ra(e)}`);return}this.logger_(`Appended ${Ra(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,s=e.part,r=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,o=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(r||o){this.logger_(`bad ${r?"segment":"part"} ${Ra(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<jh){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${jh}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(s-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,s=t.end;if(!cT(n)||!cT(s))return;Mu(n,s,this.segmentMetadataTrack_);const r=q.WebKitDataCue||q.VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:s},l=JSON.stringify(o),u=new r(n,s,l);u.value=o,this.segmentMetadataTrack_.addCue(u)}}function ur(){}const Uw=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},t5=["video","audio"],Ag=(i,e)=>{const t=e[`${i}Buffer`];return t&&t.updating||e.queuePending[i]},i5=(i,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===i)return t}return null},sl=(i,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),sl("audio",e),sl("video",e));return}if(i!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Ag(i,e))){if(n.type!==i){if(t=i5(i,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[i]=n,n.action(i,e),!n.doneFn){e.queuePending[i]=null,sl(i,e);return}}},jw=(i,e)=>{const t=e[`${i}Buffer`],n=Uw(i);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[i]=null,e[`${i}Buffer`]=null)},ks=(i,e)=>i&&e&&Array.prototype.indexOf.call(i.sourceBuffers,e)!==-1,xn={appendBuffer:(i,e,t)=>(n,s)=>{const r=s[`${n}Buffer`];if(ks(s.mediaSource,r)){s.logger_(`Appending segment ${e.mediaIndex}'s ${i.length} bytes to ${n}Buffer`);try{r.appendBuffer(i)}catch(o){s.logger_(`Error with code ${o.code} `+(o.code===fw?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),s.queuePending[n]=null,t(o)}}},remove:(i,e)=>(t,n)=>{const s=n[`${t}Buffer`];if(ks(n.mediaSource,s)){n.logger_(`Removing ${i} to ${e} from ${t}Buffer`);try{s.remove(i,e)}catch{n.logger_(`Remove ${i} to ${e} from ${t}Buffer failed`)}}},timestampOffset:i=>(e,t)=>{const n=t[`${e}Buffer`];ks(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${i}`),n.timestampOffset=i)},callback:i=>(e,t)=>{i()},endOfStream:i=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${i||""})`);try{e.mediaSource.endOfStream(i)}catch(t){oe.log.warn("Failed to call media source endOfStream",t)}}},duration:i=>e=>{e.logger_(`Setting mediaSource duration to ${i}`);try{e.mediaSource.duration=i}catch(t){oe.log.warn("Failed to set media source duration",t)}},abort:()=>(i,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${i}Buffer`];if(ks(e.mediaSource,t)){e.logger_(`calling abort on ${i}Buffer`);try{t.abort()}catch(n){oe.log.warn(`Failed to abort on ${i}Buffer`,n)}}},addSourceBuffer:(i,e)=>t=>{const n=Uw(i),s=cl(e);t.logger_(`Adding ${i}Buffer with codec ${e} to mediaSource`);const r=t.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",t[`on${n}UpdateEnd_`]),r.addEventListener("error",t[`on${n}Error_`]),t.codecs[i]=e,t[`${i}Buffer`]=r},removeSourceBuffer:i=>e=>{const t=e[`${i}Buffer`];if(jw(i,e),!!ks(e.mediaSource,t)){e.logger_(`Removing ${i}Buffer with codec ${e.codecs[i]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){oe.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,n)}}},changeType:i=>(e,t)=>{const n=t[`${e}Buffer`],s=cl(i);if(!ks(t.mediaSource,n))return;const r=i.substring(0,i.indexOf(".")),o=t.codecs[e];if(o.substring(0,o.indexOf("."))===r)return;const u={codecsChangeInfo:{from:o,to:i}};t.trigger({type:"codecschange",metadata:u}),t.logger_(`changing ${e}Buffer codec from ${o} to ${i}`);try{n.changeType(s),t.codecs[e]=i}catch(h){u.errorType=oe.Error.StreamingCodecsChangeError,u.error=h,h.metadata=u,t.error_=h,t.trigger("error"),oe.log.warn(`Failed to changeType on ${e}Buffer`,h)}}},Sn=({type:i,sourceUpdater:e,action:t,doneFn:n,name:s})=>{e.queue.push({type:i,action:t,doneFn:n,name:s}),sl(i,e)},fT=(i,e)=>t=>{const n=e[`${i}Buffered`](),s=m4(n);if(e.logger_(`received "updateend" event for ${i} Source Buffer: `,s),e.queuePending[i]){const r=e.queuePending[i].doneFn;e.queuePending[i]=null,r&&r(e[`${i}Error_`])}sl(i,e)};class zw extends oe.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>sl("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Kn("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=fT("video",this),this.onAudioUpdateEnd_=fT("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Sn({type:"mediaSource",sourceUpdater:this,action:xn.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Sn({type:e,sourceUpdater:this,action:xn.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){oe.log.error("removeSourceBuffer is not supported!");return}Sn({type:"mediaSource",sourceUpdater:this,action:xn.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!oe.browser.IS_FIREFOX&&q.MediaSource&&q.MediaSource.prototype&&typeof q.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return q.SourceBuffer&&q.SourceBuffer.prototype&&typeof q.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){oe.log.error("changeType is not supported!");return}Sn({type:e,sourceUpdater:this,action:xn.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:s,bytes:r}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const o=t;if(Sn({type:s,sourceUpdater:this,action:xn.appendBuffer(r,n||{mediaIndex:-1},o),doneFn:t,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(u=>{this.appendBuffer.apply(this,u)})}}audioBuffered(){return ks(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:bi()}videoBuffered(){return ks(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:bi()}buffered(){const e=ks(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=ks(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():_4(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=ur){Sn({type:"mediaSource",sourceUpdater:this,action:xn.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=ur){typeof e!="string"&&(e=void 0),Sn({type:"mediaSource",sourceUpdater:this,action:xn.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=ur){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}Sn({type:"audio",sourceUpdater:this,action:xn.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=ur){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}Sn({type:"video",sourceUpdater:this,action:xn.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(Ag("audio",this)||Ag("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Sn({type:"audio",sourceUpdater:this,action:xn.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Sn({type:"video",sourceUpdater:this,action:xn.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Sn({type:"audio",sourceUpdater:this,action:xn.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Sn({type:"video",sourceUpdater:this,action:xn.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),t5.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>jw(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const pT=i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),n5=i=>{const e=new Uint8Array(i);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},mT=new Uint8Array(`

`.split("").map(i=>i.charCodeAt(0)));class s5 extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class r5 extends Eg{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return bi();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return bi([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Fd(e);let s=this.initSegments_[n];if(t&&!s&&e.bytes){const r=mT.byteLength+e.bytes.byteLength,o=new Uint8Array(r);o.set(e.bytes),o.set(mT,e.bytes.byteLength),this.initSegments_[n]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Mu(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Ms.TIMEOUT&&this.handleTimeout_(),e.code===Ms.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_,r=n.mp4VttCues&&n.mp4VttCues.length;r&&(s.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const o=s.segment;if(o.map&&(o.map.bytes=t.map.bytes),s.bytes=t.bytes,typeof q.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}o.requested=!0;try{this.parseVTTCues_(s)}catch(l){this.stopForError({message:l.message,metadata:{errorType:oe.Error.StreamingVttParserError,error:l}});return}if(r||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,s.cues.forEach(l=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new q.VTTCue(l.startTime,l.endTime,l.text):l)}),zF(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const n=e&&e.type==="vtt",s=t&&t.type==="text";n&&s&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const s=n.start+t,r=n.end+t,o=new q.VTTCue(s,r,n.cueText);n.settings&&n.settings.split(" ").forEach(l=>{const u=l.split(":"),h=u[0],d=u[1];o[h]=isNaN(d)?d:Number(d)}),e.cues.push(o)})}parseVTTCues_(e){let t,n=!1;if(typeof q.WebVTT!="function")throw new s5;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof q.TextDecoder=="function"?t=new q.TextDecoder("utf8"):(t=q.WebVTT.StringDecoder(),n=!0);const s=new q.WebVTT.Parser(q,q.vttjs,t);if(s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=o=>{e.timestampmap=o},s.onparsingerror=o=>{oe.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;n&&(o=pT(o)),s.parse(o)}let r=e.bytes;n&&(r=pT(r)),s.parse(r),s.flush()}updateTimeMapping_(e,t,n){const s=e.segment;if(!t)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:r,LOCAL:o}=e.timestampmap,u=r/jo.ONE_SECOND_IN_TS-o+t.mapping;if(e.cues.forEach(h=>{const d=h.endTime-h.startTime,m=this.handleRollover_(h.startTime+u,t.time);h.startTime=Math.max(m,0),h.endTime=Math.max(m+d,0)}),!n.syncInfo){const h=e.cues[0].startTime,d=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(h,d-s.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*jo.ONE_SECOND_IN_TS;const s=t*jo.ONE_SECOND_IN_TS;let r;for(s<n?r=-8589934592:r=8589934592;Math.abs(n-s)>4294967296;)n+=r;return n/jo.ONE_SECOND_IN_TS}}const o5=function(i,e){const t=i.cues;for(let n=0;n<t.length;n++){const s=t[n];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},a5=function(i,e,t=0){if(!i.segments)return;let n=t,s;for(let r=0;r<i.segments.length;r++){const o=i.segments[r];if(s||(s=o5(e,n+o.duration/2)),s){if("cueIn"in o){s.endTime=n,s.adEndTime=n,n+=o.duration,s=null;continue}if(n<s.endTime){n+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new q.VTTCue(n,n+o.duration,o.cueOut),s.adStartTime=n,s.adEndTime=n+parseFloat(o.cueOut),e.addCue(s)),"cueOutCont"in o){const[l,u]=o.cueOutCont.split("/").map(parseFloat);s=new q.VTTCue(n,n+o.duration,""),s.adStartTime=n-l,s.adEndTime=s.adStartTime+u,e.addCue(s)}n+=o.duration}};class gT{constructor({start:e,end:t,segmentIndex:n,partIndex:s=null,appended:r=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=s,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class l5{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class Hw{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:s}=e;if(this.isReliable_=this.isReliablePlaylist_(n,s),!!this.isReliable_)return this.updateStorage_(s,n,this.calculateBaseTime_(n,s,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const s of n)if(s.isInRange(e))return s}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const s=new Map;let r=`
`,o=n,l=t;this.start_=o,e.forEach((u,h)=>{const d=this.storage_.get(l),m=o,b=m+u.duration,T=!!(d&&d.segmentSyncInfo&&d.segmentSyncInfo.isAppended),C=new gT({start:m,end:b,appended:T,segmentIndex:h});u.syncInfo=C;let x=o;const A=(u.parts||[]).map((P,k)=>{const I=x,F=x+P.duration,j=!!(d&&d.partsSyncInfo&&d.partsSyncInfo[k]&&d.partsSyncInfo[k].isAppended),V=new gT({start:I,end:F,appended:j,segmentIndex:h,partIndex:k});return x=F,r+=`Media Sequence: ${l}.${k} | Range: ${I} --> ${F} | Appended: ${j}
`,P.syncInfo=V,V});s.set(l,new l5(C,A)),r+=`${Fw(u.resolvedUri)} | Media Sequence: ${l} | Range: ${m} --> ${b} | Appended: ${T}
`,l++,o=b}),this.end_=o,this.storage_=s,this.diagnostics_=r}calculateBaseTime_(e,t,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(e<s){const r=s-e;let o=this.storage_.get(s).segmentSyncInfo.start;for(let l=0;l<r;l++){const u=t[l];o-=u.duration}return o}return n}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class _T extends Hw{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,n){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,n)}}const u5=86400,km=[{name:"VOD",run:(i,e,t,n,s)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(i,e,t,n,s,r)=>{const o=i.getMediaSequenceSync(r);if(!o||!o.isReliable)return null;const l=o.getSyncInfoForTime(s);return l?{time:l.start,partIndex:l.partIndex,segmentIndex:l.segmentIndex}:null}},{name:"ProgramDateTime",run:(i,e,t,n,s)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let r=null,o=null;const l=_g(e);s=s||0;for(let u=0;u<l.length;u++){const h=e.endList||s===0?u:l.length-(u+1),d=l[h],m=d.segment,b=i.timelineToDatetimeMappings[m.timeline];if(!b||!m.dateTimeObject)continue;let C=m.dateTimeObject.getTime()/1e3+b;if(m.parts&&typeof d.partIndex=="number")for(let A=0;A<d.partIndex;A++)C+=m.parts[A].duration;const x=Math.abs(s-C);if(o!==null&&(x===0||o<x))break;o=x,r={time:C,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return r}},{name:"Segment",run:(i,e,t,n,s)=>{let r=null,o=null;s=s||0;const l=_g(e);for(let u=0;u<l.length;u++){const h=e.endList||s===0?u:l.length-(u+1),d=l[h],m=d.segment,b=d.part&&d.part.start||m&&m.start;if(m.timeline===n&&typeof b<"u"){const T=Math.abs(s-b);if(o!==null&&o<T)break;(!r||o===null||o>=T)&&(o=T,r={time:b,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return r}},{name:"Discontinuity",run:(i,e,t,n,s)=>{let r=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let l=0;l<e.discontinuityStarts.length;l++){const u=e.discontinuityStarts[l],h=e.discontinuitySequence+l+1,d=i.discontinuities[h];if(d){const m=Math.abs(s-d.time);if(o!==null&&o<m)break;(!r||o===null||o>=m)&&(o=m,r={time:d.time,segmentIndex:u,partIndex:null})}}}return r}},{name:"Playlist",run:(i,e,t,n,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class c5 extends oe.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new Hw,n=new _T(t),s=new _T(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:s},this.logger_=Kn("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,s,r){if(t!==1/0)return km.find(({name:u})=>u==="VOD").run(this,e,t);const o=this.runStrategies_(e,t,n,s,r);if(!o.length)return null;for(const l of o){const{syncPoint:u,strategy:h}=l,{segmentIndex:d,time:m}=u;if(d<0)continue;const b=e.segments[d],T=m,C=T+b.duration;if(this.logger_(`Strategy: ${h}. Current time: ${s}. selected segment: ${d}. Time: [${T} -> ${C}]}`),s>=T&&s<C)return this.logger_("Found sync point with exact match: ",u),u}return this.selectSyncPoint_(o,{key:"time",value:s})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const s=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+Yu({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,s,r){const o=[];for(let l=0;l<km.length;l++){const u=km[l],h=u.run(this,e,t,n,s,r);h&&(h.strategy=u.name,o.push({strategy:u.name,syncPoint:h}))}return o}selectSyncPoint_(e,t){let n=e[0].syncPoint,s=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let o=1;o<e.length;o++){const l=Math.abs(e[o].syncPoint[t.key]-t.value);l<s&&(s=l,n=e[o].syncPoint,r=e[o].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>u5){oe.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let s=n-1;s>=0;s--){const r=e.segments[s];if(r&&typeof r.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),s=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[s.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const s=e.segment,r=e.part;let o=this.timelines[e.timeline],l,u;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),l=e.startOfSegment,u=t.end+o.mapping;else if(o)l=t.start+o.mapping,u=t.end+o.mapping;else return!1;return r&&(r.start=l,r.end=u),(!s.start||l<s.start)&&(s.start=l),s.end=u,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let s=0;s<t.discontinuityStarts.length;s++){const r=t.discontinuityStarts[s],o=t.discontinuitySequence+s+1,l=r-e.mediaIndex,u=Math.abs(l);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>u){let h;l<0?h=n.start-Yu({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):h=n.end+Yu({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[o]={time:h,accuracy:u}}}}dispose(){this.trigger("dispose"),this.off()}}class h5 extends oe.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const s={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const d5=Aw(Dw(function(){var i=function(){function x(){this.listeners={}}var A=x.prototype;return A.on=function(k,I){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push(I)},A.off=function(k,I){if(!this.listeners[k])return!1;var F=this.listeners[k].indexOf(I);return this.listeners[k]=this.listeners[k].slice(0),this.listeners[k].splice(F,1),F>-1},A.trigger=function(k){var I=this.listeners[k];if(I)if(arguments.length===2)for(var F=I.length,j=0;j<F;++j)I[j].call(this,arguments[1]);else for(var V=Array.prototype.slice.call(arguments,1),U=I.length,K=0;K<U;++K)I[K].apply(this,V)},A.dispose=function(){this.listeners={}},A.pipe=function(k){this.on("data",function(I){k.push(I)})},x}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(x){return x.subarray(0,x.byteLength-x[x.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const x=[[[],[],[],[],[]],[[],[],[],[],[]]],A=x[0],P=x[1],k=A[4],I=P[4];let F,j,V;const U=[],K=[];let D,R,Y,Q,J,ae;for(F=0;F<256;F++)K[(U[F]=F<<1^(F>>7)*283)^F]=F;for(j=V=0;!k[j];j^=D||1,V=K[V]||1)for(Q=V^V<<1^V<<2^V<<3^V<<4,Q=Q>>8^Q&255^99,k[j]=Q,I[Q]=j,Y=U[R=U[D=U[j]]],ae=Y*16843009^R*65537^D*257^j*16843008,J=U[Q]*257^Q*16843008,F=0;F<4;F++)A[F][j]=J=J<<24^J>>>8,P[F][Q]=ae=ae<<24^ae>>>8;for(F=0;F<5;F++)A[F]=A[F].slice(0),P[F]=P[F].slice(0);return x};let n=null;class s{constructor(A){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let P,k,I;const F=this._tables[0][4],j=this._tables[1],V=A.length;let U=1;if(V!==4&&V!==6&&V!==8)throw new Error("Invalid aes key size");const K=A.slice(0),D=[];for(this._key=[K,D],P=V;P<4*V+28;P++)I=K[P-1],(P%V===0||V===8&&P%V===4)&&(I=F[I>>>24]<<24^F[I>>16&255]<<16^F[I>>8&255]<<8^F[I&255],P%V===0&&(I=I<<8^I>>>24^U<<24,U=U<<1^(U>>7)*283)),K[P]=K[P-V]^I;for(k=0;P;k++,P--)I=K[k&3?P:P-4],P<=4||k<4?D[k]=I:D[k]=j[0][F[I>>>24]]^j[1][F[I>>16&255]]^j[2][F[I>>8&255]]^j[3][F[I&255]]}decrypt(A,P,k,I,F,j){const V=this._key[1];let U=A^V[0],K=I^V[1],D=k^V[2],R=P^V[3],Y,Q,J;const ae=V.length/4-2;let ce,le=4;const ne=this._tables[1],ee=ne[0],fe=ne[1],re=ne[2],de=ne[3],Le=ne[4];for(ce=0;ce<ae;ce++)Y=ee[U>>>24]^fe[K>>16&255]^re[D>>8&255]^de[R&255]^V[le],Q=ee[K>>>24]^fe[D>>16&255]^re[R>>8&255]^de[U&255]^V[le+1],J=ee[D>>>24]^fe[R>>16&255]^re[U>>8&255]^de[K&255]^V[le+2],R=ee[R>>>24]^fe[U>>16&255]^re[K>>8&255]^de[D&255]^V[le+3],le+=4,U=Y,K=Q,D=J;for(ce=0;ce<4;ce++)F[(3&-ce)+j]=Le[U>>>24]<<24^Le[K>>16&255]<<16^Le[D>>8&255]<<8^Le[R&255]^V[le++],Y=U,U=K,K=D,D=R,R=Y}}class r extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(A){this.jobs.push(A),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24},l=function(x,A,P){const k=new Int32Array(x.buffer,x.byteOffset,x.byteLength>>2),I=new s(Array.prototype.slice.call(A)),F=new Uint8Array(x.byteLength),j=new Int32Array(F.buffer);let V,U,K,D,R,Y,Q,J,ae;for(V=P[0],U=P[1],K=P[2],D=P[3],ae=0;ae<k.length;ae+=4)R=o(k[ae]),Y=o(k[ae+1]),Q=o(k[ae+2]),J=o(k[ae+3]),I.decrypt(R,Y,Q,J,j,ae),j[ae]=o(j[ae]^V),j[ae+1]=o(j[ae+1]^U),j[ae+2]=o(j[ae+2]^K),j[ae+3]=o(j[ae+3]^D),V=R,U=Y,K=Q,D=J;return F};class u{constructor(A,P,k,I){const F=u.STEP,j=new Int32Array(A.buffer),V=new Uint8Array(A.byteLength);let U=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(j.subarray(U,U+F),P,k,V)),U=F;U<j.length;U+=F)k=new Uint32Array([o(j[U-4]),o(j[U-3]),o(j[U-2]),o(j[U-1])]),this.asyncStream_.push(this.decryptChunk_(j.subarray(U,U+F),P,k,V));this.asyncStream_.push(function(){I(null,e(V))})}static get STEP(){return 32e3}decryptChunk_(A,P,k,I){return function(){const F=l(A,P,k);I.set(F,A.byteOffset)}}}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof h<"u"?d=h:typeof self<"u"?d=self:d={};var m=d,b=function(A){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(A):A&&A.buffer instanceof ArrayBuffer},T=m.BigInt||Number;T("0x1"),T("0x100"),T("0x10000"),T("0x1000000"),T("0x100000000"),T("0x10000000000"),T("0x1000000000000"),T("0x100000000000000"),T("0x10000000000000000"),function(){var x=new Uint16Array([65484]),A=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);return A[0]===255?"big":A[0]===204?"little":"unknown"}();const C=function(x){const A={};return Object.keys(x).forEach(P=>{const k=x[P];b(k)?A[P]={bytes:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength}:A[P]=k}),A};self.onmessage=function(x){const A=x.data,P=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength),k=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),I=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new u(P,k,I,function(F,j){self.postMessage(C({source:A.source,decrypted:j}),[j.buffer])})}}));var f5=Ew(d5);const p5=i=>{let e=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},$w=(i,e)=>{i.abort(),i.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Dg=(i,e)=>{e.activePlaylistLoader=i,i.load()},m5=(i,e)=>()=>{const{segmentLoaders:{[i]:t,main:n},mediaTypes:{[i]:s}}=e,r=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastGroup_;if(!(o&&u&&o.id===u.id)&&(s.lastGroup_=o,s.lastTrack_=r,$w(t,s),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){l&&n.resetEverything();return}t.resyncLoader(),Dg(o.playlistLoader,s)}},g5=(i,e)=>()=>{const{segmentLoaders:{[i]:t},mediaTypes:{[i]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},_5=(i,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[i]:n,main:s},mediaTypes:{[i]:r}}=e,o=r.activeTrack(),l=r.getActiveGroup(),u=r.activePlaylistLoader,h=r.lastTrack_;if(!(h&&o&&h.id===o.id)&&(r.lastGroup_=l,r.lastTrack_=o,$w(n,r),!!l)){if(l.isMainPlaylist){if(!o||!h||o.id===h.id)return;const d=e.vhs.playlistController_,m=d.selectPlaylist();if(d.media()===m)return;r.logger_(`track change. Switching main audio from ${h.id} to ${o.id}`),t.pause(),s.resetEverything(),d.fastQualityChange_(m);return}if(i==="AUDIO"){if(!l.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(u===l.playlistLoader){Dg(l.playlistLoader,r);return}n.track&&n.track(o),n.resetEverything(),Dg(l.playlistLoader,r)}},Ud={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:t},excludePlaylist:n}=e,s=t.activeTrack(),r=t.activeGroup(),o=(r.filter(u=>u.default)[0]||r[0]).id,l=t.tracks[o];if(s===l){n({error:{message:"Problem encountered loading the default audio track."}});return}oe.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const u in t.tracks)t.tracks[u].enabled=t.tracks[u]===l;t.onTrackChanged()},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:t}}=e;oe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},yT={AUDIO:(i,e,t)=>{if(!e)return;const{tech:n,requestOptions:s,segmentLoaders:{[i]:r}}=t;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,s),(!n.paused()||o.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Ud[i](i,t))},SUBTITLES:(i,e,t)=>{const{tech:n,requestOptions:s,segmentLoaders:{[i]:r},mediaTypes:{[i]:o}}=t;e.on("loadedmetadata",()=>{const l=e.media();r.playlist(l,s),r.track(o.activeTrack()),(!n.paused()||l.endList&&n.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),s),n.paused()||r.load()}),e.on("error",Ud[i](i,t))}},y5={AUDIO:(i,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[i]:s},requestOptions:r,main:{mediaGroups:o},mediaTypes:{[i]:{groups:l,tracks:u,logger_:h}},mainPlaylistLoader:d}=e,m=Oc(d.main);(!o[i]||Object.keys(o[i]).length===0)&&(o[i]={main:{default:{default:!0}}},m&&(o[i].main.default.playlists=d.main.playlists));for(const b in o[i]){l[b]||(l[b]=[]);for(const T in o[i][b]){let C=o[i][b][T],x;if(m?(h(`AUDIO group '${b}' label '${T}' is a main playlist`),C.isMainPlaylist=!0,x=null):n==="vhs-json"&&C.playlists?x=new ja(C.playlists[0],t,r):C.resolvedUri?x=new ja(C.resolvedUri,t,r):C.playlists&&n==="dash"?x=new Sg(C.playlists[0],t,r,d):x=null,C=xt({id:T,playlistLoader:x},C),yT[i](i,C.playlistLoader,e),l[b].push(C),typeof u[T]>"u"){const A=new oe.AudioTrack({id:T,kind:p5(C),enabled:!1,language:C.language,default:C.default,label:T});u[T]=A}}}s.on("error",Ud[i](i,e))},SUBTITLES:(i,e)=>{const{tech:t,vhs:n,sourceType:s,segmentLoaders:{[i]:r},requestOptions:o,main:{mediaGroups:l},mediaTypes:{[i]:{groups:u,tracks:h}},mainPlaylistLoader:d}=e;for(const m in l[i]){u[m]||(u[m]=[]);for(const b in l[i][m]){if(!n.options_.useForcedSubtitles&&l[i][m][b].forced)continue;let T=l[i][m][b],C;if(s==="hls")C=new ja(T.resolvedUri,n,o);else if(s==="dash"){if(!T.playlists.filter(A=>A.excludeUntil!==1/0).length)return;C=new Sg(T.playlists[0],n,o,d)}else s==="vhs-json"&&(C=new ja(T.playlists?T.playlists[0]:T.resolvedUri,n,o));if(T=xt({id:b,playlistLoader:C},T),yT[i](i,T.playlistLoader,e),u[m].push(T),typeof h[b]>"u"){const x=t.addRemoteTextTrack({id:b,kind:"subtitles",default:T.default&&T.autoselect,language:T.language,label:b},!1).track;h[b]=x}}}r.on("error",Ud[i](i,e))},"CLOSED-CAPTIONS":(i,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[i]:{groups:s,tracks:r}}}=e;for(const o in n[i]){s[o]||(s[o]=[]);for(const l in n[i][o]){const u=n[i][o][l];if(!/^(?:CC|SERVICE)/.test(u.instreamId))continue;const h=t.options_.vhs&&t.options_.vhs.captionServices||{};let d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(h[d.instreamId]&&(d=xt(d,h[d.instreamId])),d.default===void 0&&delete d.default,s[o].push(xt({id:l},u)),typeof r[l]>"u"){const m=t.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;r[l]=m}}}}},Vw=(i,e)=>{for(let t=0;t<i.length;t++)if(i0(e,i[t])||i[t].playlists&&Vw(i[t].playlists,e))return!0;return!1},v5=(i,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[i]:{groups:s}}}=e,r=n.media();if(!r)return null;let o=null;r.attributes[i]&&(o=s[r.attributes[i]]);const l=Object.keys(s);if(!o)if(i==="AUDIO"&&l.length>1&&Oc(e.main))for(let u=0;u<l.length;u++){const h=s[l[u]];if(Vw(h,r)){o=h;break}}else s.main?o=s.main:l.length===1&&(o=s[l[0]]);return typeof t>"u"?o:t===null||!o?null:o.filter(u=>u.id===t.id)[0]||null},b5={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},T5=(i,{mediaTypes:e})=>()=>{const t=e[i].activeTrack();return t?e[i].activeGroup(t):null},x5=i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(h=>{y5[h](h,i)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:s,segmentLoaders:{["AUDIO"]:r,main:o}}=i;["AUDIO","SUBTITLES"].forEach(h=>{e[h].activeGroup=v5(h,i),e[h].activeTrack=b5[h](h,i),e[h].onGroupChanged=m5(h,i),e[h].onGroupChanging=g5(h,i),e[h].onTrackChanged=_5(h,i),e[h].getActiveGroup=T5(h,i)});const l=e.AUDIO.activeGroup();if(l){const h=(l.filter(m=>m.default)[0]||l[0]).id;e.AUDIO.tracks[h].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),r.setAudio(!0)):o.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanging())});const u=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",u),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{n.audioTracks().removeEventListener("change",u),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const h in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[h])},S5=()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{i[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ur,activeTrack:ur,getActiveGroup:ur,onGroupChanged:ur,onTrackChanged:ur,lastTrack_:null,logger_:Kn(`MediaGroups[${e}]`)}}),i};class vT{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=on(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class w5 extends oe.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new vT,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Kn("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=on(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const s={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(r,o)=>{if(r){if(o.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(o.status===429){const h=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${h} seconds.`),this.startTTLTimeout_(parseInt(h,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:s});let l;try{l=JSON.parse(this.request_.responseText)}catch(h){const d={errorType:oe.Error.StreamingContentSteeringParserError,error:h};this.trigger({type:"error",metadata:d})}this.assignSteeringProperties_(l);const u={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:u}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new q.URL(e),n=new q.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(q.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new q.URL(e),n=this.getPathway(),s=this.getBandwidth_();if(n){const r=`_${this.manifestType_}_pathway`;t.searchParams.set(r,n)}if(s){const r=`_${this.manifestType_}_throughput`;t.searchParams.set(r,s)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(s=>{for(const r of s)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!t(s))return s}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=q.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){q.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new vT}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(on(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const C5=(i,e)=>{let t=null;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{i.apply(null,n)},e)}},E5=10;let Or;const A5=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],D5=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},P5=function({currentPlaylist:i,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:o,bufferBasedABR:l,log:u}){if(!n)return oe.log.warn("We received no playlist to switch to. Please check your stream."),!1;const h=`allowing switch ${i&&i.id||"null"} -> ${n.id}`;if(!i)return u(`${h} as current playlist is not set`),!0;if(n.id===i.id)return!1;const d=!!Ua(e,t).length;if(!i.endList)return!d&&typeof i.partTargetDuration=="number"?(u(`not ${h} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(u(`${h} as current playlist is live`),!0);const m=J_(e,t),b=l?_i.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:_i.MAX_BUFFER_LOW_WATER_LINE;if(o<b)return u(`${h} as duration < max low water line (${o} < ${b})`),!0;const T=n.attributes.BANDWIDTH,C=i.attributes.BANDWIDTH;if(T<C&&(!l||m<r)){let x=`${h} as next bandwidth < current bandwidth (${T} < ${C})`;return l&&(x+=` and forwardBuffer < bufferHighWaterLine (${m} < ${r})`),u(x),!0}if((!l||T>C)&&m>=s){let x=`${h} as forwardBuffer >= bufferLowWaterLine (${m} >= ${s})`;return l&&(x+=` and next bandwidth > current bandwidth (${T} > ${C})`),u(x),!0}return u(`not ${h} as no switching criteria met`),!1};class k5 extends oe.EventTarget{constructor(e){super(),this.fastQualityChange_=C5(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:n,tech:s,bandwidth:r,externVhs:o,useCueTags:l,playlistExclusionDuration:u,enableLowInitialPlaylist:h,sourceType:d,cacheEncryptionKeys:m,bufferBasedABR:b,leastPixelDiffSelector:T,captionServices:C,experimentalUseMMS:x}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:A}=e;(A===null||typeof A>"u")&&(A=1/0),Or=o,this.bufferBasedABR=!!b,this.leastPixelDiffSelector=!!T,this.withCredentials=n,this.tech_=s,this.vhs_=s.vhs,this.player_=e.player_,this.sourceType_=d,this.useCueTags_=l,this.playlistExclusionDuration=u,this.maxPlaylistRetries=A,this.enableLowInitialPlaylist=h,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:A,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=S5(),x&&q.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new q.ManagedMediaSource,this.usingManagedMediaSource_=!0,oe.log("Using ManagedMediaSource")):q.MediaSource&&(this.mediaSource=new q.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=bi(),this.hasPlayed_=!1,this.syncController_=new c5(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new f5,this.sourceUpdater_=new zw(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new h5,this.keyStatusMap_=new Map;const P={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:C,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Sg(t,this.vhs_,xt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new ja(t,this.vhs_,xt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Eg(xt(P,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Eg(xt(P,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new r5(xt(P,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((F,j)=>{function V(){s.off("vttjserror",U),F()}function U(){s.off("vttjsloaded",V),j()}s.one("vttjsloaded",V),s.one("vttjserror",U),s.addWebVttScript_()})}),e);const k=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new w5(this.vhs_.xhr,k),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),A5.forEach(F=>{this[F+"_"]=D5.bind(this,F)}),this.logger_=Kn("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const I=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(I,()=>{const F=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-F,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const s=this.media(),r=s&&(s.id||s.uri),o=e&&(e.id||e.uri);if(r&&r!==o){this.logger_(`switch media ${r} -> ${o} from ${t}`);const l={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:l}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,s=this.contentSteeringController_.getPathway();if(n&&s){const o=(n.length?n[0].playlists:n.playlists).filter(l=>l.attributes.serviceLocation===s);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=q.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(q.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,s=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const l=n.main||s.length&&n[s[0]];for(const u in l)if(l[u].default){r={label:u};break}}if(!r)return t;const o=[];for(const l in n)if(n[l][r.label]){const u=n[l][r.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(let h=0;h<e.playlists.length;h++){const d=e.playlists[h];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;yg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),x5({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;yg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(ii({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let s=!0;const r=Object.keys(n.AUDIO);for(const o in n.AUDIO)for(const l in n.AUDIO[o])n.AUDIO[o][l].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Or.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),o=this.tech_.buffered();return P5({buffered:o,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const s=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(s)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:E5}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,s=>{this.player_.trigger(ii({},s))}),this.audioSegmentLoader_.on(n,s=>{this.player_.trigger(ii({},s))}),this.subtitleSegmentLoader_.on(n,s=>{this.player_.trigger(ii({},s))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let s=n;if(e.start){const r=e.start.timeOffset;r<0?s=Math.max(n+r,t.start(0)):s=Math.min(n,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const s=Or.Playlist.playlistEnd(e,n),r=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return s-r<=Os;const l=o.end(o.length-1);return l-r<=Os&&s-l<=Os}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(Mf),o=r.length===1&&r[0]===e;if(s.length===1&&n!==1/0)return oe.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const C=this.pathwayAttribute_(e),x=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(C),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(C)},x);return}let T=!1;s.forEach(C=>{if(C===e)return;const x=C.excludeUntil;typeof x<"u"&&x!==1/0&&(T=!0,delete C.excludeUntil)}),T&&(oe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;e.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+n*1e3,e.excludeUntil=l,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const u=this.selectPlaylist();if(!u){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const h=t.internal?this.logger_:oe.log.warn,d=t.message?" "+t.message:"";h(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${u.id}.`),u.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const m=u.targetDuration/2*1e3||5*1e3,b=typeof u.lastRequest=="number"&&Date.now()-u.lastRequest<=m;return this.switchMedia_(u,"exclude",o||b)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],s=e==="all";(s||e==="main")&&n.push(this.mainPlaylistLoader_);const r=[];(s||e==="audio")&&r.push("AUDIO"),(s||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(o=>{const l=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;l&&n.push(l)}),["main","audio","subtitle"].forEach(o=>{const l=this[`${o}SegmentLoader_`];l&&(e===o||e==="all")&&n.push(l)}),n.forEach(o=>t.forEach(l=>{typeof o[l]=="function"&&o[l]()}))}setCurrentTime(e){const t=Ua(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Or.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const n=e.media();if(!n)return null;const s=this.syncController_.getMediaSequenceSync(t);if(s&&s.isReliable){const l=s.start,u=s.end;if(!isFinite(l)||!isFinite(u))return null;const h=Or.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n),d=Math.max(l,u-h);return bi([[l,d]])}const r=this.syncController_.getExpiredTime(n,this.duration());if(r===null)return null;const o=Or.Playlist.seekable(n,r,Or.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return o.length?o:null}computeFinalSeekable_(e,t){if(!t)return e;const n=e.start(0),s=e.end(0),r=t.start(0),o=t.end(0);return r>s||n>o?e:bi([[Math.max(n,r),Math.min(s,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${ew(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const t=this.tech_.buffered();let n=Or.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Qu(this.main(),t),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=n.video||e.main.videoCodec||g3),e.main.isMuxed&&(s.video+=`,${n.audio||e.main.audioCodec||ab}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(s.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||ab,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(h,d)=>h?Gu(d,this.usingManagedMediaSource_):cm(d),l={};let u;if(["video","audio"].forEach(function(h){if(s.hasOwnProperty(h)&&!o(e[h].isFmp4,s[h])){const d=e[h].isFmp4?"browser":"muxer";l[d]=l[d]||[],l[d].push(s[h]),h==="audio"&&(u=d)}}),r&&u&&t.attributes.AUDIO){const h=t.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===h&&d!==t&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${h} as ${u} does not support codec(s): "${s.audio}"`)}if(Object.keys(l).length){const h=Object.keys(l).reduce((d,m)=>(d&&(d+=", "),d+=`${m} does not support codec(s): "${l[m].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:h},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const h=[];if(["video","audio"].forEach(d=>{const m=(Ds(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,b=(Ds(s[d]||"")[0]||{}).type;m&&b&&m.toLowerCase()!==b.toLowerCase()&&h.push(`"${this.sourceUpdater_.codecs[d]}" -> "${s[d]}"`)}),h.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${h.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const s=e[n];if(t.indexOf(s.id)!==-1)return;t.push(s.id);const r=Qu(this.main,s),o=[];r.audio&&!cm(r.audio)&&!Gu(r.audio,this.usingManagedMediaSource_)&&o.push(`audio codec ${r.audio}`),r.video&&!cm(r.video)&&!Gu(r.video,this.usingManagedMediaSource_)&&o.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&o.push(`text codec ${r.text}`),o.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,s=_c(Ds(e)),r=tT(s),o=s.video&&Ds(s.video)[0]||null,l=s.audio&&Ds(s.audio)[0]||null;Object.keys(n).forEach(u=>{const h=n[u];if(t.indexOf(h.id)!==-1||h.excludeUntil===1/0)return;t.push(h.id);const d=[],m=Qu(this.mainPlaylistLoader_.main,h),b=tT(m);if(!(!m.audio&&!m.video)){if(b!==r&&d.push(`codec count "${b}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const T=m.video&&Ds(m.video)[0]||null,C=m.audio&&Ds(m.audio)[0]||null;T&&o&&T.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${T.type}" !== "${o.type}"`),C&&l&&C.type.toLowerCase()!==l.type.toLowerCase()&&d.push(`audio codec "${C.type}" !== "${l.type}"`)}d.length&&(h.excludeUntil=1/0,this.logger_(`excluding ${h.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),a5(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=_i.GOAL_BUFFER_LENGTH,n=_i.GOAL_BUFFER_LENGTH_RATE,s=Math.max(t,_i.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=_i.BUFFER_LOW_WATER_LINE,n=_i.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(t,_i.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,_i.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return _i.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){uT(this.inbandTextTracks_,"com.apple.streaming",this.tech_),jF({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();uT(this.inbandTextTracks_,e,this.tech_),BF({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(ii({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const r=this.contentSteeringController_.getAvailablePathways(),o=[];for(const l of t.playlists){const u=l.attributes.serviceLocation;if(u&&(o.push(u),!r.has(u)))return!0}return!!(!o.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,s=new Set;let r=!1;Object.keys(n).forEach(o=>{const l=n[o],u=this.pathwayAttribute_(l),h=u&&e!==u;l.excludeUntil===1/0&&l.lastExcludeReason_==="content-steering"&&!h&&(delete l.excludeUntil,delete l.lastExcludeReason_,r=!0);const m=!l.excludeUntil&&l.excludeUntil!==1/0;!s.has(l.id)&&h&&m&&(s.add(l.id),l.excludeUntil=1/0,l.lastExcludeReason_="content-steering",this.logger_(`excluding ${l.id} for ${l.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const l=this.mediaTypes_[o];if(l.activePlaylistLoader){const u=l.activePlaylistLoader.media_;u&&u.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||s&&s.size){for(const[o,l]of n.entries())s.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(l),this.contentSteeringController_.excludePathway(o));for(const[o,l]of s.entries()){const u=n.get(o);if(!u){t.filter(d=>d.attributes["PATHWAY-ID"]===l["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(l,d)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(u,l)||(this.mainPlaylistLoader_.updateOrDeleteClone(l,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,s=t["URI-REPLACEMENT"].PARAMS;for(const r in n)if(n[r]!==s[r])return!1;for(const r in s)if(n[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=this.mainPlaylistLoader_.getKeyIdSet(n);!s||!s.size||s.forEach(r=>{const o="usable",l=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===o,u=n.lastExcludeReason_===t&&n.excludeUntil===1/0;l?l&&u&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${r} is ${o}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const s=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,r=n.excludeUntil===1/0&&n.lastExcludeReason_===t;s&&r&&(delete n.excludeUntil,oe.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const r=(typeof e=="string"?e:n5(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const I5=(i,e,t)=>n=>{const s=i.main.playlists[e],r=t0(s),o=Mf(s);if(typeof n>"u")return o;n?delete s.disabled:s.disabled=!0;const l={renditionInfo:{id:e,bandwidth:s.attributes.BANDWIDTH,resolution:s.attributes.RESOLUTION,codecs:s.attributes.CODECS},cause:"fast-quality"};return n!==o&&!r&&(n?(t(s),i.trigger({type:"renditionenabled",metadata:l})):i.trigger({type:"renditiondisabled",metadata:l})),n};class L5{constructor(e,t,n){const{playlistController_:s}=e,r=s.fastQualityChange_.bind(s);if(t.attributes){const o=t.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Qu(s.main(),t),this.playlist=t,this.id=n,this.enabled=I5(e.playlists,t.id,r)}}const O5=function(i){i.representations=()=>{const e=i.playlistController_.main(),t=Oc(e)?i.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!t0(n)).map((n,s)=>new L5(i,n,n.id)):[]}},bT=["seeking","seeked","pause","playing","error"];class M5 extends oe.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Kn("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),o=this.playlistController_,l=["main","subtitle","audio"],u={};l.forEach(d=>{u[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",u[d].reset),this.tech_.on(["seeked","seeking"],u[d].reset)});const h=d=>{["main","audio"].forEach(m=>{o[`${m}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=()=>h("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(bT,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(bT,r),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",u[d].reset),this.tech_.off(["seeked","seeking"],u[d].reset)}),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=q.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],s=n.buffered_(),r=v4(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,r){const o={bufferedRanges:s};t.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:zo(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Os>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(bi([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(s&&(r=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const C=t.start(0);r=C+(C===t.end(0)?0:Os)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${ew(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const o=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),u=o.audioBuffer?o.audioBuffered():null,h=o.videoBuffer?o.videoBuffered():null,d=this.media(),m=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-Ls)*2,b=[u,h];for(let C=0;C<b.length;C++){if(!b[C])continue;if(J_(b[C],n)<m)return!1}const T=Fh(l,n);return T.length===0?!1:(r=T.start(0)+Os,this.logger_(`Buffered region starts (${T.start(0)})  just beyond seek point (${n}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Ua(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const l=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=Fh(s,t);return o.length>0?(this.logger_(`Stopped at ${t} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,s=!1){if(!e.length)return!1;let r=e.end(e.length-1)+Os;const o=!n.endList,l=typeof n.partTargetDuration=="number";return o&&(l||s)&&(r=e.end(e.length-1)+n.targetDuration*3),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let s;if(e.length&&t.length){const r=Ua(e,n-3),o=Ua(e,n),l=Ua(t,n);l.length&&!o.length&&r.length&&(s={start:r.end(0),end:l.end(0)})}else Fh(e,n).length||(s=this.gapFromVideoUnderflow_(e,n));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),s=Fh(t,n);if(this.resetTimeUpdate_(),s.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Ls);const r={gapInfo:{from:n,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=g4(e);for(let s=0;s<n.length;s++){const r=n.start(s),o=n.end(s);if(t-r<4&&t-r>2)return{start:r,end:o}}return null}}const R5={errorInterval:30,getSource(i){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return i(t)}},qw=function(i,e){let t=0,n=0;const s=xt(R5,e);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){n&&i.currentTime(n)},o=function(d){d!=null&&(n=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",r),i.src(d),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},l=function(){if(Date.now()-t<s.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){oe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),s.getSource.call(i,o)},u=function(){i.off("loadedmetadata",r),i.off("error",l),i.off("dispose",u)},h=function(d){u(),qw(i,d)};i.on("error",l),i.on("dispose",u),i.reloadSourceOnError=h},N5=function(i){qw(this,i)};var Ww="3.17.0",B5="7.1.0",F5="1.3.1",U5="7.2.0",j5="4.0.2";const Xt={PlaylistLoader:ja,Playlist:ln,utils:q4,STANDARD_PLAYLIST_SELECTOR:lT,INITIAL_PLAYLIST_SELECTOR:LF,lastBandwidthSelector:lT,movingAverageBandwidthSelector:kF,comparePlaylistBandwidth:s0,comparePlaylistResolution:PF,xhr:vw()};Object.keys(_i).forEach(i=>{Object.defineProperty(Xt,i,{get(){return oe.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),_i[i]},set(e){if(oe.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){oe.log.warn(`value of Vhs.${i} must be greater than or equal to 0`);return}_i[i]=e}})});const Gw="videojs-vhs",Xw=function(i,e){const t=e.media();let n=-1;for(let s=0;s<i.length;s++)if(i[s].id===t.id){n=s;break}i.selectedIndex_=n,i.trigger({selectedIndex:n,type:"change"})},z5=function(i,e){e.representations().forEach(t=>{i.addQualityLevel(t)}),Xw(i,e.playlists)};Xt.canPlaySource=function(){return oe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const H5=(i,e,t)=>{if(!i)return i;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=_c(Ds(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const s=cl(n.video),r=cl(n.audio),o={};for(const l in i)o[l]={},r&&(o[l].audioContentType=r),s&&(o[l].videoContentType=s),e.contentProtection&&e.contentProtection[l]&&e.contentProtection[l].pssh&&(o[l].pssh=e.contentProtection[l].pssh),typeof i[l]=="string"&&(o[l].url=i[l]);return xt(i,o)},$5=(i,e)=>i.reduce((t,n)=>{if(!n.contentProtection)return t;const s=e.reduce((r,o)=>{const l=n.contentProtection[o];return l&&l.pssh&&(r[o]={pssh:l.pssh}),r},{});return Object.keys(s).length&&t.push(s),t},[]),V5=({player:i,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const s=t?n.concat([t]):n,r=$5(s,Object.keys(e)),o=[],l=[];return r.forEach(u=>{l.push(new Promise((h,d)=>{i.tech_.one("keysessioncreated",h)})),o.push(new Promise((h,d)=>{i.eme.initializeMediaKeys({keySystems:u},m=>{if(m){d(m);return}h()})}))}),Promise.race([Promise.all(o),Promise.race(l)])},q5=({player:i,sourceKeySystems:e,media:t,audioMedia:n})=>{const s=H5(e,t,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(oe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Kw=()=>{if(!q.localStorage)return null;const i=q.localStorage.getItem(Gw);if(!i)return null;try{return JSON.parse(i)}catch{return null}},W5=i=>{if(!q.localStorage)return!1;let e=Kw();e=e?xt(e,i):i;try{q.localStorage.setItem(Gw,JSON.stringify(e))}catch{return!1}return e},G5=i=>i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,Zw=(i,e)=>{i._requestCallbackSet||(i._requestCallbackSet=new Set),i._requestCallbackSet.add(e)},Yw=(i,e)=>{i._responseCallbackSet||(i._responseCallbackSet=new Set),i._responseCallbackSet.add(e)},Qw=(i,e)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(e),i._requestCallbackSet.size||delete i._requestCallbackSet)},Jw=(i,e)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(e),i._responseCallbackSet.size||delete i._responseCallbackSet)};Xt.supportsNativeHls=function(){if(!Ae||!Ae.createElement)return!1;const i=Ae.createElement("video");return oe.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(i.canPlayType(t))}):!1}();Xt.supportsNativeDash=function(){return!Ae||!Ae.createElement||!oe.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Ae.createElement("video").canPlayType("application/dash+xml"))}();Xt.supportsTypeNatively=i=>i==="hls"?Xt.supportsNativeHls:i==="dash"?Xt.supportsNativeDash:!1;Xt.isSupported=function(){return oe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Xt.xhr.onRequest=function(i){Zw(Xt.xhr,i)};Xt.xhr.onResponse=function(i){Yw(Xt.xhr,i)};Xt.xhr.offRequest=function(i){Qw(Xt.xhr,i)};Xt.xhr.offResponse=function(i){Jw(Xt.xhr,i)};const X5=oe.getComponent("Component");class eC extends X5{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=Kn("VhsHandler"),t.options_&&t.options_.playerId){const s=oe.getPlayer(t.options_.playerId);this.player_=s}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Ae,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=Ae.fullscreenElement||Ae.webkitFullscreenElement||Ae.mozFullScreenElement||Ae.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=xt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=Kw();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=_i.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===_i.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=G5(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Xt,this.options_.sourceType=x1(t),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new k5(this.options_);const n=xt({liveRangeSafeTimeDelta:Os},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new M5(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const r=oe.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),r.error(o)});const s=this.options_.bufferBasedABR?Xt.movingAverageBandwidthSelector(.55):Xt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=Xt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const o=q.navigator.connection||q.navigator.mozConnection||q.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&o){const u=o.downlink*1e3*1e3;u>=l&&r>=l?r=Math.max(r,u):r=u}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(r+o))},set(){oe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>zo(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>zo(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&W5({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{O5(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=q.URL.createObjectURL(this.playlistController_.mediaSource),(oe.browser.IS_ANY_SAFARI||oe.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),V5({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=q5({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=oe.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{z5(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Xw(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Ww,"mux.js":B5,"mpd-parser":F5,"m3u8-parser":U5,"aes-decrypter":j5}}version(){return this.constructor.version()}canChangeType(){return zw.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&q.URL.revokeObjectURL&&(q.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return Q4({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,s=2){return ww({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{Zw(this.xhr,e)},this.xhr.onResponse=e=>{Yw(this.xhr,e)},this.xhr.offRequest=e=>{Qw(this.xhr,e)},this.xhr.offResponse=e=>{Jw(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,s=>{this.player_.trigger(ii({},s))})}),t.forEach(n=>{this.playbackWatcher_.on(n,s=>{this.player_.trigger(ii({},s))})})}}const jd={name:"videojs-http-streaming",VERSION:Ww,canHandleSource(i,e={}){const t=xt(oe.options,e);return!t.vhs.experimentalUseMMS&&!Gu("avc1.4d400d,mp4a.40.2",!1)?!1:jd.canPlayType(i.type,t)},handleSource(i,e,t={}){const n=xt(oe.options,t);return e.vhs=new eC(i,e,n),e.vhs.xhr=vw(),e.vhs.setupXhrHooks_(),e.vhs.src(i.src,i.type),e.vhs},canPlayType(i,e){const t=x1(i);if(!t)return"";const n=jd.getOverrideNative(e);return!Xt.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(i={}){const{vhs:e={}}=i,t=!(oe.browser.IS_ANY_SAFARI||oe.browser.IS_IOS),{overrideNative:n=t}=e;return n}},K5=()=>Gu("avc1.4d400d,mp4a.40.2",!0);K5()&&oe.getTech("Html5").registerSourceHandler(jd,0);oe.VhsHandler=eC;oe.VhsSourceHandler=jd;oe.Vhs=Xt;oe.use||oe.registerComponent("Vhs",Xt);oe.options.vhs=oe.options.vhs||{};(!oe.getPlugin||!oe.getPlugin("reloadSourceOnError"))&&oe.registerPlugin("reloadSourceOnError",N5);const Cu=[{videoTitle:"Saisir le contour du parc",videoSource:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirContourParc_1024p.webm",poster:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirContourParc.png"},{videoTitle:"Saisir les entrées de parc",videoSource:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirLesEntrees_1024p.webm",poster:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirLesEntrees.png"}],Z5={name:"AppVideoAdmin",data(){return{player:null,currentVideo:Cu[0],videoSource:Cu[0].videoSource,poster:Cu[0].poster,sources:Cu}},methods:{changeVideo(i){this.currentVideo=Cu[i],this.videoSource=this.currentVideo.videoSource,this.poster=this.currentVideo.poster,this.player&&(this.player.src({src:this.videoSource,type:"video/webm"}),this.player.poster(this.poster),this.player.load(),this.player.play())}},mounted(){this.$nextTick(()=>{this.$refs.videoPlayer&&(this.player=oe(this.$refs.videoPlayer,{fluid:!0,responsive:!0,controls:!0,playbackRates:[.5,1,1.25,1.5]}))})},beforeUnmount(){this.player&&this.player.dispose()}},Y5={id:"appVideoAdmin",valign:"top",align:"left"},Q5={id:"videoTitle"},J5={class:"video-controls"},e8=["onClick"],t8={class:"player-wrapper"},i8={id:"videoPlayer",ref:"videoPlayer",class:"video-js vjs-big-play-centered vjs-16-9",controls:"",preload:"auto"},n8=["src"];function s8(i,e,t,n,s,r){return Pt(),ti("div",Y5,[Xe("h4",Q5,zr(s.currentVideo.videoTitle),1),Xe("div",J5,[(Pt(!0),ti(Pi,null,Wa(s.sources,(o,l)=>(Pt(),ti("button",{key:l,onClick:u=>r.changeVideo(l),class:"video-btn",type:"button"},zr(o.videoTitle),9,e8))),128))]),Xe("div",t8,[Xe("video",i8,[Xe("source",{src:s.videoSource,type:"video/webm"},null,8,n8),e[0]||(e[0]=Xe("p",{class:"vjs-no-js"}," Pour voir la vidéo, merci d'activer JavaScript ",-1))],512)])])}const r8=mr(Z5,[["render",s8],["__scopeId","data-v-da43b799"]]),o8=[{path:"/carte",name:"appCarte",title:"Carte",component:EI},{path:"/stats",name:"stats",title:"Statistiques",component:BR},{path:"/information",name:"appInformation",title:"Informations",component:HR},{path:"/aideoVideo",name:"appVideoAdmin",title:"Video d'aide",component:r8},{path:"/",redirect:{name:"appCarte"}}],tC=PD({history:sD(void 0),routes:o8}),iC=_A(AA);iC.use(tC);iC.mount("#app");tC.afterEach((i,e)=>{window._paq.push(["setCustomUrl",i.fullPath]),window._paq.push(["trackPageView"])});
